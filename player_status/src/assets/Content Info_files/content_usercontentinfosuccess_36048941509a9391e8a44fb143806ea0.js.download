
var Base=function(){};Base.extend=function(_instance,_static){var extend=Base.prototype.extend;Base._prototyping=true;var proto=new this;extend.call(proto,_instance);delete Base._prototyping;var constructor=proto.constructor;var klass=proto.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==klass){this._constructing=true;constructor.apply(this,arguments);delete this._constructing;}else if(arguments[0]!=null){return(arguments[0].extend||extend).call(arguments[0],proto);}}};klass.ancestor=this;klass.extend=this.extend;klass.forEach=this.forEach;klass.implement=this.implement;klass.prototype=proto;klass.toString=this.toString;klass.valueOf=function(type){return(type=="object")?klass:constructor.valueOf();};extend.call(klass,_static);if(typeof klass.init=="function")klass.init();return klass;};Base.prototype={extend:function(source,value){if(arguments.length>1){var ancestor=this[source];if(ancestor&&(typeof value=="function")&&(!ancestor.valueOf||ancestor.valueOf()!=value.valueOf())&&/\bbase\b/.test(value)){var method=value.valueOf();value=function(){var previous=this.base||Base.prototype.base;this.base=ancestor;var returnValue=method.apply(this,arguments);this.base=previous;return returnValue;};value.valueOf=function(type){return(type=="object")?value:method;};value.toString=Base.toString;}
this[source]=value;}else if(source){var extend=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){extend=this.extend||extend;}
var proto={toSource:null};var hidden=["constructor","toString","valueOf"];var i=Base._prototyping?0:1;while(key=hidden[i++]){if(source[key]!=proto[key]){extend.call(this,key,source[key]);}}
for(var key in source){if(!proto[key])extend.call(this,key,source[key]);}}
return this;},base:function(){}};Base=Base.extend({constructor:function(){this.extend(arguments[0]);}},{ancestor:Object,version:"1.1",forEach:function(object,block,context){for(var key in object){if(this.prototype[key]===undefined){block.call(context,object[key],key,object);}}},implement:function(){for(var i=0;i<arguments.length;i++){if(typeof arguments[i]=="function"){arguments[i](this.prototype);}else{this.prototype.extend(arguments[i]);}}
return this;},toString:function(){return String(this.valueOf());}});

(function(window,undefined){var
rootjQuery,readyList,document=window.document,location=window.location,navigator=window.navigator,_jQuery=window.jQuery,_$=window.$,core_push=Array.prototype.push,core_slice=Array.prototype.slice,core_indexOf=Array.prototype.indexOf,core_toString=Object.prototype.toString,core_hasOwn=Object.prototype.hasOwnProperty,core_trim=String.prototype.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery);},core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,core_rnotwhite=/\S/,core_rspace=/\s+/,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase();},DOMContentLoaded=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready();}else if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready();}},class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this;}
if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}
if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=(context&&context.nodeType?context.ownerDocument||context:document);selector=jQuery.parseHTML(match[1],doc,true);if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){this.attr.call(selector,context,true);}
return jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector);}
this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return this.constructor(context).find(selector);}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length;},toArray:function(){return core_slice.call(this);},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num]);},pushStack:function(elems,name,selector){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector;}else if(name){ret.selector=this.selector+"."+name+"("+selector+")";}
return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.ready.promise().done(fn);return this;},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(core_slice.apply(this,arguments),"slice",core_slice.call(arguments).join(","));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||this.constructor(null);},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length===i){target=this;--i;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return;}
if(!document.body){return setTimeout(jQuery.ready,1);}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready");}},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array";},isWindow:function(obj){return obj!=null&&obj==obj.window;},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj);},type:function(obj){return obj==null?String(obj):class2type[core_toString.call(obj)]||"object";},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(e){return false;}
var key;for(key in obj){}
return key===undefined||core_hasOwn.call(obj,key);},isEmptyObject:function(obj){var name;for(name in obj){return false;}
return true;},error:function(msg){throw new Error(msg);},parseHTML:function(data,context,scripts){var parsed;if(!data||typeof data!=="string"){return null;}
if(typeof context==="boolean"){scripts=context;context=0;}
context=context||document;if((parsed=rsingleTag.exec(data))){return[context.createElement(parsed[1])];}
parsed=jQuery.buildFragment([data],context,scripts?null:[]);return jQuery.merge([],(parsed.cacheable?jQuery.clone(parsed.fragment):parsed.fragment).childNodes);},parseJSON:function(data){if(!data||typeof data!=="string"){return null;}
data=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data);}
if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))();}
jQuery.error("Invalid JSON: "+data);},parseXML:function(data){var xml,tmp;if(!data||typeof data!=="string"){return null;}
try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml");}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data);}}catch(e){xml=undefined;}
if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;},noop:function(){},globalEval:function(data){if(data&&core_rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data);})(data);}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();},each:function(obj,callback,args){var name,i=0,length=obj.length,isObj=length===undefined||jQuery.isFunction(obj);if(args){if(isObj){for(name in obj){if(callback.apply(obj[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(obj[i++],args)===false){break;}}}}else{if(isObj){for(name in obj){if(callback.call(obj[name],name,obj[name])===false){break;}}}else{for(;i<length;){if(callback.call(obj[i],i,obj[i++])===false){break;}}}}
return obj;},trim:core_trim&&!core_trim.call("\uFEFF\xA0")?function(text){return text==null?"":core_trim.call(text);}:function(text){return text==null?"":(text+"").replace(rtrim,"");},makeArray:function(arr,results){var type,ret=results||[];if(arr!=null){type=jQuery.type(arr);if(arr.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(arr)){core_push.call(ret,arr);}else{jQuery.merge(ret,arr);}}
return ret;},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf){return core_indexOf.call(arr,elem,i);}
len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in arr&&arr[i]===elem){return i;}}}
return-1;},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number"){for(;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i]);}}
return ret;},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&((length>0&&elems[0]&&elems[length-1])||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value;}}}
return ret.concat.apply([],ret);},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context,args.concat(core_slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy;},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key){jQuery.access(elems,fn,i,key[i],1,emptyGet,value);}
chainable=1;}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);if(bulk){if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value);};}else{fn.call(elems,value);fn=null;}}
if(fn){for(;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}}
chainable=1;}
return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet;},now:function(){return(new Date()).getTime();}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready,1);}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false);}else{document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var top=false;try{top=window.frameElement==null&&document.documentElement;}catch(e){}
if(top&&top.doScroll){(function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left");}catch(e){return setTimeout(doScrollCheck,50);}
jQuery.ready();}})();}}}
return readyList.promise(obj);};jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});rootjQuery=jQuery(document);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.split(core_rspace),function(_,flag){object[flag]=true;});return object;}
jQuery.Callbacks=function(options){options=typeof options==="string"?(optionsCache[options]||createOptions(options)):jQuery.extend({},options);var
memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break;}}
firing=false;if(list){if(stack){if(stack.length){fire(stack.shift());}}else if(memory){list=[];}else{self.disable();}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"&&(!options.unique||!self.has(arg))){list.push(arg);}else if(arg&&arg.length&&type!=="string"){add(arg);}});})(arguments);if(firing){firingLength=list.length;}else if(memory){firingStart=start;fire(memory);}}
return this;},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--;}
if(index<=firingIndex){firingIndex--;}}}});}
return this;},has:function(fn){return jQuery.inArray(fn,list)>-1;},empty:function(){list=[];return this;},disable:function(){list=stack=memory=undefined;return this;},disabled:function(){return!list;},lock:function(){stack=undefined;if(!memory){self.disable();}
return this;},locked:function(){return!stack;},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack)){if(firing){stack.push(args);}else{fire(args);}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=fns[i];deferred[tuple[1]](jQuery.isFunction(fn)?function(){var returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned]);}}:newDefer[action]);});fns=null;}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[i^1][2].disable,tuples[2][2].lock);}
deferred[tuple[0]]=list.fire;deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}
return deferred;},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values);}else if(!(--remaining)){deferred.resolveWith(contexts,values);}};},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues));}else{--remaining;}}}
if(!remaining){deferred.resolveWith(resolveContexts,resolveValues);}
return deferred.promise();}});jQuery.support=(function(){var support,all,a,select,opt,input,fragment,eventName,i,isSupported,clickFn,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];a.style.cssText="top:1px;float:left;opacity:.5";if(!all||!all.length){return{};}
select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];support={leadingWhitespace:(div.firstChild.nodeType===3),tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:(a.getAttribute("href")==="/a"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:(input.value==="on"),optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(document.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test;}catch(e){support.deleteExpando=false;}
if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",clickFn=function(){support.noCloneEvent=false;});div.cloneNode(true).fireEvent("onclick");div.detachEvent("onclick",clickFn);}
input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent){for(i in{submit:true,change:true,focusin:true}){eventName="on"+i;isSupported=(eventName in div);if(!isSupported){div.setAttribute(eventName,"return;");isSupported=(typeof div[eventName]==="function");}
support[i+"Bubbles"]=isSupported;}}
jQuery(function(){var container,div,tds,marginDiv,divReset="padding:0;margin:0;border:0;display:block;overflow:hidden;",body=document.getElementsByTagName("body")[0];if(!body){return;}
container=document.createElement("div");container.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";body.insertBefore(container,body.firstChild);div=document.createElement("div");container.appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=(tds[0].offsetHeight===0);tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=(div.offsetWidth===4);support.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==1);if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=document.createElement("div");marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";div.appendChild(marginDiv);support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight);}
if(typeof div.style.zoom!=="undefined"){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=(div.offsetWidth===3);div.style.display="block";div.style.overflow="visible";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=(div.offsetWidth!==3);container.style.zoom=1;}
body.removeChild(container);container=div=tds=marginDiv=null;});fragment.removeChild(div);all=a=select=opt=input=fragment=div=null;return support;})();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem);},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return;}
var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||(!pvt&&!cache[id].data))&&getByName&&data===undefined){return;}
if(!id){if(isNode){elem[internalKey]=id=jQuery.deletedIds.pop()||jQuery.guid++;}else{id=internalKey;}}
if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop;}}
if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=jQuery.extend(cache[id],name);}else{cache[id].data=jQuery.extend(cache[id].data,name);}}
thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={};}
thisCache=thisCache.data;}
if(data!==undefined){thisCache[jQuery.camelCase(name)]=data;}
if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)];}}else{ret=thisCache;}
return ret;},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return;}
var thisCache,i,l,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id]){return;}
if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name)){if(name in thisCache){name=[name];}else{name=jQuery.camelCase(name);if(name in thisCache){name=[name];}else{name=name.split(" ");}}}
for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]];}
if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache)){return;}}}
if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return;}}
if(isNode){jQuery.cleanData([elem],true);}else if(jQuery.support.deleteExpando||cache!=cache.window){delete cache[id];}else{cache[id]=null;}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true);},acceptData:function(elem){var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==true&&elem.getAttribute("classid")===noData;}});jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(!name.indexOf("data-")){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name]);}}
jQuery._data(elem,"parsedAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){jQuery.data(this,key);});}
parts=key.split(".",2);parts[1]=parts[1]?"."+parts[1]:"";part=parts[1]+"!";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data);}
return data===undefined&&parts[1]?this.data(parts[0]):data;}
parts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts);jQuery.data(this,key,value);self.triggerHandler("changeData"+part,parts);});},null,value,arguments.length>1,null,false);},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}
jQuery.data(elem,key,data);}else{data=undefined;}}
return data;}
function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name])){continue;}
if(name!=="toJSON"){return false;}}
return true;}
jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=jQuery._data(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}
return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength--;}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
delete hooks.stop;fn.call(elem,next,hooks);}
if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery.removeData(elem,type+"queue",true);jQuery.removeData(elem,key,true);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout);};});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}
type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve);}}
resolve();return defer.promise(obj);}});var nodeHook,boolHook,fixSpecified,rclass=/[\t\r\n]/g,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea|)$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name];}catch(e){}});},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className));});}
if(value&&typeof value==="string"){classNames=value.split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value;}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(setClass.indexOf(" "+classNames[c]+" ")<0){setClass+=classNames[c]+" ";}}
elem.className=jQuery.trim(setClass);}}}}
return this;},removeClass:function(value){var removes,className,elem,c,cl,i,l;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className));});}
if((value&&typeof value==="string")||value===undefined){removes=(value||"").split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=removes.length;c<cl;c++){while(className.indexOf(" "+removes[c]+" ")>=0){className=className.replace(" "+removes[c]+" "," ");}}
elem.className=value?jQuery.trim(className):"";}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal);});}
return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(core_rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className);}}else if(type==="undefined"||type==="boolean"){if(this.className){jQuery._data(this,"__className__",this.className);}
this.className=this.className||value===false?"":jQuery._data(this,"__className__")||"";}});},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true;}}
return false;},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret;}
return;}
isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,self.val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text;}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null;}
i=one?index:0;max=one?index+1:options.length;for(;i<max;i++){option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
if(one&&!values.length&&options.length){return jQuery(options[index]).val();}
return values;},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){elem.selectedIndex=-1;}
return values;}}},attrFn:{},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
if(pass&&jQuery.isFunction(jQuery.fn[name])){return jQuery(elem)[name](value);}
if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{elem.setAttribute(name,value+"");return value;}}else if(hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret;}else{ret=elem.getAttribute(name);return ret===null?undefined:ret;}},removeAttr:function(elem,value){var propName,attrNames,name,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.split(core_rspace);for(;i<attrNames.length;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool){jQuery.attr(elem,name,"");}
elem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem){elem[propName]=false;}}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed");}else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.get(elem,name);}
return name in elem?elem.value:null;},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.set(elem,value,name);}
elem.value=value;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{return(elem[name]=value);}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}else{return elem[name];}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}}}});boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined;},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name);}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true;}
elem.setAttribute(name,name.toLowerCase());}
return name;}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.value!=="":ret.specified)?ret.value:undefined;},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret);}
return(ret.value=value+"");}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value;}}});});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value===""){value="false";}
nodeHook.set(elem,value,name);}};}
if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret;}});});}
if(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined;},set:function(elem,value){return(elem.style.cssText=value+"");}};}
if(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}
return null;}});}
if(!jQuery.support.enctype){jQuery.propFix.enctype="encoding";}
if(!jQuery.support.checkOn){jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value;}};});}
jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0);}}});});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*|)(?:\.(.+)|)$/,rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1");};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem))){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(!handler.guid){handler.guid=jQuery.guid++;}
events=elemData.events;if(!events){elemData.events=events={};}
eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined;};eventHandle.elem=elem;}
types=jQuery.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}
elem=null;},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,eventType,handleObj,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events)){return;}
types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector){eventType.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery.removeData(elem,"events",true);}},customEvent:{"getData":true,"setData":true,"changeData":true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8)){return;}
var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true;}
if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return;}
event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache){if(cache[i].events&&cache[i].events[type]){jQuery.event.trigger(event,data,cache[i].handle.elem,true);}}
return;}
event.result=undefined;if(!event.target){event.target=elem;}
data=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false){return;}
eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;for(old=elem;cur;cur=cur.parentNode){eventPath.push([cur,bubbleType]);old=cur;}
if(old===(elem.ownerDocument||document)){eventPath.push([old.defaultView||old.parentWindow||window,bubbleType]);}}
for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===false){event.preventDefault();}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){if(ontype&&elem[type]&&((type!=="focus"&&type!=="blur")||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old){elem[ontype]=old;}}}}
return event.result;},dispatch:function(event){event=jQuery.event.fix(event||window.event);var i,j,cur,ret,selMatch,matched,matches,handleObj,sel,related,handlers=((jQuery._data(this,"events")||{})[event.type]||[]),delegateCount=handlers.delegateCount,args=core_slice.call(arguments),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[];args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
if(delegateCount&&!(event.button&&event.type==="click")){for(cur=event.target;cur!=this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){selMatch={};matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined){selMatch[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length;}
if(selMatch[sel]){matches.push(handleObj);}}
if(matches.length){handlerQueue.push({elem:cur,matches:matches});}}}}
if(handlers.length>delegateCount){handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});}
for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||(!event.namespace&&!handleObj.namespace)||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode;}
return event;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement;}
if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)));}
return event;}},fix:function(event){if(event[jQuery.expando]){return event;}
var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=originalEvent.srcElement||document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle;}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem);}else{jQuery.event.dispatch.call(elem,e);}
if(e.isDefaultPrevented()){event.preventDefault();}}};jQuery.event.handle=jQuery.event.dispatch;jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]==="undefined"){elem[name]=null;}
elem.detachEvent(name,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};function returnFalse(){return false;}
function returnTrue(){return true;}
jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form")){return false;}
jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!jQuery._data(form,"_submit_attached")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true;});jQuery._data(form,"_submit_attached",true);}});},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){jQuery.event.simulate("submit",this.parentNode,event,true);}}},teardown:function(){if(jQuery.nodeName(this,"form")){return false;}
jQuery.event.remove(this,"._submit");}};}
if(!jQuery.support.changeBubbles){jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked"){this._just_changed=true;}});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false;}
jQuery.event.simulate("change",this,event,true);});}
return false;}
jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"_change_attached")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){jQuery.event.simulate("change",this.parentNode,event,true);}});jQuery._data(elem,"_change_attached",true);}});},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||(elem.type!=="radio"&&elem.type!=="checkbox")){return event.handleObj.handler.apply(this,arguments);}},teardown:function(){jQuery.event.remove(this,"._change");return!rformElems.test(this.nodeName);}};}
if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true);};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true);}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true);}}};});}
jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){this.on(type,selector,data,types[type],one);}
return this;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return this;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return this.each(function(){jQuery.event.add(this,types,fn,data,selector);});},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});},bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this;},die:function(types,fn){jQuery(this.context).off(types,this.selector||"**",fn);return this;},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true);}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;};toggler.guid=guid;while(i<args.length){args[i++].guid=guid;}
return this.click(toggler);},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null;}
return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};if(rkeyEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.keyHooks;}
if(rmouseEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks;}});(function(window,undefined){var cachedruns,assertGetIdNotName,Expr,getText,isXML,contains,compile,sortOrder,hasDuplicate,outermostContext,baseHasDuplicate=true,strundefined="undefined",expando=("sizcache"+Math.random()).replace(".",""),Token=String,document=window.document,docElem=document.documentElement,dirruns=0,done=0,pop=[].pop,push=[].push,slice=[].slice,indexOf=[].indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i;}}
return-1;},markFunction=function(fn,value){fn[expando]=value==null||value;return fn;},createCache=function(){var cache={},keys=[];return markFunction(function(key,value){if(keys.push(key)>Expr.cacheLength){delete cache[keys.shift()];}
return(cache[key]=value);},cache);},classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+attributes+")|[^:]|\\\\.)*|.*))\\)|)",pos=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rnot=/^:not/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"NAME":new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"POS":new RegExp(pos,"i"),"CHILD":new RegExp("^:(only|nth|first|last)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},assert=function(fn){var div=document.createElement("div");try{return fn(div);}catch(e){return false;}finally{div=null;}},assertTagNameNoComments=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length;}),assertHrefNotNormalized=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#";}),assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string";}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length){return false;}
div.lastChild.className="e";return div.getElementsByClassName("e").length===2;}),assertUsableName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+
document.getElementsByName(expando+0).length;assertGetIdNotName=!document.getElementById(expando);docElem.removeChild(div);return pass;});try{slice.call(docElem.childNodes,0)[0].nodeType;}catch(e){slice=function(i){var elem,results=[];for(;(elem=this[i]);i++){results.push(elem);}
return results;};}
function Sizzle(selector,context,results,seed){results=results||[];context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(!selector||typeof selector!=="string"){return results;}
if(nodeType!==1&&nodeType!==9){return[];}
xml=isXML(context);if(!xml&&!seed){if((match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results;}else if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results;}}}
return select(selector.replace(rtrim,"$1"),context,results,seed,xml);}
Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0;};function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}
function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}
function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}
getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}}else{for(;(node=elem[i]);i++){ret+=getText(node);}}
return ret;};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};contains=Sizzle.contains=docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup));}:docElem.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16);}:function(a,b){while((b=b.parentNode)){if(b===a){return true;}}
return false;};Sizzle.attr=function(elem,name){var val,xml=isXML(elem);if(!xml){name=name.toLowerCase();}
if((val=Expr.attrHandle[name])){return val(elem);}
if(xml||assertAttributes){return elem.getAttribute(name);}
val=elem.getAttributeNode(name);return val?typeof elem[name]==="boolean"?elem[name]?name:null:val.specified?val.value:null:null;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:assertHrefNotNormalized?{}:{"href":function(elem){return elem.getAttribute("href",2);},"type":function(elem){return elem.getAttribute("type");}},find:{"ID":assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[];}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[];}},"TAG":assertTagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag);}}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){var elem,tmp=[],i=0;for(;(elem=results[i]);i++){if(elem.nodeType===1){tmp.push(elem);}}
return tmp;}
return results;},"NAME":assertUsableName&&function(tag,context){if(typeof context.getElementsByName!==strundefined){return context.getElementsByName(name);}},"CLASS":assertUsableClassName&&function(className,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml){return context.getElementsByClassName(className);}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(rbackslash,"");match[3]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~="){match[3]=" "+match[3]+" ";}
return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0]);}
match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd"));match[4]=+((match[6]+match[7])||match[2]==="odd");}else if(match[2]){Sizzle.error(match[0]);}
return match;},"PSEUDO":function(match){var unquoted,excess;if(matchExpr["CHILD"].test(match[0])){return null;}
if(match[3]){match[2]=match[3];}else if((unquoted=match[4])){if(rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){unquoted=unquoted.slice(0,excess);match[0]=match[0].slice(0,excess);}
match[2]=unquoted;}
return match.slice(0,3);}},filter:{"ID":assertGetIdNotName?function(id){id=id.replace(rbackslash,"");return function(elem){return elem.getAttribute("id")===id;};}:function(id){id=id.replace(rbackslash,"");return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id;};},"TAG":function(nodeName){if(nodeName==="*"){return function(){return true;};}
nodeName=nodeName.replace(rbackslash,"").toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[expando][className];if(!pattern){pattern=classCache(className,new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"));}
return function(elem){return pattern.test(elem.className||(typeof elem.getAttribute!==strundefined&&elem.getAttribute("class"))||"");};},"ATTR":function(name,operator,check){return function(elem,context){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}
if(!operator){return true;}
result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.substr(result.length-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.substr(0,check.length+1)===check+"-":false;};},"CHILD":function(type,argument,first,last){if(type==="nth"){return function(elem){var node,diff,parent=elem.parentNode;if(first===1&&last===0){return true;}
if(parent){diff=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){diff++;if(elem===node){break;}}}}
diff-=last;return diff===first||(diff%first===0&&diff/first>=0);};}
return function(elem){var node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false;}}
if(type==="first"){return true;}
node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false;}}
return true;}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}
if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}
return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),"enabled":function(elem){return elem.disabled===false;},"disabled":function(elem){return elem.disabled===true;},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"empty":function(elem){var nodeType;elem=elem.firstChild;while(elem){if(elem.nodeName>"@"||(nodeType=elem.nodeType)===3||nodeType===4){return false;}
elem=elem.nextSibling;}
return true;},"header":function(elem){return rheader.test(elem.nodeName);},"text":function(elem){var type,attr;return elem.nodeName.toLowerCase()==="input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type);},"radio":createInputPseudo("radio"),"checkbox":createInputPseudo("checkbox"),"file":createInputPseudo("file"),"password":createInputPseudo("password"),"image":createInputPseudo("image"),"submit":createButtonPseudo("submit"),"reset":createButtonPseudo("reset"),"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"input":function(elem){return rinputs.test(elem.nodeName);},"focus":function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href);},"active":function(elem){return elem===elem.ownerDocument.activeElement;},"first":createPositionalPseudo(function(matchIndexes,length,argument){return[0];}),"last":createPositionalPseudo(function(matchIndexes,length,argument){return[length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length,argument){for(var i=1;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;){matchIndexes.push(i);}
return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;){matchIndexes.push(i);}
return matchIndexes;})}};function siblingCheck(a,b,ret){if(a===b){return ret;}
var cur=a.nextSibling;while(cur){if(cur===b){return-1;}
cur=cur.nextSibling;}
return 1;}
sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=true;return 0;}
return(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}
var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b);}else if(!aup){return-1;}else if(!bup){return 1;}
while(cur){ap.unshift(cur);cur=cur.parentNode;}
cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode;}
al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i]);}}
return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1);};[0,0].sort(sortOrder);baseHasDuplicate=!hasDuplicate;Sizzle.uniqueSort=function(results){var elem,i=1;hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(;(elem=results[i]);i++){if(elem===results[i-1]){results.splice(i--,1);}}}
return results;};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[expando][selector];if(cached){return parseOnly?0:cached.slice(0);}
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length);}
groups.push(tokens=[]);}
matched=false;if((match=rcombinators.exec(soFar))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=match[0].replace(rtrim," ");}
for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match,document,true)))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=type;matched.matches=match;}}
if(!matched){break;}}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);}
function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&combinator.dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){return matcher(elem,context,xml);}}}:function(elem,context,xml){if(!xml){var cache,dirkey=dirruns+" "+doneName+" ",cachedkey=dirkey+cachedruns;while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){if((cache=elem[expando])===cachedkey){return elem.sizset;}else if(typeof cache==="string"&&cache.indexOf(dirkey)===0){if(elem.sizset){return elem;}}else{elem[expando]=cachedkey;if(matcher(elem,context,xml)){elem.sizset=true;return elem;}
elem.sizset=false;}}}}else{while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){if(matcher(elem,context,xml)){return elem;}}}}};}
function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}
return true;}:matchers[0];}
function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}
return newUnmatched;}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}
if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}
return markFunction(function(seed,results,context,xml){if(seed&&postFinder){return;}
var i,elem,postFilterIn,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[],seed),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}
if(postFilter){postFilterIn=condense(matcherOut,postMap);postFilter(postFilterIn,[],context,xml);i=postFilterIn.length;while(i--){if((elem=postFilterIn[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}
if(seed){i=preFilter&&matcherOut.length;while(i--){if((elem=matcherOut[i])){seed[preMap[i]]=!(results[preMap[i]]=elem);}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}
function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){return(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}
return setMatcher(i>1&&elementMatcher(matchers),i>1&&tokens.slice(0,i-1).join("").replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&tokens.join(""));}
matchers.push(matcher);}}
return elementMatcher(matchers);}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",expandContext&&context.parentNode||context),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.E);if(outermost){outermostContext=context!==document&&context;cachedruns=superMatcher.el;}
for(;(elem=elems[i])!=null;i++){if(byElement&&elem){for(j=0;(matcher=elementMatchers[j]);j++){if(matcher(elem,context,xml)){results.push(elem);break;}}
if(outermost){dirruns=dirrunsUnique;cachedruns=++superMatcher.el;}}
if(bySet){if((elem=!matcher&&elem)){matchedCount--;}
if(seed){unmatched.push(elem);}}}
matchedCount+=i;if(bySet&&i!==matchedCount){for(j=0;(matcher=setMatchers[j]);j++){matcher(unmatched,setMatched,context,xml);}
if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}
setMatched=condense(setMatched);}
push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}
if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}
return unmatched;};superMatcher.el=0;return bySet?markFunction(superMatcher):superMatcher;}
compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[expando][selector];if(!cached){if(!group){group=tokenize(selector);}
i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}
cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));}
return cached;};function multipleContexts(selector,contexts,results,seed){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results,seed);}
return results;}
function select(selector,context,results,seed,xml){var i,tokens,token,type,find,match=tokenize(selector),j=match.length;if(!seed){if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&!xml&&Expr.relative[tokens[1].type]){context=Expr.find["ID"](token.matches[0].replace(rbackslash,""),context,xml)[0];if(!context){return results;}
selector=selector.slice(tokens.shift().length);}
for(i=matchExpr["POS"].test(selector)?-1:tokens.length-1;i>=0;i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}
if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(rbackslash,""),rsibling.test(tokens[0].type)&&context.parentNode||context,xml))){tokens.splice(i,1);selector=seed.length&&tokens.join("");if(!selector){push.apply(results,slice.call(seed,0));return results;}
break;}}}}}
compile(selector,match)(seed,context,xml,results,rsibling.test(selector));return results;}
if(document.querySelectorAll){(function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[":focus"],rbuggyMatches=[":active",":focus"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");}
if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}});assert(function(div){div.innerHTML="<p test=''></p>";if(div.querySelectorAll("[test^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')");}
div.innerHTML="<input type='hidden'/>";if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled");}});rbuggyQSA=new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,xml){if(!seed&&!xml&&(!rbuggyQSA||!rbuggyQSA.test(selector))){var groups,i,old=true,nid=expando,newContext=context,newSelector=context.nodeType===9&&selector;if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&");}else{context.setAttribute("id",nid);}
nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+groups[i].join("");}
newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",");}
if(newSelector){try{push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0));return results;}catch(qsaError){}finally{if(!old){context.removeAttribute("id");}}}}
return oldSelect(selector,context,results,seed,xml);};if(matches){assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle");rbuggyMatches.push("!=",pseudos);}catch(e){}});rbuggyMatches=new RegExp(rbuggyMatches.join("|"));Sizzle.matchesSelector=function(elem,expr){expr=expr.replace(rattributeQuotes,"='$1']");if(!isXML(elem)&&!rbuggyMatches.test(expr)&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}
return Sizzle(expr,null,null,[elem]).length>0;};}})();}
Expr.pseudos["nth"]=Expr.pseudos["eq"];function setFilters(){}
Expr.filters=setFilters.prototype=Expr.pseudos;Expr.setFilters=new setFilters();Sizzle.attr=jQuery.attr;jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;})(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var i,l,length,n,r,ret,self=this;if(typeof selector!=="string"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true;}}});}
ret=this.pushStack("","find",selector);for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}
return ret;},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector);},is:function(selector){return!!selector&&(typeof selector==="string"?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0);},closest:function(selectors,context){var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){cur=this[i];while(cur&&cur.ownerDocument&&cur!==context&&cur.nodeType!==11){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break;}
cur=cur.parentNode;}}
ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1;}
if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem));}
return jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});jQuery.fn.andSelf=jQuery.fn.addBack;function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11;}
function sibling(cur,dir){do{cur=cur[dir];}while(cur&&cur.nodeType!==1);return cur;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until;}
if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret);}
ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if(this.length>1&&rparentsprev.test(name)){ret=ret.reverse();}
return this.pushStack(ret,name,core_slice.call(arguments).join(","));};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")";}
return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);}
cur=cur[dir];}
return matched;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}
return r;}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep;});}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);}else{qualifier=jQuery.filter(qualifier,filtered);}}
return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});}
function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop());}}
return safeFrag;}
var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rcheckableType=/^(?:checkbox|radio)$/,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"X<div>","</div>"];}
jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value));},null,value,arguments.length);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.insertBefore(elem,this.firstChild);}});},before:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);});}
if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(set,this),"before",this.selector);}},after:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}
if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(this,set),"after",this.selector);}},remove:function(selector,keepData){var elem,i=0;for(;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem]);}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}}
return this;},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));}
while(elem.firstChild){elem.removeChild(elem.firstChild);}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):undefined;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(value){if(!isDisconnected(this[0])){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}
if(typeof value!=="string"){value=jQuery(value).detach();}
return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}
return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this;},detach:function(selector){return this.remove(selector,true);},domManip:function(args,table,callback){args=[].concat.apply([],args);var results,first,fragment,iNoClone,i=0,value=args[0],scripts=[],l=this.length;if(!jQuery.support.checkClone&&l>1&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback);});}
if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}
if(this[0]){results=jQuery.buildFragment(args,this,scripts);fragment=results.fragment;first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}
if(first){table=table&&jQuery.nodeName(first,"tr");for(iNoClone=results.cacheable||l-1;i<l;i++){callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],i===iNoClone?fragment:jQuery.clone(fragment,true,true));}}
fragment=first=null;if(scripts.length){jQuery.each(scripts,function(i,elem){if(elem.src){if(jQuery.ajax){jQuery.ajax({url:elem.src,type:"GET",dataType:"script",async:false,global:false,"throws":true});}else{jQuery.error("no ajax");}}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,""));}
if(elem.parentNode){elem.parentNode.removeChild(elem);}});}}
return this;}});function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag));}
function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return;}
var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}
if(curData.data){curData.data=jQuery.extend({},curData.data);}}
function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return;}
if(dest.clearAttributes){dest.clearAttributes();}
if(dest.mergeAttributes){dest.mergeAttributes(src);}
nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){if(dest.parentNode){dest.outerHTML=src.outerHTML;}
if(jQuery.support.html5Clone&&(src.innerHTML&&!jQuery.trim(dest.innerHTML))){dest.innerHTML=src.innerHTML;}}else if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value){dest.value=src.value;}}else if(nodeName==="option"){dest.selected=src.defaultSelected;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}else if(nodeName==="script"&&dest.text!==src.text){dest.text=src.text;}
dest.removeAttribute(jQuery.expando);}
jQuery.buildFragment=function(args,context,scripts){var fragment,cacheable,cachehit,first=args[0];context=context||document;context=!context.nodeType&&context[0]||context;context=context.ownerDocument||context;if(args.length===1&&typeof first==="string"&&first.length<512&&context===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;fragment=jQuery.fragments[first];cachehit=fragment!==undefined;}
if(!fragment){fragment=context.createDocumentFragment();jQuery.clean(args,context,fragment,scripts);if(cacheable){jQuery.fragments[first]=cachehit&&fragment;}}
return{fragment:fragment,cacheable:cacheable};};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i=0,ret=[],insert=jQuery(selector),l=insert.length,parent=this.length===1&&this[0].parentNode;if((parent==null||parent&&parent.nodeType===11&&parent.childNodes.length===1)&&l===1){insert[original](this[0]);return this;}else{for(;i<l;i++){elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}
return this.pushStack(ret,name,insert.selector);}};});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined"){return elem.getElementsByTagName("*");}else if(typeof elem.querySelectorAll!=="undefined"){return elem.querySelectorAll("*");}else{return[];}}
function fixDefaultChecked(elem){if(rcheckableType.test(elem.type)){elem.defaultChecked=elem.checked;}}
jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone;if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")){clone=elem.cloneNode(true);}else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild);}
if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i]);}}}
if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i]);}}}
srcElements=destElements=null;return clone;},clean:function(elems,context,fragment,scripts){var i,j,elem,tag,wrap,depth,div,hasBody,tbody,len,handleScript,jsTags,safe=context===document&&safeFragment,ret=[];if(!context||typeof context.createDocumentFragment==="undefined"){context=document;}
for(i=0;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+="";}
if(!elem){continue;}
if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem);}else{safe=safe||createSafeFragment(context);div=context.createElement("div");safe.appendChild(div);elem=elem.replace(rxhtmlTag,"<$1></$2>");tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;depth=wrap[0];div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}
if(!jQuery.support.tbody){hasBody=rtbody.test(elem);tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);}}}
if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}
elem=div.childNodes;div.parentNode.removeChild(div);}}
if(elem.nodeType){ret.push(elem);}else{jQuery.merge(ret,elem);}}
if(div){elem=div=safe=null;}
if(!jQuery.support.appendChecked){for(i=0;(elem=ret[i])!=null;i++){if(jQuery.nodeName(elem,"input")){fixDefaultChecked(elem);}else if(typeof elem.getElementsByTagName!=="undefined"){jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked);}}}
if(fragment){handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type)){return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem);}};for(i=0;(elem=ret[i])!=null;i++){if(!(jQuery.nodeName(elem,"script")&&handleScript(elem))){fragment.appendChild(elem);if(typeof elem.getElementsByTagName!=="undefined"){jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript);ret.splice.apply(ret,[i+1,0].concat(jsTags));i+=jsTags.length;}}}}
return ret;},cleanData:function(elems,acceptData){var data,id,elem,type,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;for(;(elem=elems[i])!=null;i++){if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}
if(cache[id]){delete cache[id];if(deleteExpando){delete elem[internalKey];}else if(elem.removeAttribute){elem.removeAttribute(internalKey);}else{elem[internalKey]=null;}
jQuery.deletedIds.push(id);}}}}}});(function(){var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};};matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}
if(browser.chrome){browser.webkit=true;}else if(browser.webkit){browser.safari=true;}
jQuery.browser=browser;jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context);}
jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context);}
return jQuery.fn.init.call(this,selector,context,rootjQuerySub);};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub;};})();var curCSS,iframe,iframeDoc,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([-+])=("+core_pnum+")","i"),elemdisplay={},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"],eventsToggle=jQuery.fn.toggle;function vendorPropName(style,name){if(name in style){return name;}
var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name;}}
return origName;}
function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem);}
function showHide(elements,show){var elem,display,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue;}
values[index]=jQuery._data(elem,"olddisplay");if(show){if(!values[index]&&elem.style.display==="none"){elem.style.display="";}
if(elem.style.display===""&&isHidden(elem)){values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName));}}else{display=curCSS(elem,"display");if(!values[index]&&display!=="none"){jQuery._data(elem,"olddisplay",display);}}}
for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue;}
if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none";}}
return elements;}
jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);},show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state,fn2){var bool=typeof state==="boolean";if(jQuery.isFunction(state)&&jQuery.isFunction(fn2)){return eventsToggle.apply(this,arguments);}
return this.each(function(){if(bool?state:isHidden(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number";}
if(value==null||type==="number"&&isNaN(value)){return;}
if(type==="number"&&!jQuery.cssNumber[origName]){value+="px";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){try{style[name]=value;}catch(e){}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,numeric,extra){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra);}
if(val===undefined){val=curCSS(elem,name);}
if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}
if(numeric||extra!==undefined){num=parseFloat(val);return numeric||jQuery.isNumeric(num)?num||0:val;}
return val;},swap:function(elem,options,callback){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.call(elem);for(name in options){elem.style[name]=old[name];}
return ret;}});if(window.getComputedStyle){curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=window.getComputedStyle(elem,null),style=elem.style;if(computed){ret=computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name);}
if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}
return ret;};}else if(document.documentElement.currentStyle){curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&style[name]){ret=style[name];}
if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left;}
style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft;}}
return ret===""?"auto":ret;};}
function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value;}
function augmentWidthOrHeight(elem,name,extra,isBorderBox){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true);}
if(isBorderBox){if(extra==="content"){val-=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;}
if(extra!=="margin"){val-=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0;}}else{val+=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding"){val+=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0;}}}
return val;}
function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,valueIsBorderBox=true,isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box";if(val<=0||val==null){val=curCSS(elem,name);if(val<0||val==null){val=elem.style[name];}
if(rnumnonpx.test(val)){return val;}
valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0;}
return(val+
augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox))+"px";}
function css_defaultDisplay(nodeName){if(elemdisplay[nodeName]){return elemdisplay[nodeName];}
var elem=jQuery("<"+nodeName+">").appendTo(document.body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe=document.body.appendChild(iframe||jQuery.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write("<!doctype html><html><body>");iframeDoc.close();}
elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName));display=curCSS(elem,"display");document.body.removeChild(iframe);}
elemdisplay[nodeName]=display;return display;}
jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){if(elem.offsetWidth===0&&rdisplayswap.test(curCSS(elem,"display"))){return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);});}else{return getWidthOrHeight(elem,name,extra);}}},set:function(elem,value,extra){return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box"):0);}};});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":computed?"1":"";},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter){return;}}
style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity;}};}
jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{"display":"inline-block"},function(){if(computed){return curCSS(elem,"marginRight");}});}};}
if(!jQuery.support.pixelPosition&&jQuery.fn.position){jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){var ret=curCSS(elem,prop);return rnumnonpx.test(ret)?jQuery(elem).position()[prop]+"px":ret;}}};});}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return(elem.offsetWidth===0&&elem.offsetHeight===0)||(!jQuery.support.reliableHiddenOffsets&&((elem.style&&elem.style.display)||curCSS(elem,"display"))==="none");};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}
jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rselectTextarea=/^(?:select|textarea)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}):{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");};function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
var
ajaxLocParts,ajaxLocation,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href;}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href;}
ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
var dataType,list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(core_rspace),i=0,length=dataTypes.length;if(jQuery.isFunction(func)){for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||"*";}
list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func);}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=(structure===prefilters);for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined;}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected);}}}
if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);}
return selection;}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}}
jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}
if(!this.length){return this;}
var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off);}
if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}
jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status){if(callback){self.each(callback,response||[jqXHR.responseText,status,jqXHR]);}}}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText);});return this;};jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f);};});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type});};});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,jQuery.ajaxSettings);}else{settings=target;target=jQuery.ajaxSettings;}
ajaxExtend(target,settings);return target;},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var
ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}
return this;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match===undefined?null:match;},overrideMimeType:function(type){if(!state){s.mimeType=type;}
return this;},abort:function(statusText){statusText=statusText||strAbort;if(transport){transport.abort(statusText);}
done(0,statusText);return this;}};function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return;}
state=2;if(timeoutTimer){clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}
if(status>=200&&status<300||status===304){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[ifModifiedKey]=modified;}
modified=jqXHR.getResponseHeader("Etag");if(modified){jQuery.etag[ifModifiedKey]=modified;}}
if(status===304){statusText="notmodified";isSuccess=true;}else{isSuccess=ajaxConvert(s,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error;}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]];}}else{tmp=map[jqXHR.status];jqXHR.always(tmp);}}
return this;};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(core_rspace);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase())||false;s.crossDomain=parts&&(parts.join(":")+(parts[3]?"":parts[1]==="http:"?80:443))!==(ajaxLocParts.join(":")+(ajaxLocParts[3]?"":ajaxLocParts[1]==="http:"?80:443));}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR;}
fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data;}
ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"");}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);}
if(jQuery.etag[ifModifiedKey]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey]);}}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort();}
strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}
transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{throw e;}}}
return jqXHR;},active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type];}}
while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("content-type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response){var conv,conv2,current,tmp,dataTypes=s.dataTypes.slice(),prev=dataTypes[0],converters={},i=0;if(s.dataFilter){response=s.dataFilter(response,s.dataType);}
if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}
for(;(current=dataTypes[++i]);){if(current!=="*"){if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.splice(i--,0,current);}
break;}}}}
if(conv!==true){if(conv&&s["throws"]){response=conv(response);}else{try{response=conv(response);}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}
prev=current;}}
return{state:"success",data:response};}
var oldCallbacks=[],rquestion=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=jQuery.now();jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++));this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,data=s.data,url=s.url,hasCallback=s.jsonp!==false,replaceInUrl=hasCallback&&rjsonp.test(url),replaceInData=hasCallback&&!replaceInUrl&&typeof data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(data);if(s.dataTypes[0]==="jsonp"||replaceInUrl||replaceInData){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;overwritten=window[callbackName];if(replaceInUrl){s.url=url.replace(rjsonp,"$1"+callbackName);}else if(replaceInData){s.data=data.replace(rjsonp,"$1"+callbackName);}else if(hasCallback){s.url+=(rquestion.test(url)?"&":"?")+s.jsonp+"="+callbackName;}
s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}
if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0]);}
responseContainer=overwritten=undefined;});return"script";}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";s.global=false;}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset){script.charset=s.scriptCharset;}
script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}
script=undefined;if(!isAbort){callback(200,"success");}}};head.insertBefore(script,head.firstChild);},abort:function(){if(script){script.onload(0,1);}}};}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1);}}:false,xhrId=0;function createStandardXHR(){try{return new window.XMLHttpRequest();}catch(e){}}
function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}
jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR();}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&("withCredentials"in xhr)});})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax){jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password);}else{xhr.open(s.type,s.url,s.async);}
if(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i];}}
if(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType);}
if(!s.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
try{for(i in headers){xhr.setRequestHeader(i,headers[i]);}}catch(_){}
xhr.send((s.hasContent&&s.data)||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle];}}
if(isAbort){if(xhr.readyState!==4){xhr.abort();}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml;}
try{responses.text=xhr.responseText;}catch(_){}
try{statusText=xhr.statusText;}catch(e){statusText="";}
if(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404;}else if(status===1223){status=204;}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException);}}
if(responses){complete(status,statusText,responses,responseHeaders);}};if(!s.async){callback();}else if(xhr.readyState===4){setTimeout(callback,0);}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort);}
xhrCallbacks[handle]=callback;}
xhr.onreadystatechange=callback;}},abort:function(){if(callback){callback(0,1);}}};}});}
var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([-+])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){end=+parts[2];unit=parts[3]||(jQuery.cssNumber[prop]?"":"px");if(unit!=="px"&&start){start=jQuery.css(tween.elem,prop,true)||end||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit);}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations);}
tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end;}
return tween;}]};function createFxNow(){setTimeout(function(){fxNow=undefined;},0);return(fxNow=jQuery.now());}
function createTweens(animation,props){jQuery.each(props,function(prop,value){var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(collection[index].call(animation,prop,value)){return;}}});}
function Animation(elem,properties,options){var result,index=0,tweenerIndex=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent);}
deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}else{deferred.resolveWith(elem,[animation]);return false;}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end,easing){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;for(;index<length;index++){animation.tweens[index].run(1);}
if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}
return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result;}}
createTweens(animation,props);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}
jQuery.fx.timer(jQuery.extend(tick,{anim:animation,queue:animation.opts.queue,elem:elem}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);}
function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0];}
if(index!==name){props[name]=value;delete props[index];}
hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}
jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"];}else{props=props.split(" ");}
var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback);}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback);}else{animationPrefilters.push(callback);}}});function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}
hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}
if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none"){if(!jQuery.support.inlineBlockNeedsLayout||css_defaultDisplay(elem.nodeName)==="inline"){style.display="inline-block";}else{style.zoom=1;}}}
if(opts.overflow){style.overflow="hidden";if(!jQuery.support.shrinkWrapBlocks){anim.done(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}}
for(index in props){value=props[index];if(rfxtypes.exec(value)){delete props[index];if(value===(hidden?"hide":"show")){continue;}
handled.push(index);}}
length=handled.length;if(length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{});if(hidden){jQuery(elem).show();}else{anim.done(function(){jQuery(elem).hide();});}
anim.done(function(){var prop;jQuery.removeData(elem,"fxshow",true);for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});for(index=0;index<length;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||jQuery.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0;}}}}}
function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}
jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}
this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}
if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}
return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop];}
result=jQuery.css(tween.elem,tween.prop,false,"");return!result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"||(!i&&jQuery.isFunction(speed)&&jQuery.isFunction(easing))?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty){anim.stop(true);}};return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue&&type!==false){this.queue(type||"fx",[]);}
return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}
if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}
if(includeWidth){attrs.opacity=attrs.width=type;}
return attrs;}
jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}};jQuery.fx.timer=function(timer){if(timer()&&jQuery.timers.push(timer)&&!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval);}};jQuery.fx.interval=13;jQuery.fx.stop=function(){clearInterval(timerId);timerId=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step={};if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}
var rroot=/^(?:body|html)$/i;jQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var docElem,body,win,clientTop,clientLeft,scrollTop,scrollLeft,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return;}
if((body=doc.body)===elem){return jQuery.offset.bodyOffset(elem);}
docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box;}
if(typeof elem.getBoundingClientRect!=="undefined"){box=elem.getBoundingClientRect();}
win=getWindow(doc);clientTop=docElem.clientTop||body.clientTop||0;clientLeft=docElem.clientLeft||body.clientLeft||0;scrollTop=win.pageYOffset||docElem.scrollTop;scrollLeft=win.pageXOffset||docElem.scrollLeft;return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft};};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0;}
return{top:top,left:left};},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static"){elem.style.position="relative";}
var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return;}
var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;}
return offsetParent||document.body;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?(prop in win)?win[prop]:win.document.documentElement[method]:elem[method];}
if(win){win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());}else{elem[method]=val;}},method,val,arguments.length,null);};});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;}
jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name];}
if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}
return value===undefined?jQuery.css(elem,type,value,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable,null);};});});window.jQuery=window.$=jQuery;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return jQuery;});}})(window);

var EventDispatcher=Base.extend({_listeners:null,constructor:function(){},addListener:function(eventName,listener,method){if(!this._listeners){this._listeners={};}
if(!this._listeners[eventName]){this._listeners[eventName]=[];}
this._listeners[eventName].push({listener:listener,method:method});},removeListener:function(eventName,listener){if(!this._listeners||!this._listeners[eventName]){return;}
var countListeners=this._listeners[eventName].length;for(var i=0;i<countListeners;++i){if(this._listeners[eventName][i].listener==listener){this._listeners[eventName].splice(i,1);break;}}},removeAllListeners:function(){if(!this._listeners){return;}
this._listeners={};},hasListener:function(eventName,listener){if(!this._listeners||!this._listeners[eventName]){return false;}
var countListeners=this._listeners[eventName].length;for(var i=0;i<countListeners;++i){if(this._listeners[eventName][i].listener==listener){return true;}}
return false;},dispatchEvent:function(eventName){if(!this._listeners||!this._listeners[eventName]){return;}
var eventArguments=Array.prototype.slice.call(arguments);eventArguments.splice(0,1);var countListeners=this._listeners[eventName].length;for(var i=0;i<countListeners;++i){var listener=this._listeners[eventName][i].listener;var method=this._listeners[eventName][i].method;if(eventArguments.length==0){method.apply(listener);}
else{method.apply(listener,eventArguments);}}}});

(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var
push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=_;}
exports._=_;}else{root._=_;}
_.VERSION='1.8.2';var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value);};case 2:return function(value,other){return func.call(context,value,other);};case 3:return function(value,index,collection){return func.call(context,value,index,collection);};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection);};}
return function(){return func.apply(context,arguments);};};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value);};_.iteratee=function(value,context){return cb(value,context,Infinity);};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key];}}
return obj;};};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result;};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var isArrayLike=function(collection){var length=collection&&collection.length;return typeof length=='number'&&length>=0&&length<=MAX_ARRAY_INDEX;};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj);}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj);}}
return obj;};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj);}
return results;};function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj);}
return memo;}
return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(arguments.length<3){memo=obj[keys?keys[index]:index];index+=dir;}
return iterator(obj,iteratee,memo,keys,index,length);};}
_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj)){key=_.findIndex(obj,predicate,context);}else{key=_.findKey(obj,predicate,context);}
if(key!==void 0&&key!==-1)return obj[key];};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value);});return results;};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context);};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false;}
return true;};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true;}
return false;};_.contains=_.includes=_.include=function(obj,target,fromIndex){if(!isArrayLike(obj))obj=_.values(obj);return _.indexOf(obj,target,typeof fromIndex=='number'&&fromIndex)>=0;};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,_.property(key));};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs));};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs));};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value;}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed;}});}
return result;};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value;}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed;}});}
return result;};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index];}
return shuffled;};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)];}
return _.shuffle(obj).slice(0,Math.max(0,n));};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)};}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1;}
return left.index-right.index;}),'value');};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key);});return result;};};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value];});_.indexBy=group(function(result,value,key){result[key]=value;});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1;});_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj);};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length;};_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value);});return[pass,fail];};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n);};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)));};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n));};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n);};_.compact=function(array){return _.filter(array,_.identity);};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=input&&input.length;i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len){output[idx++]=value[j++];}}else if(!strict){output[idx++]=value;}}
return output;};_.flatten=function(array,shallow){return flatten(array,shallow,false);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(array==null)return[];if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false;}
if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=array.length;i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed;}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value);}}else if(!_.contains(result,value)){result.push(value);}}
return result;};_.union=function(){return _.uniq(flatten(arguments,true,true));};_.intersection=function(array){if(array==null)return[];var result=[];var argsLength=arguments.length;for(var i=0,length=array.length;i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break;}
if(j===argsLength)result.push(item);}
return result;};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return!_.contains(rest,value);});};_.zip=function(){return _.unzip(arguments);};_.unzip=function(array){var length=array&&_.max(array,'length').length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=_.pluck(array,index);}
return result;};_.object=function(list,values){var result={};for(var i=0,length=list&&list.length;i<length;i++){if(values){result[list[i]]=values[i];}else{result[list[i][0]]=list[i][1];}}
return result;};_.indexOf=function(array,item,isSorted){var i=0,length=array&&array.length;if(typeof isSorted=='number'){i=isSorted<0?Math.max(0,length+isSorted):isSorted;}else if(isSorted&&length){i=_.sortedIndex(array,item);return array[i]===item?i:-1;}
if(item!==item){return _.findIndex(slice.call(array,i),_.isNaN);}
for(;i<length;i++)if(array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item,from){var idx=array?array.length:0;if(typeof from=='number'){idx=from<0?idx+from+1:Math.min(idx,from+1);}
if(item!==item){return _.findLastIndex(slice.call(array,0,idx),_.isNaN);}
while(--idx>=0)if(array[idx]===item)return idx;return-1;};function createIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=array!=null&&array.length;var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index;}
return-1;};}
_.findIndex=createIndexFinder(1);_.findLastIndex=createIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=array.length;while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid;}
return low;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start;}
return range;};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self;};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError('Bind must be called on a function');var args=slice.call(arguments,2);var bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)));};return bound;};_.partial=function(func){var boundArgs=slice.call(arguments,1);var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i];}
while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args);};return bound;};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error('bindAll must be passed function names');for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj);}
return obj;};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=''+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address];};memoize.cache={};return memoize;};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},wait);};_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null;};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null;}
previous=now;result=func.apply(context,args);if(!timeout)context=args=null;}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}
return result;};};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last);}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null;}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null;}
return result;};};_.wrap=function(func,wrapper){return _.partial(wrapper,func);};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments);};};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result;};};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments);}
if(times<=1)func=null;return memo;};};_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable('toString');var nonEnumerableProps=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=(_.isFunction(constructor)&&constructor.prototype)||ObjProto;var prop='constructor';if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)){keys.push(prop);}}}
_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys;};_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys;};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]];}
return values;};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={},currentKey;for(var index=0;index<length;index++){currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj);}
return results;};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]];}
return pairs;};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i];}
return result;};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key;}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context);}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj;};obj=Object(obj);}
for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value;}
return result;};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee);}else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return!_.contains(keys,key);};}
return _.pick(obj,iteratee,context);};_.defaults=createAssigner(_.allKeys,true);_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false;}
return true;};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case'[object RegExp]':case'[object String]':return''+a===''+b;case'[object Number]':if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case'[object Date]':case'[object Boolean]':return+a===+b;}
var areArrays=className==='[object Array]';if(!areArrays){if(typeof a!='object'||typeof b!='object')return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&('constructor'in a&&'constructor'in b)){return false;}}
aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b;}
aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false;}}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false;}}
aStack.pop();bStack.pop();return true;};_.isEqual=function(a,b){return eq(a,b);};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0;};_.isElement=function(obj){return!!(obj&&obj.nodeType===1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==='[object Array]';};_.isObject=function(obj){var type=typeof obj;return type==='function'||type==='object'&&!!obj;};_.each(['Arguments','Function','String','Number','Date','RegExp','Error'],function(name){_['is'+name]=function(obj){return toString.call(obj)==='[object '+name+']';};});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,'callee');};}
if(typeof/./!='function'&&typeof Int8Array!='object'){_.isFunction=function(obj){return typeof obj=='function'||false;};}
_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj));};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==='[object Boolean]';};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key);};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.constant=function(value){return function(){return value;};};_.noop=function(){};_.property=function(key){return function(obj){return obj==null?void 0:obj[key];};};_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key];};};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs);};};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum;};_.random=function(min,max){if(max==null){max=min;min=0;}
return min+Math.floor(Math.random()*(max-min+1));};_.now=Date.now||function(){return new Date().getTime();};var escapeMap={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match];};var source='(?:'+_.keys(map).join('|')+')';var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,'g');return function(string){string=string==null?'':''+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string;};};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0){value=fallback;}
return _.isFunction(value)?value.call(object):value;};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+'';return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return'\\'+escapes[match];};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join('|')+'|$','g');var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";}else if(evaluate){source+="';\n"+evaluate+"\n__p+='";}
return match;});source+="';\n";if(!settings.variable)source='with(obj||{}){\n'+source+'}\n';source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+
source+'return __p;\n';try{var render=new Function(settings.variable||'obj','_',source);}catch(e){e.source=source;throw e;}
var template=function(data){return render.call(this,data,_);};var argument=settings.variable||'obj';template.source='function('+argument+'){\n'+source+'}';return template;};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance;};var result=function(instance,obj){return instance._chain?_(obj).chain():obj;};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args));};});};_.mixin(_);_.each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==='shift'||name==='splice')&&obj.length===0)delete obj[0];return result(this,obj);};});_.each(['concat','join','slice'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments));};});_.prototype.value=function(){return this._wrapped;};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return''+this._wrapped;};if(typeof define==='function'&&define.amd){define('underscore',[],function(){return _;});}}.call(this));

function lambdaHandler(listener,lambda)
{return function()
{return lambda.apply(listener,arguments);};}
function handler(listener,methodName)
{return function()
{return listener[methodName].apply(listener,arguments);};}
window.g_errorHandler=function(e)
{try
{console&&console.dir&&console.dir(e);}
catch(error)
{}};function safeHandler(listener,methodName)
{return function()
{try
{listener[methodName].apply(listener,arguments);}
catch(e)
{window.g_errorHandler(e);}};}
;window.Modernizr=function(a,b,c){function u(a){i.cssText=a}function v(a,b){return u(prefixes.join(a+";")+(b||""))}function w(a,b){return typeof a===b}function x(a,b){return!!~(""+a).indexOf(b)}function y(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:w(f,"function")?f.bind(d||b):f}return!1}var d="2.6.2",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,j,k={}.toString,l={svg:"http://www.w3.org/2000/svg"},m={},n={},o={},p=[],q=p.slice,r,s={}.hasOwnProperty,t;!w(s,"undefined")&&!w(s.call,"undefined")?t=function(a,b){return s.call(a,b)}:t=function(a,b){return b in a&&w(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=q.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(q.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(q.call(arguments)))};return e}),m.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==l.svg};for(var z in m)t(m,z)&&(r=z.toLowerCase(),e[r]=m[z](),p.push((e[r]?"":"no-")+r));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)t(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof enableClasses!="undefined"&&enableClasses&&(f.className+=" "+(b?"":"no-")+a),e[a]=b}return e},u(""),h=j=null,e._version=d,e}(this,this.document);

var StringUtils=Base.extend({},{TEMPLATE_SEPARATOR:'%',replaceAll:function(str,search,replace)
{return str.split(search).join(replace);},getParametrizedString:function(str,params)
{for(var paramName in params)
{if(!params.hasOwnProperty(paramName)){continue;}
var paramValue=params[paramName];str=this.replaceAll(str,StringUtils.TEMPLATE_SEPARATOR+paramName+StringUtils.TEMPLATE_SEPARATOR,paramValue);}
return str;},addSlashes:function(str)
{return(str+'').replace(/([\\"'])/g,"\\$1").replace(/\u0000/g,"\\0");},encodeDoubleQuotes:function(str)
{return str.replace(/\"/g,'&quot;');},getRandomString:function(length)
{var text='';var possible='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';for(var i=0;i<length;i++)
{text+=possible.charAt(Math.floor(Math.random()*possible.length));}
return text;},trim:function(str)
{if(!String.prototype.trim)
{str=str.replace(/^\s+|\s+$/g,'');}
else
{str=str.trim();}
return str;},isEmpty:function(str)
{return(''+str).length===0;},insertInPosition:function(srcString,stringToInsert,pos)
{return srcString.substr(0,pos)+stringToInsert+srcString.substr(pos);},numberFormat:function(number,decimals,dec_point,thousands_sep)
{number=(number+'').replace(/[^0-9+\-Ee.]/g,'');var n=!isFinite(+number)?0:+number;var prec=!isFinite(+decimals)?0:Math.abs(decimals);var sep=(typeof thousands_sep==='undefined')?',':thousands_sep;var dec=(typeof dec_point==='undefined')?'.':dec_point;var s='';var toFixedFix=function(n,prec)
{var k=Math.pow(10,prec);return''+(Math.round(n*k)/k).toFixed(prec);};s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3)
{s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}
if((s[1]||'').length<prec)
{s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0');}
return s.join(dec);},hasStringContainsSubstring:function(string,substring)
{return string.indexOf(substring)!==-1;}});

var UIDateTimeUtils=Base.extend({},{ZERO_SYMBOL:'0',AM_PERIOD:'am',PM_PERIOD:'pm',TIME_DELIMITER:':',INNER_DATE_STRING_FORMAT:'d/MM/yyyy',HOURS_IN_DAY:24,HOURS_IN_HALF_DAY:12,MINUTES_IN_HOUR:60,SECONDS_IN_MINUTE:60,SECONDS_IN_HALF_MINUTE:30,SECONDS_IN_HOUR:3600,SECONDS_IN_DAY:86400,getFormattedTime:function(timestamp){var hours=UIDateTimeUtils.ZERO_SYMBOL+this.getHours(timestamp);var minutes=UIDateTimeUtils.ZERO_SYMBOL+Math.floor((timestamp-(hours*UIDateTimeUtils.SECONDS_IN_HOUR))/UIDateTimeUtils.SECONDS_IN_MINUTE);return hours.slice(-2)+UIDateTimeUtils.TIME_DELIMITER+minutes.slice(-2);},getUnixTimeFromFormatted:function(time){var timeComponents=time.split(UIDateTimeUtils.TIME_DELIMITER);return timeComponents[0]*UIDateTimeUtils.SECONDS_IN_HOUR+timeComponents[1]*UIDateTimeUtils.SECONDS_IN_MINUTE;},getTime:function(timestamp){var hours=this.getHours(timestamp);var minutes=Math.floor((timestamp-(hours*UIDateTimeUtils.SECONDS_IN_HOUR))/UIDateTimeUtils.SECONDS_IN_MINUTE);return{hours:hours,minutes:minutes};},getHours:function(timestamp){return Math.floor(timestamp/UIDateTimeUtils.SECONDS_IN_HOUR);},isFormattedTimeString:function(value){return value.toString().indexOf(UIDateTimeUtils.TIME_DELIMITER)>-1;},convertToSeconds:function(days,hours,minutes,seconds){days=parseInt(days);hours=parseInt(hours);minutes=parseInt(minutes);seconds=parseInt(seconds);return(days*UIDateTimeUtils.HOURS_IN_DAY+hours)*UIDateTimeUtils.SECONDS_IN_HOUR+minutes*UIDateTimeUtils.SECONDS_IN_MINUTE+seconds;},getDurationAsObject:function(duration){duration=parseInt(duration);var days=Math.floor(duration/UIDateTimeUtils.SECONDS_IN_DAY);var hourSeconds=duration%UIDateTimeUtils.SECONDS_IN_DAY;var hours=Math.floor(hourSeconds/UIDateTimeUtils.SECONDS_IN_HOUR);var minuteSeconds=hourSeconds%UIDateTimeUtils.SECONDS_IN_HOUR;var minutes=Math.floor(minuteSeconds/UIDateTimeUtils.SECONDS_IN_MINUTE);var remainingSeconds=minuteSeconds%UIDateTimeUtils.SECONDS_IN_MINUTE;var seconds=Math.ceil(remainingSeconds);return{days:days,hours:hours,minutes:minutes,seconds:seconds};},getWeekDayShortNames:function(locale){return UIDateTimeUtils._getWeekDayNames(locale,'short');},getWeekDayFullNames:function(locale){return UIDateTimeUtils._getWeekDayNames(locale,'long');},getMonthNames:function(locale){var monthNames=[];var tempDate=new Date();tempDate.setDate(1);tempDate.setMonth(0);for(var i=0;i<12;i++){monthNames.push(tempDate.toLocaleString(locale,{month:'long'}));tempDate.setMonth(tempDate.getMonth()+1);}
return monthNames;},_getWeekDayNames:function(locale,format){var weekDays=[];var todayDate=new Date();var tempDate=new Date(todayDate);var daysForSunday=(7-tempDate.getDay())%7;tempDate.setDate(tempDate.getDate()+daysForSunday);weekDays.push(tempDate.toLocaleString(locale,{weekday:format}));for(var i=0;i<6;i++){tempDate.setDate(tempDate.getDate()+1);weekDays.push(tempDate.toLocaleString(locale,{weekday:format}));}
return weekDays;}});

var Namespace=(function(){var _listeners={};var _includedIdentifiers=[];var _toArray=function(obj){if(typeof(obj)=='object'&&obj.sort){return obj;}
return Array(obj);};var _createXmlHttpRequest=function(){var xhr;try{xhr=new XMLHttpRequest();}catch(e){try{xhr=new ActiveXObject("Msxml2.XMLHTTP.6.0");}catch(e2){try{xhr=new ActiveXObject("Msxml2.XMLHTTP.3.0");}catch(e3){try{xhr=new ActiveXObject("Msxml2.XMLHTTP");}catch(e4){try{xhr=new ActiveXObject("Microsoft.XMLHTTP");}catch(e5){throw new Error("This browser does not support XMLHttpRequest.");}}}}}
return xhr;};var _isHttpRequestSuccessful=function(status){return(status>=200&&status<300)||status==304||status==1223||(!status&&(window.location.protocol=="file:"||window.location.protocol=="chrome:"));};var _createScript=function(data){var script=document.createElement('script');script.type='text/javascript';script.text=data;if(typeof window.execScript==="object"){window.execScript(data);}else{try{document.body.appendChild(script);}catch(e){window['eval'](data);}}};var _dispatchEvent=function(eventName,properties){if(!_listeners[eventName]){return;}
properties.event=eventName;for(var i=0;i<_listeners[eventName].length;i++){_listeners[eventName][i](properties);}};var _namespace=function(identifier){var klasses=arguments[1]||false;var ns=window;if(identifier!==''){var parts=identifier.split(Namespace.separator);for(var i=0;i<parts.length;i++){if(!ns[parts[i]]){ns[parts[i]]={};}
ns=ns[parts[i]];}}
if(klasses){for(var klass in klasses){if(klasses.hasOwnProperty(klass)){ns[klass]=klasses[klass];}}}
_dispatchEvent('create',{'identifier':identifier});return ns;};_namespace.exist=function(identifier){if(identifier===''){return true;}
var parts=identifier.split(Namespace.separator);var ns=window;for(var i=0;i<parts.length;i++){if(!ns[parts[i]]){return false;}
ns=ns[parts[i]];}
return true;};_namespace.mapIdentifierToUri=function(identifier){var regexp=new RegExp('\\'+Namespace.separator,'g');return Namespace.baseUri+identifier.replace(regexp,'/')+'.js';};var _loadScript=function(identifier){var successCallback=arguments[1];var errorCallback=arguments[2];var async=typeof successCallback==="function";var uri=_namespace.mapIdentifierToUri(identifier);var event={'identifier':identifier,'uri':uri,'async':async,'callback':successCallback};var xhr=_createXmlHttpRequest();xhr.open("GET",uri,async);if(async){xhr.onreadystatechange=function(){if(xhr.readyState==4){if(_isHttpRequestSuccessful(xhr.status||0)){_createScript(xhr.responseText);_dispatchEvent('include',event);successCallback();return;}
event.status=xhr.status;_dispatchEvent('includeError',event);if(typeof errorCallback==="function"){errorCallback();}}};}
xhr.send(null);if(!async){if(_isHttpRequestSuccessful(xhr.status||0)){_createScript(xhr.responseText);_dispatchEvent('include',event);return true;}
event.status=xhr.status;_dispatchEvent('includeError',event);return false;}};_namespace.include=function(identifier){var successCallback=arguments[1]||false;var errorCallback=arguments[2]||false;if(_includedIdentifiers[identifier]){if(typeof successCallback==="function"){successCallback();}
return true;}
if(successCallback){_loadScript(identifier,function(){_includedIdentifiers[identifier]=true;successCallback();},errorCallback);}else{if(_loadScript(identifier)){_includedIdentifiers[identifier]=true;return true;}
return false;}};_namespace.use=function(identifier){var identifiers=_toArray(identifier);var additionalVars=(arguments.length==3?arguments[1]:null);var callback=(arguments.length==3?arguments[2]:arguments[1]);var event={'identifier':identifier};var parts,target,ns;var targets={};for(var i=0;i<identifiers.length;i++){identifier=identifiers[i];parts=identifier.split(Namespace.separator);target=parts.pop();ns=_namespace(parts.join(Namespace.separator));if(target=='*'){for(var objectName in ns){if(ns.hasOwnProperty(objectName)){targets[objectName]=ns[objectName];}}}else{if(ns[target]){targets[target]=ns[target];}}}
if(additionalVars)
{for(var varName in additionalVars)
{targets[varName]=additionalVars[varName];}}
_dispatchEvent('use',event);if(typeof(callback)==="function")
{for(var targetName in targets)
eval("var "+targetName+" = targets[targetName]");eval("("+callback.toString()+")()");}
else
{for(var targetName in targets)
{window[targetName]=targets[targetName];}}};_namespace.from=function(identifier){return{include:function(){var callback=arguments[0]||false;_namespace.include(identifier,callback);},use:function(_identifier){var callback=arguments[1]||false;if(_identifier.charAt(0)=='.'){_identifier=identifier+_identifier;}
if(callback){_namespace.include(identifier,function(){_namespace.use(_identifier,callback,false);});}else{_namespace.include(identifier);_namespace.use(_identifier,callback,false);}}};};_namespace.provide=function(identifier){var identifiers=_toArray(identifier);for(var i=0;i<identifiers.length;i++){if(!(identifier in _includedIdentifiers)){_dispatchEvent('provide',{'identifier':identifier});_includedIdentifiers[identifier]=true;}}};_namespace.addEventListener=function(eventName,callback){if(!_listeners[eventName]){_listeners[eventName]=[];}
_listeners[eventName].push(callback);};_namespace.removeEventListener=function(eventName,callback){if(!_listeners[eventName]){return;}
for(var i=0;i<_listeners[eventName].length;i++){if(_listeners[eventName][i]==callback){delete _listeners[eventName][i];return;}}};_namespace.registerNativeExtensions=function(){String.prototype.namespace=function(){var klasses=arguments[0]||{};return _namespace(this.valueOf(),klasses);};String.prototype.include=function(){var callback=arguments[0]||false;return _namespace.include(this.valueOf(),callback);};String.prototype.use=function(){var callback=arguments[0]||false;return _namespace.use(this.valueOf(),callback);};String.prototype.from=function(){return _namespace.from(this.valueOf());};String.prototype.provide=function(){return _namespace.provide(this.valueOf());};Array.prototype.use=function(){var callback=arguments[0]||false;return _namespace.use(this,callback);};Array.prototype.provide=function(){return _namespace.provide(this);};};return _namespace;})();Namespace.separator='.';Namespace.baseUri='./';Namespace.autoInclude=false;

var EnvironmentInfo=Base.extend({},{_locale:null,getLocale:function(){if(!EnvironmentInfo._locale){EnvironmentInfo._locale=document.getElementById('locale').value;}
return EnvironmentInfo._locale;}});
var Requester=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/js/dist/",r(r.s=47)}([function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){var n=r(22)("wks"),o=r(12),i=r(0).Symbol,s="function"==typeof i;(t.exports=function(t){return n[t]||(n[t]=s&&i[t]||(s?i:o)("Symbol."+t))}).store=n},function(t,e){var r=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(4);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){t.exports=!r(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(7);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(3),o=r(24),i=r(25),s=Object.defineProperty;e.f=r(5)?Object.defineProperty:function(t,e,r){if(n(t),e=i(e,!0),n(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=!1},function(t,e,r){var n=r(9),o=r(1)("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:i?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(8),o=r(26);t.exports=r(5)?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(4),o=r(0).document,i=n(o)&&n(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,r){var n=r(0),o=r(13),i=r(17),s=r(12)("src"),u=Function.toString,a=(""+u).split("toString");r(2).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,r,u){var c="function"==typeof r;c&&(i(r,"name")||o(r,"name",e)),t[e]!==r&&(c&&(i(r,s)||o(r,s,t[e]?""+t[e]:a.join(String(e)))),t===n?t[e]=r:u?t[e]?t[e]=r:o(t,e,r):(delete t[e],o(t,e,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||u.call(this)})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e){t.exports={}},function(t,e,r){var n,o,i,s=r(6),u=r(35),a=r(36),c=r(15),f=r(0),h=f.process,p=f.setImmediate,l=f.clearImmediate,d=f.MessageChannel,y=f.Dispatch,v=0,m={},b=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){b.call(t.data)};p&&l||(p=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return m[++v]=function(){u("function"==typeof t?t:Function(t),e)},n(v),v},l=function(t){delete m[t]},"process"==r(9)(h)?n=function(t){h.nextTick(s(b,t,1))}:y&&y.now?n=function(t){y.now(s(b,t,1))}:d?(i=(o=new d).port2,o.port1.onmessage=_,n=s(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(t){f.postMessage(t+"","*")},f.addEventListener("message",_,!1)):n="onreadystatechange"in c("script")?function(t){a.appendChild(c("script")).onreadystatechange=function(){a.removeChild(this),b.call(t)}}:function(t){setTimeout(s(b,t,1),0)}),t.exports={set:p,clear:l}},function(t,e,r){"use strict";var n=r(7);t.exports.f=function(t){return new function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}(t)}},function(t,e,r){"use strict";var n,o,i,s,u=r(10),a=r(0),c=r(6),f=r(11),h=r(23),p=r(4),l=r(7),d=r(27),y=r(28),v=r(34),m=r(19).set,b=r(37)(),_=r(20),w=r(38),E=r(39),x=r(40),T=a.TypeError,g=a.process,P=g&&g.versions,S=P&&P.v8||"",j=a.Promise,O="process"==f(g),R=function(){},A=o=_.f,B=!!function(){try{var t=j.resolve(1),e=(t.constructor={})[r(1)("species")]=function(t){t(R,R)};return(O||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==S.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(t){}}(),U=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},F=function(t,e){if(!t._n){t._n=!0;var r=t._c;b(function(){for(var n=t._v,o=1==t._s,i=0,s=function(e){var r,i,s,u=o?e.ok:e.fail,a=e.resolve,c=e.reject,f=e.domain;try{u?(o||(2==t._h&&D(t),t._h=1),!0===u?r=n:(f&&f.enter(),r=u(n),f&&(f.exit(),s=!0)),r===e.promise?c(T("Promise-chain cycle")):(i=U(r))?i.call(r,a,c):a(r)):c(n)}catch(t){f&&!s&&f.exit(),c(t)}};r.length>i;)s(r[i++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){m.call(a,function(){var e,r,n,o=t._v,i=I(t);if(i&&(e=w(function(){O?g.emit("unhandledRejection",o,t):(r=a.onunhandledrejection)?r({promise:t,reason:o}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=O||I(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},I=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){m.call(a,function(){var e;O?g.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},C=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),F(e,!0))},k=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw T("Promise can't be resolved itself");(e=U(t))?b(function(){var n={_w:r,_d:!1};try{e.call(t,c(k,n,1),c(C,n,1))}catch(t){C.call(n,t)}}):(r._v=t,r._s=1,F(r,!1))}catch(t){C.call({_w:r,_d:!1},t)}}};B||(j=function(t){d(this,j,"Promise","_h"),l(t),n.call(this);try{t(c(k,this,1),c(C,this,1))}catch(t){C.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(41)(j.prototype,{then:function(t,e){var r=A(v(this,j));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=O?g.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&F(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new n;this.promise=t,this.resolve=c(k,t,1),this.reject=c(C,t,1)},_.f=A=function(t){return t===j||t===s?new i(t):o(t)}),h(h.G+h.W+h.F*!B,{Promise:j}),r(42)(j,"Promise"),r(43)("Promise"),s=r(2).Promise,h(h.S+h.F*!B,"Promise",{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(u||!B),"Promise",{resolve:function(t){return x(u&&this===s?j:this,t)}}),h(h.S+h.F*!(B&&r(44)(function(t){j.all(t).catch(R)})),"Promise",{all:function(t){var e=this,r=A(e),n=r.resolve,o=r.reject,i=w(function(){var r=[],i=0,s=1;y(t,!1,function(t){var u=i++,a=!1;r.push(void 0),s++,e.resolve(t).then(function(t){a||(a=!0,r[u]=t,--s||n(r))},o)}),--s||n(r)});return i.e&&o(i.v),r.promise},race:function(t){var e=this,r=A(e),n=r.reject,o=w(function(){y(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(t,e,r){var n=r(2),o=r(0),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(10)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var n=r(0),o=r(2),i=r(13),s=r(16),u=r(6),a=function(t,e,r){var c,f,h,p,l=t&a.F,d=t&a.G,y=t&a.S,v=t&a.P,m=t&a.B,b=d?n:y?n[e]||(n[e]={}):(n[e]||{}).prototype,_=d?o:o[e]||(o[e]={}),w=_.prototype||(_.prototype={});for(c in d&&(r=e),r)h=((f=!l&&b&&void 0!==b[c])?b:r)[c],p=m&&f?u(h,n):v&&"function"==typeof h?u(Function.call,h):h,b&&s(b,c,h,t&a.U),_[c]!=h&&i(_,c,p),v&&w[c]!=h&&(w[c]=h)};n.core=o,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,r){t.exports=!r(5)&&!r(14)(function(){return 7!=Object.defineProperty(r(15)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(4);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var n=r(6),o=r(29),i=r(30),s=r(3),u=r(31),a=r(33),c={},f={};(e=t.exports=function(t,e,r,h,p){var l,d,y,v,m=p?function(){return t}:a(t),b=n(r,h,e?2:1),_=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(i(m)){for(l=u(t.length);l>_;_++)if((v=e?b(s(d=t[_])[0],d[1]):b(t[_]))===c||v===f)return v}else for(y=m.call(t);!(d=y.next()).done;)if((v=o(y,b,d.value,e))===c||v===f)return v}).BREAK=c,e.RETURN=f},function(t,e,r){var n=r(3);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&n(i.call(t)),e}}},function(t,e,r){var n=r(18),o=r(1)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||i[o]===t)}},function(t,e,r){var n=r(32),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(11),o=r(1)("iterator"),i=r(18);t.exports=r(2).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[n(t)]}},function(t,e,r){var n=r(3),o=r(7),i=r(1)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||void 0==(r=n(s)[i])?e:o(r)}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(0).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(0),o=r(19).set,i=n.MutationObserver||n.WebKitMutationObserver,s=n.process,u=n.Promise,a="process"==r(9)(s);t.exports=function(){var t,e,r,c=function(){var n,o;for(a&&(n=s.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(a)r=function(){s.nextTick(c)};else if(!i||n.navigator&&n.navigator.standalone)if(u&&u.resolve){var f=u.resolve(void 0);r=function(){f.then(c)}}else r=function(){o.call(n,c)};else{var h=!0,p=document.createTextNode("");new i(c).observe(p,{characterData:!0}),r=function(){p.data=h=!h}}return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){var n=r(0).navigator;t.exports=n&&n.userAgent||""},function(t,e,r){var n=r(3),o=r(4),i=r(20);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=i.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){var n=r(16);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},function(t,e,r){var n=r(8).f,o=r(17),i=r(1)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){"use strict";var n=r(0),o=r(8),i=r(5),s=r(1)("species");t.exports=function(t){var e=n[t];i&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n=r(1)("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i=[7],s=i[n]();s.next=function(){return{done:r=!0}},i[n]=function(){return s},t(i)}catch(t){}return r}},function(t,e,r){var n=r(8).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||r(5)&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};f.prototype.append=function(t,e){t=u(t),e=a(e);var r=this.map[t];this.map[t]=r?r+","+e:e},f.prototype.delete=function(t){delete this.map[u(t)]},f.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},f.prototype.set=function(t,e){this.map[u(t)]=a(e)},f.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},f.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),c(t)},f.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},f.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),c(t)},e.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},b.error=function(){var t=new b(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];b.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new b(null,{status:e,headers:{location:t}})},t.Headers=f,t.Request=v,t.Response=b,t.fetch=function(t,r){return new Promise(function(n,o){var i=new v(t,r),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:function(t){var e=new f;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;n(new b(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&e.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function f(t){this.map={},t instanceof f?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function l(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=p(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(t,e){var r=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=function(t){var e=t.toUpperCase();return i.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function m(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function b(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,r){"use strict";r.r(e);r(21),r(45);function n(t,e,r){this.name="HttpError",this.message=e||"Bad request",this.status=t||400,this.body=r,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n;var o=n;r(46);r.d(e,"initCSRFToken",function(){return h}),r.d(e,"makeRequest",function(){return p}),r.d(e,"REQUEST_METHOD",function(){return l}),r.d(e,"REQUEST_DATA_TYPE",function(){return d});var i={},s=300,u=5;function a(t,e){var r=[];if(e instanceof Array){for(var n=0;n<e.length;++n)r.push(a(t+"["+n+"]",e[n]));return r.join("&")}if(e instanceof Object){for(var o in e)r.push(a(t+"["+o+"]",e[o]));return r.join("&")}return t+"="+encodeURIComponent(e)}function c(t){var e=[];for(var r in t)e.push(a(r,t[r]));return e.join("&")}var f="";function h(t){f=t}function p(t,e,r,n,a){if(r=r||l.POST,n=n||d.TEXT,null==t)throw new Error("Please, provide the url for request");var h=t;if(!a&&function(t){return i[t]&&i[t].isErr}(h))return Promise.reject(new Error(Messages.Request.ERROR_STATE));var p={"X-Requested-With":"FetchApiRequest"};f&&r!=l.GET&&(p["X-CSRF-Token"]=f);var y={method:r.toLowerCase(),headers:p,credentials:"same-origin"};r==l.GET?""!=c(e)&&(t+=(-1==t.indexOf("?")?"?":"&")+c(e)):e instanceof FormData?y.body=e:(y.body=c(e),y.headers["Content-Type"]="application/x-www-form-urlencoded");return fetch(t,y).then(function(t){if(!t.ok){if(function(t){i[t]=i[t]||{isErr:!1,errCount:0,dropErrTimeoutId:0},clearTimeout(i[t].dropErrTimeoutId),i[t].isErr=!0,i[t].errCount+=1;var e=Math.pow(Math.min(i[t].errCount,u))/2;i[t].dropErrTimeoutId=setTimeout(function(){i[t].isErr=!1},e*s)}(h),n===d.JSON)return t.json().then(function(e){throw new o(t.status,Messages.Request.SERVER_ERROR,e)}).catch(function(e){throw e instanceof o?e:new o(t.status,Messages.Request.SERVER_ERROR)});throw new o(t.status,Messages.Request.SERVER_ERROR)}return function(t){i[t]&&(clearTimeout(i[t].dropErrTimeoutId),i[t].isErr=!1,i[t].errCount=0,i[t].dropErrTimeoutId=0)}(h),n===d.JSON?t.json():n===d.BLOB?t.blob():t.text()},function(t){})}var l={POST:"POST",GET:"GET",DELETE:"DELETE"},d={JSON:"JSON",BLOB:"BLOB",TEXT:"TEXT"}}]);

var LinkTarget={BLANK:'_blank',SELF:'_self',PARENT:'_parent',TOP:'_top'};

var SiteLocale=Base.extend({},{EN_US:'en-US',RU_RU:'ru-RU',DA_DK:'da-DK',DE_DE:'de-DE',ES_ES:'es-ES',FR_FR:'fr-FR',ZH_CN:'zh-CN',JA_JP:'ja-JP',PT_BR:'pt-BR',ID_ID:'id-ID',MN_MN:'mn-MN',IT_IT:'it-IT',NL_NL:'nl-NL',FI_FI:'fi-FI',UK_UA:'uk-UA',NO_NO:'no-NO',PL_PL:'pl-PL',AZ_AZ:'az-AZ',KK_KK:'kk-KK',RO_RO:'ro-RO',KO_KR:'ko-KR',BG_BG:'bg-BG',CS_CZ:'cs-CZ',UZ_UZ:'uz-UZ',ZH_TW:'zh-TW',EL_GR:'el-GR',});

(function($){$.toJSON=function(o)
{if(typeof(JSON)=='object'&&JSON.stringify)
return JSON.stringify(o);var type=typeof(o);if(o===null)
return"null";if(type=="undefined")
return undefined;if(type=="number"||type=="boolean")
return o+"";if(type=="string")
return $.quoteString(o);if(type=='object')
{if(typeof o.toJSON=="function")
return $.toJSON(o.toJSON());if(o.constructor===Date)
{var month=o.getUTCMonth()+1;if(month<10)month='0'+month;var day=o.getUTCDate();if(day<10)day='0'+day;var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10)hours='0'+hours;var minutes=o.getUTCMinutes();if(minutes<10)minutes='0'+minutes;var seconds=o.getUTCSeconds();if(seconds<10)seconds='0'+seconds;var milli=o.getUTCMilliseconds();if(milli<100)milli='0'+milli;if(milli<10)milli='0'+milli;return'"'+year+'-'+month+'-'+day+'T'+
hours+':'+minutes+':'+seconds+'.'+milli+'Z"';}
if(o.constructor===Array)
{var ret=[];for(var i=0;i<o.length;i++)
ret.push($.toJSON(o[i])||"null");return"["+ret.join(",")+"]";}
var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number")
name='"'+k+'"';else if(type=="string")
name=$.quoteString(k);else
continue;if(typeof o[k]=="function")
continue;var val=$.toJSON(o[k]);pairs.push(name+":"+val);}
return"{"+pairs.join(", ")+"}";}};$.evalJSON=function(src)
{if(typeof(JSON)=='object'&&JSON.parse)
return JSON.parse(src);return eval("("+src+")");};$.secureEvalJSON=function(src)
{if(typeof(JSON)=='object'&&JSON.parse)
return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,'@');filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']');filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered))
return eval("("+src+")");else
throw new SyntaxError("Error parsing JSON, source is not valid.");};$.quoteString=function(string)
{if(string.match(_escapeable))
{return'"'+string.replace(_escapeable,function(a)
{var c=_meta[a];if(typeof c==='string')return c;c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+string+'"';};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};})(jQuery);
var MessageFormat=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/js/dist/",r(r.s=2)}([function(t,e,r){var n=r(3),o=r(10).parse;function i(t){this.mf=t,this.lc=null,this.locales={},this.runtime={},this.formatters={}}t.exports=i,i.propname=function(t,e){if(/^[A-Z_$][0-9A-Z_$]*$/i.test(t)&&["break","continue","delete","else","for","function","if","in","new","return","this","typeof","var","void","while","with","case","catch","default","do","finally","instanceof","switch","throw","try"].indexOf(t)<0)return e?e+"."+t:t;var r=JSON.stringify(t);return e?e+"["+r+"]":r},i.funcname=function(t){var e=t.trim().replace(/\W+/g,"_");return n.check(e,"es2015",!0)||/^\d/.test(e)?"_"+e:e},i.bidiMarkText=function(t,e){var r=JSON.stringify(function(t){return new RegExp("^"+["ar","ckb","fa","he","ks($|[^bfh])","lrc","mzn","pa-Arab","ps","ug","ur","uz-Arab","yi"].join("|^")).test(t)}(e)?"‏":"‎");return r+" + "+t+" + "+r},i.prototype.cases=function(t,e){var r="select"===t.type||!this.mf.hasCustomPluralFuncs,n=t.cases.map(function(t){"other"===t.key&&(r=!1);var n=t.tokens.map(function(t){return this.token(t,e)},this);return i.propname(t.key)+": "+(n.join(" + ")||'""')},this);if(r)throw new Error("No 'other' form found in "+JSON.stringify(t));return"{ "+n.join(", ")+" }"},i.prototype.token=function(t,e){if("string"==typeof t)return JSON.stringify(t);var r,n=[i.propname(t.arg,"d")];switch(t.type){case"argument":return this.mf.bidiSupport?i.bidiMarkText(n[0],this.lc):n[0];case"select":r="select",n.push(this.cases(t,this.mf.strictNumberSign?null:e)),this.runtime.select=!0;break;case"selectordinal":r="plural",n.push(0,i.funcname(this.lc),this.cases(t,t),1),this.locales[this.lc]=!0,this.runtime.plural=!0;break;case"plural":r="plural",n.push(t.offset||0,i.funcname(this.lc),this.cases(t,t)),this.locales[this.lc]=!0,this.runtime.plural=!0;break;case"function":if(!(t.key in this.mf.fmt)&&t.key in this.mf.constructor.formatters){var o=this.mf.constructor.formatters[t.key];this.mf.fmt[t.key]=o(this.mf)}if(!this.mf.fmt[t.key])throw new Error("Formatting function "+JSON.stringify(t.key)+" not found!");n.push(JSON.stringify(this.lc)),"string"==typeof t.param&&n.push(JSON.stringify(t.param.trim())),r=i.propname(t.key,"fmt"),this.formatters[t.key]=!0;break;case"octothorpe":if(!e)return'"#"';r="number",n=[i.propname(e.arg,"d"),JSON.stringify(e.arg)],e.offset&&n.push(e.offset),this.runtime.number=!0}if(!r)throw new Error("Parser error for token "+JSON.stringify(t));return r+"("+n.join(", ")+")"},i.prototype.compile=function(t,e,r){if("object"!=typeof t){this.lc=e;var n=r[e]||{cardinal:[],ordinal:[]};return n.strictNumberSign=!!this.mf.strictNumberSign,"function(d) { return "+(o(t,n).map(function(t){return this.token(t)},this).join(" + ")||'""')+"; }"}var i={};for(var u in t){var c=r.hasOwnProperty(u)?u:e;i[u]=this.compile(t[u],c,r)}return i}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(0),o=r(11),i=r(16),u=r(19);function c(t){if(this.pluralFuncs={},"string"==typeof t)this.pluralFuncs[t]=i.get(t),this.defaultLocale=t;else if(Array.isArray(t))t.forEach(function(t){this.pluralFuncs[t]=i.get(t)},this),this.defaultLocale=t[0];else{for(var e in t)if(t.hasOwnProperty(e)){if("function"!=typeof t[e])throw new Error("Expected function value for locale "+JSON.stringify(e));this.pluralFuncs[e]=t[e],this.defaultLocale||(this.defaultLocale=e)}this.defaultLocale?this.hasCustomPluralFuncs=!0:this.defaultLocale=c.defaultLocale}this.fmt={},this.runtime=new u(this)}c.defaultLocale="en",c.escape=function(t,e){var r=e?"[#{}]":"[{}]";return String(t).replace(new RegExp(r,"g"),"'$&'")},c.formatters=o,c.prototype.addFormatters=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.fmt[e]=t[e]);return this},c.prototype.disablePluralKeyChecks=function(){for(var t in this.noPluralKeyChecks=!0,this.pluralFuncs)this.pluralFuncs.hasOwnProperty(t)&&(this.pluralFuncs[t].cardinal=[],this.pluralFuncs[t].ordinal=[]);return this},c.prototype.setBiDiSupport=function(t){return this.bidiSupport=!!t||void 0===t,this},c.prototype.setStrictNumberSign=function(t){return this.strictNumberSign=!!t||void 0===t,this.runtime.setStrictNumber(this.strictNumberSign),this},c.prototype.compile=function(t,e){var r;if(0==Object.keys(this.pluralFuncs).length)e||(e=this.defaultLocale),r=i.getAll(this.noPluralKeyChecks);else if(e){if((r={})[e]=this.pluralFuncs[e],!r[e])throw new Error("Locale "+JSON.stringify(e)+" not found in "+JSON.stringify(this.pluralFuncs)+"!")}else r=this.pluralFuncs,e=this.defaultLocale;var o=new n(this),u=o.compile(t,e,r);if("object"!=typeof t){var c=new Function("number, plural, select, fmt",n.funcname(e),"return "+u),a=this.runtime;return c(a.number,a.plural,a.select,this.fmt,r[e])}var f=this.runtime.toString(r,o)+"\n",s=function t(e,r){if(r||(r=0),"object"!=typeof e)return e;for(var o=[],i="",u=0;u<r;++u)i+="  ";for(var c in e)o.push("\n"+i+"  "+n.propname(c)+": "+t(e[c],r+1));return"{"+o.join(",")+"\n"+i+"}"}(u),l=new Function(f+"return "+s)();if(l.hasOwnProperty("toString"))throw new Error("The top-level message key `toString` is reserved");return l.toString=function(t){return t&&"export default"!==t?t.indexOf(".")>-1?f+t+" = "+s:f+["(function (root, G) {",'  if (typeof define === "function" && define.amd) { define(G); }','  else if (typeof exports === "object") { module.exports = G; }',"  else { "+n.propname(t,"root")+" = G; }","})(this, "+s+");"].join("\n"):f+"export default "+s},l},t.exports=c},function(t,e,r){t.exports=r(4)},function(t,e,r){var n=r(5),o={es3:3,es5:5,es2015:6,es7:7,es6:6,default:5,next:6},i=e.KEYWORDS={};function u(){return Array.prototype.map.call(arguments,function(t){return"string"==typeof t?t:Object.keys(t).join(" ")}).join(" ").split(/\s+/).reduce(function(t,e){return t[e]=!0,t},{})}e.check=function(t,e,r){var u=o[e=e||o.default]||e;return r&&u>=5&&(u+="-strict"),n(i[u],"Unknown dialect"),i[u].hasOwnProperty(t)},i[3]=u("break    else       new     var","case     finally    return  void","catch    for        switch  while","continue function   this    with","default  if         throw","delete   in         try","do       instanceof typeof","abstract enum       int        short","boolean  export     interface  static","byte     extends    long       super","char     final      native     synchronized","class    float      package    throws","const    goto       private    transient","debugger implements protected  volatile","double   import     public","null true false"),i[5]=u("break    do       instanceof typeof","case     else     new        var","catch    finally  return     void","continue for      switch     while","debugger function this       with","default  if       throw","delete   in       try","class enum extends super","const export import","null true false"),i["5-strict"]=u(i[5],"implements let     private   public yield","interface  package protected static"),i[6]=u("break    do       in         typeof","case     else     instanceof var","catch    export   new        void","class    extends  return     while","const    finally  super      with","continue for      switch     yield","debugger function this","default  if       throw","delete   import   try","enum await","null true false"),i["6-strict"]=u(i[6],"let static","implements package protected","interface private public")},function(t,e,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function n(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var i=r(6),u=Object.prototype.hasOwnProperty,c=Array.prototype.slice,a="foo"===function(){}.name;function f(t){return Object.prototype.toString.call(t)}function s(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var l=t.exports=y,h=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(i.isFunction(t)){if(a)return t.name;var e=t.toString().match(h);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(a||!i.isFunction(t))return i.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,r,n,o){throw new l.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:o})}function y(t,e){t||g(t,!0,e,"==",l.ok)}function w(t,e,r,u){if(t===e)return!0;if(o(t)&&o(e))return 0===n(t,e);if(i.isDate(t)&&i.isDate(e))return t.getTime()===e.getTime();if(i.isRegExp(t)&&i.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(s(t)&&s(e)&&f(t)===f(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var a=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===u.expected.indexOf(e)||(u.actual.push(t),u.expected.push(e),function(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(i.isPrimitive(t)||i.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=v(t),u=v(e);if(o&&!u||!o&&u)return!1;if(o)return t=c.call(t),e=c.call(e),w(t,e,r);var a,f,s=x(t),l=x(e);if(s.length!==l.length)return!1;for(s.sort(),l.sort(),f=s.length-1;f>=0;f--)if(s[f]!==l[f])return!1;for(f=s.length-1;f>=0;f--)if(a=s[f],!w(t[a],e[a],r,n))return!1;return!0}(t,e,r,u))}return r?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t,e,r,n){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!o&&g(o,r,"Missing expected exception"+n);var u="string"==typeof n,c=!t&&i.isError(o),a=!t&&o&&!r;if((c&&u&&b(o,r)||a)&&g(o,r,"Got unwanted exception"+n),t&&o&&r&&!b(o,r)||!t&&o)throw o}l.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return d(m(t.actual),128)+" "+t.operator+" "+d(m(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,o=p(e),i=n.indexOf("\n"+o);if(i>=0){var u=n.indexOf("\n",i+1);n=n.substring(u+1)}this.stack=n}}},i.inherits(l.AssertionError,Error),l.fail=g,l.ok=y,l.equal=function(t,e,r){t!=e&&g(t,e,r,"==",l.equal)},l.notEqual=function(t,e,r){t==e&&g(t,e,r,"!=",l.notEqual)},l.deepEqual=function(t,e,r){w(t,e,!1)||g(t,e,r,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(t,e,r){w(t,e,!0)||g(t,e,r,"deepStrictEqual",l.deepStrictEqual)},l.notDeepEqual=function(t,e,r){w(t,e,!1)&&g(t,e,r,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=function t(e,r,n){w(e,r,!0)&&g(e,r,n,"notDeepStrictEqual",t)},l.strictEqual=function(t,e,r){t!==e&&g(t,e,r,"===",l.strictEqual)},l.notStrictEqual=function(t,e,r){t===e&&g(t,e,r,"!==",l.notStrictEqual)},l.throws=function(t,e,r){S(!0,t,e,r)},l.doesNotThrow=function(t,e,r){S(!1,t,e,r)},l.ifError=function(t){if(t)throw t};var x=Object.keys||function(t){var e=[];for(var r in t)u.call(t,r)&&e.push(r);return e}}).call(this,r(1))},function(t,e,r){(function(t,n){var o=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(c(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,u=String(t).replace(o,function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),a=n[r];r<i;a=n[++r])m(a)||!b(a)?u+=" "+a:u+=" "+c(a);return u},e.deprecate=function(r,o){if(w(t.process))return function(){return e.deprecate(r,o).apply(this,arguments)};if(!0===n.noDeprecation)return r;var i=!1;return function(){if(!i){if(n.throwDeprecation)throw new Error(o);n.traceDeprecation?console.trace(o):console.error(o),i=!0}return r.apply(this,arguments)}};var i,u={};function c(t,r){var n={seen:[],stylize:f};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),s(n,t,n.depth)}function a(t,e){var r=c.styles[e];return r?"["+c.colors[r][0]+"m"+t+"["+c.colors[r][1]+"m":t}function f(t,e){return t}function s(t,r,n){if(t.customInspect&&r&&k(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return y(o)||(o=s(t,o,n)),o}var i=function(t,e){if(w(e))return t.stylize("undefined","undefined");if(y(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(g(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,r);if(i)return i;var u=Object.keys(r),c=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(r)),x(r)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return l(r);if(0===u.length){if(k(r)){var a=r.name?": "+r.name:"";return t.stylize("[Function"+a+"]","special")}if(v(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return t.stylize(Date.prototype.toString.call(r),"date");if(x(r))return l(r)}var f,b="",j=!1,E=["{","}"];(p(r)&&(j=!0,E=["[","]"]),k(r))&&(b=" [Function"+(r.name?": "+r.name:"")+"]");return v(r)&&(b=" "+RegExp.prototype.toString.call(r)),S(r)&&(b=" "+Date.prototype.toUTCString.call(r)),x(r)&&(b=" "+l(r)),0!==u.length||j&&0!=r.length?n<0?v(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),f=j?function(t,e,r,n,o){for(var i=[],u=0,c=e.length;u<c;++u)O(e,String(u))?i.push(h(t,e,r,n,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(t,e,r,n,o,!0))}),i}(t,r,n,c,u):u.map(function(e){return h(t,r,n,c,e,j)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(f,b,E)):E[0]+b+E[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,o,i){var u,c,a;if((a=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?c=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(c=t.stylize("[Setter]","special")),O(n,o)||(u="["+o+"]"),c||(t.seen.indexOf(a.value)<0?(c=m(r)?s(t,a.value,null):s(t,a.value,r-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+c.split("\n").map(function(t){return"   "+t}).join("\n")):c=t.stylize("[Circular]","special")),w(u)){if(i&&o.match(/^\d+$/))return c;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+c}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function w(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===j(t)}function b(t){return"object"==typeof t&&null!==t}function S(t){return b(t)&&"[object Date]"===j(t)}function x(t){return b(t)&&("[object Error]"===j(t)||t instanceof Error)}function k(t){return"function"==typeof t}function j(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(w(i)&&(i=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!u[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var r=n.pid;u[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else u[t]=function(){};return u[t]},e.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=w,e.isRegExp=v,e.isObject=b,e.isDate=S,e.isError=x,e.isFunction=k,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(8);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=r(9),e._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,r(1),r(7))},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var a,f=[],s=!1,l=-1;function h(){s&&a&&(s=!1,a.length?f=a.concat(f):l=-1,f.length&&p())}function p(){if(!s){var t=c(h);s=!0;for(var e=f.length;e;){for(a=f,f=[];++l<e;)a&&a[l].run();l=-1,e=f.length}a=null,s=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new d(t,e)),1!==f.length||s||c(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";function n(t,e,r,o){this.message=t,this.expected=e,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(n,Error),n.buildMessage=function(t,e){var r={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function u(t){return r[t.type](t)}return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=u(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:n,parse:function(t,e){e=void 0!==e?e:{};var r,o={},i={start:Et},u=Et,c="#",a=vt("#",!1),f=function(){return Mt},s=function(){return{type:"octothorpe"}},l=function(t){return t.join("")},h="{",p=vt("{",!1),d="}",m=vt("}",!1),g=function(t){return{type:"argument",arg:t}},y=",",w=vt(",",!1),v="select",b=vt("select",!1),S=function(t,r){return e.strictNumberSign&&(Mt=!1),r},x=function(t,e){return{type:"select",arg:t,cases:e}},k="plural",j=vt("plural",!1),E="selectordinal",A=vt("selectordinal",!1),O=function(t,e){return Mt=!0,e},N=function(t,r,n,o){var i=("selectordinal"===r?e.ordinal:e.cardinal)||["zero","one","two","few","many","other"];return i&&i.length&&o.forEach(function(e){if(isNaN(e.key)&&i.indexOf(e.key)<0)throw new Error("Invalid key `"+e.key+"` for argument `"+t+"`. Valid "+r+" keys for this locale are `"+i.join("`, `")+"`, and explicit keys like `=0`.")}),Mt=!1,{type:r,arg:t,offset:n||0,cases:o}},F=function(t,e,r){return{type:"function",arg:t,key:e,param:r}},z=/^[^\t-\r \x85\u200E\u200F\u2028\u2029!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,C=bt([["\t","\r"]," ","","‎","‏","\u2028","\u2029",["!","/"],[":","@"],["[","^"],"`",["{","~"],["¡","§"],"©","«","¬","®","°","±","¶","»","¿","×","÷",["‐","‧"],["‰","‾"],["⁁","⁓"],["⁕","⁞"],["←","⑟"],["─","❵"],["➔","⯿"],["⸀","⹿"],["、","〃"],["〈","〠"],"〰","﴾","﴿","﹅","﹆"],!0,!1),T=function(t,e){return{key:t,tokens:e}},D=function(t){return t},P="offset",q=vt("offset",!1),B=":",J=vt(":",!1),M=function(t){return t},R="=",_=vt("=",!1),L=/^[^}]/,U=bt(["}"],!0,!1),$="''",G=vt("''",!1),I=function(){return"'"},H=/^[^']/,Z=bt(["'"],!0,!1),K="'{",V=vt("'{",!1),Y="'",W=vt("'",!1),Q=function(t){return"{"+t.join("")},X="'}",tt=vt("'}",!1),et=function(t){return"}"+t.join("")},rt="'#",nt=vt("'#",!1),ot=function(t){return"#"+t.join("")},it=function(t){return t[0]},ut=function(t){return!Mt},ct=function(t){return t},at=/^[^{}#\0-\x08\x0E-\x1F\x7F]/,ft=bt(["{","}","#",["\0","\b"],["",""],""],!0,!1),st=/^[0-9]/,lt=bt([["0","9"]],!1,!1),ht=/^[\t-\r \x85\u200E\u200F\u2028\u2029]/,pt=bt([["\t","\r"]," ","","‎","‏","\u2028","\u2029"],!1,!1),dt=0,mt=[{line:1,column:1}],gt=0,yt=[],wt=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');u=i[e.startRule]}function vt(t,e){return{type:"literal",text:t,ignoreCase:e}}function bt(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function St(e){var r,n=mt[e];if(n)return n;for(r=e-1;!mt[r];)r--;for(n={line:(n=mt[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return mt[e]=n,n}function xt(t,e){var r=St(t),n=St(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function kt(t){dt<gt||(dt>gt&&(gt=dt,yt=[]),yt.push(t))}function jt(t,e,r){return new n(n.buildMessage(t,e),t,e,r)}function Et(){var t,e;for(t=[],e=At();e!==o;)t.push(e),e=At();return t}function At(){var e,r,n;if((e=function(){var e,r,n,i;return e=dt,123===t.charCodeAt(dt)?(r=h,dt++):(r=o,0===wt&&kt(p)),r!==o&&Jt()!==o&&(n=Ot())!==o&&Jt()!==o?(125===t.charCodeAt(dt)?(i=d,dt++):(i=o,0===wt&&kt(m)),i!==o?(r=g(n),e=r):(dt=e,e=o)):(dt=e,e=o),e}())===o&&(e=function(){var e,r,n,i,u,c,a,f,s;if(e=dt,123===t.charCodeAt(dt)?(r=h,dt++):(r=o,0===wt&&kt(p)),r!==o)if(Jt()!==o)if((n=Ot())!==o)if(Jt()!==o)if(44===t.charCodeAt(dt)?(i=y,dt++):(i=o,0===wt&&kt(w)),i!==o)if(Jt()!==o)if(dt,t.substr(dt,6)===v?(u=v,dt+=6):(u=o,0===wt&&kt(b)),u!==o&&(u=S(n,u)),u!==o)if((u=Jt())!==o)if(44===t.charCodeAt(dt)?(c=y,dt++):(c=o,0===wt&&kt(w)),c!==o)if(Jt()!==o){if(a=[],(f=Nt())!==o)for(;f!==o;)a.push(f),f=Nt();else a=o;a!==o&&(f=Jt())!==o?(125===t.charCodeAt(dt)?(s=d,dt++):(s=o,0===wt&&kt(m)),s!==o?(r=x(n,a),e=r):(dt=e,e=o)):(dt=e,e=o)}else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;return e}())===o&&(e=function(){var e,r,n,i,u,c,a,f,s,l,g;if(e=dt,123===t.charCodeAt(dt)?(r=h,dt++):(r=o,0===wt&&kt(p)),r!==o)if(Jt()!==o)if((n=Ot())!==o)if(Jt()!==o)if(44===t.charCodeAt(dt)?(i=y,dt++):(i=o,0===wt&&kt(w)),i!==o)if(Jt()!==o)if(u=dt,t.substr(dt,6)===k?(c=k,dt+=6):(c=o,0===wt&&kt(j)),c===o&&(t.substr(dt,13)===E?(c=E,dt+=13):(c=o,0===wt&&kt(A))),c!==o&&(c=O(n,c)),(u=c)!==o)if((c=Jt())!==o)if(44===t.charCodeAt(dt)?(a=y,dt++):(a=o,0===wt&&kt(w)),a!==o)if(Jt()!==o)if((f=function(){var e,r,n,i,u;return e=dt,(r=Jt())!==o?(t.substr(dt,6)===P?(n=P,dt+=6):(n=o,0===wt&&kt(q)),n!==o&&Jt()!==o?(58===t.charCodeAt(dt)?(i=B,dt++):(i=o,0===wt&&kt(J)),i!==o&&Jt()!==o&&(u=Bt())!==o&&Jt()!==o?(r=M(u),e=r):(dt=e,e=o)):(dt=e,e=o)):(dt=e,e=o),e}())===o&&(f=null),f!==o){if(s=[],(l=Ft())!==o)for(;l!==o;)s.push(l),l=Ft();else s=o;s!==o&&(l=Jt())!==o?(125===t.charCodeAt(dt)?(g=d,dt++):(g=o,0===wt&&kt(m)),g!==o?(r=N(n,u,f,s),e=r):(dt=e,e=o)):(dt=e,e=o)}else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;else dt=e,e=o;return e}())===o&&(e=function(){var e,r,n,i,u,c,a,f;return e=dt,123===t.charCodeAt(dt)?(r=h,dt++):(r=o,0===wt&&kt(p)),r!==o&&Jt()!==o&&(n=Ot())!==o&&Jt()!==o?(44===t.charCodeAt(dt)?(i=y,dt++):(i=o,0===wt&&kt(w)),i!==o&&Jt()!==o?(u=dt,(c=Ot())!==o&&(c=S(n,c)),(u=c)!==o&&(c=Jt())!==o?((a=function(){var e,r,n,i,u;if(e=dt,(r=Jt())!==o)if(44===t.charCodeAt(dt)?(n=y,dt++):(n=o,0===wt&&kt(w)),n!==o){if(i=[],(u=Ct())!==o)for(;u!==o;)i.push(u),u=Ct();else i=o;i!==o?(r=l(i),e=r):(dt=e,e=o)}else dt=e,e=o;else dt=e,e=o;return e}())===o&&(a=null),a!==o?(125===t.charCodeAt(dt)?(f=d,dt++):(f=o,0===wt&&kt(m)),f!==o?(r=F(n,u,a),e=r):(dt=e,e=o)):(dt=e,e=o)):(dt=e,e=o)):(dt=e,e=o)):(dt=e,e=o),e}())===o&&(e=dt,35===t.charCodeAt(dt)?(r=c,dt++):(r=o,0===wt&&kt(a)),r!==o&&(n=(n=f())?void 0:o)!==o?e=r=s():(dt=e,e=o),e===o)){if(e=dt,r=[],(n=qt())!==o)for(;n!==o;)r.push(n),n=qt();else r=o;r!==o&&(r=l(r)),e=r}return e}function Ot(){var e,r,n;if(e=dt,r=[],z.test(t.charAt(dt))?(n=t.charAt(dt),dt++):(n=o,0===wt&&kt(C)),n!==o)for(;n!==o;)r.push(n),z.test(t.charAt(dt))?(n=t.charAt(dt),dt++):(n=o,0===wt&&kt(C));else r=o;return e=r!==o?t.substring(e,dt):r}function Nt(){var t,e,r;return t=dt,Jt()!==o&&(e=Ot())!==o&&Jt()!==o&&(r=zt())!==o?t=T(e,r):(dt=t,t=o),t}function Ft(){var e,r,n;return e=dt,Jt()!==o&&(r=function(){var e,r,n;return(e=Ot())===o&&(e=dt,61===t.charCodeAt(dt)?(r=R,dt++):(r=o,0===wt&&kt(_)),r!==o&&(n=Bt())!==o?(r=M(n),e=r):(dt=e,e=o)),e}())!==o&&Jt()!==o&&(n=zt())!==o?e=T(r,n):(dt=e,e=o),e}function zt(){var e,r,n,i,u,c;if(e=dt,123===t.charCodeAt(dt)?(r=h,dt++):(r=o,0===wt&&kt(p)),r!==o)if(n=dt,(i=Jt())!==o?(u=dt,wt++,123===t.charCodeAt(dt)?(c=h,dt++):(c=o,0===wt&&kt(p)),wt--,c!==o?(dt=u,u=void 0):u=o,u!==o?n=i=[i,u]:(dt=n,n=o)):(dt=n,n=o),n===o&&(n=null),n!==o){for(i=[],u=At();u!==o;)i.push(u),u=At();i!==o&&(u=Jt())!==o?(125===t.charCodeAt(dt)?(c=d,dt++):(c=o,0===wt&&kt(m)),c!==o?e=r=D(i):(dt=e,e=o)):(dt=e,e=o)}else dt=e,e=o;else dt=e,e=o;return e}function Ct(){var e;return(e=Tt())===o&&(e=Pt())===o&&(L.test(t.charAt(dt))?(e=t.charAt(dt),dt++):(e=o,0===wt&&kt(U))),e}function Tt(){var e;return dt,t.substr(dt,2)===$?(e=$,dt+=2):(e=o,0===wt&&kt(G)),e!==o&&(e=I()),e}function Dt(){var e,r,n;if((e=Tt())===o){if(e=dt,r=[],H.test(t.charAt(dt))?(n=t.charAt(dt),dt++):(n=o,0===wt&&kt(Z)),n!==o)for(;n!==o;)r.push(n),H.test(t.charAt(dt))?(n=t.charAt(dt),dt++):(n=o,0===wt&&kt(Z));else r=o;r!==o&&(r=l(r)),e=r}return e}function Pt(){var e,r,n,i;if(e=dt,t.substr(dt,2)===K?(r=K,dt+=2):(r=o,0===wt&&kt(V)),r!==o){for(n=[],i=Dt();i!==o;)n.push(i),i=Dt();n!==o?(39===t.charCodeAt(dt)?(i=Y,dt++):(i=o,0===wt&&kt(W)),i!==o?e=r=Q(n):(dt=e,e=o)):(dt=e,e=o)}else dt=e,e=o;if(e===o)if(e=dt,t.substr(dt,2)===X?(r=X,dt+=2):(r=o,0===wt&&kt(tt)),r!==o){for(n=[],i=Dt();i!==o;)n.push(i),i=Dt();n!==o?(39===t.charCodeAt(dt)?(i=Y,dt++):(i=o,0===wt&&kt(W)),i!==o?e=r=et(n):(dt=e,e=o)):(dt=e,e=o)}else dt=e,e=o;return e}function qt(){var e,r;return(e=Tt())===o&&(e=function(){var e,r,n,i,u,c;if((e=Pt())===o){if(e=dt,r=dt,n=dt,t.substr(dt,2)===rt?(i=rt,dt+=2):(i=o,0===wt&&kt(nt)),i!==o){for(u=[],c=Dt();c!==o;)u.push(c),c=Dt();u!==o?(39===t.charCodeAt(dt)?(c=Y,dt++):(c=o,0===wt&&kt(W)),c!==o?n=i=ot(u):(dt=n,n=o)):(dt=n,n=o)}else dt=n,n=o;n!==o&&(i=(i=f())?void 0:o)!==o?r=n=[n,i]:(dt=r,r=o),r!==o&&(r=it(r)),(e=r)===o&&(39===t.charCodeAt(dt)?(e=Y,dt++):(e=o,0===wt&&kt(W)))}return e}())===o&&(e=dt,35===t.charCodeAt(dt)?(r=c,dt++):(r=o,0===wt&&kt(a)),r!==o&&(ut(r)?void 0:o)!==o?e=r=ct(r):(dt=e,e=o),e===o&&(at.test(t.charAt(dt))?(e=t.charAt(dt),dt++):(e=o,0===wt&&kt(ft)))),e}function Bt(){var e,r,n;if(e=dt,r=[],st.test(t.charAt(dt))?(n=t.charAt(dt),dt++):(n=o,0===wt&&kt(lt)),n!==o)for(;n!==o;)r.push(n),st.test(t.charAt(dt))?(n=t.charAt(dt),dt++):(n=o,0===wt&&kt(lt));else r=o;return e=r!==o?t.substring(e,dt):r}function Jt(){var e,r,n;for(e=dt,r=[],ht.test(t.charAt(dt))?(n=t.charAt(dt),dt++):(n=o,0===wt&&kt(pt));n!==o;)r.push(n),ht.test(t.charAt(dt))?(n=t.charAt(dt),dt++):(n=o,0===wt&&kt(pt));return e=r!==o?t.substring(e,dt):r}var Mt=!1;if((r=u())!==o&&dt===t.length)return r;throw r!==o&&dt<t.length&&kt({type:"end"}),jt(yt,gt<t.length?t.charAt(gt):null,gt<t.length?xt(gt,gt+1):xt(gt,gt))}}},function(t,e,r){t.exports={date:r(12),duration:r(13),number:r(14),time:r(15)}},function(t,e){function r(t,e,r){var n={day:"numeric",month:"short",year:"numeric"};switch(r){case"full":n.weekday="long";case"long":n.month="long";break;case"short":n.month="numeric"}return new Date(t).toLocaleDateString(e,n)}t.exports=function(){return r}},function(t,e){function r(t){if(!isFinite(t))return String(t);var e="";t<0?(e="-",t=Math.abs(t)):t=Number(t);var r=t%60,n=[Math.round(r)===r?r:r.toFixed(3)];return t<60?n.unshift(0):(t=Math.round((t-n[0])/60),n.unshift(t%60),t>=60&&(t=Math.round((t-n[0])/60),n.unshift(t))),e+n.shift()+":"+n.map(function(t){return t<10?"0"+String(t):String(t)}).join(":")}t.exports=function(){return r}},function(t,e){t.exports=function(t){var e=function(t,e,r){var n=r&&r.split(":")||[],o={integer:{maximumFractionDigits:0},percent:{style:"percent"},currency:{style:"currency",currency:n[1]&&n[1].trim()||CURRENCY,minimumFractionDigits:2,maximumFractionDigits:2}};return new Intl.NumberFormat(e,o[n[0]]||{}).format(t)}.toString().replace("CURRENCY",JSON.stringify(t.currency||"USD")).match(/\(([^)]*)\)[^{]*{([\s\S]*)}/);return new Function(e[1],e[2])}},function(t,e){function r(t,e,r){var n={second:"numeric",minute:"numeric",hour:"numeric"};switch(r){case"full":case"long":n.timeZoneName="short";break;case"short":delete n.second}return new Date(t).toLocaleTimeString(e,n)}t.exports=function(){return r}},function(t,e,r){var n=r(17),o=r(18);function i(t,e,r){var o=function(){return e.apply(this,arguments)};if(o.toString=function(){return e.toString()},r)o.cardinal=[],o.ordinal=[];else{var i=n[t]||{};o.cardinal=i.cardinal,o.ordinal=i.ordinal}return o}t.exports={get:function(t,e){for(var r=t;r;r=r.replace(/[-_]?[^-_]*$/,"")){var n=o[r];if(n)return i(r,n,e)}throw new Error("Localisation function not found for locale "+JSON.stringify(t))},getAll:function(t){return Object.keys(o).reduce(function(e,r){return e[r]=i(r,o[r],t),e},{})}}},function(t,e,r){var n,o,i=[{cardinal:["other"],ordinal:["other"]},{cardinal:["one","other"],ordinal:["other"]},{cardinal:["one","other"],ordinal:["one","other"]},{cardinal:["one","two","other"],ordinal:["other"]}];void 0===(o="function"==typeof(n={af:i[1],ak:i[1],am:i[1],ar:{cardinal:["zero","one","two","few","many","other"],ordinal:["other"]},ars:{cardinal:["zero","one","two","few","many","other"],ordinal:["other"]},as:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},asa:i[1],ast:i[1],az:{cardinal:["one","other"],ordinal:["one","few","many","other"]},be:{cardinal:["one","few","many","other"],ordinal:["few","other"]},bem:i[1],bez:i[1],bg:i[1],bh:i[1],bm:i[0],bn:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},bo:i[0],br:{cardinal:["one","two","few","many","other"],ordinal:["other"]},brx:i[1],bs:{cardinal:["one","few","other"],ordinal:["other"]},ca:{cardinal:["one","other"],ordinal:["one","two","few","other"]},ce:i[1],cgg:i[1],chr:i[1],ckb:i[1],cs:{cardinal:["one","few","many","other"],ordinal:["other"]},cy:{cardinal:["zero","one","two","few","many","other"],ordinal:["zero","one","two","few","many","other"]},da:i[1],de:i[1],dsb:{cardinal:["one","two","few","other"],ordinal:["other"]},dv:i[1],dz:i[0],ee:i[1],el:i[1],en:{cardinal:["one","other"],ordinal:["one","two","few","other"]},eo:i[1],es:i[1],et:i[1],eu:i[1],fa:i[1],ff:i[1],fi:i[1],fil:i[2],fo:i[1],fr:i[2],fur:i[1],fy:i[1],ga:{cardinal:["one","two","few","many","other"],ordinal:["one","other"]},gd:{cardinal:["one","two","few","other"],ordinal:["one","two","few","other"]},gl:i[1],gsw:i[1],gu:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},guw:i[1],gv:{cardinal:["one","two","few","many","other"],ordinal:["other"]},ha:i[1],haw:i[1],he:{cardinal:["one","two","many","other"],ordinal:["other"]},hi:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},hr:{cardinal:["one","few","other"],ordinal:["other"]},hsb:{cardinal:["one","two","few","other"],ordinal:["other"]},hu:i[2],hy:i[2],ia:i[1],id:i[0],ig:i[0],ii:i[0],in:i[0],io:i[1],is:i[1],it:{cardinal:["one","other"],ordinal:["many","other"]},iu:i[3],iw:{cardinal:["one","two","many","other"],ordinal:["other"]},ja:i[0],jbo:i[0],jgo:i[1],ji:i[1],jmc:i[1],jv:i[0],jw:i[0],ka:{cardinal:["one","other"],ordinal:["one","many","other"]},kab:i[1],kaj:i[1],kcg:i[1],kde:i[0],kea:i[0],kk:{cardinal:["one","other"],ordinal:["many","other"]},kkj:i[1],kl:i[1],km:i[0],kn:i[1],ko:i[0],ks:i[1],ksb:i[1],ksh:{cardinal:["zero","one","other"],ordinal:["other"]},ku:i[1],kw:i[3],ky:i[1],lag:{cardinal:["zero","one","other"],ordinal:["other"]},lb:i[1],lg:i[1],lkt:i[0],ln:i[1],lo:{cardinal:["other"],ordinal:["one","other"]},lt:{cardinal:["one","few","many","other"],ordinal:["other"]},lv:{cardinal:["zero","one","other"],ordinal:["other"]},mas:i[1],mg:i[1],mgo:i[1],mk:{cardinal:["one","other"],ordinal:["one","two","many","other"]},ml:i[1],mn:i[1],mo:{cardinal:["one","few","other"],ordinal:["one","other"]},mr:{cardinal:["one","other"],ordinal:["one","two","few","other"]},ms:{cardinal:["other"],ordinal:["one","other"]},mt:{cardinal:["one","few","many","other"],ordinal:["other"]},my:i[0],nah:i[1],naq:i[3],nb:i[1],nd:i[1],ne:i[2],nl:i[1],nn:i[1],nnh:i[1],no:i[1],nqo:i[0],nr:i[1],nso:i[1],ny:i[1],nyn:i[1],om:i[1],or:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},os:i[1],pa:i[1],pap:i[1],pl:{cardinal:["one","few","many","other"],ordinal:["other"]},prg:{cardinal:["zero","one","other"],ordinal:["other"]},ps:i[1],pt:i[1],"pt-PT":i[1],rm:i[1],ro:{cardinal:["one","few","other"],ordinal:["one","other"]},rof:i[1],root:i[0],ru:{cardinal:["one","few","many","other"],ordinal:["other"]},rwk:i[1],sah:i[0],saq:i[1],sc:{cardinal:["one","other"],ordinal:["many","other"]},scn:{cardinal:["one","other"],ordinal:["many","other"]},sd:i[1],sdh:i[1],se:i[3],seh:i[1],ses:i[0],sg:i[0],sh:{cardinal:["one","few","other"],ordinal:["other"]},shi:{cardinal:["one","few","other"],ordinal:["other"]},si:i[1],sk:{cardinal:["one","few","many","other"],ordinal:["other"]},sl:{cardinal:["one","two","few","other"],ordinal:["other"]},sma:i[3],smi:i[3],smj:i[3],smn:i[3],sms:i[3],sn:i[1],so:i[1],sq:{cardinal:["one","other"],ordinal:["one","many","other"]},sr:{cardinal:["one","few","other"],ordinal:["other"]},ss:i[1],ssy:i[1],st:i[1],sv:i[2],sw:i[1],syr:i[1],ta:i[1],te:i[1],teo:i[1],th:i[0],ti:i[1],tig:i[1],tk:{cardinal:["one","other"],ordinal:["few","other"]},tl:i[2],tn:i[1],to:i[0],tr:i[1],ts:i[1],tzm:i[1],ug:i[1],uk:{cardinal:["one","few","many","other"],ordinal:["few","other"]},ur:i[1],uz:i[1],ve:i[1],vi:{cardinal:["other"],ordinal:["one","other"]},vo:i[1],vun:i[1],wa:i[1],wae:i[1],wo:i[0],xh:i[1],xog:i[1],yi:i[1],yo:i[0],yue:i[0],zh:i[0],zu:i[1]})?n.call(e,r,e,t):n)||(t.exports=o)},function(t,e,r){var n,o;void 0===(o="function"==typeof(n={af:function(t,e){return e?"other":1==t?"one":"other"},ak:function(t,e){return e?"other":0==t||1==t?"one":"other"},am:function(t,e){return e?"other":t>=0&&t<=1?"one":"other"},ar:function(t,e){var r=String(t).split("."),n=Number(r[0])==t,o=n&&r[0].slice(-2);return e?"other":0==t?"zero":1==t?"one":2==t?"two":o>=3&&o<=10?"few":o>=11&&o<=99?"many":"other"},ars:function(t,e){var r=String(t).split("."),n=Number(r[0])==t,o=n&&r[0].slice(-2);return e?"other":0==t?"zero":1==t?"one":2==t?"two":o>=3&&o<=10?"few":o>=11&&o<=99?"many":"other"},as:function(t,e){return e?1==t||5==t||7==t||8==t||9==t||10==t?"one":2==t||3==t?"two":4==t?"few":6==t?"many":"other":t>=0&&t<=1?"one":"other"},asa:function(t,e){return e?"other":1==t?"one":"other"},ast:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},az:function(t,e){var r=String(t).split("."),n=r[0],o=n.slice(-1),i=n.slice(-2),u=n.slice(-3);return e?1==o||2==o||5==o||7==o||8==o||20==i||50==i||70==i||80==i?"one":3==o||4==o||100==u||200==u||300==u||400==u||500==u||600==u||700==u||800==u||900==u?"few":0==n||6==o||40==i||60==i||90==i?"many":"other":1==t?"one":"other"},be:function(t,e){var r=String(t).split("."),n=Number(r[0])==t,o=n&&r[0].slice(-1),i=n&&r[0].slice(-2);return e?2!=o&&3!=o||12==i||13==i?"other":"few":1==o&&11!=i?"one":o>=2&&o<=4&&(i<12||i>14)?"few":n&&0==o||o>=5&&o<=9||i>=11&&i<=14?"many":"other"},bem:function(t,e){return e?"other":1==t?"one":"other"},bez:function(t,e){return e?"other":1==t?"one":"other"},bg:function(t,e){return e?"other":1==t?"one":"other"},bh:function(t,e){return e?"other":0==t||1==t?"one":"other"},bm:function(t,e){return"other"},bn:function(t,e){return e?1==t||5==t||7==t||8==t||9==t||10==t?"one":2==t||3==t?"two":4==t?"few":6==t?"many":"other":t>=0&&t<=1?"one":"other"},bo:function(t,e){return"other"},br:function(t,e){var r=String(t).split("."),n=Number(r[0])==t,o=n&&r[0].slice(-1),i=n&&r[0].slice(-2),u=n&&r[0].slice(-6);return e?"other":1==o&&11!=i&&71!=i&&91!=i?"one":2==o&&12!=i&&72!=i&&92!=i?"two":(3==o||4==o||9==o)&&(i<10||i>19)&&(i<70||i>79)&&(i<90||i>99)?"few":0!=t&&n&&0==u?"many":"other"},brx:function(t,e){return e?"other":1==t?"one":"other"},bs:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-1),c=n.slice(-2),a=o.slice(-1),f=o.slice(-2);return e?"other":i&&1==u&&11!=c||1==a&&11!=f?"one":i&&u>=2&&u<=4&&(c<12||c>14)||a>=2&&a<=4&&(f<12||f>14)?"few":"other"},ca:function(t,e){var r=String(t).split("."),n=!r[1];return e?1==t||3==t?"one":2==t?"two":4==t?"few":"other":1==t&&n?"one":"other"},ce:function(t,e){return e?"other":1==t?"one":"other"},cgg:function(t,e){return e?"other":1==t?"one":"other"},chr:function(t,e){return e?"other":1==t?"one":"other"},ckb:function(t,e){return e?"other":1==t?"one":"other"},cs:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1];return e?"other":1==t&&o?"one":n>=2&&n<=4&&o?"few":o?"other":"many"},cy:function(t,e){return e?0==t||7==t||8==t||9==t?"zero":1==t?"one":2==t?"two":3==t||4==t?"few":5==t||6==t?"many":"other":0==t?"zero":1==t?"one":2==t?"two":3==t?"few":6==t?"many":"other"},da:function(t,e){var r=String(t).split("."),n=r[0],o=Number(r[0])==t;return e?"other":1!=t&&(o||0!=n&&1!=n)?"other":"one"},de:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},dsb:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-2),c=o.slice(-2);return e?"other":i&&1==u||1==c?"one":i&&2==u||2==c?"two":i&&(3==u||4==u)||3==c||4==c?"few":"other"},dv:function(t,e){return e?"other":1==t?"one":"other"},dz:function(t,e){return"other"},ee:function(t,e){return e?"other":1==t?"one":"other"},el:function(t,e){return e?"other":1==t?"one":"other"},en:function(t,e){var r=String(t).split("."),n=!r[1],o=Number(r[0])==t,i=o&&r[0].slice(-1),u=o&&r[0].slice(-2);return e?1==i&&11!=u?"one":2==i&&12!=u?"two":3==i&&13!=u?"few":"other":1==t&&n?"one":"other"},eo:function(t,e){return e?"other":1==t?"one":"other"},es:function(t,e){return e?"other":1==t?"one":"other"},et:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},eu:function(t,e){return e?"other":1==t?"one":"other"},fa:function(t,e){return e?"other":t>=0&&t<=1?"one":"other"},ff:function(t,e){return e?"other":t>=0&&t<2?"one":"other"},fi:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},fil:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-1),c=o.slice(-1);return e?1==t?"one":"other":i&&(1==n||2==n||3==n)||i&&4!=u&&6!=u&&9!=u||!i&&4!=c&&6!=c&&9!=c?"one":"other"},fo:function(t,e){return e?"other":1==t?"one":"other"},fr:function(t,e){return e?1==t?"one":"other":t>=0&&t<2?"one":"other"},fur:function(t,e){return e?"other":1==t?"one":"other"},fy:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},ga:function(t,e){var r=String(t).split("."),n=Number(r[0])==t;return e?1==t?"one":"other":1==t?"one":2==t?"two":n&&t>=3&&t<=6?"few":n&&t>=7&&t<=10?"many":"other"},gd:function(t,e){var r=String(t).split("."),n=Number(r[0])==t;return e?1==t||11==t?"one":2==t||12==t?"two":3==t||13==t?"few":"other":1==t||11==t?"one":2==t||12==t?"two":n&&t>=3&&t<=10||n&&t>=13&&t<=19?"few":"other"},gl:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},gsw:function(t,e){return e?"other":1==t?"one":"other"},gu:function(t,e){return e?1==t?"one":2==t||3==t?"two":4==t?"few":6==t?"many":"other":t>=0&&t<=1?"one":"other"},guw:function(t,e){return e?"other":0==t||1==t?"one":"other"},gv:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1],i=n.slice(-1),u=n.slice(-2);return e?"other":o&&1==i?"one":o&&2==i?"two":!o||0!=u&&20!=u&&40!=u&&60!=u&&80!=u?o?"other":"many":"few"},ha:function(t,e){return e?"other":1==t?"one":"other"},haw:function(t,e){return e?"other":1==t?"one":"other"},he:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1],i=Number(r[0])==t,u=i&&r[0].slice(-1);return e?"other":1==t&&o?"one":2==n&&o?"two":o&&(t<0||t>10)&&i&&0==u?"many":"other"},hi:function(t,e){return e?1==t?"one":2==t||3==t?"two":4==t?"few":6==t?"many":"other":t>=0&&t<=1?"one":"other"},hr:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-1),c=n.slice(-2),a=o.slice(-1),f=o.slice(-2);return e?"other":i&&1==u&&11!=c||1==a&&11!=f?"one":i&&u>=2&&u<=4&&(c<12||c>14)||a>=2&&a<=4&&(f<12||f>14)?"few":"other"},hsb:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-2),c=o.slice(-2);return e?"other":i&&1==u||1==c?"one":i&&2==u||2==c?"two":i&&(3==u||4==u)||3==c||4==c?"few":"other"},hu:function(t,e){return e?1==t||5==t?"one":"other":1==t?"one":"other"},hy:function(t,e){return e?1==t?"one":"other":t>=0&&t<2?"one":"other"},ia:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},id:function(t,e){return"other"},ig:function(t,e){return"other"},ii:function(t,e){return"other"},in:function(t,e){return"other"},io:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},is:function(t,e){var r=String(t).split("."),n=r[0],o=Number(r[0])==t,i=n.slice(-1),u=n.slice(-2);return e?"other":o&&1==i&&11!=u||!o?"one":"other"},it:function(t,e){var r=String(t).split("."),n=!r[1];return e?11==t||8==t||80==t||800==t?"many":"other":1==t&&n?"one":"other"},iu:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},iw:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1],i=Number(r[0])==t,u=i&&r[0].slice(-1);return e?"other":1==t&&o?"one":2==n&&o?"two":o&&(t<0||t>10)&&i&&0==u?"many":"other"},ja:function(t,e){return"other"},jbo:function(t,e){return"other"},jgo:function(t,e){return e?"other":1==t?"one":"other"},ji:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},jmc:function(t,e){return e?"other":1==t?"one":"other"},jv:function(t,e){return"other"},jw:function(t,e){return"other"},ka:function(t,e){var r=String(t).split("."),n=r[0],o=n.slice(-2);return e?1==n?"one":0==n||o>=2&&o<=20||40==o||60==o||80==o?"many":"other":1==t?"one":"other"},kab:function(t,e){return e?"other":t>=0&&t<2?"one":"other"},kaj:function(t,e){return e?"other":1==t?"one":"other"},kcg:function(t,e){return e?"other":1==t?"one":"other"},kde:function(t,e){return"other"},kea:function(t,e){return"other"},kk:function(t,e){var r=String(t).split("."),n=Number(r[0])==t,o=n&&r[0].slice(-1);return e?6==o||9==o||n&&0==o&&0!=t?"many":"other":1==t?"one":"other"},kkj:function(t,e){return e?"other":1==t?"one":"other"},kl:function(t,e){return e?"other":1==t?"one":"other"},km:function(t,e){return"other"},kn:function(t,e){return e?"other":t>=0&&t<=1?"one":"other"},ko:function(t,e){return"other"},ks:function(t,e){return e?"other":1==t?"one":"other"},ksb:function(t,e){return e?"other":1==t?"one":"other"},ksh:function(t,e){return e?"other":0==t?"zero":1==t?"one":"other"},ku:function(t,e){return e?"other":1==t?"one":"other"},kw:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},ky:function(t,e){return e?"other":1==t?"one":"other"},lag:function(t,e){var r=String(t).split("."),n=r[0];return e?"other":0==t?"zero":0!=n&&1!=n||0==t?"other":"one"},lb:function(t,e){return e?"other":1==t?"one":"other"},lg:function(t,e){return e?"other":1==t?"one":"other"},lkt:function(t,e){return"other"},ln:function(t,e){return e?"other":0==t||1==t?"one":"other"},lo:function(t,e){return e&&1==t?"one":"other"},lt:function(t,e){var r=String(t).split("."),n=r[1]||"",o=Number(r[0])==t,i=o&&r[0].slice(-1),u=o&&r[0].slice(-2);return e?"other":1==i&&(u<11||u>19)?"one":i>=2&&i<=9&&(u<11||u>19)?"few":0!=n?"many":"other"},lv:function(t,e){var r=String(t).split("."),n=r[1]||"",o=n.length,i=Number(r[0])==t,u=i&&r[0].slice(-1),c=i&&r[0].slice(-2),a=n.slice(-2),f=n.slice(-1);return e?"other":i&&0==u||c>=11&&c<=19||2==o&&a>=11&&a<=19?"zero":1==u&&11!=c||2==o&&1==f&&11!=a||2!=o&&1==f?"one":"other"},mas:function(t,e){return e?"other":1==t?"one":"other"},mg:function(t,e){return e?"other":0==t||1==t?"one":"other"},mgo:function(t,e){return e?"other":1==t?"one":"other"},mk:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-1),c=n.slice(-2),a=o.slice(-1),f=o.slice(-2);return e?1==u&&11!=c?"one":2==u&&12!=c?"two":7!=u&&8!=u||17==c||18==c?"other":"many":i&&1==u&&11!=c||1==a&&11!=f?"one":"other"},ml:function(t,e){return e?"other":1==t?"one":"other"},mn:function(t,e){return e?"other":1==t?"one":"other"},mo:function(t,e){var r=String(t).split("."),n=!r[1],o=Number(r[0])==t,i=o&&r[0].slice(-2);return e?1==t?"one":"other":1==t&&n?"one":!n||0==t||1!=t&&i>=1&&i<=19?"few":"other"},mr:function(t,e){return e?1==t?"one":2==t||3==t?"two":4==t?"few":"other":t>=0&&t<=1?"one":"other"},ms:function(t,e){return e&&1==t?"one":"other"},mt:function(t,e){var r=String(t).split("."),n=Number(r[0])==t,o=n&&r[0].slice(-2);return e?"other":1==t?"one":0==t||o>=2&&o<=10?"few":o>=11&&o<=19?"many":"other"},my:function(t,e){return"other"},nah:function(t,e){return e?"other":1==t?"one":"other"},naq:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},nb:function(t,e){return e?"other":1==t?"one":"other"},nd:function(t,e){return e?"other":1==t?"one":"other"},ne:function(t,e){var r=String(t).split("."),n=Number(r[0])==t;return e?n&&t>=1&&t<=4?"one":"other":1==t?"one":"other"},nl:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},nn:function(t,e){return e?"other":1==t?"one":"other"},nnh:function(t,e){return e?"other":1==t?"one":"other"},no:function(t,e){return e?"other":1==t?"one":"other"},nqo:function(t,e){return"other"},nr:function(t,e){return e?"other":1==t?"one":"other"},nso:function(t,e){return e?"other":0==t||1==t?"one":"other"},ny:function(t,e){return e?"other":1==t?"one":"other"},nyn:function(t,e){return e?"other":1==t?"one":"other"},om:function(t,e){return e?"other":1==t?"one":"other"},or:function(t,e){var r=String(t).split("."),n=Number(r[0])==t;return e?1==t||5==t||n&&t>=7&&t<=9?"one":2==t||3==t?"two":4==t?"few":6==t?"many":"other":1==t?"one":"other"},os:function(t,e){return e?"other":1==t?"one":"other"},pa:function(t,e){return e?"other":0==t||1==t?"one":"other"},pap:function(t,e){return e?"other":1==t?"one":"other"},pl:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1],i=n.slice(-1),u=n.slice(-2);return e?"other":1==t&&o?"one":o&&i>=2&&i<=4&&(u<12||u>14)?"few":o&&1!=n&&(0==i||1==i)||o&&i>=5&&i<=9||o&&u>=12&&u<=14?"many":"other"},prg:function(t,e){var r=String(t).split("."),n=r[1]||"",o=n.length,i=Number(r[0])==t,u=i&&r[0].slice(-1),c=i&&r[0].slice(-2),a=n.slice(-2),f=n.slice(-1);return e?"other":i&&0==u||c>=11&&c<=19||2==o&&a>=11&&a<=19?"zero":1==u&&11!=c||2==o&&1==f&&11!=a||2!=o&&1==f?"one":"other"},ps:function(t,e){return e?"other":1==t?"one":"other"},pt:function(t,e){var r=String(t).split("."),n=r[0];return e?"other":0==n||1==n?"one":"other"},"pt-PT":function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},rm:function(t,e){return e?"other":1==t?"one":"other"},ro:function(t,e){var r=String(t).split("."),n=!r[1],o=Number(r[0])==t,i=o&&r[0].slice(-2);return e?1==t?"one":"other":1==t&&n?"one":!n||0==t||1!=t&&i>=1&&i<=19?"few":"other"},rof:function(t,e){return e?"other":1==t?"one":"other"},root:function(t,e){return"other"},ru:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1],i=n.slice(-1),u=n.slice(-2);return e?"other":o&&1==i&&11!=u?"one":o&&i>=2&&i<=4&&(u<12||u>14)?"few":o&&0==i||o&&i>=5&&i<=9||o&&u>=11&&u<=14?"many":"other"},rwk:function(t,e){return e?"other":1==t?"one":"other"},sah:function(t,e){return"other"},saq:function(t,e){return e?"other":1==t?"one":"other"},sc:function(t,e){var r=String(t).split("."),n=!r[1];return e?11==t||8==t||80==t||800==t?"many":"other":1==t&&n?"one":"other"},scn:function(t,e){var r=String(t).split("."),n=!r[1];return e?11==t||8==t||80==t||800==t?"many":"other":1==t&&n?"one":"other"},sd:function(t,e){return e?"other":1==t?"one":"other"},sdh:function(t,e){return e?"other":1==t?"one":"other"},se:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},seh:function(t,e){return e?"other":1==t?"one":"other"},ses:function(t,e){return"other"},sg:function(t,e){return"other"},sh:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-1),c=n.slice(-2),a=o.slice(-1),f=o.slice(-2);return e?"other":i&&1==u&&11!=c||1==a&&11!=f?"one":i&&u>=2&&u<=4&&(c<12||c>14)||a>=2&&a<=4&&(f<12||f>14)?"few":"other"},shi:function(t,e){var r=String(t).split("."),n=Number(r[0])==t;return e?"other":t>=0&&t<=1?"one":n&&t>=2&&t<=10?"few":"other"},si:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"";return e?"other":0==t||1==t||0==n&&1==o?"one":"other"},sk:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1];return e?"other":1==t&&o?"one":n>=2&&n<=4&&o?"few":o?"other":"many"},sl:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1],i=n.slice(-2);return e?"other":o&&1==i?"one":o&&2==i?"two":o&&(3==i||4==i)||!o?"few":"other"},sma:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},smi:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},smj:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},smn:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},sms:function(t,e){return e?"other":1==t?"one":2==t?"two":"other"},sn:function(t,e){return e?"other":1==t?"one":"other"},so:function(t,e){return e?"other":1==t?"one":"other"},sq:function(t,e){var r=String(t).split("."),n=Number(r[0])==t,o=n&&r[0].slice(-1),i=n&&r[0].slice(-2);return e?1==t?"one":4==o&&14!=i?"many":"other":1==t?"one":"other"},sr:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-1),c=n.slice(-2),a=o.slice(-1),f=o.slice(-2);return e?"other":i&&1==u&&11!=c||1==a&&11!=f?"one":i&&u>=2&&u<=4&&(c<12||c>14)||a>=2&&a<=4&&(f<12||f>14)?"few":"other"},ss:function(t,e){return e?"other":1==t?"one":"other"},ssy:function(t,e){return e?"other":1==t?"one":"other"},st:function(t,e){return e?"other":1==t?"one":"other"},sv:function(t,e){var r=String(t).split("."),n=!r[1],o=Number(r[0])==t,i=o&&r[0].slice(-1),u=o&&r[0].slice(-2);return e?1!=i&&2!=i||11==u||12==u?"other":"one":1==t&&n?"one":"other"},sw:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},syr:function(t,e){return e?"other":1==t?"one":"other"},ta:function(t,e){return e?"other":1==t?"one":"other"},te:function(t,e){return e?"other":1==t?"one":"other"},teo:function(t,e){return e?"other":1==t?"one":"other"},th:function(t,e){return"other"},ti:function(t,e){return e?"other":0==t||1==t?"one":"other"},tig:function(t,e){return e?"other":1==t?"one":"other"},tk:function(t,e){var r=String(t).split("."),n=Number(r[0])==t,o=n&&r[0].slice(-1);return e?6==o||9==o||10==t?"few":"other":1==t?"one":"other"},tl:function(t,e){var r=String(t).split("."),n=r[0],o=r[1]||"",i=!r[1],u=n.slice(-1),c=o.slice(-1);return e?1==t?"one":"other":i&&(1==n||2==n||3==n)||i&&4!=u&&6!=u&&9!=u||!i&&4!=c&&6!=c&&9!=c?"one":"other"},tn:function(t,e){return e?"other":1==t?"one":"other"},to:function(t,e){return"other"},tr:function(t,e){return e?"other":1==t?"one":"other"},ts:function(t,e){return e?"other":1==t?"one":"other"},tzm:function(t,e){var r=String(t).split("."),n=Number(r[0])==t;return e?"other":0==t||1==t||n&&t>=11&&t<=99?"one":"other"},ug:function(t,e){return e?"other":1==t?"one":"other"},uk:function(t,e){var r=String(t).split("."),n=r[0],o=!r[1],i=Number(r[0])==t,u=i&&r[0].slice(-1),c=i&&r[0].slice(-2),a=n.slice(-1),f=n.slice(-2);return e?3==u&&13!=c?"few":"other":o&&1==a&&11!=f?"one":o&&a>=2&&a<=4&&(f<12||f>14)?"few":o&&0==a||o&&a>=5&&a<=9||o&&f>=11&&f<=14?"many":"other"},ur:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},uz:function(t,e){return e?"other":1==t?"one":"other"},ve:function(t,e){return e?"other":1==t?"one":"other"},vi:function(t,e){return e&&1==t?"one":"other"},vo:function(t,e){return e?"other":1==t?"one":"other"},vun:function(t,e){return e?"other":1==t?"one":"other"},wa:function(t,e){return e?"other":0==t||1==t?"one":"other"},wae:function(t,e){return e?"other":1==t?"one":"other"},wo:function(t,e){return"other"},xh:function(t,e){return e?"other":1==t?"one":"other"},xog:function(t,e){return e?"other":1==t?"one":"other"},yi:function(t,e){var r=String(t).split("."),n=!r[1];return e?"other":1==t&&n?"one":"other"},yo:function(t,e){return"other"},yue:function(t,e){return"other"},zh:function(t,e){return"other"},zu:function(t,e){return e?"other":t>=0&&t<=1?"one":"other"}})?n.call(e,r,e,t):n)||(t.exports=o)},function(t,e,r){var n=r(0);function o(t){this.mf=t,this.setStrictNumber(t.strictNumberSign)}function i(t,e,r){if(!r)return t;if(isNaN(t))throw new Error("Can't apply offset:"+r+" to argument `"+e+"` with non-numerical value "+JSON.stringify(t)+".");return t-r}function u(t,e,r){if(isNaN(t))throw new Error("Argument `"+e+"` has non-numerical value "+JSON.stringify(t)+".");return t-(r||0)}t.exports=o,o.prototype.setStrictNumber=function(t){this.number=t?u:i},o.prototype.plural=function(t,e,r,n,o){if({}.hasOwnProperty.call(n,t))return n[t];e&&(t-=e);var i=r(t,o);return i in n?n[i]:n.other},o.prototype.select=function(t,e){return{}.hasOwnProperty.call(e,t)?e[t]:e.other},o.prototype.toString=function(t,e){var r={};Object.keys(e.locales).forEach(function(e){r[n.funcname(e)]=t[e]}),Object.keys(e.runtime).forEach(function(t){r[t]=this[t]},this);var o=Object.keys(e.formatters),i=this.mf.fmt;return o.length&&(r.fmt=o.reduce(function(t,e){return t[e]=i[e],t},{})),function t(e,r){if("object"!=typeof e){var o=e.toString().replace(/^(function )\w*/,"$1");return(c=/([ \t]*)\S.*$/.exec(o))?o.replace(new RegExp("^"+c[1],"mg"),""):o}var i=[];for(var u in e)0==r?i.push("var "+u+" = "+t(e[u],r+1)+";\n"):i.push(n.propname(u)+": "+t(e[u],r+1));if(0==r)return i.join("");if(0==i.length)return"{}";for(var c="  ";--r;)c+="  ";return"{\n"+i.join(",\n").replace(/^/gm,c)+"\n}"}(r,0)}}]);

var UIUrlUtils=Base.extend({},{EMPTY_PROTOCOL:'//',redirectToUrl:function(url)
{window.location.href=url;},navigateWithTimeout:function(url,timeout)
{setTimeout(function(){UIUrlUtils.navigateToUrl(url)},timeout);},navigateToUrl:function(url,target,postVars)
{target=(target||LinkTarget.SELF);if(!postVars&&target==LinkTarget.SELF)
{UIUrlUtils.redirectToUrl(url);}
else
{var form=$("#tmpNavigateForm");if(form.length==0)
{$(document.body).append('<form method="post" target="'+target+'" id="tmpNavigateForm"></form>');form=$("#tmpNavigateForm");}
else
{form.empty();}
form.attr('action',url);if(postVars)
{for(var varName in postVars)
{var varValue=postVars[varName];form.append('<input type="hidden" name="'+varName+'" value="" />');form.find("input[name="+varName+"]").val(varValue);}}
form.submit();}},uriParamsSerialize:function(params)
{var serializedPairs=new Array();if(params)
{for(var name in params)
{var pairStr=name+"="+encodeURIComponent(params[name]);serializedPairs.push(pairStr);}}
return serializedPairs.join("&");},addParamToUrl:function(url,paramKey,paramValue)
{var urlAlreadyHasQuery=_.indexOf(url,'?')>0;var paramString=paramKey+'='+paramValue;return url+=urlAlreadyHasQuery?('&'+paramString):'?'+paramString;},getUrlWithoutQuery:function(url)
{var signPos=_.indexOf(url,"?");return(signPos>=0)?url.substring(0,signPos):url;},getUrlQuery:function(url)
{var signPos=_.indexOf(url,"?");return(signPos>=0)?url.substring(signPos+1):"";},parseQueryString:function(queryString)
{var holder=new Object();if(queryString)
{var chunks=queryString.split("&");for(var i=0;i<chunks.length;++i)
{var keyValuePair=chunks[i].split("=");var key=decodeURIComponent(keyValuePair[0]);var value=decodeURIComponent(keyValuePair[1]);holder[key]=value;}}
return holder;},replaceUrlParameter:function(url,paramName,paramValue)
{var mainUrl=UIUrlUtils.getUrlWithoutQuery(url);var queryString=UIUrlUtils.getUrlQuery(url);var params=UIUrlUtils.parseQueryString(queryString);params[paramName]=paramValue;queryString=UIUrlUtils.uriParamsSerialize(params);url=mainUrl+"?"+queryString;return url;},getUrlParameter:function(url,paramName)
{var queryString=UIUrlUtils.getUrlQuery(url);var params=UIUrlUtils.parseQueryString(queryString);return(params&&params[paramName])?params[paramName]:null;},loadUrlInNewWindow:function(url,title)
{var title=title||'';window.open(url,title);},getRefreshUniqueUrl:function(url)
{var uniqueNumber=new Date().getTime();return this.replaceUrlParameter(url,'r',uniqueNumber);},generateUniqueUrl:function(url)
{return UIUrlUtils.replaceUrlParameter(url,"r",(new Date()).getTime());},doesUrlHasProtocol:function(url)
{var regex=new RegExp("(^.+\:\/\/)",'gi');return regex.test(url);},replaceLinksWithHtmlLinks:function(text)
{return text.replace(this.getUrlRegexp(),function(matched){return'<a target="_blank" href="'+UIUrlUtils.getUrlWithProtocol(matched)+'">'+matched+'</a>';});},getUrlRegexp:function()
{return new RegExp(/(?:(?:(?:https?|ftps?):\/\/)|www\.)([a-zA-Z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF_-](?:(?:&|%26)amp;|(?!(?:&|%26)(?:amp|quot|#039|apos|lt|gt);)[a-zA-Z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF_.,@?^=%&:\/~+#\-()!])*[a-zA-Z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF_@?^=\/~+#\-!])/gi);},getUrlWithProtocol:function(url)
{if(this.doesUrlHasProtocol(url))
{return url;}
return UIUrlUtils.EMPTY_PROTOCOL+url;}});

var TextBuilder=Base.extend({},{_messageFormat:null,_fallbackMessageFormat:null,build:function(text,params)
{try{var messageFormat=TextBuilder._getMessageFormat();return messageFormat.compile(StringUtils.getParametrizedString(text,params))(params);}
catch(e){}
try{var fallbackMessageFormat=TextBuilder._getFallbackMessageFormat();return fallbackMessageFormat.compile(StringUtils.getParametrizedString(text,params))(params);}
catch(e){}
return text;},_getMessageFormat:function()
{if(!TextBuilder._messageFormat)
{TextBuilder._messageFormat=new MessageFormat(EnvironmentInfo.getLocale());}
return TextBuilder._messageFormat;},_getFallbackMessageFormat:function()
{if(!TextBuilder._fallbackMessageFormat)
{TextBuilder._fallbackMessageFormat=new MessageFormat(SiteLocale.EN_US);}
return TextBuilder._fallbackMessageFormat;}});

var UIBrowserUtils=Base.extend({},{ORIENTATION_PORTRAIT:'portrait',ORIENTATION_LANDSCAPE:'landscape',MIN_SCALE_VALUE:1,hasHtml5Support:function()
{return Modernizr.inlinesvg;},isIosDevice:function()
{return/(iPad|iPhone|iPod);/i.test(navigator.userAgent);},isIpad:function()
{return navigator.userAgent.match(/iPad/i)!=null;},isMobile:function()
{var agent=navigator.userAgent.toLowerCase();return UIBrowserUtils.isAndroidDevice()||UIBrowserUtils.isIosDevice()||(agent.indexOf('mobile')!=-1)||(agent.indexOf('touch')!=-1);},isTouchScreen:function()
{if(!UIBrowserUtils.isMobile())
{return false;}
return(('ontouchstart'in window)||(window["DocumentTouch"]!==undefined)&&document instanceof window["DocumentTouch"]);},isAndroidDevice:function()
{var ua=navigator.userAgent.toLowerCase();return ua.indexOf("android")>-1;},isIos7:function()
{return/(iPad|iPhone);.*CPU.*OS 7_\d/i.test(navigator.userAgent);},isSafariBrowser:function()
{return DetectBrowser.isSafari();},getIeVersion:function()
{if(jQuery.browser)
{return jQuery.browser.version;}
var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0)
{return parseInt(ua.substring(msie+5,_.indexOf(ua,'.',msie)),10);}
var trident=ua.indexOf('Trident/');if(trident>0)
{var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,_.indexOf(ua,'.',rv)),10);}
var edge=ua.indexOf('Edge/');if(edge>0)
{return parseInt(ua.substring(edge+5,_.indexOf(ua,'.',edge)),10);}
return null;},isIe:function()
{var userAgentString=navigator.userAgent;return(userAgentString.indexOf('Trident/7.0')+1)||(jQuery.browser.msie);},isFireFox:function()
{var userAgentString=navigator.userAgent;return(userAgentString.toLocaleLowerCase().indexOf('firefox')!=-1);},isIeLt10:function()
{var ieV=UIBrowserUtils.getIeVersion();return UIBrowserUtils.isIe()&&(ieV<=10);},isIeLt9:function()
{var ieV=UIBrowserUtils.getIeVersion();return UIBrowserUtils.isIe()&&(ieV<=9);},isIeLt8:function()
{var ieV=UIBrowserUtils.getIeVersion();return UIBrowserUtils.isIe()&&(ieV<=8);},isIeLt7:function()
{var ieV=UIBrowserUtils.getIeVersion();return UIBrowserUtils.isIe()&&(ieV<=7);},getFlashVersion:function()
{try
{try
{var axo=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6');try
{axo.AllowScriptAccess='always';}
catch(e)
{return'6,0,0';}}
catch(e)
{}
return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g,',').match(/^,?(.+),?$/)[1];}
catch(e)
{try
{if(navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin)
{return(navigator.plugins['Shockwave Flash 2.0']||navigator.plugins['Shockwave Flash']).description.replace(/\D+/g,',').match(/^,?(.+),?$/)[1];}}
catch(e)
{}}
return'0,0,0';},hasHistorySupport:function()
{return!!(window.history&&history.pushState);},hasHistoryBackSupport:function()
{return UIBrowserUtils.hasHistorySupport()&&history.back&&!UIBrowserUtils.isIeLt10();},backByHistory:function()
{window.history.back();}});

var ColorClass=Base.extend({},{RED:'red',GREEN:'green',BLUE:'blue',ACCENT:'accent',getAvailableClassesAsString:function()
{return ColorClass.getAvailableClasses().join(' ');},getAvailableClasses:function()
{return[ColorClass.RED,ColorClass.GREEN,ColorClass.BLUE,ColorClass.ACCENT];}});

var Button=EventDispatcher.extend({btn:null,_useSubmit:null,_hasPreloader:null,_disabled:null,_labelField:null,_buttonBody:null,_submitElement:null,_url:null,constructor:function(id)
{this.btn=$("#"+id);this.btn.click(handler(this,'onButtonClicked'));this._buttonBody=this.btn.find('.button_body');this._url=this._buttonBody.attr('href');this._hasPreloader=this.btn.data(Button.data.HAS_PRELOADER);this._disabled=this.btn.hasClass(Button.css.DISABLED);this._useSubmit=Boolean($("#"+id+"_seSubmit").val());this._submitElement=this.btn.find('.submit_button');this._labelField=$("#"+id+"ButtonLabel").find(".label:first");},onButtonClicked:function(event)
{if(this.enabled())
{this.dispatchEvent(Button.event.CLICKED,event);}
else
{this.dispatchEvent(Button.event.CLICKED_ON_DISABLED,event);event.stopImmediatePropagation();}},setUrl:function(url)
{this._url=url;if(!this.isDisabled())
{this._buttonBody.attr('href',url);}},setUrlTarget:function(urlTarget)
{this._buttonBody.attr('target',urlTarget);},enabled:function(status)
{if(status!=undefined)
{if(status)
{this.enable();}
else
{this.disable();}}
return!this.isDisabled();},enable:function()
{this._disabled=false;this.btn.removeClass(Button.css.DISABLED);this._updateUrlState();if(this._useSubmit)
{this._submitElement.prop('disabled',false);}},disable:function()
{this._disabled=true;this.btn.addClass(Button.css.DISABLED);this._updateUrlState();if(this._useSubmit)
{this._submitElement.prop('disabled',true);}},isDisabled:function()
{return this._disabled;},setText:function(text)
{var isTextEmpty=(text==='');this.btn.toggleClass(Button.css.EMPTY_TEXT,isTextEmpty);this._labelField.text(text);},setColor:function(color)
{if($.inArray(color,ColorClass.getAvailableClasses())!=-1)
{this.btn.removeClass(ColorClass.getAvailableClassesAsString());this.btn.addClass(color);}},show:function()
{this.btn.removeClass(Button.css.HIDDEN);},hide:function()
{this.btn.addClass(Button.css.HIDDEN);},loading:function(load)
{if(load)
{this.showLoading();}
else
{this.hideLoading();}},showLoading:function()
{this.disable();if(this._hasPreloader)
{this.btn.addClass(Button.css.LOADING);}},hideLoading:function()
{this.enable();if(this._hasPreloader)
{this.btn.removeClass(Button.css.LOADING);}},fixPressed:function()
{if(!this._disabled)
{this.btn.addClass(Button.css.FIXED_DOWN);}},unfixPressed:function()
{if(!this._disabled)
{this.btn.removeClass(Button.css.FIXED_DOWN);}},_updateUrlState:function()
{var url=this.isDisabled()?Button.DISABLED_URL:this._url;this._buttonBody.attr('href',url);}},{buttons:{},css:{DISABLED:'disabled',LOADING:'loading',HIDDEN:'hidden',FIXED_DOWN:'fixed_down',EMPTY_TEXT:'empty_text'},event:{CLICKED:'clicked',CLICKED_ON_DISABLED:'clicked_on_disabled'},data:{HAS_PRELOADER:'has-preloader'},attr:{DATA_ROLE_BUTTON:'data-role-button'},DISABLED_URL:'javascript:void(0);',getButtonByElement:function(buttonElement)
{if((buttonElement.length!=1))
{return null;}
var attr=buttonElement.attr(Button.attr.DATA_ROLE_BUTTON);var isButton=(typeof attr!==typeof undefined&&attr!==false);if(!isButton)
{return null;}
var buttonId=buttonElement.attr('id');return new Button(buttonId);},initButton:function(id)
{var btn=new Button(id);this.buttons[id]=btn;return btn;},getButton:function(id)
{return this.buttons[id];},prepareButtonsByContext:function(id)
{Button.initButton(id);},initButtonByContext:function(id)
{Button.prepareButtonsByContext(id);return Button.getButton(id);}});

var SubscriptionProductName=Base.extend({},{SPACE:'space',PAGE:'page',LEARN:'learn',isLearn:function(productName){return[SubscriptionProductName.LEARN].indexOf(productName)!==-1;},isStudio:function(productName){return[SubscriptionProductName.PAGE,SubscriptionProductName.SPACE].indexOf(productName)!==-1;},});

var UiTimeZone=Base.extend({_timeZoneUtcOffset:null,_timeZoneId:null,_timeZoneTitle:null,_timeZoneCode:null,constructor:function(timeZoneId,title,utcOffset,timeZoneCode){this._timeZoneId=timeZoneId;this._timeZoneTitle=title;this._timeZoneUtcOffset=utcOffset;this._timeZoneCode=timeZoneCode;},serialize:function(){return{timeZoneId:this._timeZoneId,title:this._timeZoneTitle,code:this._timeZoneCode,utcOffset:this._timeZoneUtcOffset,}},getUtcOffset:function(){return this._timeZoneUtcOffset;}});

var UiEnvironmentTimeZoneInfo=Base.extend({},{_localTimeZoneOffset:null,_accountTimeZone:null,_userTimeZone:null,getAccountTimeZone:function(subscriptionProductName){this._init(subscriptionProductName);return this._accountTimeZone;},getUserTimeZone:function(subscriptionProductName){this._init(subscriptionProductName);return this._userTimeZone;},getLocalTimeZoneOffset:function(){if(!UiEnvironmentTimeZoneInfo._localTimeZoneOffset){UiEnvironmentTimeZoneInfo._localTimeZoneOffset=UiEnvironmentTimeZoneInfo._getLocalTimeZoneOffsetImpl();}
return UiEnvironmentTimeZoneInfo._localTimeZoneOffset;},_createUiTimeZone:function(subscriptionProductName,timeZoneData){return new UiTimeZone(timeZoneData.id,timeZoneData.title,UiEnvironmentTimeZoneInfo._getTimeZoneUtcOffsetImpl(subscriptionProductName,timeZoneData.offset),timeZoneData.code,)},_init:function(subscriptionProductName){if(!UiEnvironmentTimeZoneInfo._accountTimeZone){var accountTimeZoneData=JSON.parse(this._getElementStringValueById('accountTimeZone'));this._accountTimeZone=this._createUiTimeZone(subscriptionProductName,accountTimeZoneData);}
if(!UiEnvironmentTimeZoneInfo._userTimeZone){var userTimeZoneData=JSON.parse(this._getElementStringValueById('userTimeZone'));this._userTimeZone=this._createUiTimeZone(subscriptionProductName,userTimeZoneData);}},_getTimeZoneUtcOffsetImpl:function(subscriptionProductName,offset){return SubscriptionProductName.isStudio(subscriptionProductName)?UiEnvironmentTimeZoneInfo._getLocalTimeZoneOffsetImpl():Number(offset)},_getElementStringValueById:function(id){return document.getElementById(id).value;},_getLocalTimeZoneOffsetImpl:function(){return(new Date().getTimezoneOffset())*60*1000*-1;}});

var MessageType={NOTICE:'notice',SUCCESS:'success',INFO:'info',WARNING:'warning',ERROR:'error',NEW_FEATURE:'new_feature'};
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Centrifuge",[],t):"object"==typeof exports?exports.Centrifuge=t():e.Centrifuge=t()}(this,(function(){return function(){"use strict";var e={382:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Centrifuge=void 0;var s=u(n(187)),r=u(n(471)),i=n(147),o=n(853);function u(e){return e&&e.__esModule?e:{default:e}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var _="timeout",d="connection closed",p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(b,e);var t,s,u,p,v=(u=b,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(u);if(p){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function b(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(n=v.call(this))._url=e,n._websocket=null,n._sockjs=null,n._isSockjs=!1,n._xmlhttprequest=null,n._binary=!1,n._methodType=null,n._pushType=null,n._encoder=null,n._decoder=null,n._status="disconnected",n._reconnect=!0,n._reconnecting=!1,n._transport=null,n._transportName=null,n._transportClosed=!0,n._messageId=0,n._clientID=null,n._refreshRequired=!1,n._subs={},n._serverSubs={},n._lastSeq={},n._lastGen={},n._lastOffset={},n._lastEpoch={},n._messages=[],n._isBatching=!1,n._isSubscribeBatching=!1,n._privateChannels={},n._numRefreshFailed=0,n._refreshTimeout=null,n._pingTimeout=null,n._pongTimeout=null,n._subRefreshTimeouts={},n._retries=0,n._callbacks={},n._latency=null,n._latencyStart=null,n._connectData=null,n._token=null,n._xhrID=0,n._xhrs={},n._dispatchPromise=Promise.resolve(),n._protocol="",n._config={protocol:"",debug:!1,name:"js",version:"",websocket:null,sockjs:null,xmlhttprequest:null,minRetry:1e3,maxRetry:2e4,timeout:5e3,ping:!0,pingInterval:25e3,pongWaitTimeout:5e3,privateChannelPrefix:"$",onTransportClose:null,sockjsServer:null,sockjsTimeout:null,sockjsTransports:["websocket","xdr-streaming","xhr-streaming","eventsource","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],refreshEndpoint:"/centrifuge/refresh",refreshHeaders:{},refreshParams:{},refreshData:{},refreshAttempts:null,refreshInterval:1e3,onRefreshFailed:null,onRefresh:null,subscribeEndpoint:"/centrifuge/subscribe",subscribeHeaders:{},subscribeParams:{},subRefreshInterval:1e3,onPrivateSubscribe:null,disableWithCredentials:!1},n._configure(t),n}return t=b,s=[{key:"setToken",value:function(e){this._token=e}},{key:"setConnectData",value:function(e){this._connectData=e}},{key:"setRefreshHeaders",value:function(e){this._config.refreshHeaders=e}},{key:"setRefreshParams",value:function(e){this._config.refreshParams=e}},{key:"setRefreshData",value:function(e){this._config.refreshData=e}},{key:"setSubscribeHeaders",value:function(e){this._config.subscribeHeaders=e}},{key:"setSubscribeParams",value:function(e){this._config.subscribeParams=e}},{key:"_ajax",value:function(e,t,s,r,i){var o,u=this,a="";for(var c in this._debug("sending AJAX request to",e,"with data",JSON.stringify(r)),o=null!==this._xmlhttprequest?new this._xmlhttprequest:n.g.XMLHttpRequest?new n.g.XMLHttpRequest:new n.g.ActiveXObject("Microsoft.XMLHTTP"),t)t.hasOwnProperty(c)&&(a.length>0&&(a+="&"),a+=encodeURIComponent(c)+"="+encodeURIComponent(t[c]));for(var h in a.length>0&&(a="?"+a),o.open("POST",e+a,!0),"withCredentials"in o&&(o.withCredentials=!this._config.disableWithCredentials),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","application/json"),s)s.hasOwnProperty(h)&&o.setRequestHeader(h,s[h]);return o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e,t=!1;try{e=JSON.parse(o.responseText),t=!0}catch(e){i({error:"Invalid JSON. Data was: "+o.responseText,status:200,data:null})}t&&i({data:e,status:200})}else u._log("wrong status code in AJAX response",o.status),i({status:o.status,data:null})},setTimeout((function(){return o.send(JSON.stringify(r))}),20),o}},{key:"_log",value:function(){(0,o.log)("info",arguments)}},{key:"_debug",value:function(){!0===this._config.debug&&(0,o.log)("debug",arguments)}},{key:"_websocketSupported",value:function(){return null!==this._config.websocket||!("function"!=typeof WebSocket&&"object"!==("undefined"==typeof WebSocket?"undefined":a(WebSocket)))}},{key:"_setFormat",value:function(e){if(!this._formatOverride(e)){if("protobuf"===e)throw new Error("not implemented by JSON only Centrifuge client – use client with Protobuf");this._binary=!1,this._methodType=i.JsonMethodType,this._pushType=i.JsonPushType,this._encoder=new i.JsonEncoder,this._decoder=new i.JsonDecoder}}},{key:"_formatOverride",value:function(e){return!1}},{key:"_configure",value:function(e){if(!("Promise"in n.g))throw new Error("Promise polyfill required");if((0,o.extend)(this._config,e||{}),this._debug("centrifuge config",this._config),!this._url)throw new Error("url required");if((0,o.startsWith)(this._url,"ws")&&this._url.indexOf("format=protobuf")>-1||"protobuf"===this._config.protocol)this._setFormat("protobuf"),this._protocol="protobuf";else{if(""!==this._config.protocol&&"json"!==this._config.protocol)throw new Error("unsupported protocol "+this._config.protocol);this._setFormat("json")}if((0,o.startsWith)(this._url,"http"))if(this._debug("client will try to connect to SockJS endpoint"),null!==this._config.sockjs)this._debug("SockJS explicitly provided in options"),this._sockjs=this._config.sockjs;else{if(void 0===n.g.SockJS)throw new Error("SockJS not found, use ws:// in url or include SockJS");this._debug("use globally defined SockJS"),this._sockjs=n.g.SockJS}else this._debug("client will connect to websocket endpoint");this._xmlhttprequest=this._config.xmlhttprequest}},{key:"_setStatus",value:function(e){this._status!==e&&(this._debug("Status",this._status,"->",e),this._status=e)}},{key:"_isDisconnected",value:function(){return"disconnected"===this._status}},{key:"_isConnecting",value:function(){return"connecting"===this._status}},{key:"_isConnected",value:function(){return"connected"===this._status}},{key:"_nextMessageId",value:function(){return++this._messageId}},{key:"_resetRetry",value:function(){this._debug("reset retries count to 0"),this._retries=0}},{key:"_getRetryInterval",value:function(){var e=(0,o.backoff)(this._retries,this._config.minRetry,this._config.maxRetry);return this._retries+=1,e}},{key:"_abortInflightXHRs",value:function(){for(var e in this._xhrs){try{this._xhrs[e].abort()}catch(e){this._debug("error aborting xhr",e)}delete this._xhrs[e]}}},{key:"_clearConnectedState",value:function(e){for(var t in this._clientID=null,this._stopPing(),this._callbacks)if(this._callbacks.hasOwnProperty(t)){var n=this._callbacks[t];clearTimeout(n.timeout);var s=n.errback;if(!s)continue;s({error:this._createErrorObject("disconnected")})}for(var r in this._callbacks={},this._subs)if(this._subs.hasOwnProperty(r)){var i=this._subs[r];e?(i._isSuccess()&&(i._triggerUnsubscribe(),i._recover=!0),i._shouldResubscribe()&&i._setSubscribing()):i._setUnsubscribed()}for(var o in this._abortInflightXHRs(),null!==this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),this._subRefreshTimeouts)this._subRefreshTimeouts.hasOwnProperty(o)&&this._subRefreshTimeouts[o]&&this._clearSubRefreshTimeout(o);this._subRefreshTimeouts={},this._reconnect||(this._subs={})}},{key:"_isTransportOpen",value:function(){return this._isSockjs?this._transport&&this._transport.transport&&this._transport.transport.readyState===this._transport.transport.OPEN:this._transport&&this._transport.readyState===this._transport.OPEN}},{key:"_transportSend",value:function(e){if(!e.length)return!0;if(!this._isTransportOpen()){for(var t in e){var n=t.id;if(n in this._callbacks){var s=this._callbacks[n];clearTimeout(this._callbacks[n].timeout),delete this._callbacks[n],(0,s.errback)({error:this._createErrorObject(d,0)})}}return!1}return this._transport.send(this._encoder.encodeCommands(e)),!0}},{key:"_getSubProtocol",value:function(){return this._protocol?"centrifuge-"+this._protocol:""}},{key:"_setupTransport",value:function(){var e=this;if(this._isSockjs=!1,null!==this._sockjs){var t={transports:this._config.sockjsTransports};null!==this._config.sockjsServer&&(t.server=this._config.sockjsServer),null!==this._config.sockjsTimeout&&(t.timeout=this._config.sockjsTimeout),this._isSockjs=!0,this._transport=new this._sockjs(this._url,null,t)}else{if(!this._websocketSupported())return void this._debug("No Websocket support and no SockJS configured, can not connect");null!==this._config.websocket?this._websocket=this._config.websocket:this._websocket=WebSocket;var n=this._getSubProtocol();this._transport=""!==n?new this._websocket(this._url,n):new this._websocket(this._url),!0===this._binary&&(this._transport.binaryType="arraybuffer")}this._transport.onopen=function(){e._transportClosed=!1,e._isSockjs?(e._transportName="sockjs-"+e._transport.transport,e._transport.onheartbeat=function(){return e._restartPing()}):e._transportName="websocket";var t={};(e._token||e._connectData||e._config.name||e._config.version)&&(t.params={}),e._token&&(t.params.token=e._token),e._connectData&&(t.params.data=e._connectData),e._config.name&&(t.params.name=e._config.name),e._config.version&&(t.params.version=e._config.version);var n={},s=!1;for(var r in e._serverSubs)if(e._serverSubs.hasOwnProperty(r)&&e._serverSubs[r].recoverable){s=!0;var i={recover:!0};e._serverSubs[r].seq||e._serverSubs[r].gen?(e._serverSubs[r].seq&&(i.seq=e._serverSubs[r].seq),e._serverSubs[r].gen&&(i.gen=e._serverSubs[r].gen)):e._serverSubs[r].offset&&(i.offset=e._serverSubs[r].offset),e._serverSubs[r].epoch&&(i.epoch=e._serverSubs[r].epoch),n[r]=i}s&&(t.params||(t.params={}),t.params.subs=n),e._latencyStart=new Date,e._call(t).then((function(t){e._connectResponse(e._decoder.decodeCommandResult(e._methodType.CONNECT,t.result),s),t.next&&t.next()}),(function(t){109===t.error.code&&(e._refreshRequired=!0),e._disconnect("connect error",!0),t.next&&t.next()}))},this._transport.onerror=function(t){e._debug("transport level error",t)},this._transport.onclose=function(t){e._transportClosed=!0;var n=d,s=!0;if(t&&"reason"in t&&t.reason)try{var r=JSON.parse(t.reason);e._debug("reason is an advice object",r),n=r.reason,s=r.reconnect}catch(s){n=t.reason,e._debug("reason is a plain string",n)}if(null!==e._config.onTransportClose&&e._config.onTransportClose({event:t,reason:n,reconnect:s}),e._disconnect(n,s),!0===e._reconnect){e._reconnecting=!0;var i=e._getRetryInterval();e._debug("reconnect after "+i+" milliseconds"),setTimeout((function(){!0===e._reconnect&&(e._refreshRequired?e._refresh():e._connect())}),i)}},this._transport.onmessage=function(t){e._dataReceived(t.data)}}},{key:"rpc",value:function(e){return this._rpc("",e)}},{key:"namedRPC",value:function(e,t){return this._rpc(e,t)}},{key:"_rpc",value:function(e,t){var n={data:t};""!==e&&(n.method=e);var s={method:this._methodType.RPC,params:n};return this._methodCall(s,(function(e){return e}))}},{key:"send",value:function(e){var t={method:this._methodType.SEND,params:{data:e}};return this.isConnected()&&this._transportSend([t])?Promise.resolve({}):Promise.reject(this._createErrorObject(d,0))}},{key:"_getHistoryParams",value:function(e,t){var n={channel:e};return void 0!==t&&(t.since&&(n.since={offset:t.since.offset},t.since.epoch&&(n.since.epoch=t.since.epoch)),void 0!==t.limit&&(n.limit=t.limit),!0===t.reverse&&(n.reverse=!0)),n}},{key:"_methodCall",value:function(e,t){var n=this;return this.isConnected()?new Promise((function(s,r){n._call(e).then((function(r){s(t(n._decoder.decodeCommandResult(e.method,r.result))),r.next&&r.next()}),(function(e){r(e.error),e.next&&e.next()}))})):Promise.reject(this._createErrorObject(d,0))}},{key:"publish",value:function(e,t){var n={method:this._methodType.PUBLISH,params:{channel:e,data:t}};return this._methodCall(n,(function(){return{}}))}},{key:"history",value:function(e,t){var n=this._getHistoryParams(e,t),s={method:this._methodType.HISTORY,params:n};return this._methodCall(s,(function(e){return{publications:e.publications,epoch:e.epoch||"",offset:e.offset||0}}))}},{key:"presence",value:function(e){var t={method:this._methodType.PRESENCE,params:{channel:e}};return this._methodCall(t,(function(e){return{presence:e.presence}}))}},{key:"presenceStats",value:function(e){var t={method:this._methodType.PRESENCE_STATS,params:{channel:e}};return this._methodCall(t,(function(e){return{num_users:e.num_users,num_clients:e.num_clients}}))}},{key:"_dataReceived",value:function(e){var t=this,n=this._decoder.decodeReplies(e);this._dispatchPromise=this._dispatchPromise.then((function(){var e;t._dispatchPromise=new Promise((function(t){e=t})),t._dispatchSynchronized(n,e)})),this._restartPing()}},{key:"_dispatchSynchronized",value:function(e,t){var n=this,s=Promise.resolve(),r=function(t){e.hasOwnProperty(t)&&(s=s.then((function(){return n._dispatchReply(e[t])})))};for(var i in e)r(i);s=s.then((function(){t()}))}},{key:"_dispatchReply",value:function(e){var t,n=new Promise((function(e){t=e}));if(null==e)return this._debug("dispatch: got undefined or null reply"),t(),n;var s=e.id;return s&&s>0?this._handleReply(e,t):this._handlePush(e.result,t),n}},{key:"_call",value:function(e){var t=this;return new Promise((function(n,s){var r=t._addMessage(e);t._registerCall(r,n,s)}))}},{key:"_connect",value:function(){this.isConnected()?this._debug("connect called when already connected"):"connecting"!==this._status&&(this._debug("start connecting"),this._setStatus("connecting"),this._clientID=null,this._reconnect=!0,this._setupTransport())}},{key:"_disconnect",value:function(e,t){var n=t||!1;if(!1===n&&(this._reconnect=!1),this._isDisconnected())n||this._clearConnectedState(n);else{if(this._clearConnectedState(n),this._debug("disconnected:",e,t),this._setStatus("disconnected"),this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),!1===this._reconnecting){for(var s in this._serverSubs)this._serverSubs.hasOwnProperty(s)&&this.emit("unsubscribe",{channel:s});this.emit("disconnect",{reason:e,reconnect:n})}!1===n&&(this._subs={},this._serverSubs={}),this._transportClosed||this._transport.close()}}},{key:"_refreshFailed",value:function(){this._numRefreshFailed=0,this._isDisconnected()||this._disconnect("refresh failed",!1),null!==this._config.onRefreshFailed&&this._config.onRefreshFailed()}},{key:"_refresh",value:function(){var e=this;if(this._debug("refresh token"),0===this._config.refreshAttempts)return this._debug("refresh attempts set to 0, do not send refresh request at all"),void this._refreshFailed();null!==this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null);var t=this._clientID,n=this._newXHRID(),s=function(s){if(n in e._xhrs&&delete e._xhrs[n],e._clientID===t)if(s.error||200!==s.status){if(s.error?e._debug("error refreshing connection token",s.error):e._debug("error refreshing connection token: wrong status code",s.status),e._numRefreshFailed++,null!==e._refreshTimeout&&(clearTimeout(e._refreshTimeout),e._refreshTimeout=null),null!==e._config.refreshAttempts&&e._numRefreshFailed>=e._config.refreshAttempts)return void e._refreshFailed();var r=Math.round(1e3*Math.random()*Math.max(e._numRefreshFailed,20)),i=e._config.refreshInterval+r;e._refreshTimeout=setTimeout((function(){return e._refresh()}),i)}else if(e._numRefreshFailed=0,e._token=s.data.token,e._token)if(e._isDisconnected()&&e._reconnect)e._debug("token refreshed, connect from scratch"),e._connect();else{e._debug("send refreshed token");var o={method:e._methodType.REFRESH,params:{token:e._token}};e._call(o).then((function(t){e._refreshResponse(e._decoder.decodeCommandResult(e._methodType.REFRESH,t.result)),t.next&&t.next()}),(function(t){e._refreshError(t.error),t.next&&t.next()}))}else e._refreshFailed()};if(null!==this._config.onRefresh)this._config.onRefresh({},s);else{var r=this._ajax(this._config.refreshEndpoint,this._config.refreshParams,this._config.refreshHeaders,this._config.refreshData,s);this._xhrs[n]=r}}},{key:"_refreshError",value:function(e){var t=this;this._debug("refresh error",e),this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null);var n=this._config.refreshInterval+Math.round(1e3*Math.random());this._refreshTimeout=setTimeout((function(){return t._refresh()}),n)}},{key:"_refreshResponse",value:function(e){var t=this;this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),e.expires&&(this._clientID=e.client,this._refreshTimeout=setTimeout((function(){return t._refresh()}),this._getTTLMilliseconds(e.ttl)))}},{key:"_newXHRID",value:function(){return this._xhrID++,this._xhrID}},{key:"_subRefresh",value:function(e){var t=this;if(this._debug("refresh subscription token for channel",e),void 0!==this._subRefreshTimeouts[e]){this._clearSubRefreshTimeout(e);var n=this._clientID,s=this._newXHRID(),r=function(r){if(s in t._xhrs&&delete t._xhrs[s],!r.error&&200===r.status&&t._clientID===n){var i={};if(r.data.channels)for(var o in r.data.channels){var u=r.data.channels[o];u.channel&&(i[u.channel]=u.token)}var a=i[e];if(a){var c={method:t._methodType.SUB_REFRESH,params:{channel:e,token:a}};null!==t._getSub(e)&&t._call(c).then((function(n){t._subRefreshResponse(e,t._decoder.decodeCommandResult(t._methodType.SUB_REFRESH,n.result)),n.next&&n.next()}),(function(n){t._subRefreshError(e,n.error),n.next&&n.next()}))}}},i={client:this._clientID,channels:[e]};if(null!==this._config.onPrivateSubscribe)this._config.onPrivateSubscribe({data:i},r);else{var o=this._ajax(this._config.subscribeEndpoint,this._config.subscribeParams,this._config.subscribeHeaders,i,r);this._xhrs[s]=o}}}},{key:"_clearSubRefreshTimeout",value:function(e){void 0!==this._subRefreshTimeouts[e]&&(clearTimeout(this._subRefreshTimeouts[e]),delete this._subRefreshTimeouts[e])}},{key:"_subRefreshError",value:function(e,t){var n=this;if(this._debug("subscription refresh error",e,t),this._clearSubRefreshTimeout(e),null!==this._getSub(e)){var s=Math.round(1e3*Math.random()),r=setTimeout((function(){return n._subRefresh(e)}),this._config.subRefreshInterval+s);this._subRefreshTimeouts[e]=r}}},{key:"_subRefreshResponse",value:function(e,t){var n=this;if(this._debug("subscription refresh success",e),this._clearSubRefreshTimeout(e),null!==this._getSub(e)&&!0===t.expires){var s=setTimeout((function(){return n._subRefresh(e)}),this._getTTLMilliseconds(t.ttl));this._subRefreshTimeouts[e]=s}}},{key:"_subscribe",value:function(e,t){var n=this;this._debug("subscribing on",e.channel);var s=e.channel;if(s in this._subs||(this._subs[s]=e),this.isConnected()){e._setSubscribing(t);var r={method:this._methodType.SUBSCRIBE,params:{channel:s}};if(e._subscribeData&&(r.params.data=e._subscribeData),(0,o.startsWith)(s,this._config.privateChannelPrefix))this._isSubscribeBatching?this._privateChannels[s]=!0:(this.startSubscribeBatching(),this._subscribe(e),this.stopSubscribeBatching());else{var i=e._needRecover();if(!0===i){r.params.recover=!0;var u=this._getLastSeq(s),a=this._getLastGen(s);if(u||a)u&&(r.params.seq=u),a&&(r.params.gen=a);else{var c=this._getLastOffset(s);c&&(r.params.offset=c)}var h=this._getLastEpoch(s);h&&(r.params.epoch=h)}this._call(r).then((function(e){n._subscribeResponse(s,i,n._decoder.decodeCommandResult(n._methodType.SUBSCRIBE,e.result)),e.next&&e.next()}),(function(e){n._subscribeError(s,e.error),e.next&&e.next()}))}}else e._setNew()}},{key:"_unsubscribe",value:function(e){delete this._subs[e.channel],delete this._lastOffset[e.channel],delete this._lastSeq[e.channel],delete this._lastGen[e.channel],this.isConnected()&&this._addMessage({method:this._methodType.UNSUBSCRIBE,params:{channel:e.channel}})}},{key:"_getTTLMilliseconds",value:function(e){return Math.min(1e3*e,2147483647)}},{key:"getSub",value:function(e){return this._getSub(e)}},{key:"_getSub",value:function(e){return this._subs[e]||null}},{key:"_isServerSub",value:function(e){return void 0!==this._serverSubs[e]}},{key:"_connectResponse",value:function(e,t){var n=this,s=this._reconnecting;if(this._reconnecting=!1,this._resetRetry(),this._refreshRequired=!1,!this.isConnected()){for(var r in null!==this._latencyStart&&(this._latency=(new Date).getTime()-this._latencyStart.getTime(),this._latencyStart=null),this._clientID=e.client,this._setStatus("connected"),this._refreshTimeout&&clearTimeout(this._refreshTimeout),e.expires&&(this._refreshTimeout=setTimeout((function(){return n._refresh()}),this._getTTLMilliseconds(e.ttl))),this.startBatching(),this.startSubscribeBatching(),this._subs)if(this._subs.hasOwnProperty(r)){var i=this._subs[r];i._shouldResubscribe()&&this._subscribe(i,s)}this.stopSubscribeBatching(),this.stopBatching(),this._startPing();var o={client:e.client,transport:this._transportName,latency:this._latency};e.data&&(o.data=e.data),this.emit("connect",o),e.subs&&this._processServerSubs(e.subs)}}},{key:"_processServerSubs",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],s={channel:t,isResubscribe:void 0!==this._serverSubs[t]};s=this._expandSubscribeContext(s,n),this.emit("subscribe",s)}for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i.recovered){var o=i.publications;if(o&&o.length>0)for(var u in o.length>1&&(!o[0].offset||o[0].offset>o[1].offset)&&(o=o.reverse()),o)o.hasOwnProperty(u)&&this._handlePublication(r,o[u])}this._serverSubs[r]={seq:i.seq,gen:i.gen,offset:i.offset,epoch:i.epoch,recoverable:i.recoverable}}}},{key:"_stopPing",value:function(){null!==this._pongTimeout&&(clearTimeout(this._pongTimeout),this._pongTimeout=null),null!==this._pingTimeout&&(clearTimeout(this._pingTimeout),this._pingTimeout=null)}},{key:"_startPing",value:function(){var e=this;!0!==this._config.ping||this._config.pingInterval<=0||this.isConnected()&&(this._pingTimeout=setTimeout((function(){e.isConnected()?(e.ping(),e._pongTimeout=setTimeout((function(){e._disconnect("no ping",!0)}),e._config.pongWaitTimeout)):e._stopPing()}),this._config.pingInterval))}},{key:"_restartPing",value:function(){this._stopPing(),this._startPing()}},{key:"_subscribeError",value:function(e,t){var n=this._getSub(e);n&&n._isSubscribing()&&(0!==t.code||t.message!==_?n._setSubscribeError(t):this._disconnect("timeout",!0))}},{key:"_expandSubscribeContext",value:function(e,t){var n=!1;"recovered"in t&&(n=t.recovered),e.recovered=n;var s=!1;"positioned"in t&&(s=t.positioned);var r="";"epoch"in t&&(r=t.epoch);var i=0;return"offset"in t&&(i=t.offset),s&&(e.streamPosition={offset:i,epoch:r}),t.data&&(e.data=t.data),e}},{key:"_subscribeResponse",value:function(e,t,n){var s=this,r=this._getSub(e);if(r&&r._isSubscribing()){r._setSubscribeSuccess(n);var i=n.publications;if(i&&i.length>0)for(var o in i.length>=2&&!i[0].offset&&!i[1].offset&&(i=i.reverse()),i)i.hasOwnProperty(o)&&this._handlePublication(e,i[o]);if(!n.recoverable||t&&n.recovered||(this._lastSeq[e]=n.seq||0,this._lastGen[e]=n.gen||0,this._lastOffset[e]=n.offset||0),this._lastEpoch[e]=n.epoch||"",n.recoverable&&(r._recoverable=!0),!0===n.expires){var u=setTimeout((function(){return s._subRefresh(e)}),this._getTTLMilliseconds(n.ttl));this._subRefreshTimeouts[e]=u}}}},{key:"_handleReply",value:function(e,t){var n=e.id,s=e.result;if(n in this._callbacks){var r=this._callbacks[n];if(clearTimeout(this._callbacks[n].timeout),delete this._callbacks[n],(0,o.errorExists)(e)){var i=r.errback;if(!i)return void t();i({error:e.error,next:t})}else{var u=r.callback;if(!u)return;u({result:s,next:t})}}else t()}},{key:"_handleJoin",value:function(e,t){var n={info:t.info},s=this._getSub(e);s?s.emit("join",n):this._isServerSub(e)&&(n.channel=e,this.emit("join",n))}},{key:"_handleLeave",value:function(e,t){var n={info:t.info},s=this._getSub(e);s?s.emit("leave",n):this._isServerSub(e)&&(n.channel=e,this.emit("leave",n))}},{key:"_handleUnsub",value:function(e,t){var n={},s=this._getSub(e);s?(s.unsubscribe(),!0===t.resubscribe&&s.subscribe()):this._isServerSub(e)&&(delete this._serverSubs[e],n.channel=e,this.emit("unsubscribe",n))}},{key:"_handleSub",value:function(e,t){this._serverSubs[e]={seq:t.seq,gen:t.gen,offset:t.offset,epoch:t.epoch,recoverable:t.recoverable};var n={channel:e,isResubscribe:!1};n=this._expandSubscribeContext(n,t),this.emit("subscribe",n)}},{key:"_handlePublication",value:function(e,t){var n=this._getSub(e),s={data:t.data,seq:t.seq,gen:t.gen,offset:t.offset};t.info&&(s.info=t.info),n?(void 0!==t.seq&&(this._lastSeq[e]=t.seq),void 0!==t.gen&&(this._lastGen[e]=t.gen),void 0!==t.offset&&(this._lastOffset[e]=t.offset),n.emit("publish",s)):this._isServerSub(e)&&(void 0!==t.seq&&(this._serverSubs[e].seq=t.seq),void 0!==t.gen&&(this._serverSubs[e].gen=t.gen),void 0!==t.offset&&(this._serverSubs[e].offset=t.offset),s.channel=e,this.emit("publish",s))}},{key:"_handleMessage",value:function(e){this.emit("message",e.data)}},{key:"_handlePush",value:function(e,t){var n=this._decoder.decodePush(e),s=0;"type"in n&&(s=n.type);var r=n.channel;if(s===this._pushType.PUBLICATION){var i=this._decoder.decodePushData(this._pushType.PUBLICATION,n.data);this._handlePublication(r,i)}else if(s===this._pushType.MESSAGE){var o=this._decoder.decodePushData(this._pushType.MESSAGE,n.data);this._handleMessage(o)}else if(s===this._pushType.JOIN){var u=this._decoder.decodePushData(this._pushType.JOIN,n.data);this._handleJoin(r,u)}else if(s===this._pushType.LEAVE){var a=this._decoder.decodePushData(this._pushType.LEAVE,n.data);this._handleLeave(r,a)}else if(s===this._pushType.UNSUBSCRIBE){var c=this._decoder.decodePushData(this._pushType.UNSUBSCRIBE,n.data);this._handleUnsub(r,c)}else if(s===this._pushType.SUBSCRIBE){var h=this._decoder.decodePushData(this._pushType.UNSUBSCRIBE,n.data);this._handleSub(r,h)}t()}},{key:"_flush",value:function(){var e=this._messages.slice(0);this._messages=[],this._transportSend(e)}},{key:"_ping",value:function(){var e=this,t={method:this._methodType.PING};this._call(t).then((function(t){e._pingResponse(e._decoder.decodeCommandResult(e._methodType.PING,t.result)),t.next&&t.next()}),(function(t){e._debug("ping error",t.error),t.next&&t.next()}))}},{key:"_pingResponse",value:function(e){this.isConnected()&&(this._stopPing(),this._startPing())}},{key:"_getLastSeq",value:function(e){return this._lastSeq[e]||0}},{key:"_getLastOffset",value:function(e){return this._lastOffset[e]||0}},{key:"_getLastGen",value:function(e){return this._lastGen[e]||0}},{key:"_getLastEpoch",value:function(e){return this._lastEpoch[e]||""}},{key:"_createErrorObject",value:function(e,t){return{message:e,code:t||0}}},{key:"_registerCall",value:function(e,t,n){var s=this;this._callbacks[e]={callback:t,errback:n,timeout:null},this._callbacks[e].timeout=setTimeout((function(){delete s._callbacks[e],(0,o.isFunction)(n)&&n({error:s._createErrorObject(_)})}),this._config.timeout)}},{key:"_addMessage",value:function(e){var t=this._nextMessageId();return e.id=t,!0===this._isBatching?this._messages.push(e):this._transportSend([e]),t}},{key:"isConnected",value:function(){return this._isConnected()}},{key:"connect",value:function(){this._connect()}},{key:"disconnect",value:function(){this._disconnect("client",!1)}},{key:"ping",value:function(){return this._ping()}},{key:"startBatching",value:function(){this._isBatching=!0}},{key:"stopBatching",value:function(){this._isBatching=!1,this._flush()}},{key:"startSubscribeBatching",value:function(){this._isSubscribeBatching=!0}},{key:"stopSubscribeBatching",value:function(){var e=this;this._isSubscribeBatching=!1;var t=this._privateChannels;this._privateChannels={};var n=[];for(var s in t)if(t.hasOwnProperty(s)){if(!this._getSub(s))continue;n.push(s)}if(0!==n.length){var r={client:this._clientID,channels:n},i=this._clientID,o=this._newXHRID(),u=function(t){if(o in e._xhrs&&delete e._xhrs[o],e._clientID===i)if(t.error||200!==t.status){for(var s in e._debug("authorization request failed"),n)if(n.hasOwnProperty(s)){var r=n[s];e._subscribeError(r,e._createErrorObject("authorization request failed"))}}else{var u={};if(t.data.channels)for(var a in t.data.channels){var c=t.data.channels[a];c.channel&&(u[c.channel]=c.token)}var h=!1;for(var l in e._isBatching||(e.startBatching(),h=!0),n)if(n.hasOwnProperty(l)){var f=function(){var t=n[l],s=u[t];if(!s)return e._subscribeError(t,e._createErrorObject("permission denied",103)),"continue";var r={method:e._methodType.SUBSCRIBE,params:{channel:t,token:s}},i=e._getSub(t);if(null===i)return"continue";var o=i._needRecover();if(!0===o){r.params.recover=!0;var a=e._getLastSeq(t),c=e._getLastGen(t);if(a||c)a&&(r.params.seq=a),c&&(r.params.gen=c);else{var h=e._getLastOffset(t);h&&(r.params.offset=h)}var f=e._getLastEpoch(t);f&&(r.params.epoch=f)}e._call(r).then((function(n){e._subscribeResponse(t,o,e._decoder.decodeCommandResult(e._methodType.SUBSCRIBE,n.result)),n.next&&n.next()}),(function(n){e._subscribeError(t,n.error),n.next&&n.next()}))}();if("continue"===f)continue}h&&e.stopBatching()}};if(null!==this._config.onPrivateSubscribe)this._config.onPrivateSubscribe({data:r},u);else{var a=this._ajax(this._config.subscribeEndpoint,this._config.subscribeParams,this._config.subscribeHeaders,r,u);this._xhrs[o]=a}}else this._debug("no private channels found, no need to make request")}},{key:"_setSubscribeSince",value:function(e,t){this._lastOffset[e.channel]=t.offset,this._lastEpoch[e.channel]=t.epoch,e._setNeedRecover(!0)}},{key:"subscribe",value:function(e,t,n){var s=this._getSub(e);if(null!==s)return s._setEvents(t),s._isUnsubscribed()&&s.subscribe(n),s;var i=new r.default(this,e,t);return this._subs[e]=i,i.subscribe(n),i}}],s&&c(t.prototype,s),b}(s.default);t.Centrifuge=p},579:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(382).Centrifuge;t.default=s,e.exports=t.default},147:function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.JsonPushType=t.JsonMethodType=t.JsonEncoder=t.JsonDecoder=void 0,t.JsonMethodType={CONNECT:0,SUBSCRIBE:1,UNSUBSCRIBE:2,PUBLISH:3,PRESENCE:4,PRESENCE_STATS:5,HISTORY:6,PING:7,SEND:8,RPC:9,REFRESH:10,SUB_REFRESH:11},t.JsonPushType={PUBLICATION:0,JOIN:1,LEAVE:2,UNSUBSCRIBE:3,MESSAGE:4,SUBSCRIBE:5};var i=function(){function e(){n(this,e)}return r(e,[{key:"encodeCommands",value:function(e){return e.map((function(e){return JSON.stringify(e)})).join("\n")}}]),e}();t.JsonEncoder=i;var o=function(){function e(){n(this,e)}return r(e,[{key:"decodeReplies",value:function(e){return e.split("\n").filter((function(e){return""!==e})).map((function(e){return JSON.parse(e)}))}},{key:"decodeCommandResult",value:function(e,t){return t}},{key:"decodePush",value:function(e){return e}},{key:"decodePushData",value:function(e,t){return t}}]),e}();t.JsonDecoder=o},471:function(e,t,n){function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(187))&&r.__esModule?r:{default:r},o=n(853);function u(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function c(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,n,s,r,i=(s=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(s);if(r){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function l(e,t,n){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(s=i.call(this)).channel=t,s._centrifuge=e,s._status=0,s._error=null,s._isResubscribe=!1,s._ready=!1,s._subscriptionPromise=null,s._noResubscribe=!1,s._recoverable=!1,s._recover=!1,s._setEvents(n),s._initializePromise(),s._promises={},s._promiseId=0,s._subscribeData=null,s.on("error",(function(e){this._centrifuge._debug("subscription error",e)})),s}return t=l,(n=[{key:"_nextPromiseId",value:function(){return++this._promiseId}},{key:"_initializePromise",value:function(){var e=this;this._ready=!1,this._subscriptionPromise=new Promise((function(t,n){e._resolve=function(n){e._ready=!0,t(n)},e._reject=function(t){e._ready=!0,n(t)}})).then((function(){}),(function(){}))}},{key:"_setNeedRecover",value:function(e){this._recoverable=e,this._recover=e}},{key:"_needRecover",value:function(){return!0===this._recoverable&&!0===this._recover}},{key:"_setEvents",value:function(e){if(e)if((0,o.isFunction)(e))this.on("publish",e);else if(Object.prototype.toString.call(e)===Object.prototype.toString.call({}))for(var t=["publish","join","leave","unsubscribe","subscribe","error"],n=0,s=t.length;n<s;n++){var r=t[n];r in e&&this.on(r,e[r])}}},{key:"_isNew",value:function(){return 0===this._status}},{key:"_isUnsubscribed",value:function(){return 4===this._status}},{key:"_isSubscribing",value:function(){return 1===this._status}},{key:"_isReady",value:function(){return 2===this._status||3===this._status}},{key:"_isSuccess",value:function(){return 2===this._status}},{key:"_isError",value:function(){return 3===this._status}},{key:"_setNew",value:function(){this._status=0}},{key:"_setSubscribing",value:function(e){this._isResubscribe=e||!1,!0===this._ready&&this._initializePromise(),this._status=1}},{key:"_setSubscribeSuccess",value:function(e){if(2!==this._status){this._status=2;var t=this._getSubscribeSuccessContext(e);for(var n in this._recover=!1,this.emit("subscribe",t),this._resolve(t),this._promises)clearTimeout(this._promises[n].timeout),this._promises[n].resolve(),delete this._promises[n]}}},{key:"_setSubscribeError",value:function(e){if(3!==this._status){this._status=3,this._error=e;var t=this._getSubscribeErrorContext();for(var n in this.emit("error",t),this._reject(t),this._promises)clearTimeout(this._promises[n].timeout),this._promises[n].reject(e),delete this._promises[n]}}},{key:"_triggerUnsubscribe",value:function(){this.emit("unsubscribe",{channel:this.channel})}},{key:"_setUnsubscribed",value:function(e){if(this._centrifuge._clearSubRefreshTimeout(this.channel),4!==this._status){var t=2===this._status;this._status=4,!0===e&&(this._recover=!1,this._noResubscribe=!0,delete this._centrifuge._lastSeq[this.channel],delete this._centrifuge._lastGen[this.channel],delete this._centrifuge._lastEpoch[this.channel]),t&&this._triggerUnsubscribe()}}},{key:"_shouldResubscribe",value:function(){return!this._noResubscribe}},{key:"_getSubscribeSuccessContext",value:function(e){var t={channel:this.channel,isResubscribe:this._isResubscribe};return e&&(t=this._centrifuge._expandSubscribeContext(t,e)),t}},{key:"_getSubscribeErrorContext",value:function(){var e=this._error;return e.channel=this.channel,e.isResubscribe=this._isResubscribe,e}},{key:"_setSubscribeData",value:function(e){this._subscribeData=e}},{key:"ready",value:function(e,t){this._ready&&(this._isSuccess()?e(this._getSubscribeSuccessContext()):t(this._getSubscribeErrorContext()))}},{key:"subscribe",value:function(e){2!==this._status&&(e&&e.since&&this._centrifuge._setSubscribeSince(this,e.since),e&&e.data&&this._setSubscribeData(e.data),this._noResubscribe=!1,this._centrifuge._subscribe(this))}},{key:"unsubscribe",value:function(){this._setUnsubscribed(!0),this._centrifuge._unsubscribe(this)}},{key:"_methodCall",value:function(){var e=this;return this._isSuccess()?Promise.resolve():this._isError()?Promise.reject(this._error):new Promise((function(t,n){var s=setTimeout((function(){n({code:0,message:"timeout"})}),e._centrifuge._config.timeout);e._promises[e._nextPromiseId()]={timeout:s,resolve:t,reject:n}}))}},{key:"publish",value:function(e){var t=this;return this._methodCall().then((function(){return t._centrifuge.publish(t.channel,e)}))}},{key:"presence",value:function(){var e=this;return this._methodCall().then((function(){return e._centrifuge.presence(e.channel)}))}},{key:"presenceStats",value:function(){var e=this;return this._methodCall().then((function(){return e._centrifuge.presenceStats(e.channel)}))}},{key:"history",value:function(e){var t=this;return this._methodCall().then((function(){return t._centrifuge.history(t.channel,e)}))}}])&&u(t.prototype,n),l}(i.default);t.default=l,e.exports=t.default},853:function(e,t,n){function s(e){return null!=e&&"function"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.backoff=function(e,t,n){var s=.5*Math.random(),r=Math.min(n,t*Math.pow(2,e+1));return Math.floor((1-s)*r)},t.errorExists=function(e){return"error"in e&&null!==e.error},t.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t.isFunction=s,t.log=function(e,t){if(n.g.console){var r=n.g.console[e];s(r)&&r.apply(n.g.console,t)}},t.startsWith=function(e,t){return 0===e.lastIndexOf(t,0)}},187:function(e){var t,n="object"==typeof Reflect?Reflect:null,s=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,s){function r(n){e.removeListener(t,i),s(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}p(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&p(e,"error",t,{once:!0})}(e,r)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,n,s){var r,i,o,c;if(u(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if("function"==typeof o?o=i[t]=s?[n,o]:[o,n]:s?o.unshift(n):o.push(n),(r=a(e))>0&&o.length>r&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,c=h,console&&console.warn&&console.warn(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(s);return r.listener=n,s.wrapFn=r,r}function f(e,t,n){var s=e._events;if(void 0===s)return[];var r=s[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):d(r,r.length)}function _(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(e,t){for(var n=new Array(t),s=0;s<t;++s)n[s]=e[s];return n}function p(e,t,n,s){if("function"==typeof e.on)s.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(i){s.once&&e.removeEventListener(t,r),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)s(a,this,t);else{var c=a.length,h=d(a,c);for(n=0;n<c;++n)s(h[n],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return u(t),this.on(e,l(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,l(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,s,r,i,o;if(u(t),void 0===(s=this._events))return this;if(void 0===(n=s[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(s[e]=n[0]),void 0!==s.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,s;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,i=Object.keys(n);for(s=0;s<i.length;++s)"removeListener"!==(r=i[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},i.prototype.listenerCount=_,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n(579)}()}));

var UiEnvironmentInfo=Base.extend({},{_locale:null,_uilibMessagesUrl:null,_designSystemCustomColors:null,_firstDayOfWeek:null,_accountCreationDate:null,_accountBrand:null,_accountRestrictions:null,_accountFeatures:null,_accountSubscription:null,_accountUid:null,_userUid:null,_gossipTokenUrl:null,_gossipToken:null,_gtmId:null,_baseUrls:null,getLocale:function(){if(!UiEnvironmentInfo._locale){UiEnvironmentInfo._locale=document.getElementById('locale').value;}
return UiEnvironmentInfo._locale;},getUilibMessagesUrl:function(){if(!UiEnvironmentInfo._uilibMessagesUrl){UiEnvironmentInfo._uilibMessagesUrl=document.getElementById('uilibMessagesUrl').value;}
return UiEnvironmentInfo._uilibMessagesUrl;},getDesignSystemCustomColors:function(){if(!UiEnvironmentInfo._designSystemCustomColors){UiEnvironmentInfo._designSystemCustomColors=JSON.parse(document.getElementById('designSystemCustomColors').value);}
return UiEnvironmentInfo._designSystemCustomColors;},getFirstDayOfWeek:function(){if(!UiEnvironmentInfo._firstDayOfWeek){UiEnvironmentInfo._firstDayOfWeek=document.getElementById('firstDayOfWeek').value;}
return UiEnvironmentInfo._firstDayOfWeek;},getAccountCreationDate:function(){if(!UiEnvironmentInfo._accountCreationDate){UiEnvironmentInfo._accountCreationDate=parseInt(document.getElementById('accountCreationDate').value);}
return UiEnvironmentInfo._accountCreationDate;},getAccountSubscription:function(){if(!UiEnvironmentInfo._accountSubscription){UiEnvironmentInfo._accountSubscription=JSON.parse(document.getElementById('accountSubscription').value);}
return UiEnvironmentInfo._accountSubscription;},getAccountRestrictions:function(){if(!UiEnvironmentInfo._accountRestrictions){UiEnvironmentInfo._accountRestrictions=JSON.parse(document.getElementById('accountRestrictions').value);}
return UiEnvironmentInfo._accountRestrictions;},getAccountFeatures:function(){if(!UiEnvironmentInfo._accountFeatures){UiEnvironmentInfo._accountFeatures=JSON.parse(document.getElementById('accountFeatures').value);}
return UiEnvironmentInfo._accountFeatures;},getAccountUid:function(){if(!UiEnvironmentInfo._accountUid){UiEnvironmentInfo._accountUid=document.getElementById('accountUid').value;}
return UiEnvironmentInfo._accountUid;},getUserUid:function(){if(!UiEnvironmentInfo._userUid){UiEnvironmentInfo._userUid=document.getElementById('userUid').value;}
return UiEnvironmentInfo._userUid;},_getGossipTokenUrl:function(){if(!UiEnvironmentInfo._gossipTokenUrl){UiEnvironmentInfo._gossipTokenUrl=document.getElementById('gossipTokenUrl').value;}
return UiEnvironmentInfo._gossipTokenUrl;},getGossipTokenFn:function(){if(this._gossipToken){var token=this._gossipToken;return Promise.resolve(token)}
return new Promise(function(resolve,reject){Requester.makeRequest(UiEnvironmentInfo._getGossipTokenUrl(),{},Requester.REQUEST_METHOD.GET,Requester.REQUEST_DATA_TYPE.JSON).then(function(data){var token=data.token;if(token){this._gossipToken=token;resolve(token);return;}
reject();}.bind(this),reject);}.bind(this));},getGtmId:function(){if(!UiEnvironmentInfo._gtmId){UiEnvironmentInfo._gtmId=document.getElementById('gtmId').value||null;}
return UiEnvironmentInfo._gtmId;},getBaseUrls:function(){if(!UiEnvironmentInfo._baseUrls){UiEnvironmentInfo._baseUrls=JSON.parse(document.getElementById('baseUrls').value);}
return UiEnvironmentInfo._baseUrls;},});

var RealTimeNotificationApi=Base.extend({},{_instance:null,initInstance:function(){if(!RealTimeNotificationApi._instance){var configString=$("#realTimeNotificationServiceSubscriptionData").val();try{var config=$.parseJSON(configString);RealTimeNotificationApi._instance=new Centrifuge(config.url,config.optionsJson);RealTimeNotificationApi._instance.setToken(config.token);RealTimeNotificationApi._instance.connect();}
catch(error){}}},getInstance:function(){this.initInstance();return this._instance;}});$(function(){RealTimeNotificationApi.initInstance();});

var UiAccount=Base.extend({},{getAccount:function(){return{creationDate:UiEnvironmentInfo.getAccountCreationDate(),timeZone:UiEnvironmentTimeZoneInfo.getAccountTimeZone(UiEnvironmentInfo.getAccountSubscription().product).serialize(),subscription:UiEnvironmentInfo.getAccountSubscription(),restrictions:UiEnvironmentInfo.getAccountRestrictions(),features:UiEnvironmentInfo.getAccountFeatures(),uid:UiEnvironmentInfo.getAccountUid()};}});

var UiUser=Base.extend({},{getUser:function(){return{uid:UiEnvironmentInfo.getUserUid(),timeZone:UiEnvironmentTimeZoneInfo.getUserTimeZone(UiEnvironmentInfo.getAccountSubscription().product).serialize(),};}});

var UiLearnPortalMode=Base.extend({},{USER_PORTAL:'userPortal',ADMIN_PORTAL:'adminPortal',});

var UiEnvironment=Base.extend({},{_serverTimeZoneOffset:null,initialize:function(){var i18nData=UiEnvironment._getI18nData();if(i18nData===null){throw new Error('Localization data not available');}
UiLib.initEnvironment({...UiEnvironment._getExtendedParams(),i18n:i18nData,designSystemCustomColors:UiEnvironmentInfo.getDesignSystemCustomColors(),locale:UiEnvironmentInfo.getLocale(),account:UiAccount.getAccount(),user:UiUser.getUser(),gtmId:UiEnvironmentInfo.getGtmId(),baseUrls:UiEnvironmentInfo.getBaseUrls(),pluralizeFn:TextBuilder.build,calendar:{weekStartDay:UiEnvironmentInfo.getFirstDayOfWeek(),months:UIDateTimeUtils.getMonthNames(EnvironmentInfo.getLocale()),weekDayNames:UIDateTimeUtils.getWeekDayShortNames(EnvironmentInfo.getLocale())},getGossipTokenFn:UiEnvironment._getGossipTokenFn,realtimeApi:RealTimeNotificationApi.getInstance(),});UiEnvironment._initToastsContainer();},initLayers:function(){if(!UiLib.topLayer){UiLib.topLayer=document.getElementById('uiTopLayer');UiLib.initDropdownLayer(UiLib.topLayer);UiLib.initTooltipLayer(UiLib.topLayer);}
if(!UiLib.popupLayer){UiLib.popupLayer=document.getElementById('uiPopupLayer');UiLib.Popup.initPopupLayer(UiLib.popupLayer);}},_getExtendedParams:function(){if(SubscriptionProductName.isLearn(UiEnvironmentInfo.getAccountSubscription().product)){var isUserPortal=Number(document.getElementById('isUserPortal').value);var learnPortalMode=isUserPortal?UiLearnPortalMode.USER_PORTAL:UiLearnPortalMode.ADMIN_PORTAL;return{learnPortalMode:learnPortalMode,}}
return{}},_initToastsContainer:function(){$(function(){document.getElementById('uiToastLayer').appendChild(UiLib.ToastsContainer({}));});},_getI18nData:function(){var path=UiEnvironmentInfo.getUilibMessagesUrl();var i18nData=null;var request=new XMLHttpRequest();request.open('GET',path,false);request.send(null);if(request.status===200){i18nData=JSON.parse(request.responseText);}
return i18nData;},_getGossipTokenFn:function(){return UiEnvironmentInfo.getGossipTokenFn();},});(function(){UiEnvironment.initialize();})();

var FormField=EventDispatcher.extend({placeholder:null,id:null,name:null,container:null,defaultValue:null,initialValue:null,state:null,_errorBehavior:null,_ignoreErrorClearing:false,constructor:function(id)
{this.base();this.id=id;this.placeholder=$('#'+id+'Placeholder').val();this.container=$('#'+this.id+'Container');this.defaultValue=$('#'+id+'DefaultValue').val();this.setUserNotTyping();this.initInputEvents();},initialize:function()
{throw new Error('Method not implemented');},terminate:function()
{this.removeAllListeners();},setErrorBehavior:function(errorBehavior)
{this._errorBehavior=errorBehavior;},getErrorBehavior:function()
{return this._errorBehavior;},getName:function()
{return this.name;},getId:function()
{return this.id;},addClass:function(cssClass)
{this.container.addClass(cssClass);},removeClass:function(cssClass)
{this.container.removeClass(cssClass);},setContainer:function(container)
{this.container=container;},getContainer:function()
{return this.container;},setDefaultValue:function(defaultValue)
{this.defaultValue=defaultValue;},setPlaceholderValue:function(value)
{this.placeholder=value;},getValue:function()
{throw new Error('Method not implemented');},setValue:function(value)
{throw new Error('Method not implemented');},restoreToInitialValue:function()
{this.refresh();this.setValue(this.initialValue);},saveCurrentValueAsInitial:function()
{this.initialValue=this.getValue();},hasError:function()
{return this.container.hasClass(FormField.css.ERROR);},showError:function(validatorMessage)
{this.container.addClass(FormField.css.ERROR);this.container.addClass(this._errorBehavior.getType());this._errorBehavior.showError(validatorMessage);this.setUserNotTyping();},hideError:function()
{this.container.removeClass(FormField.css.ERROR);this.container.removeClass(this._errorBehavior.getType());this._errorBehavior.hideError();},show:function()
{this.container.removeClass(FormField.css.HIDDEN);},hide:function()
{this.container.addClass(FormField.css.HIDDEN);},isHidden:function()
{return this.container.hasClass(FormField.css.HIDDEN);},refresh:function()
{},clear:function()
{},enable:function()
{},disable:function()
{},isEnabled:function()
{throw new Error('Method not implemented');},toggleEnable:function(isEnabled)
{if(Boolean(isEnabled))
{this.enable();}
else
{this.disable();}},select:function()
{},enableReadonly:function()
{},disableReadonly:function()
{},isReadonly:function()
{return false;},showLoading:function()
{this.container.addClass(FormField.css.LOADING);},hideLoading:function()
{this.container.removeClass(FormField.css.LOADING);},hideFieldRow:function()
{this.container.parents('.form_row').addClass(FormField.css.HIDDEN);},showFieldRow:function()
{this.container.parents('.form_row').removeClass(FormField.css.HIDDEN);},getFormFieldElement:function()
{return $('['+FormField.attr.FORM_FIELD_ID+'="'+this.id+'"]');},isEmpty:function()
{return false;},chooseInputEventByBrowser:function()
{var inputEvent;if(UIBrowserUtils.isIeLt9())
{inputEvent=FormField.event.PROPERTYCHANGE+' '+FormField.event.KEYUP;}
else
{inputEvent=FormField.event.INPUT;}
return inputEvent;},setUserIsTyping:function()
{this.state=FormField.state.USER_TYPING;},setUserNotTyping:function()
{this.state=FormField.state.USER_NOT_TYPING;},setIgnoreErrorClearing:function(ignore)
{this._ignoreErrorClearing=ignore;},initInputEvents:function()
{this.addListener(FormField.event.INPUT,this,this._onNewInputStarted);this.addListener(FormField.event.KEYPRESS,this,this._onNewInputStarted);this.addListener(FormField.event.CHANGE,this,this._onNewInputStarted);},_onNewInputStarted:function()
{if(this.state==FormField.state.USER_NOT_TYPING&&!this._ignoreErrorClearing)
{this.hideError();this.setUserIsTyping();}}},{css:{PLACEHOLDER:'placeholder',ERROR:'error',DISABLED:'disabled',LOADING:'loading',FOCUS:'focus',HIDDEN:'hidden',READONLY:'readonly'},event:{KEYDOWN:'keydown',KEYPRESS:'keypress',KEYUP:'keyup',FOCUS:'focus',BLUR:'blur',CHANGE:'change',CHECKED:'checked',UNCHECKED:'unchecked',CLICK:'click',INPUT:'input',PROPERTYCHANGE:'propertychange',READY:'ready'},attr:{FORM_FIELD_ID:'data-form-field-id',FORM_FIELD_TYPE:'data-form-field-type',FORM_FIELD_ERROR_TYPE:'data-form-field-error-type',FORM_FILED_INITIAL_VALUE:'data-form-field-initial-value',FORM_FIELD_ERROR_CONTAINER_ID:'data-form-field-error-container-id'},state:{USER_NOT_TYPING:'user_not_typing',USER_TYPING:'user_typing'},isNullType:function(formField)
{return(formField instanceof NullFormField);}});

var SaveButton=EventDispatcher.extend({id:null,_saveButton:null,constructor:function(id)
{this.base();this.id=id;this._saveButton=Button.initButtonByContext(id+"SaveButton");this._saveButton.addListener(Button.event.CLICKED,this,this.onSaveButtonClicked);},show:function()
{this._saveButton.show();},hide:function()
{this._saveButton.hide();},onSaveButtonClicked:function()
{this.dispatchEvent(SaveButton.event.SAVE,this);},loading:function(load)
{if(load)
{this.showLoading();}
else
{this.hideLoading();}},showLoading:function()
{this._saveButton.showLoading();},hideLoading:function()
{this._saveButton.hideLoading();},enabled:function(isEnabled)
{return this._saveButton.enabled(isEnabled);},setText:function(text)
{this._saveButton.setText(text);},showSaveButton:function()
{this._saveButton.show();},hideSaveButton:function()
{this._saveButton.hide();}},{event:{SAVE:'save'},buttons:{},initButton:function(id)
{var button=new this(id);this.buttons[id]=button;return button;},getButton:function(id)
{return this.buttons[id];},createButton:function(id)
{SaveButton.initButton(id);return SaveButton.getButton(id);}});

var SaveCancelButtons=SaveButton.extend({cancelButton:null,container:null,_cancelSection:null,_isCancelAsButton:null,constructor:function(id)
{this.base(id);this.container=$("#"+this.id+"SaveCancelButtonsContainer");this._isCancelAsButton=this.container.data(SaveCancelButtons.data.CANCEL_AS_BUTTON);if(this._isCancelAsButton)
{this.cancelButton=Button.initButtonByContext(id+"CancelButton");this.cancelButton.addListener(Button.event.CLICKED,this,this.onCancelButtonClicked);}
else
{$('#'+id+"CancelButton").click(handler(this,"onCancelButtonClicked"));}
this._cancelSection=$("#"+this.id+"CancelSection");},show:function()
{this.container.removeClass('hidden');},hide:function()
{this.container.addClass('hidden');},onCancelButtonClicked:function()
{this.dispatchEvent(SaveCancelButtons.event.CANCEL,this);},showCancelSection:function()
{if(this._isCancelAsButton)
{this.cancelButton.enable();}
else
{this._cancelSection.removeClass('invisible');}},hideCancelSection:function()
{if(this._isCancelAsButton)
{this.cancelButton.disable();}
else
{this._cancelSection.addClass('invisible');}},showLoading:function()
{this.base();this.hideCancelSection();},hideLoading:function()
{this.base();this.showCancelSection();},setSaveButtonColor:function(color)
{this._saveButton.setColor(color);},setCancelText:function(text)
{this.cancelButton.setText(text);}},{buttons:{},event:{SAVE:'save',CANCEL:'cancel'},data:{CANCEL_AS_BUTTON:'cancel-as-button'},initButtons:function(id)
{var buttons=new SaveCancelButtons(id);SaveCancelButtons.buttons[id]=buttons;return buttons;},getButtons:function(id)
{return SaveCancelButtons.buttons[id];},createButtons:function(id)
{SaveCancelButtons.initButtons(id);return SaveCancelButtons.getButtons(id);}});

var UrlLoader=EventDispatcher.extend({loadIndicator:null,ajaxRequest:null,constructor:function()
{this.base();},setLoadIndicator:function(indicator)
{if(typeof(indicator)=="string")
{indicator=$("#"+indicator);}
this.loadIndicator=indicator;},loading:function()
{return(this.ajaxRequest!=null);},abort:function()
{if(this.loading())
{this.ajaxRequest.abort();this.ajaxRequest=null;}},load:function(url,params,responseType)
{this.abort();if(params==undefined)
{params={};}
this.showLoadIndicator();this.ajaxRequest=$.ajax({type:'POST',url:url,data:params,success:handler(this,'onLoaded'),error:handler(this,'onError'),dataType:responseType});},loadJson:function(url,params)
{this.load(url,params,'json');},onLoaded:function(response)
{this.ajaxRequest=null;this.hideLoadIndicator();this.dispatchEvent(UrlLoader.event.LOAD_COMPLETE,response);},onError:function(response)
{this.ajaxRequest=null;this.hideLoadIndicator();this.dispatchEvent(UrlLoader.event.LOAD_ERROR,response);},showLoadIndicator:function()
{if(this.loadIndicator)
{if(this._doesItSupportLoadingMethod(this.loadIndicator))
{this.loadIndicator.loading(true);}
else
{this.loadIndicator.show();}}},hideLoadIndicator:function()
{if(this.loadIndicator)
{if(this._doesItSupportLoadingMethod(this.loadIndicator))
{this.loadIndicator.loading(false);}
else
{this.loadIndicator.hide();}}},_doesItSupportLoadingMethod:function(loadIndicator)
{return typeof loadIndicator.loading!="undefined"&&$.isFunction(loadIndicator.loading);}},{event:{LOAD_COMPLETE:'loadComplete',LOAD_ERROR:'loadError'}});

Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,p=function(s,l){if(!l){l=2;}
return("000"+s).slice(l*-1);};$P.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};$P.setTimeToNow=function(){var n=new Date();this.setHours(n.getHours());this.setMinutes(n.getMinutes());this.setSeconds(n.getSeconds());this.setMilliseconds(n.getMilliseconds());return this;};$D.today=function(){return new Date().clearTime();};$D.compare=function(date1,date2){if(isNaN(date1)||isNaN(date2)){throw new Error(date1+" - "+date2);}else if(date1 instanceof Date&&date2 instanceof Date){return(date1<date2)?-1:(date1>date2)?1:0;}else{throw new TypeError(date1+" - "+date2);}};$D.equals=function(date1,date2){return(date1.compareTo(date2)===0);};$D.getDayNumberFromName=function(name){var n=$C.dayNames,m=$C.abbreviatedDayNames,o=$C.shortestDayNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s||o[i].toLowerCase()==s){return i;}}
return-1;};$D.getMonthNumberFromName=function(name){var n=$C.monthNames,m=$C.abbreviatedMonthNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s){return i;}}
return-1;};$D.isLeapYear=function(year){return((year%4===0&&year%100!==0)||year%400===0);};$D.getDaysInMonth=function(year,month){return[31,($D.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];};$D.getTimezoneAbbreviation=function(offset){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].offset===offset){return z[i].name;}}
return null;};$D.getTimezoneOffset=function(name){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].name===name.toUpperCase()){return z[i].offset;}}
return null;};$P.clone=function(){return new Date(this.getTime());};$P.compareTo=function(date){return Date.compare(this,date);};$P.equals=function(date){return Date.equals(this,date||new Date());};$P.between=function(start,end){return this.getTime()>=start.getTime()&&this.getTime()<=end.getTime();};$P.isAfter=function(date){return this.compareTo(date||new Date())===1;};$P.isBefore=function(date){return(this.compareTo(date||new Date())===-1);};$P.isToday=function(){return this.isSameDay(new Date());};$P.isSameDay=function(date){return this.clone().clearTime().equals(date.clone().clearTime());};$P.addMilliseconds=function(value){this.setMilliseconds(this.getMilliseconds()+value);return this;};$P.addSeconds=function(value){return this.addMilliseconds(value*1000);};$P.addMinutes=function(value){return this.addMilliseconds(value*60000);};$P.addHours=function(value){return this.addMilliseconds(value*3600000);};$P.addDays=function(value){this.setDate(this.getDate()+value);return this;};$P.addWeeks=function(value){return this.addDays(value*7);};$P.addMonths=function(value){var n=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+value);this.setDate(Math.min(n,$D.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};$P.addYears=function(value){return this.addMonths(value*12);};$P.add=function(config){if(typeof config=="number"){this._orient=config;return this;}
var x=config;if(x.milliseconds){this.addMilliseconds(x.milliseconds);}
if(x.seconds){this.addSeconds(x.seconds);}
if(x.minutes){this.addMinutes(x.minutes);}
if(x.hours){this.addHours(x.hours);}
if(x.weeks){this.addWeeks(x.weeks);}
if(x.months){this.addMonths(x.months);}
if(x.years){this.addYears(x.years);}
if(x.days){this.addDays(x.days);}
return this;};var $y,$m,$d;$P.getWeek=function(){var a,b,c,d,e,f,g,n,s,w;$y=(!$y)?this.getFullYear():$y;$m=(!$m)?this.getMonth()+1:$m;$d=(!$d)?this.getDate():$d;if($m<=2){a=$y-1;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=0;f=$d-1+(31*($m-1));}else{a=$y;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=s+1;f=$d+((153*($m-3)+2)/5)+58+s;}
g=(a+b)%7;d=(f+g-e)%7;n=(f+3-d)|0;if(n<0){w=53-((g-s)/5|0);}else if(n>364+s){w=1;}else{w=(n/7|0)+1;}
$y=$m=$d=null;return w;};$P.getISOWeek=function(){$y=this.getUTCFullYear();$m=this.getUTCMonth()+1;$d=this.getUTCDate();return p(this.getWeek());};$P.setWeek=function(n){return this.moveToDayOfWeek(1).addWeeks(n-this.getWeek());};$D._validate=function(n,min,max,name){if(typeof n=="undefined"){return false;}else if(typeof n!="number"){throw new TypeError(n+" is not a Number.");}else if(n<min||n>max){throw new RangeError(n+" is not a valid value for "+name+".");}
return true;};$D.validateMillisecond=function(value){return $D._validate(value,0,999,"millisecond");};$D.validateSecond=function(value){return $D._validate(value,0,59,"second");};$D.validateMinute=function(value){return $D._validate(value,0,59,"minute");};$D.validateHour=function(value){return $D._validate(value,0,23,"hour");};$D.validateDay=function(value,year,month){return $D._validate(value,1,$D.getDaysInMonth(year,month),"day");};$D.validateMonth=function(value){return $D._validate(value,0,11,"month");};$D.validateYear=function(value){return $D._validate(value,0,9999,"year");};$P.set=function(config){if($D.validateMillisecond(config.millisecond)){this.addMilliseconds(config.millisecond-this.getMilliseconds());}
if($D.validateSecond(config.second)){this.addSeconds(config.second-this.getSeconds());}
if($D.validateMinute(config.minute)){this.addMinutes(config.minute-this.getMinutes());}
if($D.validateHour(config.hour)){this.addHours(config.hour-this.getHours());}
if($D.validateMonth(config.month)){this.addMonths(config.month-this.getMonth());}
if($D.validateYear(config.year)){this.addYears(config.year-this.getFullYear());}
if($D.validateDay(config.day,this.getFullYear(),this.getMonth())){this.addDays(config.day-this.getDate());}
if(config.timezone){this.setTimezone(config.timezone);}
if(config.timezoneOffset){this.setTimezoneOffset(config.timezoneOffset);}
if(config.week&&$D._validate(config.week,0,53,"week")){this.setWeek(config.week);}
return this;};$P.moveToFirstDayOfMonth=function(){return this.set({day:1});};$P.moveToLastDayOfMonth=function(){return this.set({day:$D.getDaysInMonth(this.getFullYear(),this.getMonth())});};$P.moveToNthOccurrence=function(dayOfWeek,occurrence){var shift=0;if(occurrence>0){shift=occurrence-1;}
else if(occurrence===-1){this.moveToLastDayOfMonth();if(this.getDay()!==dayOfWeek){this.moveToDayOfWeek(dayOfWeek,-1);}
return this;}
return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(dayOfWeek,+1).addWeeks(shift);};$P.moveToDayOfWeek=function(dayOfWeek,orient){var diff=(dayOfWeek-this.getDay()+7*(orient||+1))%7;return this.addDays((diff===0)?diff+=7*(orient||+1):diff);};$P.moveToMonth=function(month,orient){var diff=(month-this.getMonth()+12*(orient||+1))%12;return this.addMonths((diff===0)?diff+=12*(orient||+1):diff);};$P.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};$P.getTimezone=function(){return $D.getTimezoneAbbreviation(this.getUTCOffset());};$P.setTimezoneOffset=function(offset){var here=this.getTimezoneOffset(),there=Number(offset)*-6/10;return this.addMinutes(there-here);};$P.setTimezone=function(offset){return this.setTimezoneOffset($D.getTimezoneOffset(offset));};$P.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.getUTCOffset=function(){var n=this.getTimezoneOffset()*-10/6,r;if(n<0){r=(n-10000).toString();return r.charAt(0)+r.substr(2);}else{r=(n+10000).toString();return"+"+r.substr(1);}};$P.getElapsed=function(date){return(date||new Date())-this;};if(!$P.toISOString){$P.toISOString=function(){function f(n){return n<10?'0'+n:n;}
return'"'+this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z"';};}
$P._toString=$P.toString;$P.toString=function(format){var x=this;if(format&&format.length==1){var c=$C.formatPatterns;x.t=x.toString;switch(format){case"d":return x.t(c.shortDate);case"D":return x.t(c.longDate);case"F":return x.t(c.fullDateTime);case"m":return x.t(c.monthDay);case"r":return x.t(c.rfc1123);case"s":return x.t(c.sortableDateTime);case"t":return x.t(c.shortTime);case"T":return x.t(c.longTime);case"u":return x.t(c.universalSortableDateTime);case"y":return x.t(c.yearMonth);}}
var ord=function(n){switch(n*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return format?format.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(m){if(m.charAt(0)==="\\"){return m.replace("\\","");}
x.h=x.getHours;switch(m){case"hh":return p(x.h()<13?(x.h()===0?12:x.h()):(x.h()-12));case"h":return x.h()<13?(x.h()===0?12:x.h()):(x.h()-12);case"HH":return p(x.h());case"H":return x.h();case"mm":return p(x.getMinutes());case"m":return x.getMinutes();case"ss":return p(x.getSeconds());case"s":return x.getSeconds();case"yyyy":return p(x.getFullYear(),4);case"yy":return p(x.getFullYear());case"dddd":return $C.dayNames[x.getDay()];case"ddd":return $C.abbreviatedDayNames[x.getDay()];case"dd":return p(x.getDate());case"d":return x.getDate();case"MMMM":return $C.monthNames[x.getMonth()];case"MMM":return $C.abbreviatedMonthNames[x.getMonth()];case"MM":return p((x.getMonth()+1));case"M":return x.getMonth()+1;case"t":return x.h()<12?$C.amDesignator.substring(0,1):$C.pmDesignator.substring(0,1);case"tt":return x.h()<12?$C.amDesignator:$C.pmDesignator;case"S":return ord(x.getDate());default:return m;}}):this._toString();};}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,$N=Number.prototype;$P._orient=+1;$P._nth=null;$P._is=false;$P._same=false;$P._isSecond=false;$N._dateElement="day";$P.next=function(){this._orient=+1;return this;};$D.next=function(){return $D.today().next();};$P.last=$P.prev=$P.previous=function(){this._orient=-1;return this;};$D.last=$D.prev=$D.previous=function(){return $D.today().last();};$P.is=function(){this._is=true;return this;};$P.same=function(){this._same=true;this._isSecond=false;return this;};$P.today=function(){return this.same().day();};$P.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}
return false;};$P.at=function(time){return(typeof time==="string")?$D.parse(this.toString("d")+" "+time):this.set(time);};$N.fromNow=$N.after=function(date){var c={};c[this._dateElement]=this;return((!date)?new Date():date.clone()).add(c);};$N.ago=$N.before=function(date){var c={};c[this._dateElement]=this*-1;return((!date)?new Date():date.clone()).add(c);};var dx=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),mx=("january february march april may june july august september october november december").split(/\s/),px=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),pxf=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),nth=("final first second third fourth fifth").split(/\s/),de;$P.toObject=function(){var o={};for(var i=0;i<px.length;i++){o[px[i].toLowerCase()]=this["get"+pxf[i]]();}
return o;};$D.fromObject=function(config){config.week=null;return Date.today().set(config);};var df=function(n){return function(){if(this._is){this._is=false;return this.getDay()==n;}
if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}
this._isSecond=false;var ntemp=this._nth;this._nth=null;var temp=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(n,ntemp);if(this>temp){throw new RangeError($D.getDayName(n)+" does not occur "+ntemp+" times in the month of "+$D.getMonthName(temp.getMonth())+" "+temp.getFullYear()+".");}
return this;}
return this.moveToDayOfWeek(n,this._orient);};};var sdf=function(n){return function(){var t=$D.today(),shift=n-t.getDay();if(n===0&&$C.firstDayOfWeek===1&&t.getDay()!==0){shift=shift+7;}
return t.addDays(shift);};};for(var i=0;i<dx.length;i++){$D[dx[i].toUpperCase()]=$D[dx[i].toUpperCase().substring(0,3)]=i;$D[dx[i]]=$D[dx[i].substring(0,3)]=sdf(i);$P[dx[i]]=$P[dx[i].substring(0,3)]=df(i);}
var mf=function(n){return function(){if(this._is){this._is=false;return this.getMonth()===n;}
return this.moveToMonth(n,this._orient);};};var smf=function(n){return function(){return $D.today().set({month:n,day:1});};};for(var j=0;j<mx.length;j++){$D[mx[j].toUpperCase()]=$D[mx[j].toUpperCase().substring(0,3)]=j;$D[mx[j]]=$D[mx[j].substring(0,3)]=smf(j);$P[mx[j]]=$P[mx[j].substring(0,3)]=mf(j);}
var ef=function(j){return function(){if(this._isSecond){this._isSecond=false;return this;}
if(this._same){this._same=this._is=false;var o1=this.toObject(),o2=(arguments[0]||new Date()).toObject(),v="",k=j.toLowerCase();for(var m=(px.length-1);m>-1;m--){v=px[m].toLowerCase();if(o1[v]!=o2[v]){return false;}
if(k==v){break;}}
return true;}
if(j.substring(j.length-1)!="s"){j+="s";}
return this["add"+j](this._orient);};};var nf=function(n){return function(){this._dateElement=n;return this;};};for(var k=0;k<px.length;k++){de=px[k].toLowerCase();$P[de]=$P[de+"s"]=ef(px[k]);$N[de]=$N[de+"s"]=nf(de);}
$P._ss=ef("Second");var nthfn=function(n){return function(dayOfWeek){if(this._same){return this._ss(arguments[0]);}
if(dayOfWeek||dayOfWeek===0){return this.moveToNthOccurrence(dayOfWeek,n);}
this._nth=n;if(n===2&&(dayOfWeek===undefined||dayOfWeek===null)){this._isSecond=true;return this.addSeconds(this._orient);}
return this;};};for(var l=0;l<nth.length;l++){$P[nth[l]]=(l===0)?nthfn(-1):nthfn(l);}}());(function(){Date.Parsing={Exception:function(s){this.message="Parse error at '"+s.substring(0,10)+" ...'";}};var $P=Date.Parsing;var _=$P.Operators={rtoken:function(r){return function(s){var mx=s.match(r);if(mx){return([mx[0],s.substring(mx[0].length)]);}else{throw new $P.Exception(s);}};},token:function(s){return function(s){return _.rtoken(new RegExp("^\s*"+s+"\s*"))(s);};},stoken:function(s){return _.rtoken(new RegExp("^"+s));},until:function(p){return function(s){var qx=[],rx=null;while(s.length){try{rx=p.call(this,s);}catch(e){qx.push(rx[0]);s=rx[1];continue;}
break;}
return[qx,s];};},many:function(p){return function(s){var rx=[],r=null;while(s.length){try{r=p.call(this,s);}catch(e){return[rx,s];}
rx.push(r[0]);s=r[1];}
return[rx,s];};},optional:function(p){return function(s){var r=null;try{r=p.call(this,s);}catch(e){return[null,s];}
return[r[0],r[1]];};},not:function(p){return function(s){try{p.call(this,s);}catch(e){return[null,s];}
throw new $P.Exception(s);};},ignore:function(p){return p?function(s){var r=null;r=p.call(this,s);return[null,r[1]];}:null;},product:function(){var px=arguments[0],qx=Array.prototype.slice.call(arguments,1),rx=[];for(var i=0;i<px.length;i++){rx.push(_.each(px[i],qx));}
return rx;},cache:function(rule){var cache={},r=null;return function(s){try{r=cache[s]=(cache[s]||rule.call(this,s));}catch(e){r=cache[s]=e;}
if(r instanceof $P.Exception){throw r;}else{return r;}};},any:function(){var px=arguments;return function(s){var r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){r=null;}
if(r){return r;}}
throw new $P.Exception(s);};},each:function(){var px=arguments;return function(s){var rx=[],r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){throw new $P.Exception(s);}
rx.push(r[0]);s=r[1];}
return[rx,s];};},all:function(){var px=arguments,_=_;return _.each(_.optional(px));},sequence:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;if(px.length==1){return px[0];}
return function(s){var r=null,q=null;var rx=[];for(var i=0;i<px.length;i++){try{r=px[i].call(this,s);}catch(e){break;}
rx.push(r[0]);try{q=d.call(this,r[1]);}catch(ex){q=null;break;}
s=q[1];}
if(!r){throw new $P.Exception(s);}
if(q){throw new $P.Exception(q[1]);}
if(c){try{r=c.call(this,r[1]);}catch(ey){throw new $P.Exception(r[1]);}}
return[rx,(r?r[1]:s)];};},between:function(d1,p,d2){d2=d2||d1;var _fn=_.each(_.ignore(d1),p,_.ignore(d2));return function(s){var rx=_fn.call(this,s);return[[rx[0][0],r[0][2]],rx[1]];};},list:function(p,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return(p instanceof Array?_.each(_.product(p.slice(0,-1),_.ignore(d)),p.slice(-1),_.ignore(c)):_.each(_.many(_.each(p,_.ignore(d))),px,_.ignore(c)));},set:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return function(s){var r=null,p=null,q=null,rx=null,best=[[],s],last=false;for(var i=0;i<px.length;i++){q=null;p=null;r=null;last=(px.length==1);try{r=px[i].call(this,s);}catch(e){continue;}
rx=[[r[0]],r[1]];if(r[1].length>0&&!last){try{q=d.call(this,r[1]);}catch(ex){last=true;}}else{last=true;}
if(!last&&q[1].length===0){last=true;}
if(!last){var qx=[];for(var j=0;j<px.length;j++){if(i!=j){qx.push(px[j]);}}
p=_.set(qx,d).call(this,q[1]);if(p[0].length>0){rx[0]=rx[0].concat(p[0]);rx[1]=p[1];}}
if(rx[1].length<best[1].length){best=rx;}
if(best[1].length===0){break;}}
if(best[0].length===0){return best;}
if(c){try{q=c.call(this,best[1]);}catch(ey){throw new $P.Exception(best[1]);}
best[1]=q[1];}
return best;};},forward:function(gr,fname){return function(s){return gr[fname].call(this,s);};},replace:function(rule,repl){return function(s){var r=rule.call(this,s);return[repl,r[1]];};},process:function(rule,fn){return function(s){var r=rule.call(this,s);return[fn.call(this,r[0]),r[1]];};},min:function(min,rule){return function(s){var rx=rule.call(this,s);if(rx[0].length<min){throw new $P.Exception(s);}
return rx;};}};var _generator=function(op){return function(){var args=null,rx=[];if(arguments.length>1){args=Array.prototype.slice.call(arguments);}else if(arguments[0]instanceof Array){args=arguments[0];}
if(args){for(var i=0,px=args.shift();i<px.length;i++){args.unshift(px[i]);rx.push(op.apply(null,args));args.shift();return rx;}}else{return op.apply(null,arguments);}};};var gx="optional not ignore cache".split(/\s/);for(var i=0;i<gx.length;i++){_[gx[i]]=_generator(_[gx[i]]);}
var _vector=function(op){return function(){if(arguments[0]instanceof Array){return op.apply(null,arguments[0]);}else{return op.apply(null,arguments);}};};var vx="each any all".split(/\s/);for(var j=0;j<vx.length;j++){_[vx[j]]=_vector(_[vx[j]]);}}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo;var flattenAndCompact=function(ax){var rx=[];for(var i=0;i<ax.length;i++){if(ax[i]instanceof Array){rx=rx.concat(flattenAndCompact(ax[i]));}else{if(ax[i]){rx.push(ax[i]);}}}
return rx;};$D.Grammar={};$D.Translator={hour:function(s){return function(){this.hour=Number(s);};},minute:function(s){return function(){this.minute=Number(s);};},second:function(s){return function(){this.second=Number(s);};},meridian:function(s){return function(){this.meridian=s.slice(0,1).toLowerCase();};},timezone:function(s){return function(){var n=s.replace(/[^\d\+\-]/g,"");if(n.length){this.timezoneOffset=Number(n);}else{this.timezone=s.toLowerCase();}};},day:function(x){var s=x[0];return function(){this.day=Number(s.match(/\d+/)[0]);};},month:function(s){return function(){this.month=(s.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(s)/4:Number(s)-1;};},year:function(s){return function(){var n=Number(s);this.year=((s.length>2)?n:(n+(((n+2000)<$C.twoDigitYearMax)?2000:1900)));};},rday:function(s){return function(){switch(s){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(x){x=(x instanceof Array)?x:[x];for(var i=0;i<x.length;i++){if(x[i]){x[i].call(this);}}
var now=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=now.getDate();}
if(!this.year){this.year=now.getFullYear();}
if(!this.month&&this.month!==0){this.month=now.getMonth();}
if(!this.day){this.day=1;}
if(!this.hour){this.hour=0;}
if(!this.minute){this.minute=0;}
if(!this.second){this.second=0;}
if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian=="a"&&this.hour==12){this.hour=0;}}
if(this.day>$D.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}
var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){r.set({timezone:this.timezone});}else if(this.timezoneOffset){r.set({timezoneOffset:this.timezoneOffset});}
return r;},finish:function(x){x=(x instanceof Array)?flattenAndCompact(x):[x];if(x.length===0){return null;}
for(var i=0;i<x.length;i++){if(typeof x[i]=="function"){x[i].call(this);}}
var today=$D.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else if(this.now){today=new Date();}
var expression=!!(this.days&&this.days!==null||this.orient||this.operator);var gap,mod,orient;orient=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){today.setTimeToNow();}
if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;expression=true;}}
if(!expression&&this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(!this.month){this.month=temp.getMonth();}
this.year=temp.getFullYear();}
if(expression&&this.weekday&&this.unit!="month"){this.unit="day";gap=($D.getDayNumberFromName(this.weekday)-today.getDay());mod=7;this.days=gap?((gap+(orient*mod))%mod):(orient*mod);}
if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}
if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}
if(this.month&&!this.day&&this.value){today.set({day:this.value*1});if(!expression){this.day=this.value*1;}}
if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;expression=true;}
if(expression&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";gap=(this.month-today.getMonth());mod=12;this.months=gap?((gap+(orient*mod))%mod):(orient*mod);this.month=null;}
if(!this.unit){this.unit="day";}
if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*orient;}else if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}
this[this.unit+"s"]=this.value*orient;}
if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian=="a"&&this.hour==12){this.hour=0;}}
if(this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(temp.getMonth()!==today.getMonth()){this.month=temp.getMonth();}}
if((this.month||this.month===0)&&!this.day){this.day=1;}
if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}
if(expression&&this.timezone&&this.day&&this.days){this.day=this.days;}
return(expression)?today.add(this):today.set(this);}};var _=$D.Parsing.Operators,g=$D.Grammar,t=$D.Translator,_fn;g.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/);g.timePartDelimiter=_.stoken(":");g.whiteSpace=_.rtoken(/^\s*/);g.generalDelimiter=_.rtoken(/^(([\s\,]|at|@|on)+)/);var _C={};g.ctoken=function(keys){var fn=_C[keys];if(!fn){var c=$C.regexPatterns;var kx=keys.split(/\s+/),px=[];for(var i=0;i<kx.length;i++){px.push(_.replace(_.rtoken(c[kx[i]]),kx[i]));}
fn=_C[keys]=_.any.apply(null,px);}
return fn;};g.ctoken2=function(key){return _.rtoken($C.regexPatterns[key]);};g.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour));g.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),t.hour));g.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour));g.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour));g.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.minute));g.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.minute));g.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.second));g.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.second));g.hms=_.cache(_.sequence([g.H,g.m,g.s],g.timePartDelimiter));g.t=_.cache(_.process(g.ctoken2("shortMeridian"),t.meridian));g.tt=_.cache(_.process(g.ctoken2("longMeridian"),t.meridian));g.z=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone));g.zz=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone));g.zzz=_.cache(_.process(g.ctoken2("timezone"),t.timezone));g.timeSuffix=_.each(_.ignore(g.whiteSpace),_.set([g.tt,g.zzz]));g.time=_.each(_.optional(_.ignore(_.stoken("T"))),g.hms,g.timeSuffix);g.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.ddd=g.dddd=_.cache(_.process(g.ctoken("sun mon tue wed thu fri sat"),function(s){return function(){this.weekday=s;};}));g.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),t.month));g.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),t.month));g.MMM=g.MMMM=_.cache(_.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),t.month));g.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),t.year));g.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),t.year));g.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),t.year));g.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),t.year));_fn=function(){return _.each(_.any.apply(null,arguments),_.not(g.ctoken2("timeContext")));};g.day=_fn(g.d,g.dd);g.month=_fn(g.M,g.MMM);g.year=_fn(g.yyyy,g.yy);g.orientation=_.process(g.ctoken("past future"),function(s){return function(){this.orient=s;};});g.operator=_.process(g.ctoken("add subtract"),function(s){return function(){this.operator=s;};});g.rday=_.process(g.ctoken("yesterday tomorrow today now"),t.rday);g.unit=_.process(g.ctoken("second minute hour day week month year"),function(s){return function(){this.unit=s;};});g.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(s){return function(){this.value=s.replace(/\D/g,"");};});g.expression=_.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]);_fn=function(){return _.set(arguments,g.datePartDelimiter);};g.mdy=_fn(g.ddd,g.month,g.day,g.year);g.ymd=_fn(g.ddd,g.year,g.month,g.day);g.dmy=_fn(g.ddd,g.day,g.month,g.year);g.date=function(s){return((g[$C.dateElementOrder]||g.mdy).call(this,s));};g.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(fmt){if(g[fmt]){return g[fmt];}else{throw $D.Parsing.Exception(fmt);}}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(s){return _.ignore(_.stoken(s));}))),function(rules){return _.process(_.each.apply(null,rules),t.finishExact);});var _F={};var _get=function(f){return _F[f]=(_F[f]||g.format(f)[0]);};g.formats=function(fx){if(fx instanceof Array){var rx=[];for(var i=0;i<fx.length;i++){rx.push(_get(fx[i]));}
return _.any.apply(null,rx);}else{return _get(fx);}};g._formats=g.formats(["\"yyyy-MM-ddTHH:mm:ssZ\"","yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);g._start=_.process(_.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),t.finish);g.start=function(s){try{var r=g._formats.call({},s);if(r[1].length===0){return r;}}catch(e){}
return g._start.call({},s);};$D._parse=$D.parse;$D.parse=function(s){var r=null;if(!s){return null;}
if(s instanceof Date){return s;}
try{r=$D.Grammar.start.call({},s.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};$D.getParseFunction=function(fx){var fn=$D.Grammar.formats(fx);return function(s){var r=null;try{r=fn.call({},s);}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};};$D.parseExact=function(s,fx){return $D.getParseFunction(fx)(s);};}());

var UiDataProvider=EventDispatcher.extend({_dataRequestFunctionsMap:{},getDataRequestFunction:function(url,invalidateCache,params){invalidateCache=invalidateCache||false;params=params||null;if(!this._dataRequestFunctionsMap[url]||invalidateCache){var request=this.prepareRequest(url,params);this._dataRequestFunctionsMap[url]=function(){return request;};}
return this._dataRequestFunctionsMap[url];},prepareRequest:function(url,params){params=params||null;return Requester.makeRequest(url,params,Requester.REQUEST_METHOD.POST,Requester.REQUEST_DATA_TYPE.JSON).then(function(response){if(response.error){this.dispatchEvent(UiDataProvider.event.LOAD_ERROR,response.error);return Promise.resolve([]);}
return Promise.resolve(response);}.bind(this));}},{_instance:null,getInstance:function(){if(!this._instance){this._instance=new this();}
return this._instance;},event:{LOAD_ERROR:'dataLoadError'}});

var UiComponent=EventDispatcher.extend({container:null,component:null,props:null,constructor:function(element){this.base();this.container=element;this.props=this._preprocessProps(JSON.parse(this.container.dataset.props||""));UiEnvironment.initLayers();},connect:function(){this.disconnect();this.component=this._draw(true);this.container.appendChild(this.component);},disconnect:function(){this.container.innerHTML='';this.component=null;},redraw:function(){this._draw(false);},_preprocessProps:function(props){return props;},_draw:function(updateOptions){throw new Error('Method _createComponent() not implemented');},scrollToContainer:function(container){if(container){var containerRect=container.getBoundingClientRect();if(containerRect.bottom>window.innerHeight){this._smoothScrollTo(containerRect.bottom);}}},onLoadError:function(error){this.dispatchEvent(UiComponent.event.LOAD_ERROR,error);},_smoothScrollTo:function(target){var offset=window.pageYOffset;var steps=UiComponent.scroll.STEPS;var stepsCounter=0;var stepSize=(target-window.innerHeight)/steps;var int=setInterval(function(){window.scrollTo(0,offset);stepsCounter++;offset+=stepSize;if(stepsCounter>UiComponent.scroll.STEPS){clearInterval(int);}},UiComponent.scroll.TIMEOUT);},},{event:{LOAD_ERROR:'dataLoadError',},scroll:{STEPS:10,TIMEOUT:15}});

﻿
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);

document.createElement("canvas").getContext||(function(){var s=Math,j=s.round,F=s.sin,G=s.cos,V=s.abs,W=s.sqrt,k=10,v=k/2;function X(){return this.context_||(this.context_=new H(this))}var L=Array.prototype.slice;function Y(b,a){var c=L.call(arguments,2);return function(){return b.apply(a,c.concat(L.call(arguments)))}}var M={init:function(b){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var a=b||document;a.createElement("canvas");a.attachEvent("onreadystatechange",Y(this.init_,this,a))}},init_:function(b){b.namespaces.g_vml_||b.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");b.namespaces.g_o_||b.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");if(!b.styleSheets.ex_canvas_){var a=b.createStyleSheet();a.owningElement.id="ex_canvas_";a.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}var c=b.getElementsByTagName("canvas"),d=0;for(;d<c.length;d++)this.initElement(c[d])},initElement:function(b){if(!b.getContext){b.getContext=X;b.innerHTML="";b.attachEvent("onpropertychange",Z);b.attachEvent("onresize",$);var a=b.attributes;if(a.width&&a.width.specified)b.style.width=a.width.nodeValue+"px";else b.width=b.clientWidth;if(a.height&&a.height.specified)b.style.height=a.height.nodeValue+"px";else b.height=b.clientHeight}return b}};function Z(b){var a=b.srcElement;switch(b.propertyName){case"width":a.style.width=a.attributes.width.nodeValue+"px";a.getContext().clearRect();break;case"height":a.style.height=a.attributes.height.nodeValue+"px";a.getContext().clearRect();break}}function $(b){var a=b.srcElement;if(a.firstChild){a.firstChild.style.width=a.clientWidth+"px";a.firstChild.style.height=a.clientHeight+"px"}}M.init();var N=[],B=0;for(;B<16;B++){var C=0;for(;C<16;C++)N[B*16+C]=B.toString(16)+C.toString(16)}function I(){return[[1,0,0],[0,1,0],[0,0,1]]}function y(b,a){var c=I(),d=0;for(;d<3;d++){var f=0;for(;f<3;f++){var h=0,g=0;for(;g<3;g++)h+=b[d][g]*a[g][f];c[d][f]=h}}return c}function O(b,a){a.fillStyle=b.fillStyle;a.lineCap=b.lineCap;a.lineJoin=b.lineJoin;a.lineWidth=b.lineWidth;a.miterLimit=b.miterLimit;a.shadowBlur=b.shadowBlur;a.shadowColor=b.shadowColor;a.shadowOffsetX=b.shadowOffsetX;a.shadowOffsetY=b.shadowOffsetY;a.strokeStyle=b.strokeStyle;a.globalAlpha=b.globalAlpha;a.arcScaleX_=b.arcScaleX_;a.arcScaleY_=b.arcScaleY_;a.lineScale_=b.lineScale_}function P(b){var a,c=1;b=String(b);if(b.substring(0,3)=="rgb"){var d=b.indexOf("(",3),f=b.indexOf(")",d+
1),h=b.substring(d+1,f).split(",");a="#";var g=0;for(;g<3;g++)a+=N[Number(h[g])];if(h.length==4&&b.substr(3,1)=="a")c=h[3]}else a=b;return{color:a,alpha:c}}function aa(b){switch(b){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function H(b){this.m_=I();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=k*1;this.globalAlpha=1;this.canvas=b;var a=b.ownerDocument.createElement("div");a.style.width=b.clientWidth+"px";a.style.height=b.clientHeight+"px";a.style.overflow="hidden";a.style.position="absolute";b.appendChild(a);this.element_=a;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}var i=H.prototype;i.clearRect=function(){this.element_.innerHTML=""};i.beginPath=function(){this.currentPath_=[]};i.moveTo=function(b,a){var c=this.getCoords_(b,a);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y});this.currentX_=c.x;this.currentY_=c.y};i.lineTo=function(b,a){var c=this.getCoords_(b,a);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y});this.currentX_=c.x;this.currentY_=c.y};i.bezierCurveTo=function(b,a,c,d,f,h){var g=this.getCoords_(f,h),l=this.getCoords_(b,a),e=this.getCoords_(c,d);Q(this,l,e,g)};function Q(b,a,c,d){b.currentPath_.push({type:"bezierCurveTo",cp1x:a.x,cp1y:a.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y});b.currentX_=d.x;b.currentY_=d.y}i.quadraticCurveTo=function(b,a,c,d){var f=this.getCoords_(b,a),h=this.getCoords_(c,d),g={x:this.currentX_+
0.6666666666666666*(f.x-this.currentX_),y:this.currentY_+0.6666666666666666*(f.y-this.currentY_)};Q(this,g,{x:g.x+(h.x-this.currentX_)/3,y:g.y+(h.y-this.currentY_)/3},h)};i.arc=function(b,a,c,d,f,h){c*=k;var g=h?"at":"wa",l=b+G(d)*c-v,e=a+F(d)*c-v,m=b+G(f)*c-v,r=a+F(f)*c-v;if(l==m&&!h)l+=0.125;var n=this.getCoords_(b,a),o=this.getCoords_(l,e),q=this.getCoords_(m,r);this.currentPath_.push({type:g,x:n.x,y:n.y,radius:c,xStart:o.x,yStart:o.y,xEnd:q.x,yEnd:q.y})};i.rect=function(b,a,c,d){this.moveTo(b,a);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath()};i.strokeRect=function(b,a,c,d){var f=this.currentPath_;this.beginPath();this.moveTo(b,a);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath();this.stroke();this.currentPath_=f};i.fillRect=function(b,a,c,d){var f=this.currentPath_;this.beginPath();this.moveTo(b,a);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath();this.fill();this.currentPath_=f};i.createLinearGradient=function(b,a,c,d){var f=new D("gradient");f.x0_=b;f.y0_=a;f.x1_=c;f.y1_=d;return f};i.createRadialGradient=function(b,a,c,d,f,h){var g=new D("gradientradial");g.x0_=b;g.y0_=a;g.r0_=c;g.x1_=d;g.y1_=f;g.r1_=h;return g};i.drawImage=function(b){var a,c,d,f,h,g,l,e,m=b.runtimeStyle.width,r=b.runtimeStyle.height;b.runtimeStyle.width="auto";b.runtimeStyle.height="auto";var n=b.width,o=b.height;b.runtimeStyle.width=m;b.runtimeStyle.height=r;if(arguments.length==3){a=arguments[1];c=arguments[2];h=g=0;l=d=n;e=f=o}else if(arguments.length==5){a=arguments[1];c=arguments[2];d=arguments[3];f=arguments[4];h=g=0;l=n;e=o}else if(arguments.length==9){h=arguments[1];g=arguments[2];l=arguments[3];e=arguments[4];a=arguments[5];c=arguments[6];d=arguments[7];f=arguments[8]}else throw Error("Invalid number of arguments");var q=this.getCoords_(a,c),t=[];t.push(" <g_vml_:group",' coordsize="',k*10,",",k*10,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var E=[];E.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",j(q.x/k),",","Dy=",j(q.y/k),"");var p=q,z=this.getCoords_(a+d,c),w=this.getCoords_(a,c+f),x=this.getCoords_(a+d,c+f);p.x=s.max(p.x,z.x,w.x,x.x);p.y=s.max(p.y,z.y,w.y,x.y);t.push("padding:0 ",j(p.x/k),"px ",j(p.y/k),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",E.join(""),", sizingmethod='clip');")}else t.push("top:",j(q.y/k),"px;left:",j(q.x/k),"px;");t.push(' ">','<g_vml_:image src="',b.src,'"',' style="width:',k*d,"px;"," height:",k*f,'px;"',' cropleft="',h/n,'"',' croptop="',g/o,'"',' cropright="',(n-h-l)/n,'"',' cropbottom="',(o-g-e)/o,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",t.join(""))};i.stroke=function(b){var a=[],c=P(b?this.fillStyle:this.strokeStyle),d=c.color,f=c.alpha*this.globalAlpha;a.push("<g_vml_:shape",' filled="',!!b,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0 0" coordsize="',k*10," ",k*10,'"',' stroked="',!b,'"',' path="');var h={x:null,y:null},g={x:null,y:null},l=0;for(;l<this.currentPath_.length;l++){var e=this.currentPath_[l];switch(e.type){case"moveTo":a.push(" m ",j(e.x),",",j(e.y));break;case"lineTo":a.push(" l ",j(e.x),",",j(e.y));break;case"close":a.push(" x ");e=null;break;case"bezierCurveTo":a.push(" c ",j(e.cp1x),",",j(e.cp1y),",",j(e.cp2x),",",j(e.cp2y),",",j(e.x),",",j(e.y));break;case"at":case"wa":a.push(" ",e.type," ",j(e.x-this.arcScaleX_*e.radius),",",j(e.y-this.arcScaleY_*e.radius)," ",j(e.x+this.arcScaleX_*e.radius),",",j(e.y+this.arcScaleY_*e.radius)," ",j(e.xStart),",",j(e.yStart)," ",j(e.xEnd),",",j(e.yEnd));break}if(e){if(h.x==null||e.x<h.x)h.x=e.x;if(g.x==null||e.x>g.x)g.x=e.x;if(h.y==null||e.y<h.y)h.y=e.y;if(g.y==null||e.y>g.y)g.y=e.y}}a.push(' ">');if(b)if(typeof this.fillStyle=="object"){var m=this.fillStyle,r=0,n={x:0,y:0},o=0,q=1;if(m.type_=="gradient"){var t=m.x1_/this.arcScaleX_,E=m.y1_/this.arcScaleY_,p=this.getCoords_(m.x0_/this.arcScaleX_,m.y0_/this.arcScaleY_),z=this.getCoords_(t,E);r=Math.atan2(z.x-p.x,z.y-p.y)*180/Math.PI;if(r<0)r+=360;if(r<1.0E-6)r=0}else{var p=this.getCoords_(m.x0_,m.y0_),w=g.x-h.x,x=g.y-h.y;n={x:(p.x-h.x)/w,y:(p.y-h.y)/x};w/=this.arcScaleX_*k;x/=this.arcScaleY_*k;var R=s.max(w,x);o=2*m.r0_/R;q=2*m.r1_/R-o}var u=m.colors_;u.sort(function(ba,ca){return ba.offset-ca.offset});var J=u.length,da=u[0].color,ea=u[J-1].color,fa=u[0].alpha*this.globalAlpha,ga=u[J-1].alpha*this.globalAlpha,S=[],l=0;for(;l<J;l++){var T=u[l];S.push(T.offset*q+
o+" "+T.color)}a.push('<g_vml_:fill type="',m.type_,'"',' method="none" focus="100%"',' color="',da,'"',' color2="',ea,'"',' colors="',S.join(","),'"',' opacity="',ga,'"',' g_o_:opacity2="',fa,'"',' angle="',r,'"',' focusposition="',n.x,",",n.y,'" />')}else a.push('<g_vml_:fill color="',d,'" opacity="',f,'" />');else{var K=this.lineScale_*this.lineWidth;if(K<1)f*=K;a.push("<g_vml_:stroke",' opacity="',f,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',aa(this.lineCap),'"',' weight="',K,'px"',' color="',d,'" />')}a.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",a.join(""))};i.fill=function(){this.stroke(true)};i.closePath=function(){this.currentPath_.push({type:"close"})};i.getCoords_=function(b,a){var c=this.m_;return{x:k*(b*c[0][0]+a*c[1][0]+c[2][0])-v,y:k*(b*c[0][1]+a*c[1][1]+c[2][1])-v}};i.save=function(){var b={};O(this,b);this.aStack_.push(b);this.mStack_.push(this.m_);this.m_=y(I(),this.m_)};i.restore=function(){O(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};function ha(b){var a=0;for(;a<3;a++){var c=0;for(;c<2;c++)if(!isFinite(b[a][c])||isNaN(b[a][c]))return false}return true}function A(b,a,c){if(!!ha(a)){b.m_=a;if(c)b.lineScale_=W(V(a[0][0]*a[1][1]-a[0][1]*a[1][0]))}}i.translate=function(b,a){A(this,y([[1,0,0],[0,1,0],[b,a,1]],this.m_),false)};i.rotate=function(b){var a=G(b),c=F(b);A(this,y([[a,c,0],[-c,a,0],[0,0,1]],this.m_),false)};i.scale=function(b,a){this.arcScaleX_*=b;this.arcScaleY_*=a;A(this,y([[b,0,0],[0,a,0],[0,0,1]],this.m_),true)};i.transform=function(b,a,c,d,f,h){A(this,y([[b,a,0],[c,d,0],[f,h,1]],this.m_),true)};i.setTransform=function(b,a,c,d,f,h){A(this,[[b,a,0],[c,d,0],[f,h,1]],true)};i.clip=function(){};i.arcTo=function(){};i.createPattern=function(){return new U};function D(b){this.type_=b;this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;this.colors_=[]}D.prototype.addColorStop=function(b,a){a=P(a);this.colors_.push({offset:b,color:a.color,alpha:a.alpha})};function U(){}G_vmlCanvasManager=M;CanvasRenderingContext2D=H;CanvasGradient=D;CanvasPattern=U})();

var TooltipOptions=Base.extend({_options:null,constructor:function(params)
{this._setOptionsByPreset(params.preset);this._setPositions(params.positions);this._setParent(params.parent);this._setTrigger(params.trigger);this._setOverlap(params.overlap);this._setPadding(params.padding);this._setPostShow(params.postShow);this._setHideTip(params.hideTip);this._setFonts();},getOptions:function()
{return this._options;},_setOverlap:function(overlap)
{this._options.overlap=overlap;},_setPadding:function(padding)
{this._options.padding=padding;},_setPostShow:function(func)
{if(func)
{this._options.postShow=func;}},_setHideTip:function(func)
{if(func)
{this._options.hideTip=func;}},_setFonts:function()
{var font=UIBrowserUtils.isIeLt8()?TooltipOptions.FONT_FAMILY_IE8_OPTION:TooltipOptions.FONT_FAMILY_OPTION;this._options.cssStyles.fontFamily=font;},_setOptionsByPreset:function(preset)
{switch(preset)
{case TooltipOptions.PRESET.LIGHT:this._options=$.extend(true,{},TooltipOptions.OPTIONS.DEFAULT,TooltipOptions.OPTIONS.LIGHT);break;case TooltipOptions.PRESET.NO_POINTER:this._options=$.extend(true,{},TooltipOptions.OPTIONS.DEFAULT,TooltipOptions.OPTIONS.NO_POINTER);break;case TooltipOptions.PRESET.CLOSE_ON_BT_MOUSE_OVER:this._options=$.extend(true,{},TooltipOptions.OPTIONS.DEFAULT,TooltipOptions.OPTIONS.CLOSE_ON_BT_MOUSE_OVER);break;default:this._options=TooltipOptions.OPTIONS.DEFAULT;break;}},_setPositions:function(position)
{if(typeof(position)==='undefined')
{return;}
var positions=[];if($.isArray(position))
{var that=this;$.map(position,function(pos)
{positions.push(that._getPosition(pos))});}
else
{positions.push(this._getPosition(position))}
this._options.positions=positions;},_getPosition:function(providedPosition)
{var position=TooltipOptions.POSITION.MOST;$.map(TooltipOptions.POSITION,function(pos){if(providedPosition==pos)
{position=pos;return false;}});return position;},_setParent:function(parent)
{if(parent instanceof jQuery)
{this._options.offsetParent=parent;}},_setTrigger:function(trigger)
{if(trigger)
{this._options.trigger=trigger;}}},{getOptions:function(params)
{var options=new TooltipOptions(params);return options.getOptions();},FONT_FAMILY_OPTION:'\'Roboto\', \'OpenSans\', sans-serif',FONT_FAMILY_IE8_OPTION:'sans-serif',POSITION:{LEFT:'left',RIGHT:'right',TOP:'top',BOTTOM:'bottom',MOST:'most'},PRESET:{LIGHT:'lightTooltipPreset',NO_POINTER:'noPointer',CLOSE_ON_BT_MOUSE_OVER:'closeOnBtMouseOverPreset'},OPTIONS:{CLOSE_ON_BT_MOUSE_OVER:{postShow:function(box)
{$(box).hoverIntent({over:function()
{$(this).data('hasmouse',true);},out:function()
{$(this).data('hasmouse',false);$(box).hide();},timeout:300});},hideTip:function(box,callback)
{if($(box).data('hasmouse'))
{return;}
$(box).hide();callback();}},LIGHT:{cssClass:'light_tooltip',fill:'#ffffff',strokeWidth:1,strokeStyle:"#c9d7e1",cssStyles:{color:'#7f8797',padding:'10px'}},NO_POINTER:{cssClass:'no_pointer_tooltip',fill:'transparent',strokeStyle:'transparent',cssStyles:{color:'#7f8797','background-color':'#ffffff',padding:'20px','box-shadow':'0px 0px 20px rgba(50, 53, 55, 0.06), 0px 12px 20px rgba(50, 53, 55, 0.11)','border-radius':'8px',}},DEFAULT:{cssClass:'dark_tooltip',spikeLength:4,spikeGirth:11,fill:'#404040',shrinkToFit:true,strokeWidth:0,strokeStyle:"#404040",overlap:-16,closeWhenOthersOpen:true,cornerRadius:2,cssStyles:{color:'#ffffff',max_width:'250px','line-height':'20px',fontSize:'13px',padding:'4px 9px'}}}});

jQuery.bt={version:'0.9.5-rc1'};;(function($){jQuery.fn.bt=function(content,options){if(typeof content!='string'){var contentSelect=true;options=content;content=false;}
else{var contentSelect=false;}
if(jQuery.fn.hoverIntent&&jQuery.bt.defaults.trigger=='hover'){jQuery.bt.defaults.trigger='hoverIntent';}
return this.each(function(index){var opts=jQuery.extend(false,jQuery.bt.defaults,jQuery.bt.options,options);opts.spikeLength=numb(opts.spikeLength);opts.spikeGirth=numb(opts.spikeGirth);opts.overlap=numb(opts.overlap);var ajaxTimeout=false;if(opts.killTitle){$(this).find('[title]').andSelf().each(function(){if(!$(this).attr('bt-xTitle')){$(this).attr('bt-xTitle',$(this).attr('title')).attr('title','');}});}
if(typeof opts.trigger=='string'){opts.trigger=[opts.trigger];}
if(opts.trigger[0]=='hoverIntent'){var hoverOpts=jQuery.extend(opts.hoverIntentOpts,{over:function(){this.btOn();},out:function(){this.btOff();}});$(this).hoverIntent(hoverOpts);}
else if(opts.trigger[0]=='hover'){$(this).hover(function(){this.btOn();},function(){this.btOff();});}
else if(opts.trigger[0]=='now'){if($(this).hasClass('bt-active')){this.btOff();}
else{this.btOn();}}
else if(opts.trigger[0]=='none'){}
else if(opts.trigger.length>1&&opts.trigger[0]!=opts.trigger[1]){$(this).bind(opts.trigger[0],function(){this.btOn();}).bind(opts.trigger[1],function(){this.btOff();});}
else{$(this).bind(opts.trigger[0],function(){if($(this).hasClass('bt-active')){this.btOff();}
else{this.btOn();}});}
this.btOn=function(){if(!$(this).parent().length){return;}
if(typeof $(this).data('bt-box')=='object'){this.btOff();}
opts.preBuild.apply(this);$(jQuery.bt.vars.closeWhenOpenStack).btOff();$(this).addClass('bt-active '+opts.activeClass);if(contentSelect&&opts.ajaxPath==null){if(opts.killTitle){$(this).attr('title',$(this).attr('bt-xTitle'));}
content=$.isFunction(opts.contentSelector)?opts.contentSelector.apply(this):eval(opts.contentSelector);if(opts.killTitle){$(this).attr('title','');}}
if(opts.ajaxPath!=null&&content==false){if(typeof opts.ajaxPath=='object'){var url=eval(opts.ajaxPath[0]);url+=opts.ajaxPath[1]?' '+opts.ajaxPath[1]:'';}
else{var url=opts.ajaxPath;}
var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}
var cacheData=opts.ajaxCache?$(document.body).data('btCache-'+url.replace(/\./g,'')):null;if(typeof cacheData=='string'){content=selector?$("<div/>").append(cacheData.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):cacheData;}
else{var target=this;var ajaxOpts=jQuery.extend(false,{type:opts.ajaxType,data:opts.ajaxData,cache:opts.ajaxCache,url:url,complete:function(XMLHttpRequest,textStatus){if(textStatus=='success'||textStatus=='notmodified'){if(opts.ajaxCache){$(document.body).data('btCache-'+url.replace(/\./g,''),XMLHttpRequest.responseText);}
ajaxTimeout=false;content=selector?$("<div/>").append(XMLHttpRequest.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):XMLHttpRequest.responseText;}
else{if(textStatus=='timeout'){ajaxTimeout=true;}
content=opts.ajaxError.replace(/%error/g,XMLHttpRequest.statusText);}
if($(target).hasClass('bt-active')){target.btOn();}}},opts.ajaxOpts);jQuery.ajax(ajaxOpts);content=opts.ajaxLoading;}}
var shadowMarginX=0;var shadowMarginY=0;var shadowShiftX=0;var shadowShiftY=0;if(opts.shadow&&!shadowSupport()){opts.shadow=false;jQuery.extend(opts,opts.noShadowOpts);}
if(opts.shadow){if(opts.shadowBlur>Math.abs(opts.shadowOffsetX)){shadowMarginX=opts.shadowBlur*2;}
else{shadowMarginX=opts.shadowBlur+Math.abs(opts.shadowOffsetX);}
shadowShiftX=(opts.shadowBlur-opts.shadowOffsetX)>0?opts.shadowBlur-opts.shadowOffsetX:0;if(opts.shadowBlur>Math.abs(opts.shadowOffsetY)){shadowMarginY=opts.shadowBlur*2;}
else{shadowMarginY=opts.shadowBlur+Math.abs(opts.shadowOffsetY);}
shadowShiftY=(opts.shadowBlur-opts.shadowOffsetY)>0?opts.shadowBlur-opts.shadowOffsetY:0;}
if(opts.offsetParent){var offsetParent=$(opts.offsetParent);var offsetParentPos=offsetParent.offset();var pos=$(this).offset();var top=numb(pos.top)-numb(offsetParentPos.top)+numb($(this).css('margin-top'))-shadowShiftY;var left=numb(pos.left)-numb(offsetParentPos.left)+numb($(this).css('margin-left'))-shadowShiftX;}
else{var offsetParent=($(this).css('position')=='absolute')?$(this).parent():$(this).offsetParent();var pos=$(this).btPosition();var top=numb(pos.top)+numb($(this).css('margin-top'))-shadowShiftY;var left=numb(pos.left)+numb($(this).css('margin-left'))-shadowShiftX;}
var width=$(this).btOuterWidth();var height=$(this).outerHeight();if(typeof content=='object'){var original=content;var clone=$(original).clone(true).show();var origClones=$(original).data('bt-clones')||[];origClones.push(clone);$(original).data('bt-clones',origClones);$(clone).data('bt-orig',original);$(this).data('bt-content-orig',{original:original,clone:clone});content=clone;}
if(typeof content=='null'||content==''){return;}
var $text=$('<div class="bt-content"></div>').append(content).css({padding:opts.padding,position:'absolute',width:(opts.shrinkToFit?'auto':opts.width),zIndex:opts.textzIndex,left:shadowShiftX,top:shadowShiftY}).css(opts.cssStyles);var $box=$('<div class="bt-wrapper"></div>').append($text).addClass(opts.cssClass).css({position:'absolute',width:opts.width,zIndex:opts.wrapperzIndex,visibility:'hidden'}).appendTo(offsetParent);if(jQuery.fn.bgiframe){$text.bgiframe();$box.bgiframe();}
$(this).data('bt-box',$box);var scrollTop=numb($(document).scrollTop());var scrollLeft=numb($(document).scrollLeft());var docWidth=numb($(window).width());var docHeight=numb($(window).height());var winRight=scrollLeft+docWidth;var winBottom=scrollTop+docHeight;var space=new Object();var thisOffset=$(this).offset();space.top=thisOffset.top-scrollTop;space.bottom=docHeight-((thisOffset+height)-scrollTop);space.left=thisOffset.left-scrollLeft;space.right=docWidth-((thisOffset.left+width)-scrollLeft);var textOutHeight=numb($text.outerHeight());var textOutWidth=numb($text.btOuterWidth());if(opts.positions.constructor==String){opts.positions=opts.positions.replace(/ /,'').split(',');}
if(opts.positions[0]=='most'){var position='top';for(var pig in space){position=space[pig]>space[position]?pig:position;}}
else{for(var x in opts.positions){var position=opts.positions[x];if((position=='left'||position=='right')&&space[position]>textOutWidth+opts.spikeLength){break;}
else if((position=='top'||position=='bottom')&&space[position]>textOutHeight+opts.spikeLength){break;}}}
var horiz=left+((width-textOutWidth)*.5);var vert=top+((height-textOutHeight)*.5);var points=new Array();var textTop,textLeft,textRight,textBottom,textTopSpace,textBottomSpace,textLeftSpace,textRightSpace,crossPoint,textCenter,spikePoint;switch(position){case'top':$text.css('margin-bottom',opts.spikeLength+'px');$box.css({top:(top-$text.outerHeight(true))+opts.overlap,left:horiz});textRightSpace=(winRight-opts.windowMargin)-($text.offset().left+$text.btOuterWidth(true));var xShift=shadowShiftX;if(textRightSpace<0){$box.css('left',(numb($box.css('left'))+textRightSpace)+'px');xShift-=textRightSpace;}
textLeftSpace=($text.offset().left+numb($text.css('margin-left')))-(scrollLeft+opts.windowMargin);if(textLeftSpace<0){$box.css('left',(numb($box.css('left'))-textLeftSpace)+'px');xShift+=textLeftSpace;}
textTop=$text.btPosition().top+numb($text.css('margin-top'));textLeft=$text.btPosition().left+numb($text.css('margin-left'));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={y:textBottom+opts.spikeLength,x:((textRight-textLeft)*.5)+xShift,type:'spike'};crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textBottom);crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x;crossPoint.x=crossPoint.x>(textRight-opts.spikeGirth/2)-opts.cornerRadius?(textRight-opts.spikeGirth/2)-opts.CornerRadius:crossPoint.x;points[points.length]={x:crossPoint.x-(opts.spikeGirth/2),y:textBottom,type:'join'};points[points.length]={x:textLeft,y:textBottom,type:'corner'};points[points.length]={x:textLeft,y:textTop,type:'corner'};points[points.length]={x:textRight,y:textTop,type:'corner'};points[points.length]={x:textRight,y:textBottom,type:'corner'};points[points.length]={x:crossPoint.x+(opts.spikeGirth/2),y:textBottom,type:'join'};points[points.length]=spikePoint;break;case'left':$text.css('margin-right',opts.spikeLength+'px');vert-=(numb($($text).outerHeight())-textOutHeight)/2;$box.css({top:vert+'px',left:((left-$text.btOuterWidth(true))+opts.overlap)+'px'});textBottomSpace=(winBottom-opts.windowMargin)-($text.offset().top+$text.outerHeight(true));var yShift=shadowShiftY;if(textBottomSpace<0){$box.css('top',(numb($box.css('top'))+textBottomSpace)+'px');yShift-=textBottomSpace;}
textTopSpace=($text.offset().top+numb($text.css('margin-top')))-(scrollTop+opts.windowMargin);if(textTopSpace<0){$box.css('top',(numb($box.css('top'))-textTopSpace)+'px');yShift+=textTopSpace;}
textTop=$text.btPosition().top+numb($text.css('margin-top'));textLeft=$text.btPosition().left+numb($text.css('margin-left'));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:textRight+opts.spikeLength,y:((textBottom-textTop)*.5)+yShift,type:'spike'};crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textRight);crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y;crossPoint.y=crossPoint.y>(textBottom-opts.spikeGirth/2)-opts.cornerRadius?(textBottom-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.y;points[points.length]={x:textRight,y:crossPoint.y+opts.spikeGirth/2,type:'join'};points[points.length]={x:textRight,y:textBottom,type:'corner'};points[points.length]={x:textLeft,y:textBottom,type:'corner'};points[points.length]={x:textLeft,y:textTop,type:'corner'};points[points.length]={x:textRight,y:textTop,type:'corner'};points[points.length]={x:textRight,y:crossPoint.y-opts.spikeGirth/2,type:'join'};points[points.length]=spikePoint;break;case'bottom':$text.css('margin-top',opts.spikeLength+'px');$box.css({top:(top+height)-opts.overlap,left:horiz});textRightSpace=(winRight-opts.windowMargin)-($text.offset().left+$text.btOuterWidth(true));var xShift=shadowShiftX;if(textRightSpace<0){$box.css('left',(numb($box.css('left'))+textRightSpace)+'px');xShift-=textRightSpace;}
textLeftSpace=($text.offset().left+numb($text.css('margin-left')))-(scrollLeft+opts.windowMargin);if(textLeftSpace<0){$box.css('left',(numb($box.css('left'))-textLeftSpace)+'px');xShift+=textLeftSpace;}
textTop=$text.btPosition().top+numb($text.css('margin-top'));textLeft=$text.btPosition().left+numb($text.css('margin-left'));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:((textRight-textLeft)*.5)+xShift,y:shadowShiftY,type:'spike'};crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textTop);crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x;crossPoint.x=crossPoint.x>(textRight-opts.spikeGirth/2)-opts.cornerRadius?(textRight-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.x;points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textTop,type:'join'};points[points.length]={x:textRight,y:textTop,type:'corner'};points[points.length]={x:textRight,y:textBottom,type:'corner'};points[points.length]={x:textLeft,y:textBottom,type:'corner'};points[points.length]={x:textLeft,y:textTop,type:'corner'};points[points.length]={x:crossPoint.x-(opts.spikeGirth/2),y:textTop,type:'join'};points[points.length]=spikePoint;break;case'right':$text.css('margin-left',(opts.spikeLength+'px'));vert-=(numb($($text).outerHeight())-textOutHeight)/2;$box.css({top:vert+'px',left:((left+width)-opts.overlap)+'px'});textBottomSpace=(winBottom-opts.windowMargin)-($text.offset().top+$text.outerHeight(true));var yShift=shadowShiftY;textTop=$text.btPosition().top+numb($text.css('margin-top'));textLeft=$text.btPosition().left+numb($text.css('margin-left'));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+($text.btOuterWidth()*opts.centerPointX),y:textTop+($text.outerHeight()*opts.centerPointY)};points[points.length]=spikePoint={x:shadowShiftX,y:((textBottom-textTop)*.5)+yShift,type:'spike'};crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textLeft);crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y;crossPoint.y=crossPoint.y>(textBottom-opts.spikeGirth/2)-opts.cornerRadius?(textBottom-opts.spikeGirth/2)-opts.cornerRadius:crossPoint.y;points[points.length]={x:textLeft,y:crossPoint.y-opts.spikeGirth/2,type:'join'};points[points.length]={x:textLeft,y:textTop,type:'corner'};points[points.length]={x:textRight,y:textTop,type:'corner'};points[points.length]={x:textRight,y:textBottom,type:'corner'};points[points.length]={x:textLeft,y:textBottom,type:'corner'};points[points.length]={x:textLeft,y:crossPoint.y+opts.spikeGirth/2,type:'join'};points[points.length]=spikePoint;break;}
var canvas=document.createElement('canvas');$(canvas).attr('width',(numb($text.btOuterWidth(true))+opts.strokeWidth*2+shadowMarginX)).attr('height',(numb($text.outerHeight(true))+opts.strokeWidth*2+shadowMarginY)).appendTo($box).css({position:'absolute',zIndex:opts.boxzIndex});if(typeof G_vmlCanvasManager!='undefined'){canvas=G_vmlCanvasManager.initElement(canvas);}
if(opts.cornerRadius>0){var newPoints=new Array();var newPoint;for(var i=0;i<points.length;i++){if(points[i].type=='corner'){newPoint=betweenPoint(points[i],points[(i-1)%points.length],opts.cornerRadius);newPoint.type='arcStart';newPoints[newPoints.length]=newPoint;newPoints[newPoints.length]=points[i];newPoint=betweenPoint(points[i],points[(i+1)%points.length],opts.cornerRadius);newPoint.type='arcEnd';newPoints[newPoints.length]=newPoint;}
else{newPoints[newPoints.length]=points[i];}}
points=newPoints;}
var ctx=canvas.getContext("2d");if(opts.shadow&&opts.shadowOverlap!==true){var shadowOverlap=numb(opts.shadowOverlap);switch(position){case'top':if(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap>0){$box.css('top',(numb($box.css('top'))-(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap)));}
break;case'right':if(shadowShiftX-shadowOverlap>0){$box.css('left',(numb($box.css('left'))+shadowShiftX-shadowOverlap));}
break;case'bottom':if(shadowShiftY-shadowOverlap>0){$box.css('top',(numb($box.css('top'))+shadowShiftY-shadowOverlap));}
break;case'left':if(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap>0){$box.css('left',(numb($box.css('left'))-(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap)));}
break;}}
drawIt.apply(ctx,[points],opts.strokeWidth);ctx.fillStyle=opts.fill;if(opts.shadow){ctx.shadowOffsetX=opts.shadowOffsetX;ctx.shadowOffsetY=opts.shadowOffsetY;ctx.shadowBlur=opts.shadowBlur;ctx.shadowColor=opts.shadowColor;}
ctx.closePath();ctx.fill();if(opts.strokeWidth>0){ctx.shadowColor='rgba(0, 0, 0, 0)';ctx.lineWidth=opts.strokeWidth;ctx.strokeStyle=opts.strokeStyle;ctx.beginPath();drawIt.apply(ctx,[points],opts.strokeWidth);ctx.closePath();ctx.stroke();}
opts.preShow.apply(this,[$box[0]]);$box.css({display:'none',visibility:'visible'});opts.showTip.apply(this,[$box[0]]);if(opts.overlay){var overlay=$('<div class="bt-overlay"></div>').css({position:'absolute',backgroundColor:'blue',top:top,left:left,width:width,height:height,opacity:'.2'}).appendTo(offsetParent);$(this).data('overlay',overlay);}
if((opts.ajaxPath!=null&&opts.ajaxCache==false)||ajaxTimeout){content=false;}
if(opts.clickAnywhereToClose){jQuery.bt.vars.clickAnywhereStack.push(this);$(document).click(jQuery.bt.docClick);}
if(opts.closeWhenOthersOpen){jQuery.bt.vars.closeWhenOpenStack.push(this);}
opts.postShow.apply(this,[$box[0]]);};this.btOff=function(){var box=$(this).data('bt-box');opts.preHide.apply(this,[box]);var i=this;i.btCleanup=function(){var box=$(i).data('bt-box');var contentOrig=$(i).data('bt-content-orig');var overlay=$(i).data('bt-overlay');if(typeof box=='object'){$(box).remove();$(i).removeData('bt-box');}
if(typeof contentOrig=='object'){var clones=$(contentOrig.original).data('bt-clones');$(contentOrig).data('bt-clones',arrayRemove(clones,contentOrig.clone));}
if(typeof overlay=='object'){$(overlay).remove();$(i).removeData('bt-overlay');}
jQuery.bt.vars.clickAnywhereStack=arrayRemove(jQuery.bt.vars.clickAnywhereStack,i);jQuery.bt.vars.closeWhenOpenStack=arrayRemove(jQuery.bt.vars.closeWhenOpenStack,i);$(i).removeClass('bt-active '+opts.activeClass);opts.postHide.apply(i);}
opts.hideTip.apply(this,[box,i.btCleanup]);};var refresh=this.btRefresh=function(){this.btOff();this.btOn();};});function drawIt(points,strokeWidth){this.moveTo(points[0].x,points[0].y);for(i=1;i<points.length;i++){if(points[i-1].type=='arcStart'){this.quadraticCurveTo(round5(points[i].x,strokeWidth),round5(points[i].y,strokeWidth),round5(points[(i+1)%points.length].x,strokeWidth),round5(points[(i+1)%points.length].y,strokeWidth));i++;}
else{this.lineTo(round5(points[i].x,strokeWidth),round5(points[i].y,strokeWidth));}}};function round5(num,strokeWidth){var ret;strokeWidth=numb(strokeWidth);if(strokeWidth%2){ret=num;}
else{ret=Math.round(num-.5)+.5;}
return ret;};function numb(num){return parseInt(num)||0;};function arrayRemove(arr,elem){var x,newArr=new Array();for(x in arr){if(arr[x]!=elem){newArr.push(arr[x]);}}
return newArr;};function canvasSupport(){var canvas_compatible=false;try{canvas_compatible=!!(document.createElement('canvas').getContext('2d'));}catch(e){canvas_compatible=!!(document.createElement('canvas').getContext);}
return canvas_compatible;}
function shadowSupport(){try{var userAgent=navigator.userAgent.toLowerCase();if(/webkit/.test(userAgent)){return true;}
else if(/gecko|mozilla/.test(userAgent)&&parseFloat(userAgent.match(/firefox\/(\d+(?:\.\d+)+)/)[1])>=3.1){return true;}}
catch(err){}
return false;}
function betweenPoint(point1,point2,dist){var y,x;if(point1.x==point2.x){y=point1.y<point2.y?point1.y+dist:point1.y-dist;return{x:point1.x,y:y};}
else if(point1.y==point2.y){x=point1.x<point2.x?point1.x+dist:point1.x-dist;return{x:x,y:point1.y};}};function centerPoint(arcStart,corner,arcEnd){var x=corner.x==arcStart.x?arcEnd.x:arcStart.x;var y=corner.y==arcStart.y?arcEnd.y:arcStart.y;var startAngle,endAngle;if(arcStart.x<arcEnd.x){if(arcStart.y>arcEnd.y){startAngle=(Math.PI/180)*180;endAngle=(Math.PI/180)*90;}
else{startAngle=(Math.PI/180)*90;endAngle=0;}}
else{if(arcStart.y>arcEnd.y){startAngle=(Math.PI/180)*270;endAngle=(Math.PI/180)*180;}
else{startAngle=0;endAngle=(Math.PI/180)*270;}}
return{x:x,y:y,type:'center',startAngle:startAngle,endAngle:endAngle};};function findIntersect(r1x1,r1y1,r1x2,r1y2,r2x1,r2y1,r2x2,r2y2){if(r2x1==r2x2){return findIntersectY(r1x1,r1y1,r1x2,r1y2,r2x1);}
if(r2y1==r2y2){return findIntersectX(r1x1,r1y1,r1x2,r1y2,r2y1);}
var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var r2m=(r2y1-r2y2)/(r2x1-r2x2);var r2b=r2y1-(r2m*r2x1);var x=(r2b-r1b)/(r1m-r2m);var y=r1m*x+r1b;return{x:x,y:y};};function findIntersectY(r1x1,r1y1,r1x2,r1y2,x){if(r1y1==r1y2){return{x:x,y:r1y1};}
var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var y=r1m*x+r1b;return{x:x,y:y};};function findIntersectX(r1x1,r1y1,r1x2,r1y2,y){if(r1x1==r1x2){return{x:r1x1,y:y};}
var r1m=(r1y1-r1y2)/(r1x1-r1x2);var r1b=r1y1-(r1m*r1x1);var x=(y-r1b)/r1m;return{x:x,y:y};};};jQuery.fn.btPosition=function(){function num(elem,prop){return elem[0]&&parseInt(jQuery.css(elem[0],prop,true),10)||0;};var left=0,top=0,results;if(this[0]){var offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].tagName)?{top:0,left:0}:offsetParent.offset();offset.top-=num(this,'marginTop');offset.left-=num(this,'marginLeft');parentOffset.top+=num(offsetParent,'borderTopWidth');parentOffset.left+=num(offsetParent,'borderLeftWidth');results={top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};}
return results;};jQuery.fn.btOuterWidth=function(margin){function num(elem,prop){return elem[0]&&parseInt(jQuery.css(elem[0],prop,true),10)||0;};return this["innerWidth"]()
+num(this,"borderLeftWidth")
+num(this,"borderRightWidth")
+(margin?num(this,"marginLeft")
+num(this,"marginRight"):0);};jQuery.fn.btOn=function(){return this.each(function(index){if(jQuery.isFunction(this.btOn)){this.btOn();}});};jQuery.fn.btOff=function(){return this.each(function(index){if(jQuery.isFunction(this.btOff)){this.btOff();}});};jQuery.bt.vars={clickAnywhereStack:[],closeWhenOpenStack:[]};jQuery.bt.docClick=function(e){if(!e){var e=window.event;};if(!$(e.target).parents().andSelf().filter('.bt-wrapper, .bt-active').length&&jQuery.bt.vars.clickAnywhereStack.length){$(jQuery.bt.vars.clickAnywhereStack).btOff();$(document).unbind('click',jQuery.bt.docClick);}};jQuery.bt.defaults={trigger:'hover',clickAnywhereToClose:true,closeWhenOthersOpen:false,shrinkToFit:false,width:'200px',padding:'10px',spikeGirth:10,spikeLength:15,overlap:0,overlay:false,killTitle:true,textzIndex:9999,boxzIndex:9998,wrapperzIndex:9997,offsetParent:null,positions:['most'],fill:"rgb(255, 255, 102)",windowMargin:10,strokeWidth:1,strokeStyle:"#000",cornerRadius:5,centerPointX:.5,centerPointY:.5,shadow:false,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:3,shadowColor:"#000",shadowOverlap:false,noShadowOpts:{strokeStyle:'#999'},cssClass:'',cssStyles:{},activeClass:'bt-active',contentSelector:"$(this).attr('title')",ajaxPath:null,ajaxError:'<strong>ERROR:</strong> <em>%error</em>',ajaxLoading:'<blink>Loading...</blink>',ajaxData:{},ajaxType:'GET',ajaxCache:true,ajaxOpts:{},preBuild:function(){},preShow:function(box){},showTip:function(box){$(box).show();},postShow:function(box){},preHide:function(box){},hideTip:function(box,callback){$(box).hide();callback();},postHide:function(){},hoverIntentOpts:{interval:300,timeout:500}};jQuery.bt.options={};})(jQuery);

Object.extend=function(destination,source){for(var property in source)
destination[property]=source[property];return destination;};Object.extend(String.prototype,{escapeHTML:function(){var self=arguments.callee;self.text.data=this;return self.div.innerHTML;}});Object.extend(String.prototype.escapeHTML,{div:document.createElement('div'),text:document.createTextNode('')});String.prototype.escapeHTML.div.appendChild(String.prototype.escapeHTML.text);

var Tooltip=Base.extend({_options:null,_message:null,_element:null,constructor:function(params)
{this._options=TooltipOptions.OPTIONS.DEFAULT;if(typeof(params)!=='undefined')
{this._setMessage(params.message,params.insertAsHtml);this._options=TooltipOptions.getOptions(params);if(UIBrowserUtils.isIeLt7())
{this._options.offsetParent=$('body');}}},attach:function(element)
{if(element instanceof jQuery)
{this._element=element;this.reset();if(this._message)
{this._element.bt(this._message,this._options);}
else
{this._element.bt(this._options);}}},reset:function()
{this.switchOff();this._element.attr('bt-xtitle','');},disable:function()
{this.reset();this._element.bt({trigger:'none'});},switchOff:function()
{if(this._element)
{this._element.btOff();}},_clear:function()
{this._setMessage('');},_setMessage:function(message,insertAsHtml)
{if(typeof(message)!=='undefined')
{this._message=insertAsHtml?message:message.escapeHTML();}}},{add:function(element,params)
{var tooltip=new Tooltip(params);tooltip.attach(element);return tooltip;}});

(function($)
{$.fn.tooltip=function(params)
{return Tooltip.add(this,params)};})(jQuery);

var UIIcon={CSS_CLASS:'ui_icon '};

var PassmeterStrengthChecker=Base.extend({_errorMessage:null,_minLength:null,_validationRule:null,_messages:null,constructor:function(minLength,validationRule,customMessages){this._minLength=minLength;this._validationRule=validationRule;this._errorMessage='';this._initCustomMessageParts(customMessages);},validateAndPrepareMessage:function(value)
{this._errorMessage=PassmeterStrengthChecker.MESSAGE_HEADER_TEMPLATE.replace('%text%',UIMessages.PasswordStrengthMessages.PASSWORD_REQUIREMENTS_HEADER);var isValid=true;value=PassmeterStrengthChecker.trimEmoji(value);var hasValidLength=this._validateMinimalLength(this._minLength,value);isValid=isValid&&hasValidLength;this._errorMessage+=this._getLengthValidatorMessage(hasValidLength);if(this._validationRule.useDigits){var hasValidDigitCount=PassmeterStrengthChecker.validateDigitNumber(value);isValid=isValid&&hasValidDigitCount;this._errorMessage+=this._getDigitValidatorMessage(hasValidDigitCount);}
if(this._validationRule.useUpperCase){var hasValidUpperCaseLetterCount=PassmeterStrengthChecker.validateUpperCaseLetterNumber(value);isValid=isValid&&hasValidUpperCaseLetterCount;this._errorMessage+=this._getUpperCaseValidatorMessage(hasValidUpperCaseLetterCount);}
if(this._validationRule.useLowerCase){var hasValidLowerCaseLetterCount=PassmeterStrengthChecker.validateLowerCase(value);isValid=isValid&&hasValidLowerCaseLetterCount;this._errorMessage+=this._getLowerCaseValidatorMessage(hasValidLowerCaseLetterCount);}
if(this._validationRule.useSpecialChars){var hasValidSpecialCharsCount=PassmeterStrengthChecker.validateSpecialChars(value);isValid=isValid&&hasValidSpecialCharsCount;this._errorMessage+=this._getSpecialCharsValidatorMessage(hasValidSpecialCharsCount);}
return isValid;},getMessage:function(){return this._errorMessage;},_validateMinimalLength:function(minLength,value){return value.length>=minLength;},_initCustomMessageParts:function(customMessages){this._messages={passmeterLength:UIMessages.ValidatorMessages.MSG_PASSMETER_LENGTH,passmeterUpperCase:UIMessages.ValidatorMessages.MSG_PASSMETER_UPPER_CASE,passmeterDigit:UIMessages.ValidatorMessages.MSG_PASSMETER_DIGIT,passmeterLowerCase:UIMessages.ValidatorMessages.MSG_PASSMETER_LOWER_CASE,passmeterSpecialChars:UIMessages.ValidatorMessages.MSG_PASSMETER_SPECIAL_CHARS,};for(var messageName in customMessages){this._messages[messageName]=customMessages[messageName];}},_getLengthValidatorMessage:function(isValid)
{var text=this._messages.passmeterLength.replace('%min_length%',this._minLength);return PassmeterStrengthChecker.fillTemplate(text,isValid);},_getUpperCaseValidatorMessage:function(isValid)
{return PassmeterStrengthChecker.fillTemplate(this._messages.passmeterUpperCase,isValid);},_getDigitValidatorMessage:function(isValid){return PassmeterStrengthChecker.fillTemplate(this._messages.passmeterDigit,isValid);},_getLowerCaseValidatorMessage:function(isValid){return PassmeterStrengthChecker.fillTemplate(this._messages.passmeterLowerCase,isValid);},_getSpecialCharsValidatorMessage:function(isValid){return PassmeterStrengthChecker.fillTemplate(this._messages.passmeterSpecialChars,isValid);}},{MESSAGE_HEADER_TEMPLATE:'<div class="passmeter_strength_header">%text%</div>',MESSAGE_TEMPLATE:'<span class="passmeter_strength_item"><span class="%mark_class%"></span><p class="message %text_class%">%text%</p></span>',MARK_CLASS:{DEFAULT_ICON:UIIcon.CSS_CLASS+'default',SUCCESS_ICON:UIIcon.CSS_CLASS+'success',SUCCESS_TEXT:'success',DEFAULT_TEXT:'',},MAX_LENGTH:100,DIGIT_REG_EXP:/[0-9]/,SPECIAL_CHARS_REG_EXP:/[`~!@#$%^&*()_\-+={}[\]\\|:;"'<>,.?/]/,validateUpperCaseLetterNumber:function(value){return(value.toLowerCase()!==value);},trimEmoji:function(value){var regex=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;return value.replace(regex,"");},validateDigitNumber:function(value){return PassmeterStrengthChecker.DIGIT_REG_EXP.test(value);},validateLowerCase:function(value){return(value.toUpperCase()!==value);},validateSpecialChars:function(value){return PassmeterStrengthChecker.SPECIAL_CHARS_REG_EXP.test(value);},fillTemplate:function(text,isValid){var message=PassmeterStrengthChecker.MESSAGE_TEMPLATE.replace('%text%',text);var markClass=isValid?PassmeterStrengthChecker.MARK_CLASS.SUCCESS_ICON:PassmeterStrengthChecker.MARK_CLASS.DEFAULT_ICON;var textClass=isValid?PassmeterStrengthChecker.MARK_CLASS.SUCCESS_TEXT:PassmeterStrengthChecker.MARK_CLASS.DEFAULT_TEXT;return message.replace('%mark_class%',markClass).replace('%text_class%',textClass);},});

var Dropdown=EventDispatcher.extend({_dropdown:null,_parent:null,_position:'left',_isFixed:false,constructor:function(dropdownId,parentId)
{this.base();this._dropdown=$('#'+dropdownId);this._parent=$('#'+parentId);if(!this._dropdown.length||!this._parent.length)
{console.error("Can't initialize dropdown elements.");}
this._initHorizontalPosition();this._initItemClick();},enableFixedPositioningMode:function(){this._isFixed=true;this._dropdown.addClass(Dropdown.css.FIXED_POSITION);$(window).on('resize',this._updateDropdownPosition.bind(this));$(document).on('scroll',this._updateDropdownPosition.bind(this));},show:function()
{this._dropdown.removeClass('hidden');this._updateDropdownPosition();this.dispatchEvent(Dropdown.event.SHOWN);},hide:function()
{this._dropdown.addClass('hidden');this.dispatchEvent(Dropdown.event.HID);},setMinWidth:function(minWidth)
{this._dropdown.css("min-width",minWidth);},setHorizontalPosition:function(position)
{this._position=position;},getElement:function()
{return this._dropdown;},isVisible:function()
{return this._dropdown.is(':visible');},isItemDisabled:function(item)
{return item.hasClass(Dropdown.css.DISABLED);},getItemAttribute:function(item)
{return item.attr(Dropdown.VALUE_ATTRIBUTE_NAME);},hideItem:function(itemData)
{var item=this._getItemByItemData(itemData);item.addClass(Dropdown.css.HIDDEN);},showItem:function(itemData)
{var item=this._getItemByItemData(itemData);item.removeClass(Dropdown.css.HIDDEN);},disableItem:function(itemData)
{var item=this._getItemByItemData(itemData);item.addClass(Dropdown.css.DISABLED);item.find(Dropdown.selector.TEXT).addClass(Dropdown.css.DISABLED_VARIANT_TEXT);},enableItem:function(itemData)
{var item=this._getItemByItemData(itemData);item.removeClass(Dropdown.css.DISABLED);item.find(Dropdown.selector.TEXT).removeClass(Dropdown.css.DISABLED_VARIANT_TEXT);},setItemText:function(itemData,text)
{var item=this._getItemByItemData(itemData);item.find(Dropdown.selector.TAG_A).find(Dropdown.selector.TEXT).html(text);item.find(Dropdown.selector.TAG_A).attr('title',text);},_initItemClick:function()
{this._dropdown.find('a').on('click',handler(this,'_itemClicked'));},_itemClicked:function(event)
{this.dispatchEvent(Dropdown.event.ITEM_CLICKED,event)},_getItemByItemData:function(itemData)
{var childElement=this._dropdown.find('.'+itemData);return childElement.closest('li');},_initHorizontalPosition:function()
{if(this._dropdown.hasClass(Dropdown.position_class.RIGHT))
{this.setHorizontalPosition(Dropdown.position.RIGHT);}},_updateDropdownPosition:function()
{if(this._isFixed){this._setDropdownFixedPositionImpl();}
else{this._updateDropdownAbsolutePositionClasses();}},_setDropdownFixedPositionImpl:function(){var parentBox=this._getElementBox(this._parent[0]);var dropdownBox=this._getElementBox(this._dropdown[0]);this._dropdown.css('top','unset');this._dropdown.css('left','unset');var VERTICAL_MARGIN=9;if((this._position===Dropdown.position.LEFT&&this._isFieldOnTheRightViewportSide())||(this._position===Dropdown.position.RIGHT&&!this._isFieldOnTheLeftViewportSide()))
{this._dropdown.css('left',parentBox.right-dropdownBox.width);}
else
{this._dropdown.css('left',parentBox.left);}
if(this._isFieldTooCloseToScreenBottom())
{this._dropdown.css('top',parentBox.top-dropdownBox.height-VERTICAL_MARGIN);}
else
{this._dropdown.css('top',parentBox.bottom+VERTICAL_MARGIN);}},_updateDropdownAbsolutePositionClasses:function(){if((this._position===Dropdown.position.LEFT&&this._isFieldOnTheRightViewportSide())||(this._position===Dropdown.position.RIGHT&&!this._isFieldOnTheLeftViewportSide()))
{this._dropdown.addClass(Dropdown.position_class.RIGHT);}
else
{this._dropdown.removeClass(Dropdown.position_class.RIGHT);}
if(this._isFieldTooCloseToScreenBottom())
{this._dropdown.addClass(Dropdown.position_class.TOP);}
else
{this._dropdown.removeClass(Dropdown.position_class.TOP);}},_getElementBox:function(el){var rect=el.getBoundingClientRect();return{top:Math.floor(rect.y),bottom:Math.floor(rect.y)+Math.floor(rect.height),left:Math.floor(rect.x),right:Math.floor(rect.x)+Math.floor(rect.width),width:Math.floor(rect.width),height:Math.floor(rect.height),};},_isFieldOnTheRightViewportSide:function()
{var inputPos=this._parent.offset().left;var viewportWidth=parseInt($(window).innerWidth());var dropDownWidth=this._dropdown.width();var containerWidth=this._parent.width();return(((viewportWidth-inputPos-containerWidth)<dropDownWidth)&&(inputPos>dropDownWidth));},_isFieldOnTheLeftViewportSide:function()
{var inputPos=this._parent.offset().left;var dropDownWidth=this._dropdown.width();var containerWidth=this._parent.width();return(inputPos+containerWidth<dropDownWidth);},_isFieldTooCloseToScreenBottom:function()
{var inputPos=this._parent[0].getBoundingClientRect().top;var viewportHeight=parseInt($(window).innerHeight());var dropDownHeight=this._dropdown.height();var containerHeight=this._parent.height();return(((viewportHeight-inputPos-containerHeight)<dropDownHeight)&&(inputPos>dropDownHeight));}},{VALUE_ATTRIBUTE_NAME:'data-value',position_class:{TOP:'dropdown_pos_top',RIGHT:'dropdown_pos_right'},position:{LEFT:'left',RIGHT:'right'},event:{SHOWN:'dropdown_shown_event',HID:'dropdown_hid_event',ITEM_CLICKED:'item_clicked'},css:{DISABLED:'disabled',DISABLED_VARIANT_TEXT:'item_not_active',HIDDEN:'hidden',FIXED_POSITION:'dropdown_fixed_pos'},selector:{TAG_A:'a',TEXT:'.text'}});
;(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof module!=='undefined'&&module.exports){module.exports=factory(require('jquery'));}else{factory(jQuery);}})(function($){'use strict';var $scrollTo=$.scrollTo=function(target,duration,settings){return $(window).scrollTo(target,duration,settings);};$scrollTo.defaults={axis:'xy',duration:0,limit:true};function isWin(elem){return!elem.nodeName||$.inArray(elem.nodeName.toLowerCase(),['iframe','#document','html','body'])!==-1;}
$.fn.scrollTo=function(target,duration,settings){if(typeof duration==='object'){settings=duration;duration=0;}
if(typeof settings==='function'){settings={onAfter:settings};}
if(target==='max'){target=9e9;}
settings=$.extend({},$scrollTo.defaults,settings);duration=duration||settings.duration;var queue=settings.queue&&settings.axis.length>1;if(queue){duration/=2;}
settings.offset=both(settings.offset);settings.over=both(settings.over);return this.each(function(){if(target===null)return;var win=isWin(this),elem=win?this.contentWindow||window:this,$elem=$(elem),targ=target,attr={},toff;switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break;}
targ=win?$(targ):$(targ,elem);case'object':if(targ.length===0)return;if(targ.is||targ.style){toff=(targ=$(targ)).offset();}}
var offset=$.isFunction(settings.offset)&&settings.offset(elem,targ)||settings.offset;$.each(settings.axis.split(''),function(i,axis){var Pos=axis==='x'?'Left':'Top',pos=Pos.toLowerCase(),key='scroll'+Pos,prev=$elem[key](),max=$scrollTo.max(elem,axis);if(toff){attr[key]=toff[pos]+(win?0:prev-$elem.offset()[pos]);if(settings.margin){attr[key]-=parseInt(targ.css('margin'+Pos),10)||0;attr[key]-=parseInt(targ.css('border'+Pos+'Width'),10)||0;}
attr[key]+=offset[pos]||0;if(settings.over[pos]){attr[key]+=targ[axis==='x'?'width':'height']()*settings.over[pos];}}else{var val=targ[pos];attr[key]=val.slice&&val.slice(-1)==='%'?parseFloat(val)/100*max:val;}
if(settings.limit&&/^\d+$/.test(attr[key])){attr[key]=attr[key]<=0?0:Math.min(attr[key],max);}
if(!i&&settings.axis.length>1){if(prev===attr[key]){attr={};}else if(queue){animate(settings.onAfterFirst);attr={};}}});animate(settings.onAfter);function animate(callback){var opts=$.extend({},settings,{queue:true,duration:duration,complete:callback&&function(){callback.call(elem,targ,settings);}});$elem.animate(attr,opts);}});};$scrollTo.max=function(elem,axis){var Dim=axis==='x'?'Width':'Height',scroll='scroll'+Dim;if(!isWin(elem))
return elem[scroll]-$(elem)[Dim.toLowerCase()]();var size='client'+Dim,doc=elem.ownerDocument||elem.document,html=doc.documentElement,body=doc.body;return Math.max(html[scroll],body[scroll])-Math.min(html[size],body[size]);};function both(val){return $.isFunction(val)||$.isPlainObject(val)?val:{top:val,left:val};}
$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(t){return $(t.elem)[t.prop]();},set:function(t){var curr=this.get(t);if(t.options.interrupt&&t._last&&t._last!==curr){return $(t.elem).stop();}
var next=Math.round(t.now);if(curr!==next){$(t.elem)[t.prop](next);t._last=this.get(t);}}};return $scrollTo;});

var UIHtmlEntitiesCoding=Base.extend({},{codeHtmlEntities:function(str)
{return $('<div/>').text(str).html();},decodeHtmlEntities:function(str)
{return $('<div/>').html(str).text()}});

var UIStringUtils=Base.extend({},{replaceAll:function(str,search,replace)
{return str.split(search).join(replace);},getParametrizedString:function(str,params)
{for(var paramName in params)
{var paramValue=params[paramName];str=this.replaceAll(str,'%'+paramName+'%',paramValue);}
return str;},getTemplateLabel:function(label,params)
{if(typeof(label)=="string")
{label=$("#"+label);}
var text=label.html();if(params)
{text=this.getParametrizedString(text,params);}
return text;},addSlashes:function(str)
{return(str+'').replace(/([\\"'])/g,"\\$1").replace(/\u0000/g,"\\0");},getRandomString:function(length)
{var text='';var possible='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';for(var i=0;i<length;i++)
{text+=possible.charAt(Math.floor(Math.random()*possible.length));}
return text;},htmlentities:function(str)
{var pre=document.createElement('pre');var text=document.createTextNode(str);pre.appendChild(text);return pre.innerHTML;},trim:function(str)
{if(!String.prototype.trim)
{str=str.replace(/^\s+|\s+$/g,'');}
else
{str=str.trim();}
return str;},insertInPosition:function(srcString,stringToInsert,pos)
{return srcString.substr(0,pos)+stringToInsert+srcString.substr(pos);},encodeDoubleQuotes:function(str)
{return str.replace(/\"/g,'&quot;');}});
;(function($){$.fn.extend({actual:function(method,options){var $hidden,$target,configs,css,tmp,actual,fix,restore;if(!this[method]){throw'$.actual => The jQuery method "'+method+'" you called does not exist';}
configs=$.extend({absolute:false,clone:false,includeMargin:undefined},options);$target=this;if(configs.clone===true){fix=function(){$target=$target.filter(':first').clone().css({position:'absolute',top:-1000}).appendTo('body');};restore=function(){$target.remove();};}else{fix=function(){$hidden=$target.parents().andSelf().filter(':hidden');css=configs.absolute===true?{position:'absolute',visibility:'hidden',display:'block'}:{visibility:'hidden',display:'block'};tmp=[];$hidden.each(function(){var _tmp={},name;for(name in css){_tmp[name]=this.style[name];this.style[name]=css[name];}
tmp.push(_tmp);});};restore=function(){$hidden.each(function(i){var _tmp=tmp[i],name;for(name in css){this.style[name]=_tmp[name];}});};}
fix();actual=/(outer)/g.test(method)?$target[method](configs.includeMargin):$target[method]();restore();return actual;}});})(jQuery);

var BaseCheckboxFormField=FormField.extend({_field:null,_label:null,_checkboxElement:null,initialize:function()
{this._initCheckbox();this._initHandlers();this.saveCurrentValueAsInitial();},getHtmlAttribute:function(attrName)
{return this._field.data(attrName);},setLabelText:function(text)
{this._label.html(text);},getLabelText:function(returnAsText)
{returnAsText=returnAsText||false;return returnAsText?this._label.text():this._label.html();},setChecked:function(isChecked)
{this.setValue(isChecked);},doAddClass:function(cssClass)
{this._checkboxElement.addClass(cssClass);},doRemoveClass:function(cssClass)
{this._checkboxElement.removeClass(cssClass);},enable:function(cssClass)
{this.container.removeClass(FormField.css.DISABLED);},disable:function(cssClass)
{this.container.addClass(FormField.css.DISABLED);},_getFieldData:function()
{return{id:this.id,value:this.getValue()};},_initCheckbox:function()
{this._field=$('#'+this.id);this._checkboxElement=this._field;this._label=$('#'+this.id+'Label');this.name=this._field.attr('name');},_initHandlers:function()
{}});

(function($){var _iCheck='iCheck',_iCheckHelper=_iCheck+'-helper',_checkbox='checkbox',_radio='radio',_checked='checked',_unchecked='un'+_checked,_disabled='disabled',_determinate='determinate',_indeterminate='in'+_determinate,_update='update',_type='type',_click='click',_touch='touchbegin.i touchend.i',_add='addClass',_remove='removeClass',_callback='trigger',_label='label',_cursor='cursor',_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);$.fn[_iCheck]=function(options,fire){var handle='input[type="'+_checkbox+'"], input[type="'+_radio+'"]',stack=$(),walker=function(object){object.each(function(){var self=$(this);if(self.is(handle)){stack=stack.add(self);}else{stack=stack.add(self.find(handle));};});};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(options)){options=options.toLowerCase();walker(this);return stack.each(function(){var self=$(this);if(options=='destroy'){tidy(self,'ifDestroyed');}else{operate(self,true,options);};if($.isFunction(fire)){fire();};});}else if(typeof options=='object'||!options){var settings=$.extend({checkedClass:_checked,disabledClass:_disabled,indeterminateClass:_indeterminate,labelHover:true,aria:false},options),selector=settings.handle,hoverClass=settings.hoverClass||'hover',focusClass=settings.focusClass||'focus',activeClass=settings.activeClass||'active',labelHover=!!settings.labelHover,labelHoverClass=settings.labelHoverClass||'hover',area=(''+settings.increaseArea).replace('%','')|0;if(selector==_checkbox||selector==_radio){handle='input[type="'+selector+'"]';};if(area<-50){area=-50;};walker(this);return stack.each(function(){var self=$(this);tidy(self);var node=this,id=node.id,offset=-area+'%',size=100+(area*2)+'%',layer={position:'absolute',top:offset,left:offset,display:'block',width:size,height:size,margin:0,padding:0,background:'#fff',border:0,opacity:0},hide=_mobile?{position:'absolute',visibility:'hidden'}:area?layer:{position:'absolute',opacity:0},className=node[_type]==_checkbox?settings.checkboxClass||'i'+_checkbox:settings.radioClass||'i'+_radio,label=$(_label+'[for="'+id+'"]').add(self.closest(_label)),aria=!!settings.aria,ariaID=_iCheck+'-'+Math.random().toString(36).substr(2,6),parent='<span class="'+className+'" '+(aria?'role="'+node[_type]+'" ':''),helper;if(aria){label.each(function(){parent+='aria-labelledby="';if(this.id){parent+=this.id;}else{this.id=ariaID;parent+=ariaID;}
parent+='"';});};parent=self.wrap(parent+'/>')[_callback]('ifCreated').parent();parent.append(settings.insert);helper=$('<ins class="'+_iCheckHelper+'"/>')
helper.css(layer);helper.appendTo(parent);self.data(_iCheck,{o:settings,s:self.attr('style')});self.css(hide);!!settings.inheritClass&&parent[_add](node.className||'');!!settings.inheritID&&id&&parent[0].setAttribute('id',_iCheck+'-'+id);parent.css('position')=='static'&&parent.css('position','relative');operate(self,true,_update);if(label.length){label.on(_click+'.i mouseover.i mouseout.i '+_touch,function(event){var type=event[_type],item=$(this);if(!node[_disabled]){if(type==_click){if($(event.target).is('a')){return;}
operate(self,false,true);}else if(labelHover){if(/ut|nd/.test(type)){parent[_remove](hoverClass);item[_remove](labelHoverClass);}else{parent[_add](hoverClass);item[_add](labelHoverClass);};};if(_mobile){event.stopPropagation();}else{return false;};};});};self.on(_click+'.i focus.i blur.i keyup.i keydown.i keypress.i',function(event){var type=event[_type],key=event.keyCode;if(type==_click){return false;}else if(type=='keydown'&&key==32){if(!(node[_type]==_radio&&node[_checked])){if(node[_checked]){off(self,_checked);}else{on(self,_checked);};};return false;}else if(type=='keyup'&&node[_type]==_radio){!node[_checked]&&on(self,_checked);}else if(/us|ur/.test(type)){parent[type=='blur'?_remove:_add](focusClass);};});helper.on(_click+' mousedown mouseup mouseover mouseout '+_touch,function(event){var type=event[_type],toggle=/wn|up/.test(type)?activeClass:hoverClass;if(!node[_disabled]){if(type==_click){operate(self,false,true);}else{if(/wn|er|in/.test(type)){parent[_add](toggle);}else{parent[_remove](toggle+' '+activeClass);};if(label.length&&labelHover&&toggle==hoverClass){label[/ut|nd/.test(type)?_remove:_add](labelHoverClass);};};if(_mobile){event.stopPropagation();}else{return false;};};});});}else{return this;};};function operate(input,direct,method){var node=input[0],state=/er/.test(method)?_indeterminate:/bl/.test(method)?_disabled:_checked,active=method==_update?{checked:node[_checked],disabled:node[_disabled],indeterminate:input.attr(_indeterminate)=='true'||input.attr(_determinate)=='false'}:node[state];if(/^(ch|di|in)/.test(method)&&!active){on(input,state);}else if(/^(un|en|de)/.test(method)&&active){off(input,state);}else if(method==_update){for(var state in active){if(active[state]){on(input,state,true);}else{off(input,state,true);};};}else if(!direct||method=='toggle'){if(!direct){input[_callback]('ifClicked');};if(active){if(node[_type]!==_radio){off(input,state);};}else{on(input,state);};};};function on(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:'enabled',regular=option(input,callback+capitalize(node[_type])),specific=option(input,state+capitalize(node[_type]));if(node[state]!==true){if(!keep&&state==_checked&&node[_type]==_radio&&node.name){var form=input.closest('form'),inputs='input[name="'+node.name+'"]';inputs=form.length?form.find(inputs):$(inputs);inputs.each(function(){if(this!==node&&$(this).data(_iCheck)){off($(this),state);};});};if(indeterminate){node[state]=true;if(node[_checked]){off(input,_checked,'force');};}else{if(!keep){node[state]=true;};if(checked&&node[_indeterminate]){off(input,_indeterminate,false);};};callbacks(input,checked,state,keep);};if(node[_disabled]&&!!option(input,_cursor,true)){parent.find('.'+_iCheckHelper).css(_cursor,'default');};parent[_add](specific||option(input,state)||'');if(disabled)
{parent[0].setAttribute('aria-disabled','false');}
else
{parent[0].setAttribute('aria-checked','false');}
parent[_remove](regular||option(input,callback)||'');};function off(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:'enabled',regular=option(input,callback+capitalize(node[_type])),specific=option(input,state+capitalize(node[_type]));if(node[state]!==false){if(indeterminate||!keep||keep=='force'){node[state]=false;};callbacks(input,checked,callback,keep);};if(!node[_disabled]&&!!option(input,_cursor,true)){parent.find('.'+_iCheckHelper).css(_cursor,'pointer');};parent[_remove](specific||option(input,state)||'');if(disabled)
{parent[0].setAttribute('aria-disabled','false');}
else
{parent[0].setAttribute('aria-checked','false');}
parent[_add](regular||option(input,callback)||'');};function tidy(input,callback){if(input.data(_iCheck)){input.parent().html(input.attr('style',input.data(_iCheck).s||''));if(callback){input[_callback](callback);};input.off('.i').unwrap();$(_label+'[for="'+input[0].id+'"]').add(input.closest(_label)).off('.i');};};function option(input,state,regular){if(input.data(_iCheck)){return input.data(_iCheck).o[state+(regular?'':'Class')];};};function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1);};function callbacks(input,checked,callback,keep){if(!keep){if(checked){input[_callback]('ifToggled');};input[_callback]('ifChanged')[_callback]('if'+capitalize(callback));};};})(window.jQuery);

(function($){var DEFAULT_SETTINGS={method:"GET",contentType:"json",queryParam:"q",requestParams:{},searchDelay:300,minChars:1,maxChars:100,propertyToSearch:"name",jsonContainer:null,searchTimeout:5,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&times;",animateDropdown:false,tokenLimit:null,tokenDelimiter:",",preventDuplicates:false,tokensContainer:null,tokenValue:"id",prePopulate:null,processPrePopulate:false,idPrefix:"token-input-",resultsFormatter:function(item){return"<li>"+item[this.propertyToSearch]+"</li>"},tokenFormatter:function(item){return"<li><p>"+item[this.propertyToSearch]+"</p></li>"},onResult:null,onAdd:null,onDelete:null,onReady:null};var DEFAULT_CLASSES={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token"};var POSITION={BEFORE:0,AFTER:1,END:2};var KEY={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_ENTER:108,COMMA:188};var methods={init:function(url_or_data_or_function,options){var settings=$.extend({},DEFAULT_SETTINGS,options||{});return this.each(function(){$(this).data("tokenInputObject",new $.TokenList(this,url_or_data_or_function,settings));});},terminate:function()
{if(this.data("tokenInputObject"))
{this.data("tokenInputObject").clear();this.data("tokenInputObject").removeTokenList();}},clear:function(){this.data("tokenInputObject").clear();return this;},add:function(item){this.data("tokenInputObject").add(item);return this;},remove:function(item){this.data("tokenInputObject").remove(item);return this;},get:function(){var tokenInput=this.data("tokenInputObject");return(tokenInput)?tokenInput.getTokens():[];}}
$.fn.tokenInput=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{return methods.init.apply(this,arguments);}};$.TokenList=function(input,url_or_data,settings){if($.type(url_or_data)==="string"||$.type(url_or_data)==="function"){settings.url=url_or_data;var url=computeURL();if(settings.crossDomain===undefined){if(url.indexOf("://")===-1){settings.crossDomain=false;}else{settings.crossDomain=(location.href.split(/\/+/g)[1]!==url.split(/\/+/g)[1]);}}}else if(typeof(url_or_data)==="object"){settings.local_data=url_or_data;}
if(settings.classes){settings.classes=$.extend({},DEFAULT_CLASSES,settings.classes);}else if(settings.theme){settings.classes={};$.each(DEFAULT_CLASSES,function(key,value){settings.classes[key]=value+"-"+settings.theme;});}else{settings.classes=DEFAULT_CLASSES;}
var saved_tokens=[];var token_count=0;var cache=new $.TokenList.Cache();var timeout;var input_val;var input_box=$("<input type=\"text\"  autocomplete=\"off\">");input_box.css({outline:"none"}).attr("id",settings.idPrefix+input.id).focus(function(){if(settings.tokenLimit===null||settings.tokenLimit!==token_count){show_dropdown_hint();}}).blur(function(){hide_dropdown();}).bind("keyup keydown blur update",resize_input).keydown(function(event){var previous_token;var next_token;switch(event.keyCode){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:if(!$(this).val()){previous_token=input_token.prev();next_token=input_token.next();if((previous_token.length&&previous_token.get(0)===selected_token)||(next_token.length&&next_token.get(0)===selected_token)){if(event.keyCode===KEY.LEFT||event.keyCode===KEY.UP){deselect_token($(selected_token),POSITION.BEFORE);}else{deselect_token($(selected_token),POSITION.AFTER);}}else if((event.keyCode===KEY.LEFT||event.keyCode===KEY.UP)&&previous_token.length){select_token($(previous_token.get(0)));}else if((event.keyCode===KEY.RIGHT||event.keyCode===KEY.DOWN)&&next_token.length){select_token($(next_token.get(0)));}}else{var dropdown_item=null;if(event.keyCode===KEY.DOWN||event.keyCode===KEY.RIGHT){dropdown_item=$(selected_dropdown_item).next();}else{dropdown_item=$(selected_dropdown_item).prev();}
if(dropdown_item.length){select_dropdown_item(dropdown_item);}
else{select_dropdown_item(dropdown.find("li:first"));}
return false;}
break;case KEY.BACKSPACE:previous_token=input_token.prev();if(!$(this).val().length){if(selected_token){delete_token($(selected_token));hidden_input.change();input_box.focus();}else if(previous_token.length){select_token($(previous_token.get(0)));}
return false;}else if($(this).val().length===1){hide_dropdown();}else{setTimeout(function(){do_search();},settings.searchTimeout);}
break;case KEY.TAB:case KEY.ENTER:case KEY.NUMPAD_ENTER:if(selected_dropdown_item&&$(selected_dropdown_item).data("tokeninput")){add_token($(selected_dropdown_item).data("tokeninput"));hidden_input.change();return false;}
break;case KEY.ESCAPE:hide_dropdown();return true;default:var key=String.fromCharCode(event.which);if(key){setTimeout(function(){do_search();},settings.searchTimeout);}
break;}});var hidden_input=$(input).hide().val("").focus(function(){input_box.focus();}).blur(function(){input_box.blur();});var selected_token=null;var selected_dropdown_item=null;var search_request=null;var token_list=$("<ul />").addClass(settings.classes.tokenList).click(function(event){input_box.focus();}).mouseover(function(event){var li=$(event.target).closest("li");if(li&&selected_token!==this){li.addClass(settings.classes.highlightedToken);}}).mouseout(function(event){var li=$(event.target).closest("li");if(li&&selected_token!==this){li.removeClass(settings.classes.highlightedToken);}}).insertBefore(hidden_input);var input_token=$("<li />").addClass(settings.classes.inputToken).appendTo(token_list).append(input_box);var dropdown=$("<div>").addClass(settings.classes.dropdown).appendTo("body").hide();var input_resizer=$("<tester/>").insertAfter(input_box).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:input_box.css("fontSize"),fontFamily:input_box.css("fontFamily"),fontWeight:input_box.css("fontWeight"),letterSpacing:input_box.css("letterSpacing"),whiteSpace:"nowrap"});hidden_input.val("");var li_data=settings.prePopulate||hidden_input.data("pre");if(settings.processPrePopulate&&$.isFunction(settings.onResult)){li_data=settings.onResult.call(hidden_input,li_data);}
if(li_data&&li_data.length){$.each(li_data,function(index,value){insert_token(value);checkTokenLimit();});}
if($.isFunction(settings.onReady)){settings.onReady.call();}
this.clear=function(){token_list.children("li").each(function(){if($(this).children("input").length===0){delete_token($(this));}});cache.flush();}
this.removeTokenList=function(){token_list.remove();cache.flush();}
this.add=function(item){add_token(item);}
this.remove=function(item){token_list.children("li").each(function(){if($(this).children("input").length===0){var currToken=$(this).data("tokeninput");var match=true;for(var prop in item){if(item[prop]!==currToken[prop]){match=false;break;}}
if(match){delete_token($(this));}}});}
this.getTokens=function(){return saved_tokens;}
function checkTokenLimit(){if(settings.tokenLimit!==null&&token_count>=settings.tokenLimit){input_box.hide();hide_dropdown();return;}}
function resize_input(){if(input_val===(input_val=input_box.val())){return;}
var escaped=input_val.replace(/&/g,'&amp;').replace(/\s/g,' ').replace(/</g,'&lt;').replace(/>/g,'&gt;');input_resizer.html(escaped);input_box.width(input_resizer.width()+30);}
function is_printable_character(keycode){return((keycode>=48&&keycode<=90)||(keycode>=96&&keycode<=111)||(keycode>=186&&keycode<=192)||(keycode>=219&&keycode<=222));}
function insert_token(item){var this_token=settings.tokenFormatter(item);this_token=$(this_token).addClass(settings.classes.token).insertBefore(input_token);this_token.prepend('<div class="token_left"></div>');if(item.is_disabled!==true)
{$("<span>"+settings.deleteText+"</span>").addClass(settings.classes.tokenDelete).appendTo(this_token).click(function(){delete_token($(this).parent());hidden_input.change();return false;});}
this_token.append('<div class="token_right"></div>');var token_data={"id":item.id};token_data[settings.propertyToSearch]=item[settings.propertyToSearch];$.data(this_token.get(0),"tokeninput",item);saved_tokens.push(token_data);update_hidden_input(saved_tokens,hidden_input);token_count+=1;if(settings.tokenLimit!==null&&token_count>=settings.tokenLimit){input_box.hide();hide_dropdown();}
return this_token;}
function fix_token_size(this_token)
{var text=this_token.find("p:first");var textWidth=text.actual('width');text.css({width:textWidth});var tokenWidth=textWidth+31;this_token.css({width:tokenWidth+"px"});}
function add_token(item){var callback=settings.onAdd;if(token_count>0&&settings.preventDuplicates){var found_existing_token=null;token_list.children().each(function(){var existing_token=$(this);var existing_data=$.data(existing_token.get(0),"tokeninput");if(existing_data&&existing_data.name===item.name){found_existing_token=existing_token;return false;}});if(found_existing_token){select_token(found_existing_token);input_token.insertAfter(found_existing_token);setTimeout(function(){input_box.focus();},200);return;}}
if(settings.tokenLimit==null||token_count<settings.tokenLimit){insert_token(item);checkTokenLimit();}
input_box.val("");hide_dropdown();if($.isFunction(callback)){callback.call(hidden_input,item);}}
function select_token(token){if(token.hasClass('clear'))
return;token.addClass(settings.classes.selectedToken);selected_token=token.get(0);input_box.val("");hide_dropdown();}
function deselect_token(token,position){token.removeClass(settings.classes.selectedToken);selected_token=null;token_list.trigger('onTokenDeselect');if(position===POSITION.BEFORE){input_token.insertBefore(token);}else if(position===POSITION.AFTER){input_token.insertAfter(token);}else{input_token.appendTo(token_list);}
if((navigator.userAgent.indexOf('Trident/7.0')+1)||(jQuery.browser.msie))
{$(document).bind('keypress.deselectEvent',function(event){input_box.val(input_box.val()+String.fromCharCode(event.which));});setTimeout(function(){input_box.focus();input_box.val(input_box.val());$(document).unbind('.deselectEvent');},200);}
else
{input_box.focus();}}
function toggle_select_token(token){var previous_selected_token=selected_token;if(selected_token){deselect_token($(selected_token),POSITION.END);}
if(previous_selected_token===token.get(0)){deselect_token(token,POSITION.END);}else{select_token(token);}}
function delete_token(token){var token_data=$.data(token.get(0),"tokeninput");var callback=settings.onDelete;remove_token_from_list(saved_tokens,token_data);token.remove();selected_token=null;input_box.focus();update_hidden_input(saved_tokens,hidden_input);token_count-=1;if(settings.tokenLimit!==null){input_box.show().val("").focus();}
if($.isFunction(callback)){callback.call(hidden_input,token_data);}}
function remove_token_from_list(saved_list,token_data)
{for(var i=0;i<saved_list.length;i++)
{if(is_equal_tokens(saved_list[i],token_data))
{saved_list.splice(i,1);break;}}}
function is_equal_tokens(existing_token,token_to_compare)
{var result=false;if(!(token_to_compare.hasOwnProperty('id'))||(token_to_compare.id===undefined))
{result=existing_token.name===token_to_compare.name;}
else
{result=existing_token.id===token_to_compare.id;}
return result;}
function update_hidden_input(saved_tokens,hidden_input){var token_values=$.map(saved_tokens,function(el){return el[settings.tokenValue];});hidden_input.val(token_values.join(settings.tokenDelimiter));}
function hide_dropdown(){dropdown.hide().empty();selected_dropdown_item=null;}
function show_dropdown(){var minLeftPosition=settings.tokensContainer?settings.tokensContainer.offset().left:0;var newLeftPosition=$(input_box).offset().left;newLeftPosition=(minLeftPosition&&(newLeftPosition<minLeftPosition))?minLeftPosition:newLeftPosition;dropdown.css({position:"absolute",top:$(input_box).offset().top+$(input_box).outerHeight()+3,left:newLeftPosition+3,zindex:999});if(dropdown.find('li').length)
{dropdown.show();}
else
{dropdown.hide();}}
function show_dropdown_searching(){if(settings.searchingText){dropdown.html("<p>"+settings.searchingText+"</p>");show_dropdown();}}
function show_dropdown_hint(){if(settings.hintText){dropdown.html("<p>"+settings.hintText+"</p>");show_dropdown();}}
function find_value_and_highlight_term(template,term){return template.replace(term,'<b>'+term+'</b>');}
function populate_dropdown(query,results){if(results&&results.length){dropdown.empty();var dropdown_ul=$("<ul>").appendTo(dropdown).mouseover(function(event){select_dropdown_item($(event.target).closest("li"));}).mousedown(function(event){add_token($(event.target).closest("li").data("tokeninput"));hidden_input.change();return false;}).hide();$.each(results,function(index,value){var this_li=settings.resultsFormatter(value);if(this_li)
{this_li=find_value_and_highlight_term(this_li,query);this_li=$(this_li).appendTo(dropdown_ul);if(index%2){this_li.addClass(settings.classes.dropdownItem);}else{this_li.addClass(settings.classes.dropdownItem2);}
if(index===0){select_dropdown_item(this_li);}
$.data(this_li.get(0),"tokeninput",value);}});show_dropdown();if(settings.animateDropdown){dropdown_ul.slideDown("fast");}else{dropdown_ul.show();}}else{if(settings.noResultsText){dropdown.html("<p>"+settings.noResultsText+"</p>");}
else
{dropdown.empty();}
show_dropdown();}
fix_dropdown_position();}
function fix_dropdown_position()
{var dropdownHeight=parseInt(dropdown.height());var dropdownWidth=parseInt(dropdown.width());var dropdownTopPos=parseInt(dropdown.css("top"));var inputPos=input_box[0].getBoundingClientRect();var inputWidth=input_box.width();var inputHeight=input_box.height();var viewportWidth=parseInt($(window).innerWidth());var viewportHeight=parseInt($(window).innerHeight());var fitBottom=((viewportHeight-inputPos.top-inputHeight)>dropdownHeight);var fitTop=(inputPos.top>dropdownHeight);var fitRight=((viewportWidth-inputPos.left-inputWidth)>dropdownWidth);var fitLeft=(inputPos.left>dropdownWidth);if(!fitBottom&&fitTop)
{var newTop=dropdownTopPos-dropdownHeight-inputHeight-3;dropdown.css("top",newTop);}
if(!fitRight&&fitLeft)
{var newLeft=viewportWidth-dropdownWidth-3;dropdown.css("left",newLeft);}}
function select_dropdown_item(item){if(item){if(selected_dropdown_item){deselect_dropdown_item($(selected_dropdown_item));}
item.addClass(settings.classes.selectedDropdownItem);selected_dropdown_item=item.get(0);}}
function deselect_dropdown_item(item){item.removeClass(settings.classes.selectedDropdownItem);selected_dropdown_item=null;}
function do_search(){var query=$.trim(input_box.val().toLowerCase());if(query&&query.length){if(selected_token){deselect_token($(selected_token),POSITION.AFTER);}
if(query.length>settings.maxChars){query=query.substr(0,settings.maxChars);input_box.val(query);}
if(query.length>=settings.minChars){show_dropdown_searching();clearTimeout(timeout);timeout=setTimeout(function(){run_search(query);},settings.searchDelay);}else{hide_dropdown();}}}
function run_search(query){var cache_key=computeCacheKey(query);var cached_results=cache.get(cache_key);if(cached_results){populate_dropdown(query,cached_results);}else{if(settings.url){var url=computeURL();var ajax_params={};ajax_params.data={};if(url.indexOf("?")>-1){var parts=url.split("?");ajax_params.url=parts[0];var param_array=parts[1].split("&");$.each(param_array,function(index,value){var kv=value.split("=");ajax_params.data[kv[0]]=kv[1];});}else{ajax_params.url=url;}
var requestParams=getRequestParams();ajax_params.data[settings.queryParam]=query;ajax_params.data=$.extend(ajax_params.data,requestParams);ajax_params.type=settings.method;ajax_params.dataType=settings.contentType;if(settings.crossDomain){ajax_params.dataType="jsonp";}
ajax_params.success=function(results){if($.isFunction(settings.onResult)){results=settings.onResult.call(hidden_input,results);}
cache.add(cache_key,settings.jsonContainer?results[settings.jsonContainer]:results);if(input_box.val().toLowerCase()===query){populate_dropdown(query,settings.jsonContainer?results[settings.jsonContainer]:results);}};if(search_request)
{search_request.abort();}
search_request=$.ajax(ajax_params);}else if(settings.local_data){var results=$.grep(settings.local_data,function(row){return row[settings.propertyToSearch].toLowerCase().indexOf(query.toLowerCase())>-1;});if($.isFunction(settings.onResult)){results=settings.onResult.call(hidden_input,results);}
cache.add(cache_key,results);populate_dropdown(query,results);}}}
function getRequestParams()
{var requestParams=settings.requestParams;if($.type(requestParams)==="function")
{requestParams=requestParams();}
return requestParams;}
function computeURL(){var url=settings.url;if(typeof settings.url=='function'){url=settings.url.call();}
return url;}
function computeCacheKey(query)
{var cacheKey=query+computeURL();var requestParams=getRequestParams();$.each(requestParams,function(key,val){cacheKey+="&"+key+"="+val;});return cacheKey;}};$.TokenList.Cache=function(options){var settings=$.extend({max_size:500},options);var data={};var size=0;var flush=function(){data={};size=0;};this.add=function(query,results){if(size>settings.max_size){flush();}
if(!data[query]){size+=1;}
data[query]=results;};this.get=function(query){return data[query];};this.flush=flush;};}(jQuery));

var BaseErrorBehavior=EventDispatcher.extend({initialize:function(options)
{},showError:function(errorMessage)
{throw new Error('method not implemented');},hideError:function()
{throw new Error('method not implemented');},showErrorDescription:function()
{},hideErrorDescription:function()
{},getType:function()
{throw new Error('method not implemented');}});

var UIEventUtils=Base.extend({},{mouseButton:{LEFT:1},getCharCodeFromKeypressEvent:function(event)
{if(event.charCode)
{return event.charCode;}
if(event.keyCode)
{return event.keyCode;}
if(event.which)
{return event.which;}
return 0;},isMouseButtonLeft:function(event)
{return(event.which==UIEventUtils.mouseButton.LEFT);},getSrcElement:function(event)
{var srcElement=event.srcElement;if(!srcElement)
{srcElement=event.originalEvent?event.originalEvent.target:null;}
return srcElement;}});

var BaseTokenInput=EventDispatcher.extend({id:null,container:null,disableBlock:null,requestUrl:null,getInitDataLoader:null,itemListLoader:null,getItemLoader:null,checkItemByTextTimeout:null,loadProgress:null,tokenList:null,tokenInputField:null,checkSingleItem:null,typeInMessage:null,maxTokenCount:null,maxTokenLength:null,maxTokenLengthErrorMessage:null,scalable:null,tokenListSizeFixed:false,defaultTokenInputHeight:null,initOptions:{},defaultOptions:{},constructor:function(id){this.id=id;this.container=$('#'+this.id);this.disableBlock=$('#'+this.id+'DisableBlock');this.items=$('#'+this.id+'Items');this.selectedField=$('#'+this.id+'Selected');this.itemListLoader=new UrlLoader();this.itemListLoader.addListener('loadComplete',this,this.onItemListLoaded);this.getItemLoader=new UrlLoader();this.getItemLoader.addListener('loadComplete',this,this.onSingleItemLoaded);this.getInitDataLoader=new UrlLoader();this.getInitDataLoader.addListener('loadComplete',this,this._onInitDataLoaded);this.checkItemByTextTimeout=null;this.checkSingleItem=true;this.scalable=this.container.hasClass('scalable_tokeninput');this.defaultTokenInputHeight=BaseTokenInput.DEFAULT_HEIGHT;this.tokenListSizeFixed=false;this.defaultOptions={method:'POST',queryParam:this.getQuerySearchingParamName(),requestParams:handler(this,'getRequestParams'),hintText:'',noResultsText:'',searchingText:'',searchDelay:330,onAdd:handler(this,'onAddToken'),onDelete:handler(this,'onDeleteToken'),onResult:handler(this,'onTokenReceived'),tokenFormatter:handler(this,'tokenFormatter'),resultsFormatter:handler(this,'resultsFormatter'),searchTimeout:50,deleteText:'',preventDuplicates:true,maxChars:this.maxTokenLength};this.setInitOptions(this.defaultOptions);},setContainer:function(container){this.container=container;this.initOptions.tokensContainer=container;},initFromRequest:function(url){this.clear();this.showLoadProgress();this.getInitDataLoader.loadJson(url);},setTokenListSizeFixed:function(value){if(value==true){this.tokenListSizeFixed=true;}},init:function(initData){initData=initData||this.getInitData();var items=this.prepareItemsForTokenInput(initData,true);this.initTokenInput();this.addItems(items);this.initTokenInputField();this.tryAddTypeInState();},initTokenInput:function(){this.items.tokenInput(handler(this,'getRequestUrl'),this.initOptions);this.loadProgress=this.items.siblings('.load_progress:first');this.tokenList=this.items.siblings('.token-input-list:first');this.tokenInputField=this.tokenList.find('input:first');this.fixTokenInputListSize();},terminate:function(){this.tokenInputField.off();this.items.tokenInput('terminate');},fixTokenInputListSize:function(){if(this.scalable||this.tokenListSizeFixed){return;}
var listHeight=this.defaultTokenInputHeight;this.tokenList.height(listHeight);this.tokenListSizeFixed=true;},setInitOptions:function(options){this.initOptions=$.extend(this.defaultOptions,options);},initTokenInputField:function(){this.tokenInputField.focus(handler(this,'onTokenInputFieldFocus'));this.tokenInputField.blur(handler(this,'onTokenInputFieldBlur'));this.tokenInputField.keypress(handler(this,'onTokenInputFieldKeypressHandler'));},onTokenInputFieldKeypressHandler:function(event){if(this.checkItemByTextTimeout){clearTimeout(this.checkItemByTextTimeout);}
var key=String.fromCharCode(event.which);if((key==' ')||(key==',')||(event.which==13)){var fieldValue=this.tokenInputField.val();var isExtraSpaceDetected=(key==' ')&&((fieldValue=='')||(fieldValue.charAt(fieldValue.length-1)==' '));if(isExtraSpaceDetected){event.preventDefault();return false;}
if(this.checkSingleItem){this.checkItemByTextTimeout=setTimeout(handler(this,'checkItemByTextTimeoutHandler'),200);}else if((key==',')||(event.which==13)){this.addItems(this.parseInsertedTokens());this.setFieldDefaultWidth();}
if(event.which==44){return false;}}},parseInsertedTokens:function(){return[{name:this.tokenInputField.val(),id:null}];},setFieldDefaultWidth:function(){this.tokenInputField.css({'width':BaseTokenInput.DEFAULT_WIDTH+'px'});},setRequestUrl:function(url){this.requestUrl=url;},getRequestUrl:function(){return this.requestUrl;},setMaxTokenCount:function(maxTokenCount){this.maxTokenCount=maxTokenCount;},setMaxTokenLength:function(maxTokenLength){this.maxTokenLength=maxTokenLength;},setMaxTokenLengthErrorMessage:function(maxTokenLengthErrorMessage){this.maxTokenLengthErrorMessage=maxTokenLengthErrorMessage;},tokenFormatter:function(item){var name=this.filterItemNameForDisplaying(item.name);return'<li class="token"><span class="token_text">'+name.escapeHTML()+'</span></li>';},resultsFormatter:function(item){return(item&&this.isItemSelected(item))?false:'<li>'+item.name.escapeHTML()+'</li>';},isItemSelected:function(item){var items=this.getItems();for(var i=0;i<items.length;++i){if(item.id==items[i].id){return true;}}
return false;},refresh:function(){this.clear();var params=this.getRequestParams();delete params.limit;this.itemListLoader.loadJson(this.getRequestUrl(),params);this.showLoadProgress();},focus:function(){this.tokenInputField.focus();},showLoadProgress:function(){this.loadProgress.show();this.tokenList.hide();},hideLoadProgress:function(){this.loadProgress.hide();this.tokenList.show();},clear:function(){this.items.tokenInput('clear');this.refreshSelectedField();this.tryAddTypeInState();},refreshSelectedField:function(){this.selectedField.html(this.getItemsCount());},getItemsCount:function(){return this.getItems().length;},getItems:function(){var items=this.items.tokenInput('get');if(!items){items=[];}
return items;},getItemsIds:function(){var items=this.getItems();var ids=[];for(var i=0;i<items.length;++i){var item=items[i];ids.push(item.id);}
return ids.join(',');},getNamesAsString:function(){var tagNames=this.getItemsNames();return $.trim(tagNames.join(', '));},getItemsNames:function(){var items=this.getItems();var tagNames=[];for(var i=0;i<items.length;++i){tagNames.push(items[i].name);}
return tagNames;},clearTypeInState:function(){if(this.tokenInputField.hasClass('type_in_invite')){this.tokenInputField.removeClass('type_in_invite');this.tokenInputField.val('');}},tryAddTypeInState:function(){if(!this.getItemsCount()){this.tokenInputField.addClass('type_in_invite');this.tokenInputField.val(this.getTypeInMessage());this.dispatchEvent(BaseTokenInput.event.TYPE_IN_STATE);}
else{this.clearTypeInState();}},getTypeInMessage:function(){return this.typeInMessage;},setTypeInMessage:function(typeInMessage){this.typeInMessage=typeInMessage;},setCheckSingleItem:function(checkSingleItem){this.checkSingleItem=checkSingleItem;},checkItemByTextTimeoutHandler:function(){var params=$.extend(this.getRequestParams(),{limit:1,accurate_coincidence:true});params[this.getQuerySearchingParamName()]=$.trim(this.tokenInputField.val());this.getItemLoader.loadJson(this.getRequestUrl(),params);},onTokenInputFieldFocus:function(){this.dispatchEvent(BaseTokenInput.event.FOCUS);this.clearTypeInState();},onTokenInputFieldBlur:function(){if(!this.checkSingleItem){if(!this.tokenInputField.hasClass('type_in_invite')){var tokenName=$.trim(this.tokenInputField.val());if(tokenName!=''){this.addItems([{name:tokenName}]);}}}
this.tokenInputField.val('');this.tryAddTypeInState();},onSingleItemLoaded:function(response){if(response){var items=this.prepareItemsForTokenInput(response,false);if(items.length==1){this.addItems(items);this.tokenInputField.val('');}}},onSelectFieldChanged:function(){this.clear();},onTokenReceived:function(results){if(results.error){UiToast.showCritical(results.error);return[];}else{return this.prepareItemsForTokenInput(results,false);}},onAddToken:function(item){this.refreshSelectedField();this.dispatchEvent(BaseTokenInput.event.TOKENS_CHANGED);if(item.name.length>this.maxTokenLength){UiToast.showCritical(this.maxTokenLengthErrorMessage);this.items.tokenInput('remove',item);return;}
if(this.maxTokenCount!=null){if(this.getItemsCount()>=this.maxTokenCount){this.disableInput();}}},onDeleteToken:function(){if(this.maxTokenCount!=null){if(this.getItemsCount()<this.maxTokenCount){this.enableInput();}}
this.refreshSelectedField();this.dispatchEvent(BaseTokenInput.event.TOKENS_CHANGED);this.tokenInputField.blur();},onItemListLoaded:function(response){var items=this.prepareItemsForTokenInput(response,true);this.addItems(items);this.tokenInputField.blur();this.hideLoadProgress();},addItems:function(items){for(var i=0;i<items.length;++i){var item=items[i];item.name=$.trim(this.prepareItemName(item));if(item.name!=''){this.items.tokenInput('add',item);}}
this.saveInitData();},prepareItemName:function(item){return item.name;},getRequestParams:function(){return{excluded_ids:this.getItemsIds()};},getInitData:function(){var resultData=[];var initData=$('#'+this.id+'InitData').val();if(initData){resultData=$.parseJSON(initData);}
return resultData;},saveInitData:function(){var items=this.getItems();var itemsForSave=this._prepareItemsForSaving(items);var itemsJson=$.toJSON(itemsForSave);$('#'+this.id+'InitData').val(itemsJson);},show:function(){this.container.show();this.fixTokenInputListSize();},hide:function(){this.container.hide();},disable:function(){this.disableBlock.show();},enable:function(){this.disableBlock.hide();},disableInput:function(){this.tokenInputField.parent().hide();},enableInput:function(){this.tokenInputField.parent().show();},getQuerySearchingParamName:function(){return null;},filterItemNameForDisplaying:function(name){return name;},prepareItemsForTokenInput:function(items,checkIsChecked){return items;},_prepareItemsForSaving:function(items){var itemsForSave=[];for(var i=0;i<items.length;i++){var newItem={};if(typeof items[i].id!='undefined'){newItem.id=items[i].id;}
if(typeof items[i].name!='undefined'){newItem[this.getQuerySearchingParamName()]=items[i].name;}
itemsForSave.push(newItem);}
return itemsForSave;},_onInitDataLoaded:function(initData){var items=this.prepareItemsForTokenInput(initData,true);this.addItems(items);this.tryAddTypeInState();this.hideLoadProgress();}},{DEFAULT_HEIGHT:94,DEFAULT_WIDTH:46,event:{TOKENS_CHANGED:'tokensChanged',TYPE_IN_STATE:'typeInState',FOCUS:'focus',BLUR:'blur'}});

var TextField=EventDispatcher.extend({_field:null,_defaultText:"",_defaultTextIsShownParam:null,constructor:function(fieldId)
{this.base();this._field=$("#"+fieldId);this._initField();this._defaultTextIsShownParam=false;},getField:function()
{return this._field;},getText:function()
{if(!this._defaultTextIsShown())
{return this._field.val();}
return"";},clear:function()
{this.setText('');},setText:function(text)
{this._field.val(text);},removeDefaultTextStyles:function()
{this._field.removeClass('text_input_hint');},setDefaultText:function(defaultText)
{this._defaultText=defaultText;if(!this._field.val())
{this.showDefaultText();}},showDefaultText:function()
{this._defaultTextIsShownParam=true;this.setText(this._defaultText);this._addDefaultTextStyles();},_hideDefaultText:function()
{this.setText("");this.removeDefaultTextStyles();this._defaultTextIsShownParam=false;},_addDefaultTextStyles:function()
{this._field.addClass('text_input_hint');},_initField:function()
{this._field.focus(handler(this,'_onSetFocus'));this._field.keyup(handler(this,'_onChangeText'));this._field.blur(handler(this,'_onBlur'));},_onSetFocus:function()
{this.dispatchEvent(TextField.events.FOCUSED_FIELD);if(this._field.val()==this._defaultText)
{this._hideDefaultText();}},_onBlur:function()
{if(this._field.val()=="")
{this.showDefaultText();}},_onChangeText:function(e)
{this.dispatchEvent(TextField.events.CHANGED_FIELD);var keyCode=(e.which||e.keyCode);if(keyCode==13)
{this.dispatchEvent(TextField.events.PRESSED_ENTER,this);}},_defaultTextIsShown:function()
{return this._defaultTextIsShownParam&&(this._field.val()==this._defaultText);}},{events:{FOCUSED_FIELD:"focus",PRESSED_ENTER:"enter",CHANGED_FIELD:"change"},TYPE:{TEXT:"text",PASSWORD:"password"},_textFields:new Object(),initField:function(id)
{var tf=new TextField(id);this._textFields[id]=tf;return tf;},getField:function(id)
{return this._textFields[id];}});

var CheckboxFormField=BaseCheckboxFormField.extend({terminate:function()
{this._field.iCheck('destroy');this._field.off();this.base();},disable:function()
{this.base();this._field.iCheck('disable');},enable:function()
{this.base();this._field.iCheck('enable');},isEnabled:function()
{return this._field.is(':enabled');},getValue:function()
{return this._field.is(':checked');},setValue:function(value)
{this._field.iCheck(value?'check':'uncheck');},silentSetValue:function(value)
{this._removeOnChangeListener();this.setValue(value);this._addOnChangeListener();},_initCheckbox:function()
{this.base();var hasLargeClickArea=(parseInt(this._field.data(CheckboxFormField.data.FORM_FIELD_LARGE_CLICK_AREA))==1);this._field.iCheck({checkboxClass:CheckboxFormField.css.CUSTOM_CHECKBOX,increaseArea:(hasLargeClickArea)?CheckboxFormField.style.CUSTOM_CHECKBOX_HELPER_INCREASE_AREA_LARGE:CheckboxFormField.style.CUSTOM_CHECKBOX_HELPER_INCREASE_AREA_NORMAL});this._checkboxElement=this._field.parent();var tooltipText=this._field.attr('title');if(tooltipText)
{var customCheckbox=this.container.find(CheckboxFormField.selector.CUSTOM_CHECKBOX_HELPER);customCheckbox.attr('title',tooltipText);customCheckbox.tooltip();}},_initHandlers:function()
{this.base();var thisPtr=this;this._field.on('ifChecked',function(){thisPtr.dispatchEvent(FormField.event.CHECKED,thisPtr._getFieldData());});this._field.on('ifUnchecked',function(){thisPtr.dispatchEvent(FormField.event.UNCHECKED,thisPtr._getFieldData());});this._field.on('ifClicked',function(){thisPtr.dispatchEvent(FormField.event.CLICK);});this._addOnChangeListener();},_removeOnChangeListener:function()
{this._field.off("ifToggled");},_addOnChangeListener:function()
{var thisPtr=this;this._field.on('ifToggled',function(){thisPtr._field.val(Number(thisPtr.getValue()));thisPtr.dispatchEvent(FormField.event.CHANGE,thisPtr._getFieldData());});}},{css:{CUSTOM_CHECKBOX:'checkbox_ng checkbox_form_field'},selector:{CUSTOM_CHECKBOX_HELPER:'.iCheck-helper'},data:{FORM_FIELD_LARGE_CLICK_AREA:'form-field-large-click-area'},style:{CUSTOM_CHECKBOX_HELPER_INCREASE_AREA_NORMAL:'50%',CUSTOM_CHECKBOX_HELPER_INCREASE_AREA_LARGE:'100%'}});

(function($){$.fn.setChecked=function(check){return this.each(function(){if(jQuery(this).get(0)&&jQuery(this).get(0).setChecked)
{jQuery(this).get(0).setChecked(check)}
else
{jQuery(this).iCheck(check?'check':'uncheck');}});};$.fn.setDisabled=function(disable){return this.each(function(){if(jQuery(this).get(0)&&jQuery(this).get(0).setDisabled)
{jQuery(this).get(0).setDisabled(disable);}
else
{jQuery(this).iCheck(disable?'disable':'enable');}});};$.fn.checkbox=function(options){var defaultOptions={checkboxClass:'checkbox_ng',radioClass:'iradio'};options=options||{};options.checkboxClass=options.checkboxClass?defaultOptions.checkboxClass+' '+options.checkboxClass:defaultOptions.checkboxClass;options.radioClass=options.radioClass?defaultOptions.radioClass+' '+options.radioClass:defaultOptions.radioClass;jQuery(this).iCheck(options);jQuery(this).on('ifChecked',function(){jQuery(this).trigger('check');});jQuery(this).on('ifClicked',function(){jQuery(this).trigger('clicked');});jQuery(this).on('ifUnchecked',function(){jQuery(this).trigger('uncheck');});jQuery(this).on('ifChanged',function(){jQuery(this).trigger('changed');});}})(jQuery);

var UICharUtils=Base.extend({},{code:{BACKSPACE:8,ENTER:13,ESC:27}});

var UIKeyboardButtons=Base.extend({},{UP:38,DOWN:40,ENTER:13,ESC:27});

var FilterTextField=TextField.extend({_idTimeout:null,_timeout:null,_prevText:null,_clearButton:null,_active:null,_changed:null,_isLengthLimited:null,constructor:function(id,isLengthLimited)
{this.base(id);this._clearButton=$('#'+id+'ClearButton');this._clearButton.hide();this._clearButton.click(handler(this,'resetFilter'));this._active=true;this._changed=false;this._prevText=this.getText();this._timeout=FilterTextField.TIMEOUT;this._isLengthLimited=true;},setIsLengthLimited:function(isLengthLimited)
{this._isLengthLimited=isLengthLimited;},setText:function(text)
{this.base(text);if(text!=""&&!this._defaultTextIsShownParam)
{this._clearButton.show();}
else
{this._clearButton.hide();}},_checkChangeText:function()
{if(this.getText()=="")
{this._clearButton.hide();this.dispatchEvent(FilterTextField.event.CLEAR);}
else
{this._clearButton.show();}
if(this.getText()==this._prevText)
{return;}
this._prevText=this.getText();if(!this._active)
{this._changed=true;return;}
if(this._idTimeout)
{clearTimeout(this._idTimeout);}
this._idTimeout=setTimeout(handler(this,'_onFilter'),this._timeout);},_onChangeText:function(e)
{var string=this._field.val();if(string.length>FilterTextField.MAX_LENGTH&&this._isLengthLimited)
{string=string.substr(0,FilterTextField.MAX_LENGTH);this.setText(string);}
this.base(e);this._checkChangeText();},getText:function()
{return $.trim(this.base());},getPrevText:function()
{return $.trim(this._prevText);},_onFilter:function()
{this._idTimeout=null;this.dispatchEvent(FilterTextField.event.FILTER);this._changed=false;},resetFilter:function()
{if(this._defaultText=="")
{this.setText("");}
else
{this.showDefaultText();}
this._checkChangeText();},activateFilter:function()
{this._active=true;if(this._changed)
{this._onFilter();}},deactivateFilter:function()
{this._active=false;}},{MAX_LENGTH:100,TIMEOUT:500,_filterFields:{},event:{CLEAR:'clear',FILTER:'filter'},initFilterField:function(id)
{var field=new this(id);this._filterFields[id]=field;return field;},getFilterField:function(id)
{return this._filterFields[id];}});$(function(){$("div.filter_field .text_input").attr("autocomplete","off");});
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var o="function"==typeof define&&define.amd,a="undefined"!=typeof module&&module.exports,n="https:"==document.location.protocol?"https:":"http:",i="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";o||(a?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+n+"//"+i+"%3E%3C/script%3E"))),t()}(function(){var t,o="mCustomScrollbar",a="mCS",n=".mCustomScrollbar",i={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},r=0,l={},s=window.attachEvent&&!window.addEventListener?1:0,c=!1,d=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],u={init:function(t){var t=e.extend(!0,{},i,t),o=f.call(this);if(t.live){var s=t.liveSelector||this.selector||n,c=e(s);if("off"===t.live)return void m(s);l[s]=setTimeout(function(){c.mCustomScrollbar(t),"once"===t.live&&c.length&&m(s)},500)}else m(s);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":p(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=g(t.scrollButtons.scrollType),h(t),e(o).each(function(){var o=e(this);if(!o.data(a)){o.data(a,{idx:++r,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:o.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var n=o.data(a),i=n.opt,l=o.data("mcs-axis"),s=o.data("mcs-scrollbar-position"),c=o.data("mcs-theme");l&&(i.axis=l),s&&(i.scrollbarPosition=s),c&&(i.theme=c,h(i)),v.call(this),n&&i.callbacks.onCreate&&"function"==typeof i.callbacks.onCreate&&i.callbacks.onCreate.call(this),e("#mCSB_"+n.idx+"_container img:not(."+d[2]+")").addClass(d[2]),u.update.call(null,o)}})},update:function(t,o){var n=t||f.call(this);return e(n).each(function(){var t=e(this);if(t.data(a)){var n=t.data(a),i=n.opt,r=e("#mCSB_"+n.idx+"_container"),l=e("#mCSB_"+n.idx),s=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];if(!r.length)return;n.tweenRunning&&Q(t),o&&n&&i.callbacks.onBeforeUpdate&&"function"==typeof i.callbacks.onBeforeUpdate&&i.callbacks.onBeforeUpdate.call(this),t.hasClass(d[3])&&t.removeClass(d[3]),t.hasClass(d[4])&&t.removeClass(d[4]),l.css("max-height","none"),l.height()!==t.height()&&l.css("max-height",t.height()),_.call(this),"y"===i.axis||i.advanced.autoExpandHorizontalScroll||r.css("width",x(r)),n.overflowed=y.call(this),M.call(this),i.autoDraggerLength&&S.call(this),b.call(this),T.call(this);var c=[Math.abs(r[0].offsetTop),Math.abs(r[0].offsetLeft)];"x"!==i.axis&&(n.overflowed[0]?s[0].height()>s[0].parent().height()?B.call(this):(G(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),n.contentReset.y=null):(B.call(this),"y"===i.axis?k.call(this):"yx"===i.axis&&n.overflowed[1]&&G(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==i.axis&&(n.overflowed[1]?s[1].width()>s[1].parent().width()?B.call(this):(G(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),n.contentReset.x=null):(B.call(this),"x"===i.axis?k.call(this):"yx"===i.axis&&n.overflowed[0]&&G(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),o&&n&&(2===o&&i.callbacks.onImageLoad&&"function"==typeof i.callbacks.onImageLoad?i.callbacks.onImageLoad.call(this):3===o&&i.callbacks.onSelectorChange&&"function"==typeof i.callbacks.onSelectorChange?i.callbacks.onSelectorChange.call(this):i.callbacks.onUpdate&&"function"==typeof i.callbacks.onUpdate&&i.callbacks.onUpdate.call(this)),N.call(this)}})},scrollTo:function(t,o){if("undefined"!=typeof t&&null!=t){var n=f.call(this);return e(n).each(function(){var n=e(this);if(n.data(a)){var i=n.data(a),r=i.opt,l={trigger:"external",scrollInertia:r.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},s=e.extend(!0,{},l,o),c=Y.call(this,t),d=s.scrollInertia>0&&s.scrollInertia<17?17:s.scrollInertia;c[0]=X.call(this,c[0],"y"),c[1]=X.call(this,c[1],"x"),s.moveDragger&&(c[0]*=i.scrollRatio.y,c[1]*=i.scrollRatio.x),s.dur=ne()?0:d,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==r.axis&&i.overflowed[0]&&(s.dir="y",s.overwrite="all",G(n,c[0].toString(),s)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==r.axis&&i.overflowed[1]&&(s.dir="x",s.overwrite="none",G(n,c[1].toString(),s))},s.timeout)}})}},stop:function(){var t=f.call(this);return e(t).each(function(){var t=e(this);t.data(a)&&Q(t)})},disable:function(t){var o=f.call(this);return e(o).each(function(){var o=e(this);if(o.data(a)){o.data(a);N.call(this,"remove"),k.call(this),t&&B.call(this),M.call(this,!0),o.addClass(d[3])}})},destroy:function(){var t=f.call(this);return e(t).each(function(){var n=e(this);if(n.data(a)){var i=n.data(a),r=i.opt,l=e("#mCSB_"+i.idx),s=e("#mCSB_"+i.idx+"_container"),c=e(".mCSB_"+i.idx+"_scrollbar");r.live&&m(r.liveSelector||e(t).selector),N.call(this,"remove"),k.call(this),B.call(this),n.removeData(a),$(this,"mcs"),c.remove(),s.find("img."+d[2]).removeClass(d[2]),l.replaceWith(s.contents()),n.removeClass(o+" _"+a+"_"+i.idx+" "+d[6]+" "+d[7]+" "+d[5]+" "+d[3]).addClass(d[4])}})}},f=function(){return"object"!=typeof e(this)||e(this).length<1?n:this},h=function(t){var o=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],a=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],n=["minimal","minimal-dark"],i=["minimal","minimal-dark"],r=["minimal","minimal-dark"];t.autoDraggerLength=e.inArray(t.theme,o)>-1?!1:t.autoDraggerLength,t.autoExpandScrollbar=e.inArray(t.theme,a)>-1?!1:t.autoExpandScrollbar,t.scrollButtons.enable=e.inArray(t.theme,n)>-1?!1:t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,i)>-1?!0:t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,r)>-1?"outside":t.scrollbarPosition},m=function(e){l[e]&&(clearTimeout(l[e]),$(l,e))},p=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},g=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},v=function(){var t=e(this),n=t.data(a),i=n.opt,r=i.autoExpandScrollbar?" "+d[1]+"_expand":"",l=["<div id='mCSB_"+n.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_vertical"+r+"'><div class='"+d[12]+"'><div id='mCSB_"+n.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+n.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_horizontal"+r+"'><div class='"+d[12]+"'><div id='mCSB_"+n.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],s="yx"===i.axis?"mCSB_vertical_horizontal":"x"===i.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===i.axis?l[0]+l[1]:"x"===i.axis?l[1]:l[0],u="yx"===i.axis?"<div id='mCSB_"+n.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",f=i.autoHideScrollbar?" "+d[6]:"",h="x"!==i.axis&&"rtl"===n.langDir?" "+d[7]:"";i.setWidth&&t.css("width",i.setWidth),i.setHeight&&t.css("height",i.setHeight),i.setLeft="y"!==i.axis&&"rtl"===n.langDir?"989999px":i.setLeft,t.addClass(o+" _"+a+"_"+n.idx+f+h).wrapInner("<div id='mCSB_"+n.idx+"' class='mCustomScrollBox mCS-"+i.theme+" "+s+"'><div id='mCSB_"+n.idx+"_container' class='mCSB_container' style='position:relative; top:"+i.setTop+"; left:"+i.setLeft+";' dir='"+n.langDir+"' /></div>");var m=e("#mCSB_"+n.idx),p=e("#mCSB_"+n.idx+"_container");"y"===i.axis||i.advanced.autoExpandHorizontalScroll||p.css("width",x(p)),"outside"===i.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),m.addClass("mCSB_outside").after(c)):(m.addClass("mCSB_inside").append(c),p.wrap(u)),w.call(this);var g=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},x=function(t){var o=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],a=t.parent().width();return o[0]>a?o[0]:o[1]>a?o[1]:"100%"},_=function(){var t=e(this),o=t.data(a),n=o.opt,i=e("#mCSB_"+o.idx+"_container");if(n.advanced.autoExpandHorizontalScroll&&"y"!==n.axis){i.css({width:"auto","min-width":0,"overflow-x":"scroll"});var r=Math.ceil(i[0].scrollWidth);3===n.advanced.autoExpandHorizontalScroll||2!==n.advanced.autoExpandHorizontalScroll&&r>i.parent().width()?i.css({width:r,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var t=e(this),o=t.data(a),n=o.opt,i=e(".mCSB_"+o.idx+"_scrollbar:first"),r=oe(n.scrollButtons.tabindex)?"tabindex='"+n.scrollButtons.tabindex+"'":"",l=["<a href='#' class='"+d[13]+"' "+r+" />","<a href='#' class='"+d[14]+"' "+r+" />","<a href='#' class='"+d[15]+"' "+r+" />","<a href='#' class='"+d[16]+"' "+r+" />"],s=["x"===n.axis?l[2]:l[0],"x"===n.axis?l[3]:l[1],l[2],l[3]];n.scrollButtons.enable&&i.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])},S=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],l=[n.height()/i.outerHeight(!1),n.width()/i.outerWidth(!1)],c=[parseInt(r[0].css("min-height")),Math.round(l[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(l[1]*r[1].parent().width())],d=s&&c[1]<c[0]?c[0]:c[1],u=s&&c[3]<c[2]?c[2]:c[3];r[0].css({height:d,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),r[1].css({width:u,"max-width":r[1].parent().width()-10})},b=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],l=[i.outerHeight(!1)-n.height(),i.outerWidth(!1)-n.width()],s=[l[0]/(r[0].parent().height()-r[0].height()),l[1]/(r[1].parent().width()-r[1].width())];o.scrollRatio={y:s[0],x:s[1]}},C=function(e,t,o){var a=o?d[0]+"_expanded":"",n=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(d[0]+" "+a),n.toggleClass(d[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(d[0]),n.removeClass(d[1])):(e.addClass(d[0]),n.addClass(d[1])))},y=function(){var t=e(this),o=t.data(a),n=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=null==o.overflowed?i.height():i.outerHeight(!1),l=null==o.overflowed?i.width():i.outerWidth(!1),s=i[0].scrollHeight,c=i[0].scrollWidth;return s>r&&(r=s),c>l&&(l=c),[r>n.height(),l>n.width()]},B=function(){var t=e(this),o=t.data(a),n=o.opt,i=e("#mCSB_"+o.idx),r=e("#mCSB_"+o.idx+"_container"),l=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")];if(Q(t),("x"!==n.axis&&!o.overflowed[0]||"y"===n.axis&&o.overflowed[0])&&(l[0].add(r).css("top",0),G(t,"_resetY")),"y"!==n.axis&&!o.overflowed[1]||"x"===n.axis&&o.overflowed[1]){var s=dx=0;"rtl"===o.langDir&&(s=i.width()-r.outerWidth(!1),dx=Math.abs(s/o.scrollRatio.x)),r.css("left",s),l[1].css("left",dx),G(t,"_resetX")}},T=function(){function t(){r=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(r),W.call(o[0])):t()},100)}var o=e(this),n=o.data(a),i=n.opt;if(!n.bindEvents){if(I.call(this),i.contentTouchScroll&&D.call(this),E.call(this),i.mouseWheel.enable){var r;t()}P.call(this),U.call(this),i.advanced.autoScrollOnFocus&&H.call(this),i.scrollButtons.enable&&F.call(this),i.keyboard.enable&&q.call(this),n.bindEvents=!0}},k=function(){var t=e(this),o=t.data(a),n=o.opt,i=a+"_"+o.idx,r=".mCSB_"+o.idx+"_scrollbar",l=e("#mCSB_"+o.idx+",#mCSB_"+o.idx+"_container,#mCSB_"+o.idx+"_container_wrapper,"+r+" ."+d[12]+",#mCSB_"+o.idx+"_dragger_vertical,#mCSB_"+o.idx+"_dragger_horizontal,"+r+">a"),s=e("#mCSB_"+o.idx+"_container");n.advanced.releaseDraggableSelectors&&l.add(e(n.advanced.releaseDraggableSelectors)),n.advanced.extraDraggableSelectors&&l.add(e(n.advanced.extraDraggableSelectors)),o.bindEvents&&(e(document).add(e(!A()||top.document)).unbind("."+i),l.each(function(){e(this).unbind("."+i)}),clearTimeout(t[0]._focusTimeout),$(t[0],"_focusTimeout"),clearTimeout(o.sequential.step),$(o.sequential,"step"),clearTimeout(s[0].onCompleteTimeout),$(s[0],"onCompleteTimeout"),o.bindEvents=!1)},M=function(t){var o=e(this),n=o.data(a),i=n.opt,r=e("#mCSB_"+n.idx+"_container_wrapper"),l=r.length?r:e("#mCSB_"+n.idx+"_container"),s=[e("#mCSB_"+n.idx+"_scrollbar_vertical"),e("#mCSB_"+n.idx+"_scrollbar_horizontal")],c=[s[0].find(".mCSB_dragger"),s[1].find(".mCSB_dragger")];"x"!==i.axis&&(n.overflowed[0]&&!t?(s[0].add(c[0]).add(s[0].children("a")).css("display","block"),l.removeClass(d[8]+" "+d[10])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[0].css("display","none"),l.removeClass(d[10])):(s[0].css("display","none"),l.addClass(d[10])),l.addClass(d[8]))),"y"!==i.axis&&(n.overflowed[1]&&!t?(s[1].add(c[1]).add(s[1].children("a")).css("display","block"),l.removeClass(d[9]+" "+d[11])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[1].css("display","none"),l.removeClass(d[11])):(s[1].css("display","none"),l.addClass(d[11])),l.addClass(d[9]))),n.overflowed[0]||n.overflowed[1]?o.removeClass(d[5]):o.addClass(d[5])},O=function(t){var o=t.type,a=t.target.ownerDocument!==document&&null!==frameElement?[e(frameElement).offset().top,e(frameElement).offset().left]:null,n=A()&&t.target.ownerDocument!==top.document&&null!==frameElement?[e(t.view.frameElement).offset().top,e(t.view.frameElement).offset().left]:[0,0];switch(o){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return a?[t.originalEvent.pageY-a[0]+n[0],t.originalEvent.pageX-a[1]+n[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],r=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[i.screenY,i.screenX,r>1]:[i.pageY,i.pageX,r>1];default:return a?[t.pageY-a[0]+n[0],t.pageX-a[1]+n[1],!1]:[t.pageY,t.pageX,!1]}},I=function(){function t(e,t,a,n){if(h[0].idleTimer=d.scrollInertia<233?250:0,o.attr("id")===f[1])var i="x",s=(o[0].offsetLeft-t+n)*l.scrollRatio.x;else var i="y",s=(o[0].offsetTop-e+a)*l.scrollRatio.y;G(r,s.toString(),{dir:i,drag:!0})}var o,n,i,r=e(this),l=r.data(a),d=l.opt,u=a+"_"+l.idx,f=["mCSB_"+l.idx+"_dragger_vertical","mCSB_"+l.idx+"_dragger_horizontal"],h=e("#mCSB_"+l.idx+"_container"),m=e("#"+f[0]+",#"+f[1]),p=d.advanced.releaseDraggableSelectors?m.add(e(d.advanced.releaseDraggableSelectors)):m,g=d.advanced.extraDraggableSelectors?e(!A()||top.document).add(e(d.advanced.extraDraggableSelectors)):e(!A()||top.document);m.bind("contextmenu."+u,function(e){e.preventDefault()}).bind("mousedown."+u+" touchstart."+u+" pointerdown."+u+" MSPointerDown."+u,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),ee(t)){c=!0,s&&(document.onselectstart=function(){return!1}),L.call(h,!1),Q(r),o=e(this);var a=o.offset(),l=O(t)[0]-a.top,u=O(t)[1]-a.left,f=o.height()+a.top,m=o.width()+a.left;f>l&&l>0&&m>u&&u>0&&(n=l,i=u),C(o,"active",d.autoExpandScrollbar)}}).bind("touchmove."+u,function(e){e.stopImmediatePropagation(),e.preventDefault();var a=o.offset(),r=O(e)[0]-a.top,l=O(e)[1]-a.left;t(n,i,r,l)}),e(document).add(g).bind("mousemove."+u+" pointermove."+u+" MSPointerMove."+u,function(e){if(o){var a=o.offset(),r=O(e)[0]-a.top,l=O(e)[1]-a.left;if(n===r&&i===l)return;t(n,i,r,l)}}).add(p).bind("mouseup."+u+" touchend."+u+" pointerup."+u+" MSPointerUp."+u,function(){o&&(C(o,"active",d.autoExpandScrollbar),o=null),c=!1,s&&(document.onselectstart=null),L.call(h,!0)})},D=function(){function o(e){if(!te(e)||c||O(e)[2])return void(t=0);t=1,b=0,C=0,d=1,y.removeClass("mCS_touch_action");var o=I.offset();u=O(e)[0]-o.top,f=O(e)[1]-o.left,z=[O(e)[0],O(e)[1]]}function n(e){if(te(e)&&!c&&!O(e)[2]&&(T.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!C||b)&&d)){g=K();var t=M.offset(),o=O(e)[0]-t.top,a=O(e)[1]-t.left,n="mcsLinearOut";if(E.push(o),W.push(a),z[2]=Math.abs(O(e)[0]-z[0]),z[3]=Math.abs(O(e)[1]-z[1]),B.overflowed[0])var i=D[0].parent().height()-D[0].height(),r=u-o>0&&o-u>-(i*B.scrollRatio.y)&&(2*z[3]<z[2]||"yx"===T.axis);if(B.overflowed[1])var l=D[1].parent().width()-D[1].width(),h=f-a>0&&a-f>-(l*B.scrollRatio.x)&&(2*z[2]<z[3]||"yx"===T.axis);r||h?(U||e.preventDefault(),b=1):(C=1,y.addClass("mCS_touch_action")),U&&e.preventDefault(),w="yx"===T.axis?[u-o,f-a]:"x"===T.axis?[null,f-a]:[u-o,null],I[0].idleTimer=250,B.overflowed[0]&&s(w[0],R,n,"y","all",!0),B.overflowed[1]&&s(w[1],R,n,"x",L,!0)}}function i(e){if(!te(e)||c||O(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),Q(y),p=K();var o=M.offset();h=O(e)[0]-o.top,m=O(e)[1]-o.left,E=[],W=[]}function r(e){if(te(e)&&!c&&!O(e)[2]){d=0,e.stopImmediatePropagation(),b=0,C=0,v=K();var t=M.offset(),o=O(e)[0]-t.top,a=O(e)[1]-t.left;if(!(v-g>30)){_=1e3/(v-p);var n="mcsEaseOut",i=2.5>_,r=i?[E[E.length-2],W[W.length-2]]:[0,0];x=i?[o-r[0],a-r[1]]:[o-h,a-m];var u=[Math.abs(x[0]),Math.abs(x[1])];_=i?[Math.abs(x[0]/4),Math.abs(x[1]/4)]:[_,_];var f=[Math.abs(I[0].offsetTop)-x[0]*l(u[0]/_[0],_[0]),Math.abs(I[0].offsetLeft)-x[1]*l(u[1]/_[1],_[1])];w="yx"===T.axis?[f[0],f[1]]:"x"===T.axis?[null,f[1]]:[f[0],null],S=[4*u[0]+T.scrollInertia,4*u[1]+T.scrollInertia];var y=parseInt(T.contentTouchScroll)||0;w[0]=u[0]>y?w[0]:0,w[1]=u[1]>y?w[1]:0,B.overflowed[0]&&s(w[0],S[0],n,"y",L,!1),B.overflowed[1]&&s(w[1],S[1],n,"x",L,!1)}}}function l(e,t){var o=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?o[0]:o[3]:e>60?t>3?o[3]:o[2]:e>30?t>8?o[1]:t>6?o[0]:t>4?t:o[2]:t>8?t:o[3]}function s(e,t,o,a,n,i){e&&G(y,e.toString(),{dur:t,scrollEasing:o,dir:a,overwrite:n,drag:i})}var d,u,f,h,m,p,g,v,x,_,w,S,b,C,y=e(this),B=y.data(a),T=B.opt,k=a+"_"+B.idx,M=e("#mCSB_"+B.idx),I=e("#mCSB_"+B.idx+"_container"),D=[e("#mCSB_"+B.idx+"_dragger_vertical"),e("#mCSB_"+B.idx+"_dragger_horizontal")],E=[],W=[],R=0,L="yx"===T.axis?"none":"all",z=[],P=I.find("iframe"),H=["touchstart."+k+" pointerdown."+k+" MSPointerDown."+k,"touchmove."+k+" pointermove."+k+" MSPointerMove."+k,"touchend."+k+" pointerup."+k+" MSPointerUp."+k],U=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;I.bind(H[0],function(e){o(e)}).bind(H[1],function(e){n(e)}),M.bind(H[0],function(e){i(e)}).bind(H[2],function(e){r(e)}),P.length&&P.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind(H[0],function(e){o(e),i(e)}).bind(H[1],function(e){n(e)}).bind(H[2],function(e){r(e)})})})},E=function(){function o(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function n(e,t,o){d.type=o&&i?"stepped":"stepless",d.scrollAmount=10,j(r,e,t,"mcsLinearOut",o?60:null)}var i,r=e(this),l=r.data(a),s=l.opt,d=l.sequential,u=a+"_"+l.idx,f=e("#mCSB_"+l.idx+"_container"),h=f.parent();f.bind("mousedown."+u,function(){t||i||(i=1,c=!0)}).add(document).bind("mousemove."+u,function(e){if(!t&&i&&o()){var a=f.offset(),r=O(e)[0]-a.top+f[0].offsetTop,c=O(e)[1]-a.left+f[0].offsetLeft;r>0&&r<h.height()&&c>0&&c<h.width()?d.step&&n("off",null,"stepped"):("x"!==s.axis&&l.overflowed[0]&&(0>r?n("on",38):r>h.height()&&n("on",40)),"y"!==s.axis&&l.overflowed[1]&&(0>c?n("on",37):c>h.width()&&n("on",39)))}}).bind("mouseup."+u+" dragend."+u,function(){t||(i&&(i=0,n("off",null)),c=!1)})},W=function(){function t(t,a){if(Q(o),!z(o,t.target)){var r="auto"!==i.mouseWheel.deltaFactor?parseInt(i.mouseWheel.deltaFactor):s&&t.deltaFactor<100?100:t.deltaFactor||100,d=i.scrollInertia;if("x"===i.axis||"x"===i.mouseWheel.axis)var u="x",f=[Math.round(r*n.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],h="auto"!==i.mouseWheel.scrollAmount?f[1]:f[0]>=l.width()?.9*l.width():f[0],m=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetLeft),p=c[1][0].offsetLeft,g=c[1].parent().width()-c[1].width(),v="y"===i.mouseWheel.axis?t.deltaY||a:t.deltaX;else var u="y",f=[Math.round(r*n.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],h="auto"!==i.mouseWheel.scrollAmount?f[1]:f[0]>=l.height()?.9*l.height():f[0],m=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetTop),p=c[0][0].offsetTop,g=c[0].parent().height()-c[0].height(),v=t.deltaY||a;"y"===u&&!n.overflowed[0]||"x"===u&&!n.overflowed[1]||((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(v=-v),i.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==p||0>v&&p!==g||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<5&&!i.mouseWheel.normalizeDelta&&(h=t.deltaFactor,d=17),G(o,(m-v*h).toString(),{dir:u,dur:d}))}}if(e(this).data(a)){var o=e(this),n=o.data(a),i=n.opt,r=a+"_"+n.idx,l=e("#mCSB_"+n.idx),c=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],d=e("#mCSB_"+n.idx+"_container").find("iframe");d.length&&d.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+r,function(e,o){t(e,o)})})}),l.bind("mousewheel."+r,function(e,o){t(e,o)})}},R=new Object,A=function(t){var o=!1,a=!1,n=null;if(void 0===t?a="#empty":void 0!==e(t).attr("id")&&(a=e(t).attr("id")),a!==!1&&void 0!==R[a])return R[a];if(t){try{var i=t.contentDocument||t.contentWindow.document;n=i.body.innerHTML}catch(r){}o=null!==n}else{try{var i=top.document;n=i.body.innerHTML}catch(r){}o=null!==n}return a!==!1&&(R[a]=o),o},L=function(e){var t=this.find("iframe");if(t.length){var o=e?"auto":"none";t.css("pointer-events",o)}},z=function(t,o){var n=o.nodeName.toLowerCase(),i=t.data(a).opt.mouseWheel.disableOver,r=["select","textarea"];return e.inArray(n,i)>-1&&!(e.inArray(n,r)>-1&&!e(o).is(":focus"))},P=function(){var t,o=e(this),n=o.data(a),i=a+"_"+n.idx,r=e("#mCSB_"+n.idx+"_container"),l=r.parent(),s=e(".mCSB_"+n.idx+"_scrollbar ."+d[12]);s.bind("mousedown."+i+" touchstart."+i+" pointerdown."+i+" MSPointerDown."+i,function(o){c=!0,e(o.target).hasClass("mCSB_dragger")||(t=1)}).bind("touchend."+i+" pointerup."+i+" MSPointerUp."+i,function(){c=!1}).bind("click."+i,function(a){if(t&&(t=0,e(a.target).hasClass(d[12])||e(a.target).hasClass("mCSB_draggerRail"))){Q(o);var i=e(this),s=i.find(".mCSB_dragger");if(i.parent(".mCSB_scrollTools_horizontal").length>0){if(!n.overflowed[1])return;var c="x",u=a.pageX>s.offset().left?-1:1,f=Math.abs(r[0].offsetLeft)-u*(.9*l.width())}else{if(!n.overflowed[0])return;var c="y",u=a.pageY>s.offset().top?-1:1,f=Math.abs(r[0].offsetTop)-u*(.9*l.height())}G(o,f.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},H=function(){var t=e(this),o=t.data(a),n=o.opt,i=a+"_"+o.idx,r=e("#mCSB_"+o.idx+"_container"),l=r.parent();r.bind("focusin."+i,function(){var o=e(document.activeElement),a=r.find(".mCustomScrollBox").length,i=0;o.is(n.advanced.autoScrollOnFocus)&&(Q(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=a?(i+17)*a:0,t[0]._focusTimeout=setTimeout(function(){var e=[ae(o)[0],ae(o)[1]],a=[r[0].offsetTop,r[0].offsetLeft],s=[a[0]+e[0]>=0&&a[0]+e[0]<l.height()-o.outerHeight(!1),a[1]+e[1]>=0&&a[0]+e[1]<l.width()-o.outerWidth(!1)],c="yx"!==n.axis||s[0]||s[1]?"all":"none";"x"===n.axis||s[0]||G(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:i}),"y"===n.axis||s[1]||G(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:i})},t[0]._focusTimer))})},U=function(){var t=e(this),o=t.data(a),n=a+"_"+o.idx,i=e("#mCSB_"+o.idx+"_container").parent();i.bind("scroll."+n,function(){0===i.scrollTop()&&0===i.scrollLeft()||e(".mCSB_"+o.idx+"_scrollbar").css("visibility","hidden")})},F=function(){var t=e(this),o=t.data(a),n=o.opt,i=o.sequential,r=a+"_"+o.idx,l=".mCSB_"+o.idx+"_scrollbar",s=e(l+">a");s.bind("contextmenu."+r,function(e){e.preventDefault()}).bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r+" mouseup."+r+" touchend."+r+" pointerup."+r+" MSPointerUp."+r+" mouseout."+r+" pointerout."+r+" MSPointerOut."+r+" click."+r,function(a){function r(e,o){i.scrollAmount=n.scrollButtons.scrollAmount,j(t,e,o)}if(a.preventDefault(),ee(a)){var l=e(this).attr("class");switch(i.type=n.scrollButtons.scrollType,a.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===i.type)return;c=!0,o.tweenRunning=!1,r("on",l);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===i.type)return;c=!1,i.dir&&r("off",l);break;case"click":if("stepped"!==i.type||o.tweenRunning)return;r("on",l)}}})},q=function(){function t(t){function a(e,t){r.type=i.keyboard.scrollType,r.scrollAmount=i.keyboard.scrollAmount,"stepped"===r.type&&n.tweenRunning||j(o,e,t)}switch(t.type){case"blur":n.tweenRunning&&r.dir&&a("off",null);break;case"keydown":case"keyup":var l=t.keyCode?t.keyCode:t.which,s="on";if("x"!==i.axis&&(38===l||40===l)||"y"!==i.axis&&(37===l||39===l)){if((38===l||40===l)&&!n.overflowed[0]||(37===l||39===l)&&!n.overflowed[1])return;"keyup"===t.type&&(s="off"),e(document.activeElement).is(u)||(t.preventDefault(),t.stopImmediatePropagation(),a(s,l))}else if(33===l||34===l){if((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){Q(o);var f=34===l?-1:1;if("x"===i.axis||"yx"===i.axis&&n.overflowed[1]&&!n.overflowed[0])var h="x",m=Math.abs(c[0].offsetLeft)-f*(.9*d.width());else var h="y",m=Math.abs(c[0].offsetTop)-f*(.9*d.height());G(o,m.toString(),{dir:h,scrollEasing:"mcsEaseInOut"})}}else if((35===l||36===l)&&!e(document.activeElement).is(u)&&((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===i.axis||"yx"===i.axis&&n.overflowed[1]&&!n.overflowed[0])var h="x",m=35===l?Math.abs(d.width()-c.outerWidth(!1)):0;else var h="y",m=35===l?Math.abs(d.height()-c.outerHeight(!1)):0;G(o,m.toString(),{dir:h,scrollEasing:"mcsEaseInOut"})}}}var o=e(this),n=o.data(a),i=n.opt,r=n.sequential,l=a+"_"+n.idx,s=e("#mCSB_"+n.idx),c=e("#mCSB_"+n.idx+"_container"),d=c.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']",f=c.find("iframe"),h=["blur."+l+" keydown."+l+" keyup."+l];f.length&&f.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind(h[0],function(e){t(e)})})}),s.attr("tabindex","0").bind(h[0],function(e){t(e)})},j=function(t,o,n,i,r){function l(e){u.snapAmount&&(f.scrollAmount=u.snapAmount instanceof Array?"x"===f.dir[0]?u.snapAmount[1]:u.snapAmount[0]:u.snapAmount);var o="stepped"!==f.type,a=r?r:e?o?p/1.5:g:1e3/60,n=e?o?7.5:40:2.5,s=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)],d=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],m="x"===f.dir[0]?s[1]+f.dir[1]*(d[1]*n):s[0]+f.dir[1]*(d[0]*n),v="x"===f.dir[0]?s[1]+f.dir[1]*parseInt(f.scrollAmount):s[0]+f.dir[1]*parseInt(f.scrollAmount),x="auto"!==f.scrollAmount?v:m,_=i?i:e?o?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",w=!!e;return e&&17>a&&(x="x"===f.dir[0]?s[1]:s[0]),G(t,x.toString(),{dir:f.dir[0],scrollEasing:_,dur:a,onComplete:w}),e?void(f.dir=!1):(clearTimeout(f.step),void(f.step=setTimeout(function(){l()},a)))}function s(){clearTimeout(f.step),$(f,"step"),Q(t)}var c=t.data(a),u=c.opt,f=c.sequential,h=e("#mCSB_"+c.idx+"_container"),m="stepped"===f.type,p=u.scrollInertia<26?26:u.scrollInertia,g=u.scrollInertia<1?17:u.scrollInertia;switch(o){case"on":if(f.dir=[n===d[16]||n===d[15]||39===n||37===n?"x":"y",n===d[13]||n===d[15]||38===n||37===n?-1:1],Q(t),oe(n)&&"stepped"===f.type)return;l(m);break;case"off":s(),(m||c.tweenRunning&&f.dir)&&l(!0)}},Y=function(t){var o=e(this).data(a).opt,n=[];return"function"==typeof t&&(t=t()),t instanceof Array?n=t.length>1?[t[0],t[1]]:"x"===o.axis?[null,t[0]]:[t[0],null]:(n[0]=t.y?t.y:t.x||"x"===o.axis?null:t,n[1]=t.x?t.x:t.y||"y"===o.axis?null:t),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},X=function(t,o){if(null!=t&&"undefined"!=typeof t){var n=e(this),i=n.data(a),r=i.opt,l=e("#mCSB_"+i.idx+"_container"),s=l.parent(),c=typeof t;o||(o="x"===r.axis?"x":"y");var d="x"===o?l.outerWidth(!1)-s.width():l.outerHeight(!1)-s.height(),f="x"===o?l[0].offsetLeft:l[0].offsetTop,h="x"===o?"left":"top";switch(c){case"function":return t();case"object":var m=t.jquery?t:e(t);if(!m.length)return;return"x"===o?ae(m)[1]:ae(m)[0];case"string":case"number":if(oe(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(d*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(f-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var p=f+parseInt(t.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==t.indexOf("px")&&oe(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(s.height()-l.outerHeight(!1));if("right"===t)return Math.abs(s.width()-l.outerWidth(!1));if("first"===t||"last"===t){var m=l.find(":"+t);return"x"===o?ae(m)[1]:ae(m)[0]}return e(t).length?"x"===o?ae(e(t))[1]:ae(e(t))[0]:(l.css(h,t),void u.update.call(null,n[0]))}}},N=function(t){function o(){return clearTimeout(f[0].autoUpdate),0===l.parents("html").length?void(l=null):void(f[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(s.poll.change.n=i(),s.poll.change.n!==s.poll.change.o)?(s.poll.change.o=s.poll.change.n,void r(3)):c.advanced.updateOnContentResize&&(s.poll.size.n=l[0].scrollHeight+l[0].scrollWidth+f[0].offsetHeight+l[0].offsetHeight+l[0].offsetWidth,s.poll.size.n!==s.poll.size.o)?(s.poll.size.o=s.poll.size.n,void r(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(s.poll.img.n=f.find("img").length,s.poll.img.n===s.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&o()):(s.poll.img.o=s.poll.img.n,void f.find("img").each(function(){n(this)}))},c.advanced.autoUpdateTimeout))}function n(t){function o(e,t){return function(){return t.apply(e,arguments)}}function a(){this.onload=null,e(t).addClass(d[2]),r(2)}if(e(t).hasClass(d[2]))return void r();var n=new Image;n.onload=o(n,a),n.src=t.src}function i(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var e=0,t=f.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function r(e){clearTimeout(f[0].autoUpdate),u.update.call(null,l[0],e)}var l=e(this),s=l.data(a),c=s.opt,f=e("#mCSB_"+s.idx+"_container");return t?(clearTimeout(f[0].autoUpdate),void $(f[0],"autoUpdate")):void o()},V=function(e,t,o){return Math.round(e/t)*t-o},Q=function(t){var o=t.data(a),n=e("#mCSB_"+o.idx+"_container,#mCSB_"+o.idx+"_container_wrapper,#mCSB_"+o.idx+"_dragger_vertical,#mCSB_"+o.idx+"_dragger_horizontal");n.each(function(){Z.call(this)})},G=function(t,o,n){function i(e){return s&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function r(){return[c.callbacks.alwaysTriggerOffsets||w>=S[0]+y,c.callbacks.alwaysTriggerOffsets||-B>=w]}function l(){var e=[h[0].offsetTop,h[0].offsetLeft],o=[x[0].offsetTop,x[0].offsetLeft],a=[h.outerHeight(!1),h.outerWidth(!1)],i=[f.height(),f.width()];t[0].mcs={content:h,top:e[0],left:e[1],draggerTop:o[0],draggerLeft:o[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(a[0])-i[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(a[1])-i[1])),direction:n.dir}}var s=t.data(a),c=s.opt,d={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=e.extend(d,n),u=[n.dur,n.drag?0:n.dur],f=e("#mCSB_"+s.idx),h=e("#mCSB_"+s.idx+"_container"),m=h.parent(),p=c.callbacks.onTotalScrollOffset?Y.call(t,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?Y.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(s.trigger=n.trigger,0===m.scrollTop()&&0===m.scrollLeft()||(e(".mCSB_"+s.idx+"_scrollbar").css("visibility","visible"),m.scrollTop(0).scrollLeft(0)),"_resetY"!==o||s.contentReset.y||(i("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),s.contentReset.y=1),"_resetX"!==o||s.contentReset.x||(i("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),s.contentReset.x=1),"_resetY"!==o&&"_resetX"!==o){if(!s.contentReset.y&&t[0].mcs||!s.overflowed[0]||(i("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),s.contentReset.x=null),!s.contentReset.x&&t[0].mcs||!s.overflowed[1]||(i("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),s.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===n.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;o=V(o,v,c.snapOffset)}switch(n.dir){case"x":var x=e("#mCSB_"+s.idx+"_dragger_horizontal"),_="left",w=h[0].offsetLeft,S=[f.width()-h.outerWidth(!1),x.parent().width()-x.width()],b=[o,0===o?0:o/s.scrollRatio.x],y=p[1],B=g[1],T=y>0?y/s.scrollRatio.x:0,k=B>0?B/s.scrollRatio.x:0;break;case"y":var x=e("#mCSB_"+s.idx+"_dragger_vertical"),_="top",w=h[0].offsetTop,S=[f.height()-h.outerHeight(!1),x.parent().height()-x.height()],b=[o,0===o?0:o/s.scrollRatio.y],y=p[0],B=g[0],T=y>0?y/s.scrollRatio.y:0,k=B>0?B/s.scrollRatio.y:0}b[1]<0||0===b[0]&&0===b[1]?b=[0,0]:b[1]>=S[1]?b=[S[0],S[1]]:b[0]=-b[0],t[0].mcs||(l(),i("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(h[0].onCompleteTimeout),J(x[0],_,Math.round(b[1]),u[1],n.scrollEasing),!s.tweenRunning&&(0===w&&b[0]>=0||w===S[0]&&b[0]<=S[0])||J(h[0],_,Math.round(b[0]),u[0],n.scrollEasing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!s.tweenRunning&&(i("onScrollStart")&&(l(),c.callbacks.onScrollStart.call(t[0])),s.tweenRunning=!0,C(x),s.cbOffsets=r())},onUpdate:function(){n.callbacks&&n.onUpdate&&i("whileScrolling")&&(l(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(n.callbacks&&n.onComplete){"yx"===c.axis&&clearTimeout(h[0].onCompleteTimeout);var e=h[0].idleTimer||0;h[0].onCompleteTimeout=setTimeout(function(){i("onScroll")&&(l(),c.callbacks.onScroll.call(t[0])),i("onTotalScroll")&&b[1]>=S[1]-T&&s.cbOffsets[0]&&(l(),c.callbacks.onTotalScroll.call(t[0])),i("onTotalScrollBack")&&b[1]<=k&&s.cbOffsets[1]&&(l(),c.callbacks.onTotalScrollBack.call(t[0])),s.tweenRunning=!1,h[0].idleTimer=0,C(x,"hide")},e)}}})}},J=function(e,t,o,a,n,i,r){function l(){S.stop||(x||m.call(),x=K()-v,s(),x>=S.time&&(S.time=x>S.time?x+f-(x-S.time):x+f-1,S.time<x+1&&(S.time=x+1)),S.time<a?S.id=h(l):g.call())}function s(){a>0?(S.currVal=u(S.time,_,b,a,n),w[t]=Math.round(S.currVal)+"px"):w[t]=o+"px",p.call()}function c(){f=1e3/60,S.time=x+f,h=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return s(),setTimeout(e,.01)},S.id=h(l)}function d(){null!=S.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(S.id):clearTimeout(S.id),S.id=null)}function u(e,t,o,a,n){switch(n){case"linear":case"mcsLinear":return o*e/a+t;case"mcsLinearOut":return e/=a,e--,o*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=a/2,1>e?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=a/2,1>e?o/2*Math.pow(2,10*(e-1))+t:(e--,o/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=a/2,1>e?o/2*e*e*e+t:(e-=2,o/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=a,e--,-o*(e*e*e*e-1)+t;case"easeOutStrong":return o*(-Math.pow(2,-10*e/a)+1)+t;case"easeOut":case"mcsEaseOut":default:var i=(e/=a)*e,r=i*e;return t+o*(.499999999999997*r*i+-2.5*i*i+5.5*r+-6.5*i+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var f,h,r=r||{},m=r.onStart||function(){},p=r.onUpdate||function(){},g=r.onComplete||function(){},v=K(),x=0,_=e.offsetTop,w=e.style,S=e._mTween[t];"left"===t&&(_=e.offsetLeft);var b=o-_;S.stop=0,"none"!==i&&d(),c()},K=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Z=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],o=0;o<t.length;o++){var a=t[o];e._mTween[a].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[a].id):clearTimeout(e._mTween[a].id),e._mTween[a].id=null,e._mTween[a].stop=1)}},$=function(e,t){try{delete e[t]}catch(o){e[t]=null}},ee=function(e){return!(e.which&&1!==e.which)},te=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},oe=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ae=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},ne=function(){function e(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}var t=e();return t?document[t]:!1};e.fn[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[o].defaults=i,window[o]=!0,e(window).bind("load",function(){e(n)[o](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var o,a,n=e(t),i=n.parents(".mCSB_container");if(i.length)return o=i.parent(),a=[i[0].offsetTop,i[0].offsetLeft],a[0]+ae(n)[0]>=0&&a[0]+ae(n)[0]<o.height()-n.outerHeight(!1)&&a[1]+ae(n)[1]>=0&&a[1]+ae(n)[1]<o.width()-n.outerWidth(!1)},mcsInSight:e.expr[":"].mcsInSight||function(t,o,a){var n,i,r,l,s=e(t),c=s.parents(".mCSB_container"),d="exact"===a[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(c.length)return n=[s.outerHeight(!1),s.outerWidth(!1)],r=[c[0].offsetTop+ae(s)[0],c[0].offsetLeft+ae(s)[1]],i=[c.parent()[0].offsetHeight,c.parent()[0].offsetWidth],l=[n[0]<i[0]?d[0]:d[1],n[1]<i[1]?d[0]:d[1]],r[0]-i[0]*l[0][0]<0&&r[0]+n[0]-i[0]*l[0][1]>=0&&r[1]-i[1]*l[1][0]<0&&r[1]+n[1]-i[1]*l[1][1]>=0},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var o=e(t).data(a);if(o)return o.overflowed[0]||o.overflowed[1]}})})})});

var NoErrorBehavior=BaseErrorBehavior.extend({initialize:function(options)
{this.base();},showError:function(errorMessage)
{},hideError:function()
{},getType:function()
{return ErrorBehaviorType.NO_ERROR}});

var SelectionList=EventDispatcher.extend({id:null,_searchFilter:null,selectedField:null,ulList:null,checkedItems:null,checkedItemsLabels:null,clearCheckedItemsOnRefresh:true,items:null,disableBlock:null,loader:null,requestUrl:null,additionalRequestParams:{},loading:false,_refreshCallback:null,_choices:null,constructor:function(id)
{this.base();this.id=id;this._initTitleFilter(id);var listContainer=$("#"+id);this.ulList=listContainer.find("ul");if(this.ulList.length==0)
{var itemsContainerBlock=listContainer.find(".items_container");var customScrollBarContent=itemsContainerBlock.find(".mCSB_container");if(customScrollBarContent.length==0)
{itemsContainerBlock.append("<ul></ul>");this.ulList=itemsContainerBlock.find("ul");}
else
{customScrollBarContent.append("<ul></ul>");this.ulList=customScrollBarContent.find("ul");}}
this.selectedField=listContainer.find("#"+id+"Selected");this.checkedItems=[];this.checkedItemsLabels={};this.items=[];this.clearRememberedChoices();this.disableBlock=$("#"+id+"DisableBlock");this.loader=new UrlLoader();this.loader.addListener(UrlLoader.event.LOAD_COMPLETE,this,this._onContentLoaded);this.loader.addListener(UrlLoader.event.LOAD_ERROR,this,this._onContentLoadError);this._unblockItemCLicks();},disable:function()
{this.disableBlock.show();},enable:function()
{this.disableBlock.hide();},setRequestUrl:function(url)
{this.requestUrl=url;},setAdditionalRequestParams:function(params)
{this.additionalRequestParams=params;},getAdditionalRequestParams:function()
{return this.additionalRequestParams;},clearFilter:function()
{if(this._searchFilter)
{this._searchFilter.clear();}},setFilterText:function(val)
{if(!this._searchFilter)
{return;}
this._searchFilter.setValue(val);},setDefaultText:function(value)
{this._searchFilter.setPlaceholderValue(value);},checkItem:function(itemValue,isCheck)
{isCheck=(!_.isUndefined(isCheck))?isCheck:true;itemValue=parseInt(itemValue);var item=this.ulList.find(".checkbox[value='"+itemValue+"']:first");if(item.length)
{if(isCheck)
{item.setChecked(true);if(!_.contains(this.checkedItems,itemValue))
{this.checkedItems.push(itemValue);this.checkedItemsLabels[itemValue]=this.getLabelText(itemValue);}}
else
{item.setChecked(false);if(_.contains(this.checkedItems,itemValue))
{var checkedItemIdx=_.indexOf(this.checkedItems,itemValue);delete this.checkedItems[checkedItemIdx];delete this.checkedItemsLabels[itemValue];}}}},uncheckItem:function(itemValue)
{this.checkItem(itemValue,false);},hideItem:function(itemValue)
{var item=this.ulList.find(".checkbox[value='"+itemValue+"']:first");item.parent().hide();},showItem:function(itemValue)
{var item=this.ulList.find(".checkbox[value='"+itemValue+"']:first");item.parent().show();},setCheckedItems:function(checkedItems)
{if(checkedItems.length==1&&!checkedItems[0])
{checkedItems=[];}
var currentCheckedItems=this.checkedItems.slice();for(var iItem=0;iItem<currentCheckedItems.length;++iItem)
{this.uncheckItem(currentCheckedItems[iItem]);}
this.checkedItems=[];this.checkedItemsLabels={};for(var i in checkedItems)
{var itemValue=""+checkedItems[i];this.checkItem(itemValue);}
this.refreshSelectedField();},getCheckedItems:function()
{this.checkedItems=_.union(this._getHiddenChoices(),this.checkedItems);return this.checkedItems;},getCheckedItemsLabels:function()
{return this.checkedItemsLabels;},onFilterChanged:function()
{this._searchFilter.showLoading();this.refresh();},refresh:function(callback)
{this.loader.abort();this.loading=true;this._refreshCallback=callback;this._saveChoice();if(this.clearCheckedItemsOnRefresh)
{this.deselectAll();}
var params={};$.extend(params,this.getAdditionalRequestParams());this.setRequestParams(params);this.ulList.empty();this._blockItemCLicks();this.showLoadIndicator();this.loader.loadJson(this.requestUrl,params);},refreshSelectedField:function()
{this.selectedField.html(""+this.getCheckedItems().length);},isLoading:function()
{return this.loading;},renderSelectionList:function(response)
{this.ulList.empty();this.refreshContent(response);this.refreshSelectedField();},refreshContent:function(response)
{},getCheckboxId:function(itemId)
{return this.id+"chk"+itemId;},getLabelText:function(itemId)
{var checkboxId=this.getCheckboxId(itemId);var label=this.ulList.find("label[for='"+checkboxId+"']");return label.html();},appendItem:function(itemId,itemContent,isChecked,isDisabled)
{itemId=parseInt(itemId);isChecked=isChecked||(_.contains(this.checkedItems,itemId));itemContent=itemContent||'';var chkId=this.getCheckboxId(itemId);var escapedItemContent=UIStringUtils.encodeDoubleQuotes(itemContent.escapeHTML());var itemLi=$('<li class="mouse_states"><input type="checkbox" class="checkbox" id="'+chkId+'" value="'+itemId+'" '+(isChecked?"checked":"")+' />'+'<label for="'+chkId+'" title="'+escapedItemContent+'">'+escapedItemContent+"</label>"+'</li>');var checkbox=itemLi.find("input[type=checkbox]");if(isChecked)
{this.onItemSelectionChanged(checkbox);this.checkedItemsLabels[itemId]=itemContent;}
this.ulList.append(itemLi);if(isDisabled)
{this.hideItem(itemId);}
if(!_.contains(this.items,itemId))
{this.items.push(itemId);}
var thisPtr=this;checkbox.change(function(){thisPtr.onItemSelectionChanged($(this));});return itemLi;},removeItem:function(itemValue)
{itemValue=parseInt(itemValue);var itemLi=this.ulList.find(".checkbox[value='"+itemValue+"']").parent();var checkbox=itemLi.find("input[type=checkbox]:first");var isChecked=_.contains(this.checkedItems,itemValue);if(isChecked)
{checkbox.setChecked(false);this.onItemSelectionChanged(checkbox);}
if(_.contains(this.items,itemValue))
{delete this.items[_.indexOf(this.items,itemValue)];}
checkbox.unbind('check').unbind('uncheck');itemLi.remove();},getItemCheckboxValue:function(itemCheckbox)
{return itemCheckbox.val();},setCheckedValue:function(itemValue,checked)
{itemValue=parseInt(itemValue);var itemIndex=_.indexOf(this.checkedItems,itemValue);if(checked&&itemIndex==-1)
{this.checkedItems.push(itemValue);this.checkedItemsLabels[itemValue]=this.getLabelText(itemValue);}
else if(!checked&&itemIndex>-1)
{this.checkedItems.splice(itemIndex,1);delete this.checkedItemsLabels[itemValue];}},onItemSelectionChanged:function(itemCheckbox)
{var checked=itemCheckbox.prop("checked");var itemValue=this.getItemCheckboxValue(itemCheckbox);this.setCheckedValue(itemValue,checked);this.refreshSelectedField();this.dispatchEvent(SelectionList.event.ITEM_SELECTION_CHANGED);},setRequestParams:function(params)
{},showLoadIndicator:function()
{$("#"+this.id).find("img.load_progress").show();},hideLoadIndicator:function()
{$("#"+this.id).find("img.load_progress").hide();},initListItems:function()
{this.forEachCheckbox(this.decorateCheckbox);this.ulList.find("li").each(function(){var checkbox=$(this).find('.checkbox');$(this).click(function(){checkbox.setChecked(!checkbox.is(":checked"));});});},forEachCheckbox:function(fn)
{var thisPtr=this;$(document).ready(function(){$("#"+thisPtr.id+" input[type='checkbox']").each(function(){var checkbox=$(this);fn.call(thisPtr,checkbox);});});},decorateCheckbox:function(checkbox)
{this._decorateWithPlugin(checkbox);this.bindCheckboxHandlers(checkbox);},bindCheckboxesHandlers:function()
{this.forEachCheckbox(this.bindCheckboxHandlers);},bindCheckboxHandlers:function(checkbox)
{if(checkbox[0].decorated)
{return;}
var thisPtr=this;checkbox.bind("check",function(){thisPtr.onItemSelectionChanged($(this));});checkbox.bind("uncheck",function(){thisPtr.onItemSelectionChanged($(this));});checkbox[0].decorated=true;},clear:function()
{this.ulList.empty();this.checkedItems=[];this.checkedItemsLabels={};this.items=[];this.clearFilter();},deselectAll:function()
{var checkedItems=[];this.checkedItemsLabels={};this.setCheckedItems(checkedItems);this.items=[];},getClearCheckedItemsOnRefresh:function()
{return this.clearCheckedItemsOnRefresh;},setClearCheckedItemsOnRefresh:function(clear)
{this.clearCheckedItemsOnRefresh=clear;},init:function()
{if(this.ulList.find("li").length==0)
{var selectionListData=$.trim($('#'+this.id+"InitialData").val());if(selectionListData)
{this.renderSelectionList($.parseJSON(selectionListData));this.bindCheckboxesHandlers();}
else
{this.refresh();}}
else
{this.initItemHandlers();}},terminate:function()
{this.forEachCheckbox(this._unbindCheckboxHandlers);this.ulList.empty();this._searchFilter.terminate();},_unbindCheckboxHandlers:function(checkbox)
{checkbox.off();},_initTitleFilter:function(baseId)
{var id=baseId+"searchFormField";this._searchFilter=FormFieldStorage.createFormFieldById(id);this._searchFilter.addListener(SearchFormField.event.FILTER_CHANGED,this,this.onFilterChanged);},initItemHandlers:function()
{var thisPtr=this;this.ulList.find("li").each(function(){thisPtr.initItemHandler($(this));});},initItemHandler:function(itemLi)
{var itemId=itemLi.attr("id");var label=itemLi.find("label");var checkbox=itemLi.find("input[type=checkbox]");if(checkbox.is(":checked"))
{this.onItemSelectionChanged(checkbox);this.checkedItemsLabels[itemId]=label.val();}
if(checkbox.is(":disabled"))
{this.hideItem(itemId);}
var checkboxVal=parseInt(checkbox.val());if(!_.contains(this.items,checkboxVal))
{this.items.push(checkboxVal);}
this._decorateWithPlugin(checkbox);this.bindCheckboxHandlers(checkbox);},getVisibleItems:function()
{return this.items;},clearRememberedChoices:function()
{this._choices=[];},_getHiddenChoices:function()
{return _.difference(this._choices,this.getVisibleItems());},_saveChoice:function()
{this._choices=_.union(this._getHiddenChoices(),this.getCheckedItems());},_loadChoice:function()
{if(this._choices.length)
{this.setCheckedItems(this._choices);}},_decorateWithPlugin:function(checkbox)
{checkbox.checkbox();},_onContentLoaded:function(response)
{this.hideLoadIndicator();this._searchFilter.hideLoading();this.renderSelectionList(response);this.initListItems();this._applyRefreshCallback();this._unblockItemCLicks();this.loading=false;this._loadChoice();this.dispatchEvent(SelectionList.event.CONTENT_LOADED);},_applyRefreshCallback:function()
{if(this._refreshCallback)
{this._refreshCallback();this._refreshCallback=null;}
this.dispatchEvent(SelectionList.event.REFRESHED);},_onContentLoadError:function()
{this.dispatchEvent(SelectionList.event.LOAD_ERROR);},_blockItemCLicks:function()
{$("#"+this.id).find(".load_progress_content").show();},_unblockItemCLicks:function()
{$("#"+this.id).find(".load_progress_content").hide();}},{event:{CONTENT_LOADED:'contentLoaded',LOAD_ERROR:'loadError',ITEM_SELECTION_CHANGED:'itemSelectionChanged',REFRESHED:'refreshed'},lists:{},initSelectionList:function(id,requestUrl,listClass)
{if(!listClass)
{listClass=this;}
var list=new listClass(id);list.setRequestUrl(requestUrl);this.lists[id]=list;return list;},getSelectionList:function(id)
{return this.lists[id];},prepareSelectionListByContext:function(id)
{var requestUrl=$("#"+id+"SelectionListRequestUrl").val();var listClass=window[$("#"+id+"SelectionListClass").val()];SelectionList.initSelectionList(id,requestUrl,listClass);}});

var KeyboardNavigatedList=EventDispatcher.extend({_keypressEventDispatcher:null,_focusableObject:null,_list:null,_listItems:null,_listItemsCount:0,_onFocusableObjectLooseFocusHandler:null,constructor:function(focusableObject)
{var documentObject=$(document);this._keypressEventDispatcher=documentObject;if(focusableObject)
{this._focusableObject=focusableObject;this._onFocusableObjectLooseFocusHandler=handler(this,'_onFocusableObjectLooseFocus');documentObject.on("click",this._onFocusableObjectLooseFocusHandler);}},initListItems:function(navigatedList)
{this._list=navigatedList;this._listItems=this._list.find(KeyboardNavigatedList.SELECTOR.LIST_ITEM);this._listItemsCount=this._listItems.length;this.deactivate();this._initHandlers();this._selectElementByIndex(0);},deactivate:function()
{if(this._listItems)
{this._listItems.each(function()
{$(this).off('hover');$(this).off('click');});this._keypressEventDispatcher.off('keydown');}},terminate:function()
{this.deactivate();$(document).off("click",this._onFocusableObjectLooseFocusHandler);},_onFocusableObjectLooseFocus:function(event)
{var targetObject=$(event.target);if(!targetObject.is(this._focusableObject))
{this.dispatchEvent(KeyboardNavigatedList.FOCUSABLE_OBJECT_BLUR);}},_initHandlers:function()
{var that=this;this._listItems.each(function(){$(this).on('click',function(event){that._onListItemClick(event);});$(this).hover(function(event){that._onListItemHover(event);},function(event){that._onListItemHoverOver(event);});});this._keypressEventDispatcher.on('keydown',handler(this,'_onElementKeydown'));},_onElementKeydown:function(event)
{switch(event.keyCode)
{case UIKeyboardButtons.UP:this._navigate(KeyboardNavigatedList.DIRECTION.UP);break;case UIKeyboardButtons.DOWN:this._navigate(KeyboardNavigatedList.DIRECTION.DOWN);break;case UIKeyboardButtons.ENTER:var selectedElement=this._list.find('.'+KeyboardNavigatedList.SELECTOR.HOVERED);this.dispatchEvent(KeyboardNavigatedList.SELECTION_DONE_EVENT,selectedElement);break;}},_navigate:function(direction)
{var selectedItem=this._list.find('.'+KeyboardNavigatedList.SELECTOR.HOVERED);if(selectedItem.length==0)
{this._selectElementByIndex(0);}
else
{var selectedItemIndex=this._list.find(KeyboardNavigatedList.SELECTOR.LIST_ITEM).index(selectedItem);var newSelectedItemIndex=this._calculateNewSelectedItemIndex(selectedItemIndex,direction);this._selectElementByIndex(newSelectedItemIndex);}},_calculateNewSelectedItemIndex:function(selectedItemIndex,direction)
{var newSelectedItemId=selectedItemIndex;var lastElementIndex=(this._listItemsCount-1);if(direction==KeyboardNavigatedList.DIRECTION.UP)
{if(selectedItemIndex>0)
{newSelectedItemId-=1;}
else
{newSelectedItemId=lastElementIndex;}}
else
{if(selectedItemIndex<lastElementIndex)
{newSelectedItemId+=1;}
else
{newSelectedItemId=0;}}
return newSelectedItemId;},_selectElementByIndex:function(elementIndex)
{this._list.find(KeyboardNavigatedList.SELECTOR.LIST_ITEM).removeClass(KeyboardNavigatedList.SELECTOR.HOVERED);var selectedElement=this._list.find(KeyboardNavigatedList.SELECTOR.LIST_ITEM).get(elementIndex);if(selectedElement)
{$(selectedElement).addClass(KeyboardNavigatedList.SELECTOR.HOVERED);}},_onListItemHover:function(event)
{this._listItems.removeClass(KeyboardNavigatedList.SELECTOR.HOVERED);var element=$(event.currentTarget);element.addClass(KeyboardNavigatedList.SELECTOR.HOVERED);},_onListItemHoverOver:function(event)
{var element=$(event.currentTarget);element.removeClass(KeyboardNavigatedList.SELECTOR.HOVERED);},_onListItemClick:function(event)
{var element=$(event.currentTarget);this.dispatchEvent(KeyboardNavigatedList.SELECTION_DONE_EVENT,element);}},{DIRECTION:{UP:'up',DOWN:'down'},SELECTOR:{HOVERED:'hovered',LIST_ITEM:'li'},SELECTION_DONE_EVENT:'selection_done',FOCUSABLE_OBJECT_BLUR:'focusable_object_blur'});
;(function($){var SelectBox=this.SelectBox=function(select,options){if(select instanceof jQuery){if(select.length>0){select=select[0];}else{return;}}
this.typeTimer=null;this.typeSearch='';this.isMac=navigator.platform.match(/mac/i);options='object'===typeof options?options:{};this.selectElement=select;if(!options.mobile&&navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i)){return false;}
if('select'!==select.tagName.toLowerCase()){return false;}
this.init(options);}
SelectBox.prototype.version='1.2.0';SelectBox.prototype.init=function(options){var select=$(this.selectElement);if(select.data('selectBox-control')){return false;}
var control=$('<a class="selectBox" />'),inline=select.attr('multiple')||parseInt(select.attr('size'))>1,settings=options||{},tabIndex=parseInt(select.prop('tabindex'))||0,self=this;control.addClass(select.attr('class')).attr('title',select.attr('title')||'').attr('tabindex',tabIndex).css('display','inline-block').bind('focus.selectBox',function(){if(this!==document.activeElement&&document.body!==document.activeElement){$(document.activeElement).blur();}
if(control.hasClass('selectBox-active')){return;}
control.addClass('selectBox-active');select.trigger('focus');}).bind('blur.selectBox',function(){if(!control.hasClass('selectBox-active')){return;}
control.removeClass('selectBox-active');select.trigger('blur');});if(!$(window).data('selectBox-bindings')){$(window).data('selectBox-bindings',true).bind('scroll.selectBox',(settings.hideOnWindowScroll)?this.hideMenus:$.noop);}
if(select.attr('disabled')){control.addClass('selectBox-disabled');}
select.bind('click.selectBox',function(event){control.focus();event.preventDefault();});if(inline){options=this.getOptions('inline');control.append(options).data('selectBox-options',options).addClass('selectBox-inline selectBox-menuShowing').bind('keydown.selectBox',function(event){self.handleKeyDown(event);}).bind('keypress.selectBox',function(event){self.handleKeyPress(event);}).bind('mousedown.selectBox',function(event){if(1!==event.which){return;}
if($(event.target).is('A.selectBox-inline')){event.preventDefault();}
if(!control.hasClass('selectBox-focus')){control.focus();}}).insertAfter(select);if(!select[0].style.height){var size=select.attr('size')?parseInt(select.attr('size')):5;var tmp=control.clone().removeAttr('id').css({position:'absolute',top:'-9999em'}).show().appendTo('body');tmp.find('.selectBox-options').html('<li><a>\u00A0</a></li>');var optionHeight=parseInt(tmp.find('.selectBox-options A:first').html('&nbsp;').outerHeight());tmp.remove();control.height(optionHeight*size);}
this.disableSelection(control);}else{var label=$('<span class="selectBox-label" />'),arrow=$('<span class="selectBox-arrow" />');label.attr('class',this.getLabelClass()).text(this.getLabelText());options=this.getOptions('dropdown');options.appendTo('BODY');control.data('selectBox-options',options).addClass('selectBox-dropdown').append(label).append(arrow).bind('mousedown.selectBox',function(event){if(1===event.which){if(control.hasClass('selectBox-menuShowing')){self.hideMenus();}else{event.stopPropagation();options.data('selectBox-down-at-x',event.screenX).data('selectBox-down-at-y',event.screenY);self.showMenu();}}}).bind('keydown.selectBox',function(event){self.handleKeyDown(event);}).bind('keypress.selectBox',function(event){self.handleKeyPress(event);}).bind('open.selectBox',function(event,triggerData){if(triggerData&&triggerData._selectBox===true){return;}
self.showMenu();}).bind('close.selectBox',function(event,triggerData){if(triggerData&&triggerData._selectBox===true){return;}
self.hideMenus();}).insertAfter(select);this.disableSelection(control);}
select.addClass('selectBox').data('selectBox-control',control).data('selectBox-settings',settings).hide();};SelectBox.prototype.getOptions=function(type){var options;var select=$(this.selectElement);var self=this;var _getOptions=function(select,options){select.children('OPTION, OPTGROUP').each(function(){if($(this).is('OPTION')){if($(this).length>0){self.generateOptions($(this),options);}else{options.append('<li>\u00A0</li>');}}else{var optgroup=$('<li class="selectBox-optgroup" />');optgroup.text($(this).attr('label'));options.append(optgroup);options=_getOptions($(this),options);}});return options;};switch(type){case'inline':options=$('<ul class="selectBox-options" />');options=_getOptions(select,options);options.find('A').bind('mouseover.selectBox',function(event){self.addHover($(this).parent());}).bind('mouseout.selectBox',function(event){self.removeHover($(this).parent());}).bind('mousedown.selectBox',function(event){if(1!==event.which){return}
event.preventDefault();if(!select.selectBox('control').hasClass('selectBox-active')){select.selectBox('control').focus();}}).bind('mouseup.selectBox',function(event){if(1!==event.which){return;}
self.hideMenus();self.selectOption($(this).parent(),event);});this.disableSelection(options);return options;case'dropdown':options=$('<ul class="selectBox-dropdown-menu selectBox-options" />');options=_getOptions(select,options);options.data('selectBox-select',select).css('display','none').appendTo('BODY').find('A').bind('mousedown.selectBox',function(event){if(event.which===1){event.preventDefault();if(event.screenX===options.data('selectBox-down-at-x')&&event.screenY===options.data('selectBox-down-at-y')){options.removeData('selectBox-down-at-x').removeData('selectBox-down-at-y');self.hideMenus();}}}).bind('mouseup.selectBox',function(event){if(1!==event.which){return;}
if(event.screenX===options.data('selectBox-down-at-x')&&event.screenY===options.data('selectBox-down-at-y')){return;}else{options.removeData('selectBox-down-at-x').removeData('selectBox-down-at-y');}
self.selectOption($(this).parent());self.hideMenus();}).bind('mouseover.selectBox',function(event){self.addHover($(this).parent());}).bind('mouseout.selectBox',function(event){self.removeHover($(this).parent());});var classes=select.attr('class')||'';if(''!==classes){classes=classes.split(' ');for(var i=0;i<classes.length;i++){options.addClass(classes[i]+'-selectBox-dropdown-menu');}}
this.disableSelection(options);return options;}};SelectBox.prototype.getLabelClass=function(){var selected=$(this.selectElement).find('OPTION:selected');return('selectBox-label '+(selected.attr('class')||'')).replace(/\s+$/,'');};SelectBox.prototype.getLabelText=function(){var selected=$(this.selectElement).find('OPTION:selected');return selected.text()||'\u00A0';};SelectBox.prototype.setLabel=function(){var select=$(this.selectElement);var control=select.data('selectBox-control');if(!control){return;}
control.find('.selectBox-label').attr('class',this.getLabelClass()).text(this.getLabelText());};SelectBox.prototype.destroy=function(){var select=$(this.selectElement);var control=select.data('selectBox-control');if(!control){return;}
var options=control.data('selectBox-options');options.remove();control.remove();select.removeClass('selectBox').removeData('selectBox-control').data('selectBox-control',null).removeData('selectBox-settings').data('selectBox-settings',null).show();};SelectBox.prototype.refresh=function(){var select=$(this.selectElement),control=select.data('selectBox-control'),type=control.hasClass('selectBox-dropdown')?'dropdown':'inline',options;control.data('selectBox-options').remove();options=this.getOptions(type);control.data('selectBox-options',options);switch(type){case'inline':control.append(options);break;case'dropdown':this.setLabel();$("BODY").append(options);break;}
if('dropdown'===type&&control.hasClass('selectBox-menuShowing')){this.showMenu();}};SelectBox.prototype.showMenu=function(){var self=this,select=$(this.selectElement),control=select.data('selectBox-control'),settings=select.data('selectBox-settings'),options=control.data('selectBox-options');if(control.hasClass('selectBox-disabled')){return false;}
this.hideMenus();var borderBottomWidth=parseInt(control.css('borderBottomWidth'))||0;var borderTopWidth=parseInt(control.css('borderTopWidth'))||0;function getHiddenObjectHeight(object)
{var left=object.css('left');object.css('left',9999);object.show();var height=object.outerHeight();object.hide();object.css('left',left);return height;}
var pos=control.offset(),topPositionCorrelation=(settings.topPositionCorrelation)?settings.topPositionCorrelation:0,bottomPositionCorrelation=(settings.bottomPositionCorrelation)?settings.bottomPositionCorrelation:0,optionsHeight=options.outerHeight()?options.outerHeight():getHiddenObjectHeight(options),controlHeight=control.outerHeight(),maxHeight=parseInt(options.css('max-height')),scrollPos=$(window).scrollTop(),heightToTop=pos.top-scrollPos,heightToBottom=$(window).height()-(heightToTop+controlHeight),posTop=(heightToTop>heightToBottom)&&(settings.keepInViewport==null?true:settings.keepInViewport),top=posTop?pos.top-optionsHeight+borderTopWidth+topPositionCorrelation:pos.top+controlHeight-borderBottomWidth-bottomPositionCorrelation;if(heightToTop<maxHeight&&heightToBottom<maxHeight){if(posTop){var maxHeightDiff=maxHeight-(heightToTop-5);options.css({'max-height':maxHeight-maxHeightDiff+'px'});top=top+maxHeightDiff;}else{var maxHeightDiff=maxHeight-(heightToBottom-5);options.css({'max-height':maxHeight-maxHeightDiff+'px'});}}
options.data('posTop',posTop);options.width(control.innerWidth()).css({top:top,left:control.offset().left}).addClass('selectBox-options selectBox-options-'+(posTop?'top':'bottom'));if(select.triggerHandler('beforeopen')){return false;}
var dispatchOpenEvent=function(){select.triggerHandler('open',{_selectBox:true});};switch(settings.menuTransition){case'fade':options.fadeIn(settings.menuSpeed,dispatchOpenEvent);break;case'slide':options.slideDown(settings.menuSpeed,dispatchOpenEvent);break;default:options.show(settings.menuSpeed,dispatchOpenEvent);break;}
if(!settings.menuSpeed){dispatchOpenEvent();}
var li=options.find('.selectBox-selected:first');this.keepOptionInView(li,true);this.addHover(li);control.addClass('selectBox-menuShowing selectBox-menuShowing-'+(posTop?'top':'bottom'));$(document).bind('mousedown.selectBox',function(event){if(1===event.which){if($(event.target).parents().andSelf().hasClass('selectBox-options')){return;}
self.hideMenus();}});};SelectBox.prototype.hideMenus=function(){if($(".selectBox-dropdown-menu:visible").length===0){return;}
$(document).unbind('mousedown.selectBox');$(".selectBox-dropdown-menu").each(function(){var options=$(this),select=options.data('selectBox-select'),control=select.data('selectBox-control'),settings=select.data('selectBox-settings'),posTop=options.data('posTop');if(select.triggerHandler('beforeclose')){return false;}
var dispatchCloseEvent=function(){select.triggerHandler('close',{_selectBox:true});};if(settings){switch(settings.menuTransition){case'fade':options.fadeOut(settings.menuSpeed,dispatchCloseEvent);break;case'slide':options.slideUp(settings.menuSpeed,dispatchCloseEvent);break;default:options.hide(settings.menuSpeed,dispatchCloseEvent);break;}
if(!settings.menuSpeed){dispatchCloseEvent();}
control.removeClass('selectBox-menuShowing selectBox-menuShowing-'+(posTop?'top':'bottom'));}else{$(this).hide();$(this).triggerHandler('close',{_selectBox:true});$(this).removeClass('selectBox-menuShowing selectBox-menuShowing-'+(posTop?'top':'bottom'));}
options.css('max-height','');options.removeClass('selectBox-options-'+(posTop?'top':'bottom'));options.data('posTop',false);});};SelectBox.prototype.selectOption=function(li,event){var select=$(this.selectElement);li=$(li);var control=select.data('selectBox-control'),settings=select.data('selectBox-settings');if(control.hasClass('selectBox-disabled')){return false;}
if(0===li.length||li.hasClass('selectBox-disabled')){return false;}
if(select.attr('multiple')){if(event.shiftKey&&control.data('selectBox-last-selected')){li.toggleClass('selectBox-selected');var affectedOptions;if(li.index()>control.data('selectBox-last-selected').index()){affectedOptions=li.siblings().slice(control.data('selectBox-last-selected').index(),li.index());}else{affectedOptions=li.siblings().slice(li.index(),control.data('selectBox-last-selected').index());}
affectedOptions=affectedOptions.not('.selectBox-optgroup, .selectBox-disabled');if(li.hasClass('selectBox-selected')){affectedOptions.addClass('selectBox-selected');}else{affectedOptions.removeClass('selectBox-selected');}}else if((this.isMac&&event.metaKey)||(!this.isMac&&event.ctrlKey)){li.toggleClass('selectBox-selected');}else{li.siblings().removeClass('selectBox-selected');li.addClass('selectBox-selected');}}else{li.siblings().removeClass('selectBox-selected');li.addClass('selectBox-selected');}
if(control.hasClass('selectBox-dropdown')){control.find('.selectBox-label').text(li.text());}
var i=0,selection=[];if(select.attr('multiple')){control.find('.selectBox-selected A').each(function(){selection[i++]=$(this).attr('rel');});}else{selection=li.find('A').attr('rel');}
control.data('selectBox-last-selected',li);if(select.val()!==selection){select.val(selection);this.setLabel();select.trigger('change');}
return true;};SelectBox.prototype.addHover=function(li){li=$(li);var select=$(this.selectElement),control=select.data('selectBox-control'),options=control.data('selectBox-options');options.find('.selectBox-hover').removeClass('selectBox-hover');li.addClass('selectBox-hover');};SelectBox.prototype.getSelectElement=function(){return this.selectElement;};SelectBox.prototype.removeHover=function(li){li=$(li);var select=$(this.selectElement),control=select.data('selectBox-control'),options=control.data('selectBox-options');options.find('.selectBox-hover').removeClass('selectBox-hover');};SelectBox.prototype.keepOptionInView=function(li,center){if(!li||li.length===0){return;}
var select=$(this.selectElement),control=select.data('selectBox-control'),options=control.data('selectBox-options'),scrollBox=control.hasClass('selectBox-dropdown')?options:options.parent(),top=parseInt(li.offset().top-scrollBox.position().top),bottom=parseInt(top+li.outerHeight());if(center){scrollBox.scrollTop(li.offset().top-scrollBox.offset().top+scrollBox.scrollTop()-
(scrollBox.height()/2));}else{if(top<0){scrollBox.scrollTop(li.offset().top-scrollBox.offset().top+scrollBox.scrollTop());}
if(bottom>scrollBox.height()){scrollBox.scrollTop((li.offset().top+li.outerHeight())-scrollBox.offset().top+
scrollBox.scrollTop()-scrollBox.height());}}};SelectBox.prototype.handleKeyDown=function(event){var select=$(this.selectElement),control=select.data('selectBox-control'),options=control.data('selectBox-options'),settings=select.data('selectBox-settings'),totalOptions=0,i=0;if(control.hasClass('selectBox-disabled')){return;}
switch(event.keyCode){case 8:event.preventDefault();this.typeSearch='';break;case 9:case 27:this.hideMenus();this.removeHover();break;case 13:if(control.hasClass('selectBox-menuShowing')){this.selectOption(options.find('LI.selectBox-hover:first'),event);if(control.hasClass('selectBox-dropdown')){this.hideMenus();}}else{this.showMenu();}
break;case 38:case 37:event.preventDefault();if(control.hasClass('selectBox-menuShowing')){var prev=options.find('.selectBox-hover').prev('LI');totalOptions=options.find('LI:not(.selectBox-optgroup)').length;i=0;while(prev.length===0||prev.hasClass('selectBox-disabled')||prev.hasClass('selectBox-optgroup')){prev=prev.prev('LI');if(prev.length===0){if(settings.loopOptions){prev=options.find('LI:last');}else{prev=options.find('LI:first');}}
if(++i>=totalOptions){break;}}
this.addHover(prev);this.selectOption(prev,event);this.keepOptionInView(prev);}else{this.showMenu();}
break;case 40:case 39:event.preventDefault();if(control.hasClass('selectBox-menuShowing')){var next=options.find('.selectBox-hover').next('LI');totalOptions=options.find('LI:not(.selectBox-optgroup)').length;i=0;while(0===next.length||next.hasClass('selectBox-disabled')||next.hasClass('selectBox-optgroup')){next=next.next('LI');if(next.length===0){if(settings.loopOptions){next=options.find('LI:first');}else{next=options.find('LI:last');}}
if(++i>=totalOptions){break;}}
this.addHover(next);this.selectOption(next,event);this.keepOptionInView(next);}else{this.showMenu();}
break;}};SelectBox.prototype.handleKeyPress=function(event){var select=$(this.selectElement),control=select.data('selectBox-control'),options=control.data('selectBox-options'),self=this;if(control.hasClass('selectBox-disabled')){return;}
switch(event.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:if(!control.hasClass('selectBox-menuShowing')){this.showMenu();}
event.preventDefault();clearTimeout(this.typeTimer);this.typeSearch+=String.fromCharCode(event.charCode||event.keyCode);options.find('A').each(function(){if($(this).text().substr(0,self.typeSearch.length).toLowerCase()===self.typeSearch.toLowerCase()){self.addHover($(this).parent());self.selectOption($(this).parent(),event);self.keepOptionInView($(this).parent());return false;}});this.typeTimer=setTimeout(function(){self.typeSearch='';},1000);break;}};SelectBox.prototype.enable=function(){var select=$(this.selectElement);select.prop('disabled',false);var control=select.data('selectBox-control');if(!control){return;}
control.removeClass('selectBox-disabled');};SelectBox.prototype.disable=function(){var select=$(this.selectElement);select.prop('disabled',true);var control=select.data('selectBox-control');if(!control){return;}
control.addClass('selectBox-disabled');};SelectBox.prototype.setValue=function(value){var select=$(this.selectElement);select.val(value);value=select.val();if(null===value){value=select.children().first().val();select.val(value);}
var control=select.data('selectBox-control');if(!control){return;}
var settings=select.data('selectBox-settings'),options=control.data('selectBox-options');this.setLabel();options.find('.selectBox-selected').removeClass('selectBox-selected');options.find('A').each(function(){if(typeof(value)==='object'){for(var i=0;i<value.length;i++){if($(this).attr('rel')==value[i]){$(this).parent().addClass('selectBox-selected');}}}else{if($(this).attr('rel')==value){$(this).parent().addClass('selectBox-selected');}}});if(settings.change){settings.change.call(select);}};SelectBox.prototype.disableSelection=function(selector){$(selector).css('MozUserSelect','none').bind('selectstart',function(event){event.preventDefault();});};SelectBox.prototype.generateOptions=function(self,options){var li=$('<li />'),a=$('<a />');li.addClass(self.attr('class'));li.data(self.data());a.attr('rel',self.val()).text(self.text());li.append(a);if(self.attr('disabled')){li.addClass('selectBox-disabled');}
if(self.attr('selected')){li.addClass('selectBox-selected');}
options.append(li);};$.extend($.fn,{setOptions:function(options){var select=$(this),control=select.data('selectBox-control');switch(typeof(options)){case'string':select.html(options);break;case'object':select.html('');for(var i in options){if(options[i]===null){continue;}
if(typeof(options[i])==='object'){var optgroup=$('<optgroup label="'+i+'" />');for(var j in options[i]){optgroup.append('<option value="'+j+'">'+options[i][j]+'</option>');}
select.append(optgroup);}else{var option=$('<option value="'+i+'">'+options[i]+'</option>');select.append(option);}}
break;}
if(control){$(this).selectBox('refresh');}},selectBox:function(method,options){var selectBox;switch(method){case'control':return $(this).data('selectBox-control');case'settings':if(!options){return $(this).data('selectBox-settings');}
$(this).each(function(){$(this).data('selectBox-settings',$.extend(true,$(this).data('selectBox-settings'),options));});break;case'options':if(undefined===options){return $(this).data('selectBox-control').data('selectBox-options');}
$(this).each(function(){$(this).setOptions(options);});break;case'value':if(undefined===options){return $(this).val();}
$(this).each(function(){if(selectBox=$(this).data('selectBox')){selectBox.setValue(options);}});break;case'refresh':$(this).each(function(){if(selectBox=$(this).data('selectBox')){selectBox.refresh();}});break;case'enable':$(this).each(function(){if(selectBox=$(this).data('selectBox')){selectBox.enable(this);}});break;case'disable':$(this).each(function(){if(selectBox=$(this).data('selectBox')){selectBox.disable();}});break;case'destroy':$(this).each(function(){if(selectBox=$(this).data('selectBox')){selectBox.destroy();$(this).data('selectBox',null);}});break;case'instance':return $(this).data('selectBox');default:$(this).each(function(idx,select){if(!$(select).data('selectBox')){$(select).data('selectBox',new SelectBox(select,method));}});break;}
return $(this);}});})(jQuery);
!function(factory){window.Inputmask=function($,window,document,undefined){function Inputmask(alias,options,internal){if(!(this instanceof Inputmask))return new Inputmask(alias,options,internal);this.el=undefined,this.events={},this.maskset=undefined,this.refreshValue=!1,!0!==internal&&($.isPlainObject(alias)?options=alias:(options=options||{},options.alias=alias),this.opts=$.extend(!0,{},this.defaults,options),this.noMasksCache=options&&options.definitions!==undefined,this.userOptions=options||{},this.isRTL=this.opts.numericInput,resolveAlias(this.opts.alias,options,this.opts));}
function resolveAlias(aliasStr,options,opts){var aliasDefinition=Inputmask.prototype.aliases[aliasStr];return aliasDefinition?(aliasDefinition.alias&&resolveAlias(aliasDefinition.alias,undefined,opts),$.extend(!0,opts,aliasDefinition),$.extend(!0,opts,options),!0):(null===opts.mask&&(opts.mask=aliasStr),!1);}
function generateMaskSet(opts,nocache){function generateMask(mask,metadata,opts){var regexMask=!1;if(null!==mask&&""!==mask||(regexMask=null!==opts.regex,regexMask?(mask=opts.regex,mask=mask.replace(/^(\^)(.*)(\$)$/,"$2")):mask="*{*}"),1===mask.length&&!1===opts.greedy&&0!==opts.repeat&&(opts.placeholder=""),opts.repeat>0||"*"===opts.repeat||"+"===opts.repeat){var repeatStart="*"===opts.repeat?0:"+"===opts.repeat?1:opts.repeat;mask=opts.groupmarker.start+mask+opts.groupmarker.end+opts.quantifiermarker.start+repeatStart+","+opts.repeat+opts.quantifiermarker.end;}
var masksetDefinition;return Inputmask.prototype.masksCache[mask]===undefined||!0===nocache?(masksetDefinition={mask:mask,maskToken:Inputmask.prototype.analyseMask(mask,regexMask,opts),validPositions:{},_buffer:undefined,buffer:undefined,tests:{},metadata:metadata,maskLength:undefined},!0!==nocache&&(Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]=masksetDefinition,masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]))):masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]),masksetDefinition;}
if($.isFunction(opts.mask)&&(opts.mask=opts.mask(opts)),$.isArray(opts.mask)){if(opts.mask.length>1){opts.keepStatic=null===opts.keepStatic||opts.keepStatic;var altMask=opts.groupmarker.start;return $.each(opts.numericInput?opts.mask.reverse():opts.mask,function(ndx,msk){altMask.length>1&&(altMask+=opts.groupmarker.end+opts.alternatormarker+opts.groupmarker.start),msk.mask===undefined||$.isFunction(msk.mask)?altMask+=msk:altMask+=msk.mask;}),altMask+=opts.groupmarker.end,generateMask(altMask,opts.mask,opts);}
opts.mask=opts.mask.pop();}
return opts.mask&&opts.mask.mask!==undefined&&!$.isFunction(opts.mask.mask)?generateMask(opts.mask.mask,opts.mask,opts):generateMask(opts.mask,opts.mask,opts);}
function maskScope(actionObj,maskset,opts){function getMaskTemplate(baseOnInput,minimalPos,includeMode){minimalPos=minimalPos||0;var ndxIntlzr,test,testPos,maskTemplate=[],pos=0,lvp=getLastValidPosition();-1===(maxLength=el!==undefined?el.maxLength:undefined)&&(maxLength=undefined);do{!0===baseOnInput&&getMaskSet().validPositions[pos]?(testPos=getMaskSet().validPositions[pos],test=testPos.match,ndxIntlzr=testPos.locator.slice(),maskTemplate.push(!0===includeMode?testPos.input:!1===includeMode?test.nativeDef:getPlaceholder(pos,test))):(testPos=getTestTemplate(pos,ndxIntlzr,pos-1),test=testPos.match,ndxIntlzr=testPos.locator.slice(),(!1===opts.jitMasking||pos<lvp||"number"==typeof opts.jitMasking&&isFinite(opts.jitMasking)&&opts.jitMasking>pos)&&maskTemplate.push(!1===includeMode?test.nativeDef:getPlaceholder(pos,test))),pos++;}while((maxLength===undefined||pos<maxLength)&&(null!==test.fn||""!==test.def)||minimalPos>pos);return""===maskTemplate[maskTemplate.length-1]&&maskTemplate.pop(),getMaskSet().maskLength=pos+1,maskTemplate;}
function getMaskSet(){return maskset;}
function resetMaskSet(soft){var maskset=getMaskSet();maskset.buffer=undefined,!0!==soft&&(maskset.validPositions={},maskset.p=0);}
function getLastValidPosition(closestTo,strict,validPositions){var before=-1,after=-1,valids=validPositions||getMaskSet().validPositions;closestTo===undefined&&(closestTo=-1);for(var posNdx in valids){var psNdx=parseInt(posNdx);valids[psNdx]&&(strict||!0!==valids[psNdx].generatedInput)&&(psNdx<=closestTo&&(before=psNdx),psNdx>=closestTo&&(after=psNdx));}
return-1!==before&&closestTo-before>1||after<closestTo?before:after;}
function stripValidPositions(start,end,nocheck,strict){var i,startPos=start,positionsClone=$.extend(!0,{},getMaskSet().validPositions),needsValidation=!1;for(getMaskSet().p=start,i=end-1;i>=startPos;i--)getMaskSet().validPositions[i]!==undefined&&(!0!==nocheck&&(!getMaskSet().validPositions[i].match.optionality&&function(pos){var posMatch=getMaskSet().validPositions[pos];if(posMatch!==undefined&&null===posMatch.match.fn){var prevMatch=getMaskSet().validPositions[pos-1],nextMatch=getMaskSet().validPositions[pos+1];return prevMatch!==undefined&&nextMatch!==undefined;}
return!1;}(i)||!1===opts.canClearPosition(getMaskSet(),i,getLastValidPosition(),strict,opts))||delete getMaskSet().validPositions[i]);for(resetMaskSet(!0),i=startPos+1;i<=getLastValidPosition();){for(;getMaskSet().validPositions[startPos]!==undefined;)startPos++;if(i<startPos&&(i=startPos+1),getMaskSet().validPositions[i]===undefined&&isMask(i))i++;else{var t=getTestTemplate(i);!1===needsValidation&&positionsClone[startPos]&&positionsClone[startPos].match.def===t.match.def?(getMaskSet().validPositions[startPos]=$.extend(!0,{},positionsClone[startPos]),getMaskSet().validPositions[startPos].input=t.input,delete getMaskSet().validPositions[i],i++):positionCanMatchDefinition(startPos,t.match.def)?!1!==isValid(startPos,t.input||getPlaceholder(i),!0)&&(delete getMaskSet().validPositions[i],i++,needsValidation=!0):isMask(i)||(i++,startPos--),startPos++;}}
resetMaskSet(!0);}
function determineTestTemplate(tests,guessNextBest){for(var testPos,testPositions=tests,lvp=getLastValidPosition(),lvTest=getMaskSet().validPositions[lvp]||getTests(0)[0],lvTestAltArr=lvTest.alternation!==undefined?lvTest.locator[lvTest.alternation].toString().split(","):[],ndx=0;ndx<testPositions.length&&(testPos=testPositions[ndx],!(testPos.match&&(opts.greedy&&!0!==testPos.match.optionalQuantifier||(!1===testPos.match.optionality||!1===testPos.match.newBlockMarker)&&!0!==testPos.match.optionalQuantifier)&&(lvTest.alternation===undefined||lvTest.alternation!==testPos.alternation||testPos.locator[lvTest.alternation]!==undefined&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAltArr)))||!0===guessNextBest&&(null!==testPos.match.fn||/[0-9a-bA-Z]/.test(testPos.match.def)));ndx++);return testPos;}
function getTestTemplate(pos,ndxIntlzr,tstPs){return getMaskSet().validPositions[pos]||determineTestTemplate(getTests(pos,ndxIntlzr?ndxIntlzr.slice():ndxIntlzr,tstPs));}
function getTest(pos){return getMaskSet().validPositions[pos]?getMaskSet().validPositions[pos]:getTests(pos)[0];}
function positionCanMatchDefinition(pos,def){for(var valid=!1,tests=getTests(pos),tndx=0;tndx<tests.length;tndx++)if(tests[tndx].match&&tests[tndx].match.def===def){valid=!0;break;}
return valid;}
function getTests(pos,ndxIntlzr,tstPs){function resolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){function isFirstMatch(latestMatch,tokenGroup){var firstMatch=0===$.inArray(latestMatch,tokenGroup.matches);return firstMatch||$.each(tokenGroup.matches,function(ndx,match){if(!0===match.isQuantifier&&(firstMatch=isFirstMatch(latestMatch,tokenGroup.matches[ndx-1])))return!1;}),firstMatch;}
function resolveNdxInitializer(pos,alternateNdx,targetAlternation){var bestMatch,indexPos;return(getMaskSet().tests[pos]||getMaskSet().validPositions[pos])&&$.each(getMaskSet().tests[pos]||[getMaskSet().validPositions[pos]],function(ndx,lmnt){var alternation=targetAlternation!==undefined?targetAlternation:lmnt.alternation,ndxPos=lmnt.locator[alternation]!==undefined?lmnt.locator[alternation].toString().indexOf(alternateNdx):-1;(indexPos===undefined||ndxPos<indexPos)&&-1!==ndxPos&&(bestMatch=lmnt,indexPos=ndxPos);}),bestMatch?bestMatch.locator.slice((targetAlternation!==undefined?targetAlternation:bestMatch.alternation)+1):targetAlternation!==undefined?resolveNdxInitializer(pos,alternateNdx):undefined;}
if(testPos>1e4)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+getMaskSet().mask;if(testPos===pos&&match.matches===undefined)return matches.push({match:match,locator:loopNdx.reverse(),cd:cacheDependency}),!0;if(match.matches!==undefined){if(match.isGroup&&quantifierRecurse!==match){if(match=handleMatch(maskToken.matches[$.inArray(match,maskToken.matches)+1],loopNdx))return!0;}else if(match.isOptional){var optionalToken=match;if(match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse)){if(latestMatch=matches[matches.length-1].match,!isFirstMatch(latestMatch,optionalToken))return!0;insertStop=!0,testPos=pos;}}else if(match.isAlternator){var maltMatches,alternateToken=match,malternateMatches=[],currentMatches=matches.slice(),loopNdxCnt=loopNdx.length,altIndex=ndxInitializer.length>0?ndxInitializer.shift():-1;if(-1===altIndex||"string"==typeof altIndex){var amndx,currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[];if("string"==typeof altIndex)altIndexArr=altIndex.split(",");else for(amndx=0;amndx<alternateToken.matches.length;amndx++)altIndexArr.push(amndx);for(var ndx=0;ndx<altIndexArr.length;ndx++){if(amndx=parseInt(altIndexArr[ndx]),matches=[],ndxInitializer=resolveNdxInitializer(testPos,amndx,loopNdxCnt)||ndxInitializerClone.slice(),!0!==(match=handleMatch(alternateToken.matches[amndx]||maskToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse)||match)&&match!==undefined&&altIndexArr[altIndexArr.length-1]<alternateToken.matches.length){var ntndx=$.inArray(match,maskToken.matches)+1;maskToken.matches.length>ntndx&&(match=handleMatch(maskToken.matches[ntndx],[ntndx].concat(loopNdx.slice(1,loopNdx.length)),quantifierRecurse))&&(altIndexArr.push(ntndx.toString()),$.each(matches,function(ndx,lmnt){lmnt.alternation=loopNdx.length-1;}));}
maltMatches=matches.slice(),testPos=currentPos,matches=[];for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1],dropMatch=!1;altMatch.alternation=altMatch.alternation||loopNdxCnt;for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if("string"!=typeof altIndex||-1!==$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr)){if(altMatch.match.nativeDef===altMatch2.match.nativeDef||altMatch.match.def===altMatch2.match.nativeDef||altMatch.match.nativeDef===altMatch2.match.def){dropMatch=!0,altMatch.alternation==altMatch2.alternation&&-1===altMatch2.locator[altMatch2.alternation].toString().indexOf(altMatch.locator[altMatch.alternation])&&(altMatch2.locator[altMatch2.alternation]=altMatch2.locator[altMatch2.alternation]+","+altMatch.locator[altMatch.alternation],altMatch2.alternation=altMatch.alternation),altMatch.match.nativeDef===altMatch2.match.def&&(altMatch.locator[altMatch.alternation]=altMatch2.locator[altMatch2.alternation],malternateMatches.splice(malternateMatches.indexOf(altMatch2),1,altMatch));break;}
if(altMatch.match.def===altMatch2.match.def){dropMatch=!1;break;}
if(function(source,target){return null===source.match.fn&&null!==target.match.fn&&target.match.fn.test(source.match.def,getMaskSet(),pos,!1,opts,!1);}(altMatch,altMatch2)){altMatch.alternation==altMatch2.alternation&&-1===altMatch.locator[altMatch.alternation].toString().indexOf(altMatch2.locator[altMatch2.alternation].toString().split("")[0])&&(altMatch.na=altMatch.na||altMatch.locator[altMatch.alternation].toString(),-1===altMatch.na.indexOf(altMatch.locator[altMatch.alternation].toString().split("")[0])&&(altMatch.na=altMatch.na+","+altMatch.locator[altMatch2.alternation].toString().split("")[0]),dropMatch=!0,altMatch.locator[altMatch.alternation]=altMatch2.locator[altMatch2.alternation].toString().split("")[0]+","+altMatch.locator[altMatch.alternation],malternateMatches.splice(malternateMatches.indexOf(altMatch2),0,altMatch));break;}}}
dropMatch||malternateMatches.push(altMatch);}}"string"==typeof altIndex&&(malternateMatches=$.map(malternateMatches,function(lmnt,ndx){if(isFinite(ndx)){var alternation=lmnt.alternation,altLocArr=lmnt.locator[alternation].toString().split(",");lmnt.locator[alternation]=undefined,lmnt.alternation=undefined;for(var alndx=0;alndx<altLocArr.length;alndx++)-1!==$.inArray(altLocArr[alndx],altIndexArr)&&(lmnt.locator[alternation]!==undefined?(lmnt.locator[alternation]+=",",lmnt.locator[alternation]+=altLocArr[alndx]):lmnt.locator[alternation]=parseInt(altLocArr[alndx]),lmnt.alternation=alternation);if(lmnt.locator[alternation]!==undefined)return lmnt;}})),matches=currentMatches.concat(malternateMatches),testPos=pos,insertStop=matches.length>0,ndxInitializer=ndxInitializerClone.slice();}else match=handleMatch(alternateToken.matches[altIndex]||maskToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse);if(match)return!0;}else if(match.isQuantifier&&quantifierRecurse!==maskToken.matches[$.inArray(match,maskToken.matches)-1])for(var qt=match,qndx=ndxInitializer.length>0?ndxInitializer.shift():0;qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max)&&testPos<=pos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];if(match=handleMatch(tokenGroup,[qndx].concat(loopNdx),tokenGroup)){if(latestMatch=matches[matches.length-1].match,latestMatch.optionalQuantifier=qndx>qt.quantifier.min-1,isFirstMatch(latestMatch,tokenGroup)){if(qndx>qt.quantifier.min-1){insertStop=!0,testPos=pos;break;}
return!0;}
return!0;}}else if(match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse))return!0;}else testPos++;}
for(var tndx=ndxInitializer.length>0?ndxInitializer.shift():0;tndx<maskToken.matches.length;tndx++)if(!0!==maskToken.matches[tndx].isQuantifier){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos===pos)return match;if(testPos>pos)break;}}
function filterTests(tests){return opts.keepStatic&&pos>0&&tests.length>1+(""===tests[tests.length-1].match.def?1:0)&&!0!==tests[0].match.optionality&&!0!==tests[0].match.optionalQuantifier&&null===tests[0].match.fn&&!/[0-9a-bA-Z]/.test(tests[0].match.def)?[determineTestTemplate(tests)]:tests;}
var latestMatch,maskTokens=getMaskSet().maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr?ndxIntlzr.slice():[0],matches=[],insertStop=!1,cacheDependency=ndxIntlzr?ndxIntlzr.join(""):"";if(pos>-1){if(ndxIntlzr===undefined){for(var test,previousPos=pos-1;(test=getMaskSet().validPositions[previousPos]||getMaskSet().tests[previousPos])===undefined&&previousPos>-1;)previousPos--;test!==undefined&&previousPos>-1&&(ndxInitializer=function(tests){var locator=[];return $.isArray(tests)||(tests=[tests]),tests.length>0&&(tests[0].alternation===undefined?(locator=determineTestTemplate(tests.slice()).locator.slice(),0===locator.length&&(locator=tests[0].locator.slice())):$.each(tests,function(ndx,tst){if(""!==tst.def)if(0===locator.length)locator=tst.locator.slice();else for(var i=0;i<locator.length;i++)tst.locator[i]&&-1===locator[i].toString().indexOf(tst.locator[i])&&(locator[i]+=","+tst.locator[i]);})),locator;}(test),cacheDependency=ndxInitializer.join(""),testPos=previousPos);}
if(getMaskSet().tests[pos]&&getMaskSet().tests[pos][0].cd===cacheDependency)return filterTests(getMaskSet().tests[pos]);for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){if(resolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx])&&testPos===pos||testPos>pos)break;}}
return(0===matches.length||insertStop)&&matches.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:"",placeholder:""},locator:[],cd:cacheDependency}),ndxIntlzr!==undefined&&getMaskSet().tests[pos]?filterTests($.extend(!0,[],matches)):(getMaskSet().tests[pos]=$.extend(!0,[],matches),filterTests(getMaskSet().tests[pos]));}
function getBufferTemplate(){return getMaskSet()._buffer===undefined&&(getMaskSet()._buffer=getMaskTemplate(!1,1),getMaskSet().buffer===undefined&&(getMaskSet().buffer=getMaskSet()._buffer.slice())),getMaskSet()._buffer;}
function getBuffer(noCache){return getMaskSet().buffer!==undefined&&!0!==noCache||(getMaskSet().buffer=getMaskTemplate(!0,getLastValidPosition(),!0)),getMaskSet().buffer;}
function refreshFromBuffer(start,end,buffer){var i,p;if(!0===start)resetMaskSet(),start=0,end=buffer.length;else for(i=start;i<end;i++)delete getMaskSet().validPositions[i];for(p=start,i=start;i<end;i++)if(resetMaskSet(!0),buffer[i]!==opts.skipOptionalPartCharacter){var valResult=isValid(p,buffer[i],!0,!0);!1!==valResult&&(resetMaskSet(!0),p=valResult.caret!==undefined?valResult.caret:valResult.pos+1);}}
function casing(elem,test,pos){switch(opts.casing||test.casing){case"upper":elem=elem.toUpperCase();break;case"lower":elem=elem.toLowerCase();break;case"title":var posBefore=getMaskSet().validPositions[pos-1];elem=0===pos||posBefore&&posBefore.input===String.fromCharCode(Inputmask.keyCode.SPACE)?elem.toUpperCase():elem.toLowerCase();}
return elem;}
function checkAlternationMatch(altArr1,altArr2,na){for(var naNdx,altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=!1,naArr=na!==undefined?na.split(","):[],i=0;i<naArr.length;i++)-1!==(naNdx=altArr1.indexOf(naArr[i]))&&altArr1.splice(naNdx,1);for(var alndx=0;alndx<altArr1.length;alndx++)if(-1!==$.inArray(altArr1[alndx],altArrC)){isMatch=!0;break;}
return isMatch;}
function isValid(pos,c,strict,fromSetValid,fromAlternate){function isSelection(posObj){var selection=isRTL?posObj.begin-posObj.end>1||posObj.begin-posObj.end==1:posObj.end-posObj.begin>1||posObj.end-posObj.begin==1;return selection&&0===posObj.begin&&posObj.end===getMaskSet().maskLength?"full":selection;}
function _isValid(position,c,strict){var rslt=!1;return $.each(getTests(position),function(ndx,tst){for(var test=tst.match,loopend=c?1:0,chrs="",i=test.cardinality;i>loopend;i--)chrs+=getBufferElement(position-(i-1));if(c&&(chrs+=c),getBuffer(!0),!1!==(rslt=null!=test.fn?test.fn.test(chrs,getMaskSet(),position,strict,opts,isSelection(pos)):(c===test.def||c===opts.skipOptionalPartCharacter)&&""!==test.def&&{c:getPlaceholder(position,test,!0)||test.def,pos:position})){var elem=rslt.c!==undefined?rslt.c:c;elem=elem===opts.skipOptionalPartCharacter&&null===test.fn?getPlaceholder(position,test,!0)||test.def:elem;var validatedPos=position,possibleModifiedBuffer=getBuffer();if(rslt.remove!==undefined&&($.isArray(rslt.remove)||(rslt.remove=[rslt.remove]),$.each(rslt.remove.sort(function(a,b){return b-a;}),function(ndx,lmnt){stripValidPositions(lmnt,lmnt+1,!0);})),rslt.insert!==undefined&&($.isArray(rslt.insert)||(rslt.insert=[rslt.insert]),$.each(rslt.insert.sort(function(a,b){return a-b;}),function(ndx,lmnt){isValid(lmnt.pos,lmnt.c,!0,fromSetValid);})),rslt.refreshFromBuffer){var refresh=rslt.refreshFromBuffer;if(refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,possibleModifiedBuffer),rslt.pos===undefined&&rslt.c===undefined)return rslt.pos=getLastValidPosition(),!1;if((validatedPos=rslt.pos!==undefined?rslt.pos:position)!==position)return rslt=$.extend(rslt,isValid(validatedPos,elem,!0,fromSetValid)),!1;}else if(!0!==rslt&&rslt.pos!==undefined&&rslt.pos!==position&&(validatedPos=rslt.pos,refreshFromBuffer(position,validatedPos,getBuffer().slice()),validatedPos!==position))return rslt=$.extend(rslt,isValid(validatedPos,elem,!0)),!1;return(!0===rslt||rslt.pos!==undefined||rslt.c!==undefined)&&(ndx>0&&resetMaskSet(!0),setValidPosition(validatedPos,$.extend({},tst,{input:casing(elem,test,validatedPos)}),fromSetValid,isSelection(pos))||(rslt=!1),!1);}}),rslt;}
function setValidPosition(pos,validTest,fromSetValid,isSelection){if(isSelection||opts.insertMode&&getMaskSet().validPositions[pos]!==undefined&&fromSetValid===undefined){var i,positionsClone=$.extend(!0,{},getMaskSet().validPositions),lvp=getLastValidPosition(undefined,!0);for(i=pos;i<=lvp;i++)delete getMaskSet().validPositions[i];getMaskSet().validPositions[pos]=$.extend(!0,{},validTest);var j,valid=!0,vps=getMaskSet().validPositions,needsValidation=!1,initialLength=getMaskSet().maskLength;for(i=j=pos;i<=lvp;i++){var t=positionsClone[i];if(t!==undefined)for(var posMatch=j;posMatch<getMaskSet().maskLength&&(null===t.match.fn&&vps[i]&&(!0===vps[i].match.optionalQuantifier||!0===vps[i].match.optionality)||null!=t.match.fn);){if(posMatch++,!1===needsValidation&&positionsClone[posMatch]&&positionsClone[posMatch].match.def===t.match.def)getMaskSet().validPositions[posMatch]=$.extend(!0,{},positionsClone[posMatch]),getMaskSet().validPositions[posMatch].input=t.input,fillMissingNonMask(posMatch),j=posMatch,valid=!0;else if(positionCanMatchDefinition(posMatch,t.match.def)){var result=isValid(posMatch,t.input,!0,!0);valid=!1!==result,j=result.caret||result.insert?getLastValidPosition():posMatch,needsValidation=!0;}else if(!(valid=!0===t.generatedInput)&&posMatch>=getMaskSet().maskLength-1)break;if(getMaskSet().maskLength<initialLength&&(getMaskSet().maskLength=initialLength),valid)break;}
if(!valid)break;}
if(!valid)return getMaskSet().validPositions=$.extend(!0,{},positionsClone),resetMaskSet(!0),!1;}else getMaskSet().validPositions[pos]=$.extend(!0,{},validTest);return resetMaskSet(!0),!0;}
function fillMissingNonMask(maskPos){for(var pndx=maskPos-1;pndx>-1&&!getMaskSet().validPositions[pndx];pndx--);var testTemplate,testsFromPos;for(pndx++;pndx<maskPos;pndx++)getMaskSet().validPositions[pndx]===undefined&&(!1===opts.jitMasking||opts.jitMasking>pndx)&&(testsFromPos=getTests(pndx,getTestTemplate(pndx-1).locator,pndx-1).slice(),""===testsFromPos[testsFromPos.length-1].match.def&&testsFromPos.pop(),(testTemplate=determineTestTemplate(testsFromPos))&&(testTemplate.match.def===opts.radixPointDefinitionSymbol||!isMask(pndx,!0)||$.inArray(opts.radixPoint,getBuffer())<pndx&&testTemplate.match.fn&&testTemplate.match.fn.test(getPlaceholder(pndx),getMaskSet(),pndx,!1,opts))&&!1!==(result=_isValid(pndx,getPlaceholder(pndx,testTemplate.match,!0)||(null==testTemplate.match.fn?testTemplate.match.def:""!==getPlaceholder(pndx)?getPlaceholder(pndx):getBuffer()[pndx]),!0))&&(getMaskSet().validPositions[result.pos||pndx].generatedInput=!0));}
strict=!0===strict;var maskPos=pos;pos.begin!==undefined&&(maskPos=isRTL&&!isSelection(pos)?pos.end:pos.begin);var result=!0,positionsClone=$.extend(!0,{},getMaskSet().validPositions);if($.isFunction(opts.preValidation)&&!strict&&!0!==fromSetValid&&(result=opts.preValidation(getBuffer(),maskPos,c,isSelection(pos),opts)),!0===result){if(fillMissingNonMask(maskPos),isSelection(pos)&&(handleRemove(undefined,Inputmask.keyCode.DELETE,pos),maskPos=getMaskSet().p),maskPos<getMaskSet().maskLength&&(maxLength===undefined||maskPos<maxLength)&&(result=_isValid(maskPos,c,strict),(!strict||!0===fromSetValid)&&!1===result)){var currentPosValid=getMaskSet().validPositions[maskPos];if(!currentPosValid||null!==currentPosValid.match.fn||currentPosValid.match.def!==c&&c!==opts.skipOptionalPartCharacter){if((opts.insertMode||getMaskSet().validPositions[seekNext(maskPos)]===undefined)&&!isMask(maskPos,!0))for(var nPos=maskPos+1,snPos=seekNext(maskPos);nPos<=snPos;nPos++)if(!1!==(result=_isValid(nPos,c,strict))){!function(originalPos,newPos){var vp=getMaskSet().validPositions[newPos];if(vp)for(var targetLocator=vp.locator,tll=targetLocator.length,ps=originalPos;ps<newPos;ps++)if(getMaskSet().validPositions[ps]===undefined&&!isMask(ps,!0)){var tests=getTests(ps).slice(),bestMatch=determineTestTemplate(tests,!0),equality=-1;""===tests[tests.length-1].match.def&&tests.pop(),$.each(tests,function(ndx,tst){for(var i=0;i<tll;i++){if(tst.locator[i]===undefined||!checkAlternationMatch(tst.locator[i].toString().split(","),targetLocator[i].toString().split(","),tst.na)){var targetAI=targetLocator[i],bestMatchAI=bestMatch.locator[i],tstAI=tst.locator[i];targetAI-bestMatchAI>Math.abs(targetAI-tstAI)&&(bestMatch=tst);break;}
equality<i&&(equality=i,bestMatch=tst);}}),bestMatch=$.extend({},bestMatch,{input:getPlaceholder(ps,bestMatch.match,!0)||bestMatch.match.def}),bestMatch.generatedInput=!0,setValidPosition(ps,bestMatch,!0),getMaskSet().validPositions[newPos]=undefined,_isValid(newPos,vp.input,!0);}}(maskPos,result.pos!==undefined?result.pos:nPos),maskPos=nPos;break;}}else result={caret:seekNext(maskPos)};}!1===result&&opts.keepStatic&&!strict&&!0!==fromAlternate&&(result=function(pos,c,strict){var lastAlt,alternation,altPos,prevAltPos,i,validPos,altNdxs,decisionPos,validPsClone=$.extend(!0,{},getMaskSet().validPositions),isValidRslt=!1,lAltPos=getLastValidPosition();for(prevAltPos=getMaskSet().validPositions[lAltPos];lAltPos>=0;lAltPos--)if((altPos=getMaskSet().validPositions[lAltPos])&&altPos.alternation!==undefined){if(lastAlt=lAltPos,alternation=getMaskSet().validPositions[lastAlt].alternation,prevAltPos.locator[altPos.alternation]!==altPos.locator[altPos.alternation])break;prevAltPos=altPos;}
if(alternation!==undefined){decisionPos=parseInt(lastAlt);var decisionTaker=prevAltPos.locator[prevAltPos.alternation||alternation]!==undefined?prevAltPos.locator[prevAltPos.alternation||alternation]:altNdxs[0];decisionTaker.length>0&&(decisionTaker=decisionTaker.split(",")[0]);var possibilityPos=getMaskSet().validPositions[decisionPos],prevPos=getMaskSet().validPositions[decisionPos-1];$.each(getTests(decisionPos,prevPos?prevPos.locator:undefined,decisionPos-1),function(ndx,test){altNdxs=test.locator[alternation]?test.locator[alternation].toString().split(","):[];for(var mndx=0;mndx<altNdxs.length;mndx++){var validInputs=[],staticInputsBeforePos=0,staticInputsBeforePosAlternate=0,verifyValidInput=!1;if(decisionTaker<altNdxs[mndx]&&(test.na===undefined||-1===$.inArray(altNdxs[mndx],test.na.split(","))||-1===$.inArray(decisionTaker.toString(),altNdxs))){getMaskSet().validPositions[decisionPos]=$.extend(!0,{},test);var possibilities=getMaskSet().validPositions[decisionPos].locator;for(getMaskSet().validPositions[decisionPos].locator[alternation]=parseInt(altNdxs[mndx]),null==test.match.fn?(possibilityPos.input!==test.match.def&&(verifyValidInput=!0,!0!==possibilityPos.generatedInput&&validInputs.push(possibilityPos.input)),staticInputsBeforePosAlternate++,getMaskSet().validPositions[decisionPos].generatedInput=!/[0-9a-bA-Z]/.test(test.match.def),getMaskSet().validPositions[decisionPos].input=test.match.def):getMaskSet().validPositions[decisionPos].input=possibilityPos.input,i=decisionPos+1;i<getLastValidPosition(undefined,!0)+1;i++)validPos=getMaskSet().validPositions[i],validPos&&!0!==validPos.generatedInput&&/[0-9a-bA-Z]/.test(validPos.input)?validInputs.push(validPos.input):i<pos&&staticInputsBeforePos++,delete getMaskSet().validPositions[i];for(verifyValidInput&&validInputs[0]===test.match.def&&validInputs.shift(),resetMaskSet(!0),isValidRslt=!0;validInputs.length>0;){var input=validInputs.shift();if(input!==opts.skipOptionalPartCharacter&&!(isValidRslt=isValid(getLastValidPosition(undefined,!0)+1,input,!1,fromSetValid,!0)))break;}
if(isValidRslt){getMaskSet().validPositions[decisionPos].locator=possibilities;var targetLvp=getLastValidPosition(pos)+1;for(i=decisionPos+1;i<getLastValidPosition()+1;i++)((validPos=getMaskSet().validPositions[i])===undefined||null==validPos.match.fn)&&i<pos+(staticInputsBeforePosAlternate-staticInputsBeforePos)&&staticInputsBeforePosAlternate++;pos+=staticInputsBeforePosAlternate-staticInputsBeforePos,isValidRslt=isValid(pos>targetLvp?targetLvp:pos,c,strict,fromSetValid,!0);}
if(isValidRslt)return!1;resetMaskSet(),getMaskSet().validPositions=$.extend(!0,{},validPsClone);}}});}
return isValidRslt;}(maskPos,c,strict)),!0===result&&(result={pos:maskPos});}
if($.isFunction(opts.postValidation)&&!1!==result&&!strict&&!0!==fromSetValid){var postResult=opts.postValidation(getBuffer(!0),result,opts);if(postResult.refreshFromBuffer&&postResult.buffer){var refresh=postResult.refreshFromBuffer;refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,postResult.buffer);}
result=!0===postResult?result:postResult;}
return result.pos===undefined&&(result.pos=maskPos),!1===result&&(resetMaskSet(!0),getMaskSet().validPositions=$.extend(!0,{},positionsClone)),result;}
function isMask(pos,strict){var test=getTestTemplate(pos).match;if(""===test.def&&(test=getTest(pos).match),null!=test.fn)return test.fn;if(!0!==strict&&pos>-1){var tests=getTests(pos);return tests.length>1+(""===tests[tests.length-1].match.def?1:0);}
return!1;}
function seekNext(pos,newBlock){var maskL=getMaskSet().maskLength;if(pos>=maskL)return maskL;for(var position=pos;++position<maskL&&(!0===newBlock&&(!0!==getTest(position).match.newBlockMarker||!isMask(position))||!0!==newBlock&&!isMask(position)););return position;}
function seekPrevious(pos,newBlock){var tests,position=pos;if(position<=0)return 0;for(;--position>0&&(!0===newBlock&&!0!==getTest(position).match.newBlockMarker||!0!==newBlock&&!isMask(position)&&(tests=getTests(position),tests.length<2||2===tests.length&&""===tests[1].match.def)););return position;}
function getBufferElement(position){return getMaskSet().validPositions[position]===undefined?getPlaceholder(position):getMaskSet().validPositions[position].input;}
function writeBuffer(input,buffer,caretPos,event,triggerInputEvent){if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite(event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,result.buffer||buffer),buffer=getBuffer(!0);}
caretPos!==undefined&&(caretPos=result.caret!==undefined?result.caret:caretPos);}}
input!==undefined&&(input.inputmask._valueSet(buffer.join("")),caretPos===undefined||event!==undefined&&"blur"===event.type?renderColorMask(input,buffer,caretPos):android&&"input"===event.type?setTimeout(function(){caret(input,caretPos);},0):caret(input,caretPos),!0===triggerInputEvent&&(skipInputEvent=!0,$(input).trigger("input")));}
function getPlaceholder(pos,test,returnPL){if(test=test||getTest(pos).match,test.placeholder!==undefined||!0===returnPL)return $.isFunction(test.placeholder)?test.placeholder(opts):test.placeholder;if(null===test.fn){if(pos>-1&&getMaskSet().validPositions[pos]===undefined){var prevTest,tests=getTests(pos),staticAlternations=[];if(tests.length>1+(""===tests[tests.length-1].match.def?1:0))for(var i=0;i<tests.length;i++)if(!0!==tests[i].match.optionality&&!0!==tests[i].match.optionalQuantifier&&(null===tests[i].match.fn||prevTest===undefined||!1!==tests[i].match.fn.test(prevTest.match.def,getMaskSet(),pos,!0,opts))&&(staticAlternations.push(tests[i]),null===tests[i].match.fn&&(prevTest=tests[i]),staticAlternations.length>1&&/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)))return opts.placeholder.charAt(pos%opts.placeholder.length);}
return test.def;}
return opts.placeholder.charAt(pos%opts.placeholder.length);}
function checkVal(input,writeOut,strict,nptvl,initiatingEvent){function isTemplateMatch(ndx,charCodes){return-1!==getBufferTemplate().slice(ndx,seekNext(ndx)).join("").indexOf(charCodes)&&!isMask(ndx)&&getTest(ndx).match.nativeDef===charCodes.charAt(charCodes.length-1);}
var inputValue=nptvl.slice(),charCodes="",initialNdx=0,result=undefined;if(resetMaskSet(),getMaskSet().p=seekNext(-1),!strict)if(!0!==opts.autoUnmask){var staticInput=getBufferTemplate().slice(0,seekNext(-1)).join(""),matches=inputValue.join("").match(new RegExp("^"+Inputmask.escapeRegex(staticInput),"g"));matches&&matches.length>0&&(inputValue.splice(0,matches.length*staticInput.length),initialNdx=seekNext(initialNdx));}else initialNdx=seekNext(initialNdx);if($.each(inputValue,function(ndx,charCode){if(charCode!==undefined){var keypress=new $.Event("_checkval");keypress.which=charCode.charCodeAt(0),charCodes+=charCode;var lvp=getLastValidPosition(undefined,!0),lvTest=getMaskSet().validPositions[lvp],nextTest=getTestTemplate(lvp+1,lvTest?lvTest.locator.slice():undefined,lvp);if(!isTemplateMatch(initialNdx,charCodes)||strict||opts.autoUnmask){var pos=strict?ndx:null==nextTest.match.fn&&nextTest.match.optionality&&lvp+1<getMaskSet().p?lvp+1:getMaskSet().p;result=EventHandlers.keypressEvent.call(input,keypress,!0,!1,strict,pos),initialNdx=pos+1,charCodes="";}else result=EventHandlers.keypressEvent.call(input,keypress,!0,!1,!0,lvp+1);if(!strict&&$.isFunction(opts.onBeforeWrite)){var fp=result.forwardPosition;if(result=opts.onBeforeWrite(keypress,getBuffer(),result.forwardPosition,opts),result.forwardPosition=fp,result&&result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,result.buffer),resetMaskSet(!0),result.caret&&(getMaskSet().p=result.caret,result.forwardPosition=result.caret);}}}}),writeOut){var caretPos=undefined;document.activeElement===input&&result&&(caretPos=opts.numericInput?seekPrevious(result.forwardPosition):result.forwardPosition),writeBuffer(input,getBuffer(),caretPos,initiatingEvent||new $.Event("checkval"),initiatingEvent&&"input"===initiatingEvent.type);}}
function unmaskedvalue(input){if(input){if(input.inputmask===undefined)return input.value;input.inputmask&&input.inputmask.refreshValue&&EventHandlers.setValueEvent.call(input);}
var umValue=[],vps=getMaskSet().validPositions;for(var pndx in vps)vps[pndx].match&&null!=vps[pndx].match.fn&&umValue.push(vps[pndx].input);var unmaskedValue=0===umValue.length?"":(isRTL?umValue.reverse():umValue).join("");if($.isFunction(opts.onUnMask)){var bufferValue=(isRTL?getBuffer().slice().reverse():getBuffer()).join("");unmaskedValue=opts.onUnMask(bufferValue,unmaskedValue,opts);}
return unmaskedValue;}
function caret(input,begin,end,notranslate){function translatePosition(pos){if(!0!==notranslate&&isRTL&&"number"==typeof pos&&(!opts.greedy||""!==opts.placeholder)){pos=getBuffer().join("").length-pos;}
return pos;}
var range;if("number"!=typeof begin)return input.setSelectionRange?(begin=input.selectionStart,end=input.selectionEnd):window.getSelection?(range=window.getSelection().getRangeAt(0),range.commonAncestorContainer.parentNode!==input&&range.commonAncestorContainer!==input||(begin=range.startOffset,end=range.endOffset)):document.selection&&document.selection.createRange&&(range=document.selection.createRange(),begin=0-range.duplicate().moveStart("character",-input.inputmask._valueGet().length),end=begin+range.text.length),{begin:translatePosition(begin),end:translatePosition(end)};begin=translatePosition(begin),end=translatePosition(end),end="number"==typeof end?end:begin;var scrollCalc=parseInt(((input.ownerDocument.defaultView||window).getComputedStyle?(input.ownerDocument.defaultView||window).getComputedStyle(input,null):input.currentStyle).fontSize)*end;if(input.scrollLeft=scrollCalc>input.scrollWidth?scrollCalc:0,mobile||!1!==opts.insertMode||begin!==end||end++,input.setSelectionRange)input.selectionStart=begin,input.selectionEnd=end;else if(window.getSelection){if(range=document.createRange(),input.firstChild===undefined||null===input.firstChild){var textNode=document.createTextNode("");input.appendChild(textNode);}
range.setStart(input.firstChild,begin<input.inputmask._valueGet().length?begin:input.inputmask._valueGet().length),range.setEnd(input.firstChild,end<input.inputmask._valueGet().length?end:input.inputmask._valueGet().length),range.collapse(!0);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range);}else input.createTextRange&&(range=input.createTextRange(),range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select());renderColorMask(input,undefined,{begin:begin,end:end});}
function determineLastRequiredPosition(returnDefinition){var pos,testPos,buffer=getBuffer(),bl=buffer.length,lvp=getLastValidPosition(),positions={},lvTest=getMaskSet().validPositions[lvp],ndxIntlzr=lvTest!==undefined?lvTest.locator.slice():undefined;for(pos=lvp+1;pos<buffer.length;pos++)testPos=getTestTemplate(pos,ndxIntlzr,pos-1),ndxIntlzr=testPos.locator.slice(),positions[pos]=$.extend(!0,{},testPos);var lvTestAlt=lvTest&&lvTest.alternation!==undefined?lvTest.locator[lvTest.alternation]:undefined;for(pos=bl-1;pos>lvp&&(testPos=positions[pos],(testPos.match.optionality||testPos.match.optionalQuantifier||lvTestAlt&&(lvTestAlt!==positions[pos].locator[lvTest.alternation]&&null!=testPos.match.fn||null===testPos.match.fn&&testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAlt.toString().split(","))&&""!==getTests(pos)[0].def))&&buffer[pos]===getPlaceholder(pos,testPos.match));pos--)bl--;return returnDefinition?{l:bl,def:positions[bl]?positions[bl].match:undefined}:bl;}
function clearOptionalTail(buffer){for(var validPos,rl=determineLastRequiredPosition(),bl=buffer.length;rl<bl&&!isMask(rl+1)&&(validPos=getTest(rl+1))&&!0!==validPos.match.optionality&&!0!==validPos.match.optionalQuantifier;)rl++;for(;(validPos=getTest(rl-1))&&validPos.match.optionality&&validPos.input===opts.skipOptionalPartCharacter;)rl--;return buffer.splice(rl),buffer;}
function isComplete(buffer){if($.isFunction(opts.isComplete))return opts.isComplete(buffer,opts);if("*"===opts.repeat)return undefined;var complete=!1,lrp=determineLastRequiredPosition(!0),aml=seekPrevious(lrp.l);if(lrp.def===undefined||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=!0;for(var i=0;i<=aml;i++){var test=getTestTemplate(i).match;if(null!==test.fn&&getMaskSet().validPositions[i]===undefined&&!0!==test.optionality&&!0!==test.optionalQuantifier||null===test.fn&&buffer[i]!==getPlaceholder(i,test)){complete=!1;break;}}}
return complete;}
function handleRemove(input,k,pos,strict){if((opts.numericInput||isRTL)&&(k===Inputmask.keyCode.BACKSPACE?k=Inputmask.keyCode.DELETE:k===Inputmask.keyCode.DELETE&&(k=Inputmask.keyCode.BACKSPACE),isRTL)){var pend=pos.end;pos.end=pos.begin,pos.begin=pend;}
k===Inputmask.keyCode.BACKSPACE&&(pos.end-pos.begin<1||!1===opts.insertMode)?(pos.begin=seekPrevious(pos.begin),getMaskSet().validPositions[pos.begin]===undefined||getMaskSet().validPositions[pos.begin].input!==opts.groupSeparator&&getMaskSet().validPositions[pos.begin].input!==opts.radixPoint||pos.begin--):k===Inputmask.keyCode.DELETE&&pos.begin===pos.end&&(pos.end=isMask(pos.end,!0)?pos.end+1:seekNext(pos.end)+1,getMaskSet().validPositions[pos.begin]===undefined||getMaskSet().validPositions[pos.begin].input!==opts.groupSeparator&&getMaskSet().validPositions[pos.begin].input!==opts.radixPoint||pos.end++),stripValidPositions(pos.begin,pos.end,!1,strict),!0!==strict&&function(){if(opts.keepStatic){for(var validInputs=[],lastAlt=getLastValidPosition(-1,!0),positionsClone=$.extend(!0,{},getMaskSet().validPositions),prevAltPos=getMaskSet().validPositions[lastAlt];lastAlt>=0;lastAlt--){var altPos=getMaskSet().validPositions[lastAlt];if(altPos){if(!0!==altPos.generatedInput&&/[0-9a-bA-Z]/.test(altPos.input)&&validInputs.push(altPos.input),delete getMaskSet().validPositions[lastAlt],altPos.alternation!==undefined&&altPos.locator[altPos.alternation]!==prevAltPos.locator[altPos.alternation])break;prevAltPos=altPos;}}
if(lastAlt>-1)for(getMaskSet().p=seekNext(getLastValidPosition(-1,!0));validInputs.length>0;){var keypress=new $.Event("keypress");keypress.which=validInputs.pop().charCodeAt(0),EventHandlers.keypressEvent.call(input,keypress,!0,!1,!1,getMaskSet().p);}else getMaskSet().validPositions=$.extend(!0,{},positionsClone);}}();var lvp=getLastValidPosition(pos.begin,!0);lvp<pos.begin?getMaskSet().p=seekNext(lvp):!0!==strict&&(getMaskSet().p=pos.begin);}
function initializeColorMask(input){function findCaretPos(clientx){var caretPos,e=document.createElement("span");for(var style in computedStyle)isNaN(style)&&-1!==style.indexOf("font")&&(e.style[style]=computedStyle[style]);e.style.textTransform=computedStyle.textTransform,e.style.letterSpacing=computedStyle.letterSpacing,e.style.position="absolute",e.style.height="auto",e.style.width="auto",e.style.visibility="hidden",e.style.whiteSpace="nowrap",document.body.appendChild(e);var itl,inputText=input.inputmask._valueGet(),previousWidth=0;for(caretPos=0,itl=inputText.length;caretPos<=itl;caretPos++){if(e.innerHTML+=inputText.charAt(caretPos)||"_",e.offsetWidth>=clientx){var offset1=clientx-previousWidth,offset2=e.offsetWidth-clientx;e.innerHTML=inputText.charAt(caretPos),offset1-=e.offsetWidth/3,caretPos=offset1<offset2?caretPos-1:caretPos;break;}
previousWidth=e.offsetWidth;}
return document.body.removeChild(e),caretPos;}
function position(){colorMask.style.position="absolute",colorMask.style.top=offset.top+"px",colorMask.style.left=offset.left+"px",colorMask.style.width=parseInt(input.offsetWidth)-parseInt(computedStyle.paddingLeft)-parseInt(computedStyle.paddingRight)-parseInt(computedStyle.borderLeftWidth)-parseInt(computedStyle.borderRightWidth)+"px",colorMask.style.height=parseInt(input.offsetHeight)-parseInt(computedStyle.paddingTop)-parseInt(computedStyle.paddingBottom)-parseInt(computedStyle.borderTopWidth)-parseInt(computedStyle.borderBottomWidth)+"px",colorMask.style.lineHeight=colorMask.style.height,colorMask.style.zIndex=isNaN(computedStyle.zIndex)?-1:computedStyle.zIndex-1,colorMask.style.webkitAppearance="textfield",colorMask.style.mozAppearance="textfield",colorMask.style.Appearance="textfield";}
var offset=$(input).position(),computedStyle=(input.ownerDocument.defaultView||window).getComputedStyle(input,null);input.parentNode;colorMask=document.createElement("div"),document.body.appendChild(colorMask);for(var style in computedStyle)computedStyle.hasOwnProperty(style)&&isNaN(style)&&"cssText"!==style&&-1==style.indexOf("webkit")&&(colorMask.style[style]=computedStyle[style]);input.style.backgroundColor="transparent",input.style.color="transparent",input.style.webkitAppearance="caret",input.style.mozAppearance="caret",input.style.Appearance="caret",position(),$(window).on("resize",function(e){offset=$(input).position(),computedStyle=(input.ownerDocument.defaultView||window).getComputedStyle(input,null),position();}),$(input).on("click",function(e){return caret(input,findCaretPos(e.clientX)),EventHandlers.clickEvent.call(this,[e]);}),$(input).on("keydown",function(e){e.shiftKey||!1===opts.insertMode||setTimeout(function(){renderColorMask(input);},0);});}
function renderColorMask(input,buffer,caretPos){function handleStatic(){isStatic||null!==test.fn&&testPos.input!==undefined?isStatic&&null!==test.fn&&testPos.input!==undefined&&(isStatic=!1,maskTemplate+="</span>"):(isStatic=!0,maskTemplate+="<span class='im-static''>");}
if(colorMask!==undefined){buffer=buffer||getBuffer(),caretPos===undefined?caretPos=caret(input):caretPos.begin===undefined&&(caretPos={begin:caretPos,end:caretPos});var maskTemplate="",isStatic=!1;if(""!=buffer){var ndxIntlzr,test,testPos,pos=0,lvp=getLastValidPosition();do{pos===caretPos.begin&&document.activeElement===input&&(maskTemplate+="<span class='im-caret' style='border-right-width: 1px;border-right-style: solid;'></span>"),getMaskSet().validPositions[pos]?(testPos=getMaskSet().validPositions[pos],test=testPos.match,ndxIntlzr=testPos.locator.slice(),handleStatic(),maskTemplate+=testPos.input):(testPos=getTestTemplate(pos,ndxIntlzr,pos-1),test=testPos.match,ndxIntlzr=testPos.locator.slice(),(!1===opts.jitMasking||pos<lvp||"number"==typeof opts.jitMasking&&isFinite(opts.jitMasking)&&opts.jitMasking>pos)&&(handleStatic(),maskTemplate+=getPlaceholder(pos,test))),pos++;}while((maxLength===undefined||pos<maxLength)&&(null!==test.fn||""!==test.def)||lvp>pos);}
colorMask.innerHTML=maskTemplate;}}
maskset=maskset||this.maskset,opts=opts||this.opts;var undoValue,$el,maxLength,colorMask,valueBuffer,el=this.el,isRTL=this.isRTL,skipKeyPressEvent=!1,skipInputEvent=!1,ignorable=!1,mouseEnter=!1,EventRuler={on:function(input,eventName,eventHandler){var ev=function(e){if(this.inputmask===undefined&&"FORM"!==this.nodeName){var imOpts=$.data(this,"_inputmask_opts");imOpts?new Inputmask(imOpts).mask(this):EventRuler.off(this);}else{if("setvalue"===e.type||"FORM"===this.nodeName||!(this.disabled||this.readOnly&&!("keydown"===e.type&&e.ctrlKey&&67===e.keyCode||!1===opts.tabThrough&&e.keyCode===Inputmask.keyCode.TAB))){switch(e.type){case"input":if(!0===skipInputEvent)return skipInputEvent=!1,e.preventDefault();break;case"keydown":skipKeyPressEvent=!1,skipInputEvent=!1;break;case"keypress":if(!0===skipKeyPressEvent)return e.preventDefault();skipKeyPressEvent=!0;break;case"click":if(iemobile||iphone){var that=this,args=arguments;return setTimeout(function(){eventHandler.apply(that,args);},0),!1;}}
var returnVal=eventHandler.apply(this,arguments);return!1===returnVal&&(e.preventDefault(),e.stopPropagation()),returnVal;}
e.preventDefault();}};input.inputmask.events[eventName]=input.inputmask.events[eventName]||[],input.inputmask.events[eventName].push(ev),-1!==$.inArray(eventName,["submit","reset"])?null!=input.form&&$(input.form).on(eventName,ev):$(input).on(eventName,ev);},off:function(input,event){if(input.inputmask&&input.inputmask.events){var events;event?(events=[],events[event]=input.inputmask.events[event]):events=input.inputmask.events,$.each(events,function(eventName,evArr){for(;evArr.length>0;){var ev=evArr.pop();-1!==$.inArray(eventName,["submit","reset"])?null!=input.form&&$(input.form).off(eventName,ev):$(input).off(eventName,ev);}
delete input.inputmask.events[eventName];});}}},EventHandlers={keydownEvent:function(e){var input=this,$input=$(input),k=e.keyCode,pos=caret(input);if(k===Inputmask.keyCode.BACKSPACE||k===Inputmask.keyCode.DELETE||iphone&&k===Inputmask.keyCode.BACKSPACE_SAFARI||e.ctrlKey&&k===Inputmask.keyCode.X&&!function(eventName){var el=document.createElement("input"),evName="on"+eventName,isSupported=evName in el;return isSupported||(el.setAttribute(evName,"return;"),isSupported="function"==typeof el[evName]),el=null,isSupported;}("cut"))e.preventDefault(),handleRemove(input,k,pos),writeBuffer(input,getBuffer(!0),getMaskSet().p,e,input.inputmask._valueGet()!==getBuffer().join("")),input.inputmask._valueGet()===getBufferTemplate().join("")?$input.trigger("cleared"):!0===isComplete(getBuffer())&&$input.trigger("complete");else if(k===Inputmask.keyCode.END||k===Inputmask.keyCode.PAGE_DOWN){e.preventDefault();var caretPos=seekNext(getLastValidPosition());opts.insertMode||caretPos!==getMaskSet().maskLength||e.shiftKey||caretPos--,caret(input,e.shiftKey?pos.begin:caretPos,caretPos,!0);}else k===Inputmask.keyCode.HOME&&!e.shiftKey||k===Inputmask.keyCode.PAGE_UP?(e.preventDefault(),caret(input,0,e.shiftKey?pos.begin:0,!0)):(opts.undoOnEscape&&k===Inputmask.keyCode.ESCAPE||90===k&&e.ctrlKey)&&!0!==e.altKey?(checkVal(input,!0,!1,undoValue.split("")),$input.trigger("click")):k!==Inputmask.keyCode.INSERT||e.shiftKey||e.ctrlKey?!0===opts.tabThrough&&k===Inputmask.keyCode.TAB?(!0===e.shiftKey?(null===getTest(pos.begin).match.fn&&(pos.begin=seekNext(pos.begin)),pos.end=seekPrevious(pos.begin,!0),pos.begin=seekPrevious(pos.end,!0)):(pos.begin=seekNext(pos.begin,!0),pos.end=seekNext(pos.begin,!0),pos.end<getMaskSet().maskLength&&pos.end--),pos.begin<getMaskSet().maskLength&&(e.preventDefault(),caret(input,pos.begin,pos.end))):e.shiftKey||!1===opts.insertMode&&(k===Inputmask.keyCode.RIGHT?setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin);},0):k===Inputmask.keyCode.LEFT&&setTimeout(function(){var caretPos=caret(input);caret(input,isRTL?caretPos.begin+1:caretPos.begin-1);},0)):(opts.insertMode=!opts.insertMode,caret(input,opts.insertMode||pos.begin!==getMaskSet().maskLength?pos.begin:pos.begin-1));opts.onKeyDown.call(this,e,getBuffer(),caret(input).begin,opts),ignorable=-1!==$.inArray(k,opts.ignorables);},keypressEvent:function(e,checkval,writeOut,strict,ndx){var input=this,$input=$(input),k=e.which||e.charCode||e.keyCode;if(!(!0===checkval||e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable))return k===Inputmask.keyCode.ENTER&&undoValue!==getBuffer().join("")&&(undoValue=getBuffer().join(""),setTimeout(function(){$input.trigger("change");},0)),!0;if(k){46===k&&!1===e.shiftKey&&""!==opts.radixPoint&&(k=opts.radixPoint.charCodeAt(0));var forwardPosition,pos=checkval?{begin:ndx,end:ndx}:caret(input),c=String.fromCharCode(k);getMaskSet().writeOutBuffer=!0;var valResult=isValid(pos,c,strict);if(!1!==valResult&&(resetMaskSet(!0),forwardPosition=valResult.caret!==undefined?valResult.caret:checkval?valResult.pos+1:seekNext(valResult.pos),getMaskSet().p=forwardPosition),!1!==writeOut){var self=this;if(setTimeout(function(){opts.onKeyValidation.call(self,k,valResult,opts);},0),getMaskSet().writeOutBuffer&&!1!==valResult){var buffer=getBuffer();writeBuffer(input,buffer,opts.numericInput&&valResult.caret===undefined?seekPrevious(forwardPosition):forwardPosition,e,!0!==checkval),!0!==checkval&&setTimeout(function(){!0===isComplete(buffer)&&$input.trigger("complete");},0);}}
if(e.preventDefault(),checkval)return valResult.forwardPosition=forwardPosition,valResult;}},pasteEvent:function(e){var tempValue,input=this,ev=e.originalEvent||e,$input=$(input),inputValue=input.inputmask._valueGet(!0),caretPos=caret(input);isRTL&&(tempValue=caretPos.end,caretPos.end=caretPos.begin,caretPos.begin=tempValue);var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);if(valueBeforeCaret===(isRTL?getBufferTemplate().reverse():getBufferTemplate()).slice(0,caretPos.begin).join("")&&(valueBeforeCaret=""),valueAfterCaret===(isRTL?getBufferTemplate().reverse():getBufferTemplate()).slice(caretPos.end).join("")&&(valueAfterCaret=""),isRTL&&(tempValue=valueBeforeCaret,valueBeforeCaret=valueAfterCaret,valueAfterCaret=tempValue),window.clipboardData&&window.clipboardData.getData)inputValue=valueBeforeCaret+window.clipboardData.getData("Text")+valueAfterCaret;else{if(!ev.clipboardData||!ev.clipboardData.getData)return!0;inputValue=valueBeforeCaret+ev.clipboardData.getData("text/plain")+valueAfterCaret;}
var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){if(!1===(pasteValue=opts.onBeforePaste(inputValue,opts)))return e.preventDefault();pasteValue||(pasteValue=inputValue);}
return checkVal(input,!1,!1,isRTL?pasteValue.split("").reverse():pasteValue.toString().split("")),writeBuffer(input,getBuffer(),seekNext(getLastValidPosition()),e,undoValue!==getBuffer().join("")),!0===isComplete(getBuffer())&&$input.trigger("complete"),e.preventDefault();},inputFallBackEvent:function(e){var input=this,inputValue=input.inputmask._valueGet();if(getBuffer().join("")!==inputValue){var caretPos=caret(input);if("."===inputValue.charAt(caretPos.begin-1)&&""!==opts.radixPoint&&(inputValue=inputValue.split(""),inputValue[caretPos.begin-1]=opts.radixPoint.charAt(0),inputValue=inputValue.join("")),inputValue.charAt(caretPos.begin-1)===opts.radixPoint&&inputValue.length>getBuffer().length){var keypress=new $.Event("keypress");return keypress.which=opts.radixPoint.charCodeAt(0),EventHandlers.keypressEvent.call(input,keypress,!0,!0,!1,caretPos.begin),!1;}
if(inputValue=inputValue.replace(new RegExp("("+Inputmask.escapeRegex(getBufferTemplate().join(""))+")*"),""),iemobile){var inputChar=inputValue.replace(getBuffer().join(""),"");if(1===inputChar.length){var keypress=new $.Event("keypress");return keypress.which=inputChar.charCodeAt(0),EventHandlers.keypressEvent.call(input,keypress,!0,!0,!1,getMaskSet().validPositions[caretPos.begin-1]?caretPos.begin:caretPos.begin-1),!1;}}
if(caretPos.begin>inputValue.length&&(caret(input,inputValue.length),caretPos=caret(input)),getBuffer().length-inputValue.length!=1||inputValue.charAt(caretPos.begin)===getBuffer()[caretPos.begin]||inputValue.charAt(caretPos.begin+1)===getBuffer()[caretPos.begin]||isMask(caretPos.begin)){var stickyParts=[],bufferTemplate=getMaskTemplate(!0,1).join("");for(stickyParts.push(inputValue.substr(0,caretPos.begin)),stickyParts.push(inputValue.substr(caretPos.begin));null===inputValue.match(Inputmask.escapeRegex(bufferTemplate)+"$");)bufferTemplate=bufferTemplate.slice(1);inputValue=inputValue.replace(bufferTemplate,""),$.isFunction(opts.onBeforeMask)&&(inputValue=opts.onBeforeMask(inputValue,opts)||inputValue),checkVal(input,!0,!1,inputValue.split(""),e);var currentPos=caret(input).begin,currentValue=input.inputmask._valueGet(),pos1=currentValue.indexOf(stickyParts[0]);if(0===pos1&&currentPos!==stickyParts[0].length)caret(input,stickyParts[0].length),android&&setTimeout(function(){caret(input,stickyParts[0].length);},0);else{for(;null===currentValue.match(Inputmask.escapeRegex(stickyParts[1])+"$");)stickyParts[1]=stickyParts[1].substr(1);var pos2=currentValue.indexOf(stickyParts[1]);-1!==pos2&&""!==stickyParts[1]&&currentPos>pos2&&pos2>pos1&&(caret(input,pos2),android&&setTimeout(function(){caret(input,pos2);},0));}!0===isComplete(getBuffer())&&$(input).trigger("complete");}else e.keyCode=Inputmask.keyCode.BACKSPACE,EventHandlers.keydownEvent.call(input,e);e.preventDefault();}},setValueEvent:function(e){this.inputmask.refreshValue=!1;var input=this,value=input.inputmask._valueGet(!0);$.isFunction(opts.onBeforeMask)&&(value=opts.onBeforeMask(value,opts)||value),value=value.split(""),checkVal(input,!0,!1,isRTL?value.reverse():value),undoValue=getBuffer().join(""),(opts.clearMaskOnLostFocus||opts.clearIncomplete)&&input.inputmask._valueGet()===getBufferTemplate().join("")&&input.inputmask._valueSet("");},focusEvent:function(e){var input=this,nptValue=input.inputmask._valueGet();opts.showMaskOnFocus&&(!opts.showMaskOnHover||opts.showMaskOnHover&&""===nptValue)&&(input.inputmask._valueGet()!==getBuffer().join("")?writeBuffer(input,getBuffer(),seekNext(getLastValidPosition())):!1===mouseEnter&&caret(input,seekNext(getLastValidPosition()))),!0===opts.positionCaretOnTab&&!1===mouseEnter&&EventHandlers.clickEvent.apply(input,[e,!0]),undoValue=getBuffer().join("");},mouseleaveEvent:function(e){var input=this;if(mouseEnter=!1,opts.clearMaskOnLostFocus&&document.activeElement!==input){var buffer=getBuffer().slice(),nptValue=input.inputmask._valueGet();nptValue!==input.getAttribute("placeholder")&&""!==nptValue&&(-1===getLastValidPosition()&&nptValue===getBufferTemplate().join("")?buffer=[]:clearOptionalTail(buffer),writeBuffer(input,buffer));}},clickEvent:function(e,tabbed){function doRadixFocus(clickPos){if(""!==opts.radixPoint){var vps=getMaskSet().validPositions;if(vps[clickPos]===undefined||vps[clickPos].input===getPlaceholder(clickPos)){if(clickPos<seekNext(-1))return!0;var radixPos=$.inArray(opts.radixPoint,getBuffer());if(-1!==radixPos){for(var vp in vps)if(radixPos<vp&&vps[vp].input!==getPlaceholder(vp))return!1;return!0;}}}
return!1;}
var input=this;setTimeout(function(){if(document.activeElement===input){var selectedCaret=caret(input);if(tabbed&&(isRTL?selectedCaret.end=selectedCaret.begin:selectedCaret.begin=selectedCaret.end),selectedCaret.begin===selectedCaret.end)switch(opts.positionCaretOnClick){case"none":break;case"radixFocus":if(doRadixFocus(selectedCaret.begin)){var radixPos=getBuffer().join("").indexOf(opts.radixPoint);caret(input,opts.numericInput?seekNext(radixPos):radixPos);break;}
default:var clickPosition=selectedCaret.begin,lvclickPosition=getLastValidPosition(clickPosition,!0),lastPosition=seekNext(lvclickPosition);if(clickPosition<lastPosition)caret(input,isMask(clickPosition)||isMask(clickPosition-1)?clickPosition:seekNext(clickPosition));else{var placeholder=getPlaceholder(lastPosition);(""!==placeholder&&getBuffer()[lastPosition]!==placeholder&&!0!==getTest(lastPosition).match.optionalQuantifier||!isMask(lastPosition)&&getTest(lastPosition).match.def===placeholder)&&(lastPosition=seekNext(lastPosition)),caret(input,lastPosition);}}}},0);},dblclickEvent:function(e){var input=this;setTimeout(function(){caret(input,0,seekNext(getLastValidPosition()));},0);},cutEvent:function(e){var input=this,$input=$(input),pos=caret(input),ev=e.originalEvent||e,clipboardData=window.clipboardData||ev.clipboardData,clipData=isRTL?getBuffer().slice(pos.end,pos.begin):getBuffer().slice(pos.begin,pos.end);clipboardData.setData("text",isRTL?clipData.reverse().join(""):clipData.join("")),document.execCommand&&document.execCommand("copy"),handleRemove(input,Inputmask.keyCode.DELETE,pos),writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join("")),input.inputmask._valueGet()===getBufferTemplate().join("")&&$input.trigger("cleared");},blurEvent:function(e){var $input=$(this),input=this;if(input.inputmask){var nptValue=input.inputmask._valueGet(),buffer=getBuffer().slice();undoValue!==buffer.join("")&&setTimeout(function(){$input.trigger("change"),undoValue=buffer.join("");},0),""!==nptValue&&(opts.clearMaskOnLostFocus&&(-1===getLastValidPosition()&&nptValue===getBufferTemplate().join("")?buffer=[]:clearOptionalTail(buffer)),!1===isComplete(buffer)&&(setTimeout(function(){$input.trigger("incomplete");},0),opts.clearIncomplete&&(resetMaskSet(),buffer=opts.clearMaskOnLostFocus?[]:getBufferTemplate().slice())),writeBuffer(input,buffer,undefined,e));}},mouseenterEvent:function(e){var input=this;mouseEnter=!0,document.activeElement!==input&&opts.showMaskOnHover&&input.inputmask._valueGet()!==getBuffer().join("")&&writeBuffer(input,getBuffer());},submitEvent:function(e){undoValue!==getBuffer().join("")&&$el.trigger("change"),opts.clearMaskOnLostFocus&&-1===getLastValidPosition()&&el.inputmask._valueGet&&el.inputmask._valueGet()===getBufferTemplate().join("")&&el.inputmask._valueSet(""),opts.removeMaskOnSubmit&&(el.inputmask._valueSet(el.inputmask.unmaskedvalue(),!0),setTimeout(function(){writeBuffer(el,getBuffer());},0));},resetEvent:function(e){el.inputmask.refreshValue=!0,setTimeout(function(){$el.trigger("setvalue");},0);}};if(actionObj!==undefined)switch(actionObj.action){case"isComplete":return el=actionObj.el,isComplete(getBuffer());case"unmaskedvalue":return el!==undefined&&actionObj.value===undefined||(valueBuffer=actionObj.value,valueBuffer=($.isFunction(opts.onBeforeMask)?opts.onBeforeMask(valueBuffer,opts)||valueBuffer:valueBuffer).split(""),checkVal(undefined,!1,!1,isRTL?valueBuffer.reverse():valueBuffer),$.isFunction(opts.onBeforeWrite)&&opts.onBeforeWrite(undefined,getBuffer(),0,opts)),unmaskedvalue(el);case"mask":!function(elem){EventRuler.off(elem);var isSupported=function(input,opts){var elementType=input.getAttribute("type"),isSupported="INPUT"===input.tagName&&-1!==$.inArray(elementType,opts.supportsInputType)||input.isContentEditable||"TEXTAREA"===input.tagName;if(!isSupported)if("INPUT"===input.tagName){var el=document.createElement("input");el.setAttribute("type",elementType),isSupported="text"===el.type,el=null;}else isSupported="partial";return!1!==isSupported&&function(npt){function getter(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==getLastValidPosition()||!0!==opts.nullable?document.activeElement===this&&opts.clearMaskOnLostFocus?(isRTL?clearOptionalTail(getBuffer().slice()).reverse():clearOptionalTail(getBuffer().slice())).join(""):valueGet.call(this):"":valueGet.call(this);}
function setter(value){valueSet.call(this,value),this.inputmask&&$(this).trigger("setvalue");}
var valueGet,valueSet;if(!npt.inputmask.__valueGet){if(!0!==opts.noValuePatching){if(Object.getOwnPropertyDescriptor){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(object){return object.__proto__;}:function(object){return object.constructor.prototype;});var valueProperty=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt),"value"):undefined;valueProperty&&valueProperty.get&&valueProperty.set?(valueGet=valueProperty.get,valueSet=valueProperty.set,Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:!0})):"INPUT"!==npt.tagName&&(valueGet=function(){return this.textContent;},valueSet=function(value){this.textContent=value;},Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:!0}));}else document.__lookupGetter__&&npt.__lookupGetter__("value")&&(valueGet=npt.__lookupGetter__("value"),valueSet=npt.__lookupSetter__("value"),npt.__defineGetter__("value",getter),npt.__defineSetter__("value",setter));npt.inputmask.__valueGet=valueGet,npt.inputmask.__valueSet=valueSet;}
npt.inputmask._valueGet=function(overruleRTL){return isRTL&&!0!==overruleRTL?valueGet.call(this.el).split("").reverse().join(""):valueGet.call(this.el);},npt.inputmask._valueSet=function(value,overruleRTL){valueSet.call(this.el,null===value||value===undefined?"":!0!==overruleRTL&&isRTL?value.split("").reverse().join(""):value);},valueGet===undefined&&(valueGet=function(){return this.value;},valueSet=function(value){this.value=value;},function(type){if($.valHooks&&($.valHooks[type]===undefined||!0!==$.valHooks[type].inputmaskpatch)){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value;},valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){return elem.value=value,elem;};$.valHooks[type]={get:function(elem){if(elem.inputmask){if(elem.inputmask.opts.autoUnmask)return elem.inputmask.unmaskedvalue();var result=valhookGet(elem);return-1!==getLastValidPosition(undefined,undefined,elem.inputmask.maskset.validPositions)||!0!==opts.nullable?result:"";}
return valhookGet(elem);},set:function(elem,value){var result,$elem=$(elem);return result=valhookSet(elem,value),elem.inputmask&&$elem.trigger("setvalue"),result;},inputmaskpatch:!0};}}(npt.type),function(npt){EventRuler.on(npt,"mouseenter",function(event){var $input=$(this);this.inputmask._valueGet()!==getBuffer().join("")&&$input.trigger("setvalue");});}(npt));}}(input),isSupported;}(elem,opts);if(!1!==isSupported&&(el=elem,$el=$(el),("rtl"===el.dir||opts.rightAlign)&&(el.style.textAlign="right"),("rtl"===el.dir||opts.numericInput)&&(el.dir="ltr",el.removeAttribute("dir"),el.inputmask.isRTL=!0,isRTL=!0),!0===opts.colorMask&&initializeColorMask(el),android&&(el.hasOwnProperty("inputmode")&&(el.inputmode=opts.inputmode,el.setAttribute("inputmode",opts.inputmode)),"rtfm"===opts.androidHack&&(!0!==opts.colorMask&&initializeColorMask(el),el.type="password")),!0===isSupported&&(EventRuler.on(el,"submit",EventHandlers.submitEvent),EventRuler.on(el,"reset",EventHandlers.resetEvent),EventRuler.on(el,"mouseenter",EventHandlers.mouseenterEvent),EventRuler.on(el,"blur",EventHandlers.blurEvent),EventRuler.on(el,"focus",EventHandlers.focusEvent),EventRuler.on(el,"mouseleave",EventHandlers.mouseleaveEvent),!0!==opts.colorMask&&EventRuler.on(el,"click",EventHandlers.clickEvent),EventRuler.on(el,"dblclick",EventHandlers.dblclickEvent),EventRuler.on(el,"paste",EventHandlers.pasteEvent),EventRuler.on(el,"dragdrop",EventHandlers.pasteEvent),EventRuler.on(el,"drop",EventHandlers.pasteEvent),EventRuler.on(el,"cut",EventHandlers.cutEvent),EventRuler.on(el,"complete",opts.oncomplete),EventRuler.on(el,"incomplete",opts.onincomplete),EventRuler.on(el,"cleared",opts.oncleared),android||!0===opts.inputEventOnly||(EventRuler.on(el,"keydown",EventHandlers.keydownEvent),EventRuler.on(el,"keypress",EventHandlers.keypressEvent)),EventRuler.on(el,"compositionstart",$.noop),EventRuler.on(el,"compositionupdate",$.noop),EventRuler.on(el,"compositionend",$.noop),EventRuler.on(el,"keyup",$.noop),EventRuler.on(el,"input",EventHandlers.inputFallBackEvent),EventRuler.on(el,"beforeinput",$.noop)),EventRuler.on(el,"setvalue",EventHandlers.setValueEvent),getBufferTemplate(),""!==el.inputmask._valueGet(!0)||!1===opts.clearMaskOnLostFocus||document.activeElement===el)){var initialValue=$.isFunction(opts.onBeforeMask)?opts.onBeforeMask(el.inputmask._valueGet(!0),opts)||el.inputmask._valueGet(!0):el.inputmask._valueGet(!0);""!==initialValue&&checkVal(el,!0,!1,isRTL?initialValue.split("").reverse():initialValue.split(""));var buffer=getBuffer().slice();undoValue=buffer.join(""),!1===isComplete(buffer)&&opts.clearIncomplete&&resetMaskSet(),opts.clearMaskOnLostFocus&&document.activeElement!==el&&(-1===getLastValidPosition()?buffer=[]:clearOptionalTail(buffer)),writeBuffer(el,buffer),document.activeElement===el&&caret(el,seekNext(getLastValidPosition()));}}(el);break;case"format":return valueBuffer=($.isFunction(opts.onBeforeMask)?opts.onBeforeMask(actionObj.value,opts)||actionObj.value:actionObj.value).split(""),checkVal(undefined,!0,!1,isRTL?valueBuffer.reverse():valueBuffer),actionObj.metadata?{value:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join(""),metadata:maskScope.call(this,{action:"getmetadata"},maskset,opts)}:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join("");case"isValid":actionObj.value?(valueBuffer=actionObj.value.split(""),checkVal(undefined,!0,!0,isRTL?valueBuffer.reverse():valueBuffer)):actionObj.value=getBuffer().join("");for(var buffer=getBuffer(),rl=determineLastRequiredPosition(),lmib=buffer.length-1;lmib>rl&&!isMask(lmib);lmib--);return buffer.splice(rl,lmib+1-rl),isComplete(buffer)&&actionObj.value===getBuffer().join("");case"getemptymask":return getBufferTemplate().join("");case"remove":if(el&&el.inputmask){$el=$(el),el.inputmask._valueSet(opts.autoUnmask?unmaskedvalue(el):el.inputmask._valueGet(!0)),EventRuler.off(el);Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(el),"value")&&el.inputmask.__valueGet&&Object.defineProperty(el,"value",{get:el.inputmask.__valueGet,set:el.inputmask.__valueSet,configurable:!0}):document.__lookupGetter__&&el.__lookupGetter__("value")&&el.inputmask.__valueGet&&(el.__defineGetter__("value",el.inputmask.__valueGet),el.__defineSetter__("value",el.inputmask.__valueSet)),el.inputmask=undefined;}
return el;case"getmetadata":if($.isArray(maskset.metadata)){var maskTarget=getMaskTemplate(!0,0,!1).join("");return $.each(maskset.metadata,function(ndx,mtdt){if(mtdt.mask===maskTarget)return maskTarget=mtdt,!1;}),maskTarget;}
return maskset.metadata;}}
var ua=navigator.userAgent,mobile=/mobile/i.test(ua),iemobile=/iemobile/i.test(ua),iphone=/iphone/i.test(ua)&&!iemobile,android=/android/i.test(ua)&&!iemobile;return Inputmask.prototype={dataAttribute:"data-inputmask",defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,alias:null,onKeyDown:$.noop,onBeforeMask:null,onBeforePaste:function(pastedValue,opts){return $.isFunction(opts.onBeforeMask)?opts.onBeforeMask(pastedValue,opts):pastedValue;},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixPointDefinitionSymbol:undefined,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","password"],ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123,0,229],isComplete:null,canClearPosition:$.noop,preValidation:null,postValidation:null,staticDefinitionSymbol:undefined,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"verbatim",colorMask:!1,androidHack:!1},definitions:{"9":{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,definitionSymbol:"*"},"*":{validator:function(){return!0;},cardinality:1}},aliases:{},masksCache:{},mask:function(elems){function importAttributeOptions(npt,opts,userOptions,dataAttribute){function importOption(option,optionData){null!==(optionData=optionData!==undefined?optionData:npt.getAttribute(dataAttribute+"-"+option))&&("string"==typeof optionData&&(0===option.indexOf("on")?optionData=window[optionData]:"false"===optionData?optionData=!1:"true"===optionData&&(optionData=!0)),userOptions[option]=optionData);}
var option,dataoptions,optionData,p,attrOptions=npt.getAttribute(dataAttribute);if(attrOptions&&""!==attrOptions&&(attrOptions=attrOptions.replace(new RegExp("'","g"),'"'),dataoptions=JSON.parse("{"+attrOptions+"}")),dataoptions){optionData=undefined;for(p in dataoptions)if("alias"===p.toLowerCase()){optionData=dataoptions[p];break;}}
importOption("alias",optionData),userOptions.alias&&resolveAlias(userOptions.alias,userOptions,opts);for(option in opts){if(dataoptions){optionData=undefined;for(p in dataoptions)if(p.toLowerCase()===option.toLowerCase()){optionData=dataoptions[p];break;}}
importOption(option,optionData);}
return $.extend(!0,opts,userOptions),opts;}
var that=this;return"string"==typeof elems&&(elems=document.getElementById(elems)||document.querySelectorAll(elems)),elems=elems.nodeName?[elems]:elems,$.each(elems,function(ndx,el){var scopedOpts=$.extend(!0,{},that.opts);importAttributeOptions(el,scopedOpts,$.extend(!0,{},that.userOptions),that.dataAttribute);var maskset=generateMaskSet(scopedOpts,that.noMasksCache);maskset!==undefined&&(el.inputmask!==undefined&&el.inputmask.remove(),el.inputmask=new Inputmask(undefined,undefined,!0),el.inputmask.opts=scopedOpts,el.inputmask.noMasksCache=that.noMasksCache,el.inputmask.userOptions=$.extend(!0,{},that.userOptions),el.inputmask.isRTL=that.isRTL,el.inputmask.el=el,el.inputmask.maskset=maskset,$.data(el,"_inputmask_opts",scopedOpts),maskScope.call(el.inputmask,{action:"mask"}));}),elems&&elems[0]?elems[0].inputmask||this:this;},option:function(options,noremask){return"string"==typeof options?this.opts[options]:"object"==typeof options?($.extend(this.userOptions,options),this.el&&!0!==noremask&&this.mask(this.el),this):void 0;},unmaskedvalue:function(value){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"unmaskedvalue",value:value});},remove:function(){return maskScope.call(this,{action:"remove"});},getemptymask:function(){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"getemptymask"});},hasMaskedValue:function(){return!this.opts.autoUnmask;},isComplete:function(){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"isComplete"});},getmetadata:function(){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"getmetadata"});},isValid:function(value){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"isValid",value:value});},format:function(value,metadata){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"format",value:value,metadata:metadata});},analyseMask:function(mask,regexMask,opts){function MaskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[],this.openGroup=isGroup||!1,this.alternatorGroup=!1,this.isGroup=isGroup||!1,this.isOptional=isOptional||!1,this.isQuantifier=isQuantifier||!1,this.isAlternator=isAlternator||!1,this.quantifier={min:1,max:1};}
function insertTestDefinition(mtoken,element,position){if(position=position!==undefined?position:mtoken.matches.length,regexMask)0===element.indexOf("[")||escaped?mtoken.matches.splice(position++,0,{fn:new RegExp(element,opts.casing?"i":""),cardinality:0,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==element,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:opts.staticDefinitionSymbol!==undefined?element:undefined,nativeDef:element}):mtoken.matches.splice(position++,0,{fn:null,cardinality:0,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==element,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:opts.staticDefinitionSymbol!==undefined?element:undefined,nativeDef:element}),escaped=!1;else{var maskdef=(opts.definitions?opts.definitions[element]:undefined)||Inputmask.prototype.definitions[element],prevMatch=mtoken.matches[position-1];if(maskdef&&!escaped){for(var prevalidators=maskdef.prevalidator,prevalidatorsL=prevalidators?prevalidators.length:0,i=1;i<maskdef.cardinality;i++){var prevalidator=prevalidatorsL>=i?prevalidators[i-1]:[],validator=prevalidator.validator,cardinality=prevalidator.cardinality;mtoken.matches.splice(position++,0,{fn:validator?"string"==typeof validator?new RegExp(validator,opts.casing?"i":""):new function(){this.test=validator;}():new RegExp("."),cardinality:cardinality||1,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,nativeDef:element}),prevMatch=mtoken.matches[position-1];}
mtoken.matches.splice(position++,0,{fn:maskdef.validator?"string"==typeof maskdef.validator?new RegExp(maskdef.validator,opts.casing?"i":""):new function(){this.test=maskdef.validator;}():new RegExp("."),cardinality:maskdef.cardinality,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,nativeDef:element});}else mtoken.matches.splice(position++,0,{fn:null,cardinality:0,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==element,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:opts.staticDefinitionSymbol!==undefined?element:undefined,nativeDef:element}),escaped=!1;}}
function verifyGroupMarker(maskToken){maskToken&&maskToken.matches&&$.each(maskToken.matches,function(ndx,token){var nextToken=maskToken.matches[ndx+1];(nextToken===undefined||nextToken.matches===undefined||!1===nextToken.isQuantifier)&&token&&token.isGroup&&(token.isGroup=!1,regexMask||(insertTestDefinition(token,opts.groupmarker.start,0),!0!==token.openGroup&&insertTestDefinition(token,opts.groupmarker.end))),verifyGroupMarker(token);});}
function defaultCase(){if(openenings.length>0){if(currentOpeningToken=openenings[openenings.length-1],insertTestDefinition(currentOpeningToken,m),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup=!1;openenings.length>0?(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(alternator)):currentToken.matches.push(alternator);}}else insertTestDefinition(currentToken,m);}
function reverseTokens(maskToken){maskToken.matches=maskToken.matches.reverse();for(var match in maskToken.matches)if(maskToken.matches.hasOwnProperty(match)){var intMatch=parseInt(match);if(maskToken.matches[match].isQuantifier&&maskToken.matches[intMatch+1]&&maskToken.matches[intMatch+1].isGroup){var qt=maskToken.matches[match];maskToken.matches.splice(match,1),maskToken.matches.splice(intMatch+1,0,qt);}
maskToken.matches[match].matches!==undefined?maskToken.matches[match]=reverseTokens(maskToken.matches[match]):maskToken.matches[match]=function(st){return st===opts.optionalmarker.start?st=opts.optionalmarker.end:st===opts.optionalmarker.end?st=opts.optionalmarker.start:st===opts.groupmarker.start?st=opts.groupmarker.end:st===opts.groupmarker.end&&(st=opts.groupmarker.start),st;}(maskToken.matches[match]);}
return maskToken;}
var match,m,openingToken,currentOpeningToken,alternator,lastMatch,groupToken,tokenizer=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,regexTokenizer=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,escaped=!1,currentToken=new MaskToken(),openenings=[],maskTokens=[];for(regexMask&&(opts.optionalmarker.start=undefined,opts.optionalmarker.end=undefined);match=regexMask?regexTokenizer.exec(mask):tokenizer.exec(mask);){if(m=match[0],regexMask)switch(m.charAt(0)){case"?":m="{+}";break;case"+":case"*":m="{"+m+"}";}
if(escaped)defaultCase();else switch(m.charAt(0)){case opts.escapeChar:escaped=!0,regexMask&&defaultCase();break;case opts.optionalmarker.end:case opts.groupmarker.end:if(openingToken=openenings.pop(),openingToken.openGroup=!1,openingToken!==undefined)if(openenings.length>0){if(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(openingToken),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup=!1,alternator.matches[mndx].alternatorGroup=!1;openenings.length>0?(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(alternator)):currentToken.matches.push(alternator);}}else currentToken.matches.push(openingToken);else defaultCase();break;case opts.optionalmarker.start:openenings.push(new MaskToken(!1,!0));break;case opts.groupmarker.start:openenings.push(new MaskToken(!0));break;case opts.quantifiermarker.start:var quantifier=new MaskToken(!1,!1,!0);m=m.replace(/[{}]/g,"");var mq=m.split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=1===mq.length?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);if("*"!==mq1&&"+"!==mq1||(mq0="*"===mq1?0:1),quantifier.quantifier={min:mq0,max:mq1},openenings.length>0){var matches=openenings[openenings.length-1].matches;match=matches.pop(),match.isGroup||(groupToken=new MaskToken(!0),groupToken.matches.push(match),match=groupToken),matches.push(match),matches.push(quantifier);}else match=currentToken.matches.pop(),match.isGroup||(groupToken=new MaskToken(!0),groupToken.matches.push(match),match=groupToken),currentToken.matches.push(match),currentToken.matches.push(quantifier);break;case opts.alternatormarker:if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];var subToken=currentOpeningToken.matches[currentOpeningToken.matches.length-1];lastMatch=currentOpeningToken.openGroup&&(subToken.matches===undefined||!1===subToken.isGroup&&!1===subToken.isAlternator)?openenings.pop():currentOpeningToken.matches.pop();}else lastMatch=currentToken.matches.pop();if(lastMatch.isAlternator)openenings.push(lastMatch);else if(lastMatch.alternatorGroup?(alternator=openenings.pop(),lastMatch.alternatorGroup=!1):alternator=new MaskToken(!1,!1,!1,!0),alternator.matches.push(lastMatch),openenings.push(alternator),lastMatch.openGroup){lastMatch.openGroup=!1;var alternatorGroup=new MaskToken(!0);alternatorGroup.alternatorGroup=!0,openenings.push(alternatorGroup);}
break;default:defaultCase();}}
for(;openenings.length>0;)openingToken=openenings.pop(),currentToken.matches.push(openingToken);return currentToken.matches.length>0&&(verifyGroupMarker(currentToken),maskTokens.push(currentToken)),opts.numericInput&&reverseTokens(maskTokens[0]),maskTokens;}},Inputmask.extendDefaults=function(options){$.extend(!0,Inputmask.prototype.defaults,options);},Inputmask.extendDefinitions=function(definition){$.extend(!0,Inputmask.prototype.definitions,definition);},Inputmask.extendAliases=function(alias){$.extend(!0,Inputmask.prototype.aliases,alias);},Inputmask.format=function(value,options,metadata){return Inputmask(options).format(value,metadata);},Inputmask.unmask=function(value,options){return Inputmask(options).unmaskedvalue(value);},Inputmask.isValid=function(value,options){return Inputmask(options).isValid(value);},Inputmask.remove=function(elems){$.each(elems,function(ndx,el){el.inputmask&&el.inputmask.remove();});},Inputmask.escapeRegex=function(str){var specials=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return str.replace(new RegExp("(\\"+specials.join("|\\")+")","gim"),"\\$1");},Inputmask.keyCode={ALT:18,BACKSPACE:8,BACKSPACE_SAFARI:127,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91,X:88},Inputmask;}(window.dependencyLib||jQuery,window,document);}(),function(factory){!function($,Inputmask){void 0===$.fn.inputmask&&($.fn.inputmask=function(fn,options){var nptmask,input=this[0];if(void 0===options&&(options={}),"string"==typeof fn)switch(fn){case"unmaskedvalue":return input&&input.inputmask?input.inputmask.unmaskedvalue():$(input).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove();});case"getemptymask":return input&&input.inputmask?input.inputmask.getemptymask():"";case"hasMaskedValue":return!(!input||!input.inputmask)&&input.inputmask.hasMaskedValue();case"isComplete":return!input||!input.inputmask||input.inputmask.isComplete();case"getmetadata":return input&&input.inputmask?input.inputmask.getmetadata():void 0;case"setvalue":$(input).val(options),input&&void 0===input.inputmask&&$(input).triggerHandler("setvalue");break;case"option":if("string"!=typeof options)return this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(options);});if(input&&void 0!==input.inputmask)return input.inputmask.option(options);break;default:return options.alias=fn,nptmask=new Inputmask(options),this.each(function(){nptmask.mask(this);});}else{if("object"==typeof fn)return nptmask=new Inputmask(fn),void 0===fn.mask&&void 0===fn.alias?this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(fn);nptmask.mask(this);}):this.each(function(){nptmask.mask(this);});if(void 0===fn)return this.each(function(){nptmask=new Inputmask(options),nptmask.mask(this);});}}),$.fn.inputmask;}(jQuery,window.Inputmask);}(),function(factory){!function($,Inputmask){function isLeapYear(year){return isNaN(year)||29===new Date(year,2,0).getDate();}
Inputmask.extendAliases({"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+escapedSeparator+"[01])");},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|[12][0-9])"+escapedSeparator+"(0[1-9]|1[012]))|(30"+escapedSeparator+"(0[13-9]|1[012]))|(31"+escapedSeparator+"(0[13578]|1[02]))");}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(chrs,minyear,maxyear){if(isNaN(chrs))return!1;var enteredyear=parseInt(chrs.concat(minyear.toString().slice(chrs.length))),enteredyear2=parseInt(chrs.concat(maxyear.toString().slice(chrs.length)));return!isNaN(enteredyear)&&(minyear<=enteredyear&&enteredyear<=maxyear)||!isNaN(enteredyear2)&&(minyear<=enteredyear2&&enteredyear2<=maxyear);},determinebaseyear:function(minyear,maxyear,hint){var currentyear=new Date().getFullYear();if(minyear>currentyear)return minyear;if(maxyear<currentyear){for(var maxYearPrefix=maxyear.toString().slice(0,2),maxYearPostfix=maxyear.toString().slice(2,4);maxyear<maxYearPrefix+hint;)maxYearPrefix--;var maxxYear=maxYearPrefix+maxYearPostfix;return minyear>maxxYear?minyear:maxxYear;}
if(minyear<=currentyear&&currentyear<=maxyear){for(var currentYearPrefix=currentyear.toString().slice(0,2);maxyear<currentYearPrefix+hint;)currentYearPrefix--;var currentYearAndHint=currentYearPrefix+hint;return currentYearAndHint<minyear?minyear:currentYearAndHint;}
return currentyear;},onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date();$input.val(today.getDate().toString()+(today.getMonth()+1).toString()+today.getFullYear().toString()),$input.trigger("setvalue");}},getFrontValue:function(mask,buffer,opts){for(var start=0,length=0,i=0;i<mask.length&&"2"!==mask.charAt(i);i++){var definition=opts.definitions[mask.charAt(i)];definition?(start+=length,length=definition.cardinality):length++;}
return buffer.join("").substr(start,length);},postValidation:function(buffer,currentResult,opts){var dayMonthValue,year,bufferStr=buffer.join("");return 0===opts.mask.indexOf("y")?(year=bufferStr.substr(0,4),dayMonthValue=bufferStr.substring(4,10)):(year=bufferStr.substring(6,10),dayMonthValue=bufferStr.substr(0,6)),currentResult&&(dayMonthValue!==opts.leapday||isLeapYear(year));},definitions:{"1":{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.val1.test(chrs);return strict||isValid||chrs.charAt(1)!==opts.separator&&-1==="-./".indexOf(chrs.charAt(1))||!(isValid=opts.regex.val1.test("0"+chrs.charAt(0)))?isValid:(maskset.buffer[pos-1]="0",{refreshFromBuffer:{start:pos-1,end:pos},pos:pos,c:chrs.charAt(0)});},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var pchrs=chrs;isNaN(maskset.buffer[pos+1])||(pchrs+=maskset.buffer[pos+1]);var isValid=1===pchrs.length?opts.regex.val1pre.test(pchrs):opts.regex.val1.test(pchrs);if(!strict&&!isValid){if(isValid=opts.regex.val1.test(chrs+"0"))return maskset.buffer[pos]=chrs,maskset.buffer[++pos]="0",{pos:pos,c:"0"};if(isValid=opts.regex.val1.test("0"+chrs))return maskset.buffer[pos]="0",pos++,{pos:pos};}
return isValid;},cardinality:1}]},"2":{validator:function(chrs,maskset,pos,strict,opts){var frontValue=opts.getFrontValue(maskset.mask,maskset.buffer,opts);-1!==frontValue.indexOf(opts.placeholder[0])&&(frontValue="01"+opts.separator);var isValid=opts.regex.val2(opts.separator).test(frontValue+chrs);return strict||isValid||chrs.charAt(1)!==opts.separator&&-1==="-./".indexOf(chrs.charAt(1))||!(isValid=opts.regex.val2(opts.separator).test(frontValue+"0"+chrs.charAt(0)))?isValid:(maskset.buffer[pos-1]="0",{refreshFromBuffer:{start:pos-1,end:pos},pos:pos,c:chrs.charAt(0)});},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){isNaN(maskset.buffer[pos+1])||(chrs+=maskset.buffer[pos+1]);var frontValue=opts.getFrontValue(maskset.mask,maskset.buffer,opts);-1!==frontValue.indexOf(opts.placeholder[0])&&(frontValue="01"+opts.separator);var isValid=1===chrs.length?opts.regex.val2pre(opts.separator).test(frontValue+chrs):opts.regex.val2(opts.separator).test(frontValue+chrs);return strict||isValid||!(isValid=opts.regex.val2(opts.separator).test(frontValue+"0"+chrs))?isValid:(maskset.buffer[pos]="0",pos++,{pos:pos});},cardinality:1}]},y:{validator:function(chrs,maskset,pos,strict,opts){return opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear);},cardinality:4,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear);if(!strict&&!isValid){var yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs+"0").toString().slice(0,1);if(isValid=opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(0),{pos:pos};if(yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs+"0").toString().slice(0,2),isValid=opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(0),maskset.buffer[pos++]=yearPrefix.charAt(1),{pos:pos};}
return isValid;},cardinality:1},{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear);if(!strict&&!isValid){var yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs).toString().slice(0,2);if(isValid=opts.isInYearRange(chrs[0]+yearPrefix[1]+chrs[1],opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos++]=yearPrefix.charAt(1),{pos:pos};if(yearPrefix=opts.determinebaseyear(opts.yearrange.minyear,opts.yearrange.maxyear,chrs).toString().slice(0,2),isValid=opts.isInYearRange(yearPrefix+chrs,opts.yearrange.minyear,opts.yearrange.maxyear))return maskset.buffer[pos-1]=yearPrefix.charAt(0),maskset.buffer[pos++]=yearPrefix.charAt(1),maskset.buffer[pos++]=chrs.charAt(0),{refreshFromBuffer:{start:pos-3,end:pos},pos:pos};}
return isValid;},cardinality:2},{validator:function(chrs,maskset,pos,strict,opts){return opts.isInYearRange(chrs,opts.yearrange.minyear,opts.yearrange.maxyear);},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[13-9]|1[012])"+escapedSeparator+"[0-3])|(02"+escapedSeparator+"[0-2])");},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+escapedSeparator+"30)|((0[13578]|1[02])"+escapedSeparator+"31)");},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date();$input.val((today.getMonth()+1).toString()+today.getDate().toString()+today.getFullYear().toString()),$input.trigger("setvalue");}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date();$input.val(today.getFullYear().toString()+(today.getMonth()+1).toString()+today.getDate().toString()),$input.trigger("setvalue");}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(chrs,maskset,pos,strict,opts){if("24"===opts.hourFormat&&24===parseInt(chrs,10))return maskset.buffer[pos-1]="0",maskset.buffer[pos]="0",{refreshFromBuffer:{start:pos-1,end:pos},c:"0"};var isValid=opts.regex.hrs.test(chrs);if(!strict&&!isValid&&(chrs.charAt(1)===opts.timeseparator||-1!=="-.:".indexOf(chrs.charAt(1)))&&(isValid=opts.regex.hrs.test("0"+chrs.charAt(0))))return maskset.buffer[pos-1]="0",maskset.buffer[pos]=chrs.charAt(0),pos++,{refreshFromBuffer:{start:pos-2,end:pos},pos:pos,c:opts.timeseparator};if(isValid&&"24"!==opts.hourFormat&&opts.regex.hrs24.test(chrs)){var tmp=parseInt(chrs,10);return 24===tmp?(maskset.buffer[pos+5]="a",maskset.buffer[pos+6]="m"):(maskset.buffer[pos+5]="p",maskset.buffer[pos+6]="m"),tmp-=12,tmp<10?(maskset.buffer[pos]=tmp.toString(),maskset.buffer[pos-1]="0"):(maskset.buffer[pos]=tmp.toString().charAt(1),maskset.buffer[pos-1]=tmp.toString().charAt(0)),{refreshFromBuffer:{start:pos-1,end:pos+6},c:maskset.buffer[pos]};}
return isValid;},cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.hrspre.test(chrs);return strict||isValid||!(isValid=opts.regex.hrs.test("0"+chrs))?isValid:(maskset.buffer[pos]="0",pos++,{pos:pos});},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(chrs,maskset,pos,strict,opts){var isValid=opts.regex.mspre.test(chrs);return strict||isValid||!(isValid=opts.regex.ms.test("0"+chrs))?isValid:(maskset.buffer[pos]="0",pos++,{pos:pos});},cardinality:1}]},t:{validator:function(chrs,maskset,pos,strict,opts){return opts.regex.ampm.test(chrs+"m");},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"mm/dd/yyyy hh:mm xm":{mask:"1/2/y h:s t\\m",placeholder:"mm/dd/yyyy hh:mm xm",alias:"datetime12",regex:{val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[13-9]|1[012])"+escapedSeparator+"[0-3])|(02"+escapedSeparator+"[0-2])");},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+escapedSeparator+"30)|((0[13578]|1[02])"+escapedSeparator+"31)");},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey&&e.keyCode===Inputmask.keyCode.RIGHT){var today=new Date();$input.val((today.getMonth()+1).toString()+today.getDate().toString()+today.getFullYear().toString()),$input.trigger("setvalue");}}},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"},shamsi:{regex:{val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"[0-3])");},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"(0[1-9]|[12][0-9]))|((0[1-9]|1[012])"+escapedSeparator+"30)|((0[1-6])"+escapedSeparator+"31)");},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},yearrange:{minyear:1300,maxyear:1499},mask:"y/1/2",leapday:"/12/30",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",clearIncomplete:!0},"yyyy-mm-dd hh:mm:ss":{mask:"y-1-2 h:s:s",placeholder:"yyyy-mm-dd hh:mm:ss",alias:"datetime",separator:"-",leapday:"-02-29",regex:{val2pre:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[13-9]|1[012])"+escapedSeparator+"[0-3])|(02"+escapedSeparator+"[0-2])");},val2:function(separator){var escapedSeparator=Inputmask.escapeRegex.call(this,separator);return new RegExp("((0[1-9]|1[012])"+escapedSeparator+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+escapedSeparator+"30)|((0[13578]|1[02])"+escapedSeparator+"31)");},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},onKeyDown:function(e,buffer,caretPos,opts){}}});}(window.dependencyLib||jQuery,window.Inputmask);}(),function(factory){!function($,Inputmask){Inputmask.extendDefinitions({A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"},"&":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Fa-f]",cardinality:1,casing:"upper"}}),Inputmask.extendAliases({url:{definitions:{i:{validator:".",cardinality:1}},mask:"(\\http://)|(\\http\\s://)|(ftp://)|(ftp\\s://)i{+}",insertMode:!1,autoUnmask:!1,inputmode:"url"},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(chrs,maskset,pos,strict,opts){return pos-1>-1&&"."!==maskset.buffer[pos-1]?(chrs=maskset.buffer[pos-1]+chrs,chrs=pos-2>-1&&"."!==maskset.buffer[pos-2]?maskset.buffer[pos-2]+chrs:"0"+chrs):chrs="00"+chrs,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(chrs);},cardinality:1}},onUnMask:function(maskedValue,unmaskedValue,opts){return maskedValue;},inputmode:"numeric"},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:!1,onBeforePaste:function(pastedValue,opts){return pastedValue=pastedValue.toLowerCase(),pastedValue.replace("mailto:","");},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"},"-":{validator:"[0-9A-Za-z-]",cardinality:1,casing:"lower"}},onUnMask:function(maskedValue,unmaskedValue,opts){return maskedValue;},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",cardinality:1,casing:"upper"}},clearIncomplete:!0,autoUnmask:!0}});}(window.dependencyLib||jQuery,window.Inputmask);}(),function(factory){!function($,Inputmask,undefined){function autoEscape(txt,opts){for(var escapedTxt="",i=0;i<txt.length;i++)Inputmask.prototype.definitions[txt.charAt(i)]||opts.definitions[txt.charAt(i)]||opts.optionalmarker.start===txt.charAt(i)||opts.optionalmarker.end===txt.charAt(i)||opts.quantifiermarker.start===txt.charAt(i)||opts.quantifiermarker.end===txt.charAt(i)||opts.groupmarker.start===txt.charAt(i)||opts.groupmarker.end===txt.charAt(i)||opts.alternatormarker===txt.charAt(i)?escapedTxt+="\\"+txt.charAt(i):escapedTxt+=txt.charAt(i);return escapedTxt;}
Inputmask.extendAliases({numeric:{mask:function(opts){if(0!==opts.repeat&&isNaN(opts.integerDigits)&&(opts.integerDigits=opts.repeat),opts.repeat=0,opts.groupSeparator===opts.radixPoint&&("."===opts.radixPoint?opts.groupSeparator=",":","===opts.radixPoint?opts.groupSeparator=".":opts.groupSeparator="")," "===opts.groupSeparator&&(opts.skipOptionalPartCharacter=undefined),opts.autoGroup=opts.autoGroup&&""!==opts.groupSeparator,opts.autoGroup&&("string"==typeof opts.groupSize&&isFinite(opts.groupSize)&&(opts.groupSize=parseInt(opts.groupSize)),isFinite(opts.integerDigits))){var seps=Math.floor(opts.integerDigits/opts.groupSize),mod=opts.integerDigits%opts.groupSize;opts.integerDigits=parseInt(opts.integerDigits)+(0===mod?seps-1:seps),opts.integerDigits<1&&(opts.integerDigits="*");}
opts.placeholder.length>1&&(opts.placeholder=opts.placeholder.charAt(0)),"radixFocus"===opts.positionCaretOnClick&&""===opts.placeholder&&!1===opts.integerOptional&&(opts.positionCaretOnClick="lvp"),opts.definitions[";"]=opts.definitions["~"],opts.definitions[";"].definitionSymbol="~",!0===opts.numericInput&&(opts.positionCaretOnClick="radixFocus"===opts.positionCaretOnClick?"lvp":opts.positionCaretOnClick,opts.digitsOptional=!1,isNaN(opts.digits)&&(opts.digits=2),opts.decimalProtect=!1);var mask="[+]";if(mask+=autoEscape(opts.prefix,opts),!0===opts.integerOptional?mask+="~{1,"+opts.integerDigits+"}":mask+="~{"+opts.integerDigits+"}",opts.digits!==undefined){opts.radixPointDefinitionSymbol=opts.decimalProtect?":":opts.radixPoint;var dq=opts.digits.toString().split(",");isFinite(dq[0]&&dq[1]&&isFinite(dq[1]))?mask+=opts.radixPointDefinitionSymbol+";{"+opts.digits+"}":(isNaN(opts.digits)||parseInt(opts.digits)>0)&&(opts.digitsOptional?mask+="["+opts.radixPointDefinitionSymbol+";{1,"+opts.digits+"}]":mask+=opts.radixPointDefinitionSymbol+";{"+opts.digits+"}");}
return mask+=autoEscape(opts.suffix,opts),mask+="[-]",opts.greedy=!1,mask;},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,radixPoint:".",positionCaretOnClick:"radixFocus",groupSize:3,groupSeparator:"",autoGroup:!1,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,inputmode:"numeric",preValidation:function(buffer,pos,c,isSelection,opts){if("-"===c||c==opts.negationSymbol.front)return!0===opts.allowMinus&&(opts.isNegative=opts.isNegative===undefined||!opts.isNegative,""===buffer.join("")||{caret:pos,dopost:!0});if(!1===isSelection&&c===opts.radixPoint&&opts.digits!==undefined&&(isNaN(opts.digits)||parseInt(opts.digits)>0)){var radixPos=$.inArray(opts.radixPoint,buffer);if(-1!==radixPos)return!0===opts.numericInput?pos===radixPos:{caret:radixPos+1};}
return!0;},postValidation:function(buffer,currentResult,opts){var suffix=opts.suffix.split(""),prefix=opts.prefix.split("");if(currentResult.pos==undefined&&currentResult.caret!==undefined&&!0!==currentResult.dopost)return currentResult;var caretPos=currentResult.caret!=undefined?currentResult.caret:currentResult.pos,maskedValue=buffer.slice();opts.numericInput&&(caretPos=maskedValue.length-caretPos-1,maskedValue=maskedValue.reverse());var charAtPos=maskedValue[caretPos];if(charAtPos===opts.groupSeparator&&(caretPos+=1,charAtPos=maskedValue[caretPos]),caretPos==maskedValue.length-opts.suffix.length-1&&charAtPos===opts.radixPoint)return currentResult;charAtPos!==undefined&&charAtPos!==opts.radixPoint&&charAtPos!==opts.negationSymbol.front&&charAtPos!==opts.negationSymbol.back&&(maskedValue[caretPos]="?",opts.prefix.length>0&&caretPos>=(!1===opts.isNegative?1:0)&&caretPos<opts.prefix.length-1+(!1===opts.isNegative?1:0)?prefix[caretPos-(!1===opts.isNegative?1:0)]="?":opts.suffix.length>0&&caretPos>=maskedValue.length-opts.suffix.length-(!1===opts.isNegative?1:0)&&(suffix[caretPos-(maskedValue.length-opts.suffix.length-(!1===opts.isNegative?1:0))]="?")),prefix=prefix.join(""),suffix=suffix.join("");var processValue=maskedValue.join("").replace(prefix,"");if(processValue=processValue.replace(suffix,""),processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),processValue=processValue.replace(new RegExp("[-"+Inputmask.escapeRegex(opts.negationSymbol.front)+"]","g"),""),processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),""),isNaN(opts.placeholder)&&(processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.placeholder),"g"),"")),processValue.length>1&&1!==processValue.indexOf(opts.radixPoint)&&("0"==charAtPos&&(processValue=processValue.replace(/^\?/g,"")),processValue=processValue.replace(/^0/g,"")),processValue.charAt(0)===opts.radixPoint&&!0!==opts.numericInput&&(processValue="0"+processValue),""!==processValue){if(processValue=processValue.split(""),!opts.digitsOptional&&isFinite(opts.digits)){var radixPosition=$.inArray(opts.radixPoint,processValue),rpb=$.inArray(opts.radixPoint,maskedValue);-1===radixPosition&&(processValue.push(opts.radixPoint),radixPosition=processValue.length-1);for(var i=1;i<=opts.digits;i++)opts.digitsOptional||processValue[radixPosition+i]!==undefined&&processValue[radixPosition+i]!==opts.placeholder.charAt(0)?-1!==rpb&&maskedValue[rpb+i]!==undefined&&(processValue[radixPosition+i]=processValue[radixPosition+i]||maskedValue[rpb+i]):processValue[radixPosition+i]=currentResult.placeholder||opts.placeholder.charAt(0);}!0!==opts.autoGroup||""===opts.groupSeparator||charAtPos===opts.radixPoint&&currentResult.pos===undefined&&!currentResult.dopost?processValue=processValue.join(""):(processValue=Inputmask(function(buffer,opts){var postMask="";if(postMask+="("+opts.groupSeparator+"*{"+opts.groupSize+"}){*}",""!==opts.radixPoint){var radixSplit=buffer.join("").split(opts.radixPoint);radixSplit[1]&&(postMask+=opts.radixPoint+"*{"+radixSplit[1].match(/^\d*\??\d*/)[0].length+"}");}
return postMask;}(processValue,opts),{numericInput:!0,jitMasking:!0,definitions:{"*":{validator:"[0-9?]",cardinality:1}}}).format(processValue.join("")),processValue.charAt(0)===opts.groupSeparator&&processValue.substr(1));}
if(opts.isNegative&&"blur"===currentResult.event&&(opts.isNegative="0"!==processValue),processValue=prefix+processValue,processValue+=suffix,opts.isNegative&&(processValue=opts.negationSymbol.front+processValue,processValue+=opts.negationSymbol.back),processValue=processValue.split(""),charAtPos!==undefined)if(charAtPos!==opts.radixPoint&&charAtPos!==opts.negationSymbol.front&&charAtPos!==opts.negationSymbol.back)caretPos=$.inArray("?",processValue),caretPos>-1?processValue[caretPos]=charAtPos:caretPos=currentResult.caret||0;else if(charAtPos===opts.radixPoint||charAtPos===opts.negationSymbol.front||charAtPos===opts.negationSymbol.back){var newCaretPos=$.inArray(charAtPos,processValue);-1!==newCaretPos&&(caretPos=newCaretPos);}
opts.numericInput&&(caretPos=processValue.length-caretPos-1,processValue=processValue.reverse());var rslt={caret:charAtPos===undefined||currentResult.pos!==undefined?caretPos+(opts.numericInput?-1:1):caretPos,buffer:processValue,refreshFromBuffer:currentResult.dopost||buffer.join("")!==processValue.join("")};return rslt.refreshFromBuffer?rslt:currentResult;},onBeforeWrite:function(e,buffer,caretPos,opts){if(e)switch(e.type){case"keydown":return opts.postValidation(buffer,{caret:caretPos,dopost:!0},opts);case"blur":case"checkval":var unmasked;if(function(opts){opts.parseMinMaxOptions===undefined&&(null!==opts.min&&(opts.min=opts.min.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(opts.min=opts.min.replace(opts.radixPoint,".")),opts.min=isFinite(opts.min)?parseFloat(opts.min):NaN,isNaN(opts.min)&&(opts.min=Number.MIN_VALUE)),null!==opts.max&&(opts.max=opts.max.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(opts.max=opts.max.replace(opts.radixPoint,".")),opts.max=isFinite(opts.max)?parseFloat(opts.max):NaN,isNaN(opts.max)&&(opts.max=Number.MAX_VALUE)),opts.parseMinMaxOptions="done");}(opts),null!==opts.min||null!==opts.max){if(unmasked=opts.onUnMask(buffer.join(""),undefined,$.extend({},opts,{unmaskAsNumber:!0})),null!==opts.min&&unmasked<opts.min)return opts.isNegative=opts.min<0,opts.postValidation(opts.min.toString().replace(".",opts.radixPoint).split(""),{caret:caretPos,dopost:!0,placeholder:"0"},opts);if(null!==opts.max&&unmasked>opts.max)return opts.isNegative=opts.max<0,opts.postValidation(opts.max.toString().replace(".",opts.radixPoint).split(""),{caret:caretPos,dopost:!0,placeholder:"0"},opts);}
return opts.postValidation(buffer,{caret:caretPos,dopost:!0,placeholder:"0",event:"blur"},opts);case"_checkval":return{caret:caretPos};}},regex:{integerPart:function(opts,emptyCheck){return emptyCheck?new RegExp("["+Inputmask.escapeRegex(opts.negationSymbol.front)+"+]?"):new RegExp("["+Inputmask.escapeRegex(opts.negationSymbol.front)+"+]?\\d+");},integerNPart:function(opts){return new RegExp("[\\d"+Inputmask.escapeRegex(opts.groupSeparator)+Inputmask.escapeRegex(opts.placeholder.charAt(0))+"]+");}},definitions:{"~":{validator:function(chrs,maskset,pos,strict,opts,isSelection){var isValid=strict?new RegExp("[0-9"+Inputmask.escapeRegex(opts.groupSeparator)+"]").test(chrs):new RegExp("[0-9]").test(chrs);if(!0===isValid){if(!0!==opts.numericInput&&maskset.validPositions[pos]!==undefined&&"~"===maskset.validPositions[pos].match.def&&!isSelection){var processValue=maskset.buffer.join("");processValue=processValue.replace(new RegExp("[-"+Inputmask.escapeRegex(opts.negationSymbol.front)+"]","g"),""),processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),""),processValue=processValue.replace(/0/g,opts.placeholder.charAt(0));var bufferTemplate=maskset._buffer.join("");for(processValue===opts.radixPoint&&(processValue=bufferTemplate);null===processValue.match(Inputmask.escapeRegex(bufferTemplate)+"$");)bufferTemplate=bufferTemplate.slice(1);processValue=processValue.replace(bufferTemplate,""),processValue=processValue.split(""),isValid=processValue[pos]===undefined?{pos:pos,remove:pos}:{pos:pos};}}else strict||chrs!==opts.radixPoint||maskset.validPositions[pos-1]!==undefined||(maskset.buffer[pos]="0",isValid={pos:pos+1});return isValid;},cardinality:1},"+":{validator:function(chrs,maskset,pos,strict,opts){return opts.allowMinus&&("-"===chrs||chrs===opts.negationSymbol.front);},cardinality:1,placeholder:""},"-":{validator:function(chrs,maskset,pos,strict,opts){return opts.allowMinus&&chrs===opts.negationSymbol.back;},cardinality:1,placeholder:""},":":{validator:function(chrs,maskset,pos,strict,opts){var radix="["+Inputmask.escapeRegex(opts.radixPoint)+"]",isValid=new RegExp(radix).test(chrs);return isValid&&maskset.validPositions[pos]&&maskset.validPositions[pos].match.placeholder===opts.radixPoint&&(isValid={caret:pos+1}),isValid;},cardinality:1,placeholder:function(opts){return opts.radixPoint;}}},onUnMask:function(maskedValue,unmaskedValue,opts){if(""===unmaskedValue&&!0===opts.nullable)return unmaskedValue;var processValue=maskedValue.replace(opts.prefix,"");return processValue=processValue.replace(opts.suffix,""),processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),""!==opts.placeholder.charAt(0)&&(processValue=processValue.replace(new RegExp(opts.placeholder.charAt(0),"g"),"0")),opts.unmaskAsNumber?(""!==opts.radixPoint&&-1!==processValue.indexOf(opts.radixPoint)&&(processValue=processValue.replace(Inputmask.escapeRegex.call(this,opts.radixPoint),".")),Number(processValue)):processValue;},isComplete:function(buffer,opts){var maskedValue=buffer.join("");if(buffer.slice().join("")!==maskedValue)return!1;var processValue=maskedValue.replace(opts.prefix,"");return processValue=processValue.replace(opts.suffix,""),processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(processValue=processValue.replace(Inputmask.escapeRegex(opts.radixPoint),".")),isFinite(processValue);},onBeforeMask:function(initialValue,opts){if(opts.isNegative=undefined,initialValue=initialValue.toString().charAt(initialValue.length-1)===opts.radixPoint?initialValue.toString().substr(0,initialValue.length-1):initialValue.toString(),""!==opts.radixPoint&&isFinite(initialValue)){var vs=initialValue.split("."),groupSize=""!==opts.groupSeparator?parseInt(opts.groupSize):0;2===vs.length&&(vs[0].length>groupSize||vs[1].length>groupSize||vs[0].length<=groupSize&&vs[1].length<groupSize)&&(initialValue=initialValue.replace(".",opts.radixPoint));}
var kommaMatches=initialValue.match(/,/g),dotMatches=initialValue.match(/\./g);if(dotMatches&&kommaMatches?dotMatches.length>kommaMatches.length?(initialValue=initialValue.replace(/\./g,""),initialValue=initialValue.replace(",",opts.radixPoint)):kommaMatches.length>dotMatches.length?(initialValue=initialValue.replace(/,/g,""),initialValue=initialValue.replace(".",opts.radixPoint)):initialValue=initialValue.indexOf(".")<initialValue.indexOf(",")?initialValue.replace(/\./g,""):initialValue=initialValue.replace(/,/g,""):initialValue=initialValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),0===opts.digits&&(-1!==initialValue.indexOf(".")?initialValue=initialValue.substring(0,initialValue.indexOf(".")):-1!==initialValue.indexOf(",")&&(initialValue=initialValue.substring(0,initialValue.indexOf(",")))),""!==opts.radixPoint&&isFinite(opts.digits)&&-1!==initialValue.indexOf(opts.radixPoint)){var valueParts=initialValue.split(opts.radixPoint),decPart=valueParts[1].match(new RegExp("\\d*"))[0];if(parseInt(opts.digits)<decPart.toString().length){var digitsFactor=Math.pow(10,parseInt(opts.digits));initialValue=initialValue.replace(Inputmask.escapeRegex(opts.radixPoint),"."),initialValue=Math.round(parseFloat(initialValue)*digitsFactor)/digitsFactor,initialValue=initialValue.toString().replace(".",opts.radixPoint);}}
return initialValue;},canClearPosition:function(maskset,position,lvp,strict,opts){var vp=maskset.validPositions[position],canClear=vp.input!==opts.radixPoint||null!==maskset.validPositions[position].match.fn&&!1===opts.decimalProtect||vp.input===opts.radixPoint&&maskset.validPositions[position+1]&&null===maskset.validPositions[position+1].match.fn||isFinite(vp.input)||position===lvp||vp.input===opts.groupSeparator||vp.input===opts.negationSymbol.front||vp.input===opts.negationSymbol.back;return!canClear||"+"!=vp.match.nativeDef&&"-"!=vp.match.nativeDef||(opts.isNegative=!1),canClear;},onKeyDown:function(e,buffer,caretPos,opts){var $input=$(this);if(e.ctrlKey)switch(e.keyCode){case Inputmask.keyCode.UP:$input.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(opts.step)),$input.trigger("setvalue");break;case Inputmask.keyCode.DOWN:$input.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(opts.step)),$input.trigger("setvalue");}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,digitsOptional:!0,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowMinus:!1}});}(window.dependencyLib||jQuery,window.Inputmask);}(),function(factory){!function($,Inputmask){function maskSort(a,b){var maska=(a.mask||a).replace(/#/g,"9").replace(/\)/,"9").replace(/[+()#-]/g,""),maskb=(b.mask||b).replace(/#/g,"9").replace(/\)/,"9").replace(/[+()#-]/g,""),maskas=(a.mask||a).split("#")[0],maskbs=(b.mask||b).split("#")[0];return 0===maskbs.indexOf(maskas)?-1:0===maskas.indexOf(maskbs)?1:maska.localeCompare(maskb);}
var analyseMaskBase=Inputmask.prototype.analyseMask;Inputmask.prototype.analyseMask=function(mask,regexMask,opts){function reduceVariations(masks,previousVariation,previousmaskGroup){previousVariation=previousVariation||"",previousmaskGroup=previousmaskGroup||maskGroups,""!==previousVariation&&(previousmaskGroup[previousVariation]={});for(var variation="",maskGroup=previousmaskGroup[previousVariation]||previousmaskGroup,i=masks.length-1;i>=0;i--)mask=masks[i].mask||masks[i],variation=mask.substr(0,1),maskGroup[variation]=maskGroup[variation]||[],maskGroup[variation].unshift(mask.substr(1)),masks.splice(i,1);for(var ndx in maskGroup)maskGroup[ndx].length>500&&reduceVariations(maskGroup[ndx].slice(),ndx,maskGroup);}
function rebuild(maskGroup){var mask="",submasks=[];for(var ndx in maskGroup)$.isArray(maskGroup[ndx])?1===maskGroup[ndx].length?submasks.push(ndx+maskGroup[ndx]):submasks.push(ndx+opts.groupmarker.start+maskGroup[ndx].join(opts.groupmarker.end+opts.alternatormarker+opts.groupmarker.start)+opts.groupmarker.end):submasks.push(ndx+rebuild(maskGroup[ndx]));return 1===submasks.length?mask+=submasks[0]:mask+=opts.groupmarker.start+submasks.join(opts.groupmarker.end+opts.alternatormarker+opts.groupmarker.start)+opts.groupmarker.end,mask;}
var maskGroups={};return opts.phoneCodes&&(opts.phoneCodes&&opts.phoneCodes.length>1e3&&(mask=mask.substr(1,mask.length-2),reduceVariations(mask.split(opts.groupmarker.end+opts.alternatormarker+opts.groupmarker.start)),mask=rebuild(maskGroups)),mask=mask.replace(/9/g,"\\9")),analyseMaskBase.call(this,mask,regexMask,opts);},Inputmask.extendAliases({abstractphone:{groupmarker:{start:"<",end:">"},countrycode:"",phoneCodes:[],mask:function(opts){return opts.definitions={"#":Inputmask.prototype.definitions[9]},opts.phoneCodes.sort(maskSort);},keepStatic:!0,onBeforeMask:function(value,opts){var processedValue=value.replace(/^0{1,2}/,"").replace(/[\s]/g,"");return(processedValue.indexOf(opts.countrycode)>1||-1===processedValue.indexOf(opts.countrycode))&&(processedValue="+"+opts.countrycode+processedValue),processedValue;},onUnMask:function(maskedValue,unmaskedValue,opts){return unmaskedValue;},inputmode:"tel"}});}(window.dependencyLib||jQuery,window.Inputmask);}(),function(factory){!function($,Inputmask){Inputmask.extendAliases({Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(buffer,opts){return new RegExp(opts.regex,opts.casing?"i":"").test(buffer.join(""));},definitions:{r:{validator:function(chrs,maskset,pos,strict,opts){function RegexToken(isGroup,isQuantifier){this.matches=[],this.isGroup=isGroup||!1,this.isQuantifier=isQuantifier||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0;}
function validateRegexToken(token,fromGroup){var isvalid=!1;fromGroup&&(regexPart+="(",openGroupCount++);for(var mndx=0;mndx<token.matches.length;mndx++){var matchToken=token.matches[mndx];if(!0===matchToken.isGroup)isvalid=validateRegexToken(matchToken,!0);else if(!0===matchToken.isQuantifier){var crrntndx=$.inArray(matchToken,token.matches),matchGroup=token.matches[crrntndx-1],regexPartBak=regexPart;if(isNaN(matchToken.quantifier.max)){for(;matchToken.repeaterPart&&matchToken.repeaterPart!==regexPart&&matchToken.repeaterPart.length>regexPart.length&&!(isvalid=validateRegexToken(matchGroup,!0)););isvalid=isvalid||validateRegexToken(matchGroup,!0),isvalid&&(matchToken.repeaterPart=regexPart),regexPart=regexPartBak+matchToken.quantifier.max;}else{for(var i=0,qm=matchToken.quantifier.max-1;i<qm&&!(isvalid=validateRegexToken(matchGroup,!0));i++);regexPart=regexPartBak+"{"+matchToken.quantifier.min+","+matchToken.quantifier.max+"}";}}else if(void 0!==matchToken.matches)for(var k=0;k<matchToken.length&&!(isvalid=validateRegexToken(matchToken[k],fromGroup));k++);else{var testExp;if("["==matchToken.charAt(0)){testExp=regexPart,testExp+=matchToken;for(var j=0;j<openGroupCount;j++)testExp+=")";var exp=new RegExp("^("+testExp+")$",opts.casing?"i":"");isvalid=exp.test(bufferStr);}else for(var l=0,tl=matchToken.length;l<tl;l++)if("\\"!==matchToken.charAt(l)){testExp=regexPart,testExp+=matchToken.substr(0,l+1),testExp=testExp.replace(/\|$/,"");for(var j=0;j<openGroupCount;j++)testExp+=")";var exp=new RegExp("^("+testExp+")$",opts.casing?"i":"");if(isvalid=exp.test(bufferStr))break;}
regexPart+=matchToken;}
if(isvalid)break;}
return fromGroup&&(regexPart+=")",openGroupCount--),isvalid;}
var bufferStr,groupToken,cbuffer=maskset.buffer.slice(),regexPart="",isValid=!1,openGroupCount=0;null===opts.regexTokens&&function(){var match,m,currentToken=new RegexToken(),opengroups=[];for(opts.regexTokens=[];match=opts.tokenizer.exec(opts.regex);)switch(m=match[0],m.charAt(0)){case"(":opengroups.push(new RegexToken(!0));break;case")":groupToken=opengroups.pop(),opengroups.length>0?opengroups[opengroups.length-1].matches.push(groupToken):currentToken.matches.push(groupToken);break;case"{":case"+":case"*":var quantifierToken=new RegexToken(!1,!0);m=m.replace(/[{}]/g,"");var mq=m.split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=1===mq.length?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);if(quantifierToken.quantifier={min:mq0,max:mq1},opengroups.length>0){var matches=opengroups[opengroups.length-1].matches;match=matches.pop(),match.isGroup||(groupToken=new RegexToken(!0),groupToken.matches.push(match),match=groupToken),matches.push(match),matches.push(quantifierToken);}else match=currentToken.matches.pop(),match.isGroup||(groupToken=new RegexToken(!0),groupToken.matches.push(match),match=groupToken),currentToken.matches.push(match),currentToken.matches.push(quantifierToken);break;default:opengroups.length>0?opengroups[opengroups.length-1].matches.push(m):currentToken.matches.push(m);}
currentToken.matches.length>0&&opts.regexTokens.push(currentToken);}(),cbuffer.splice(pos,0,chrs),bufferStr=cbuffer.join("");for(var i=0;i<opts.regexTokens.length;i++){var regexToken=opts.regexTokens[i];if(isValid=validateRegexToken(regexToken,regexToken.isGroup))break;}
return isValid;},cardinality:1}}}});}(window.dependencyLib||jQuery,window.Inputmask);}();

var UsersTokenInput=BaseTokenInput.extend({_id:null,_showDeletedUsers:null,_showInactiveUsers:null,_additionalRequestParams:null,constructor:function(id){$('.custom_scrollbar').mCustomScrollbar(this._getScrollbarOptions());this.setMaxTokenLength(UsersTokenInput.MAX_USER_TOKEN_LENGTH);this.setMaxTokenLengthErrorMessage(UIMessages.UsersTokenInputMessages.MSG_USER_TOKEN_IS_TOO_LONG);this.base(id);this._id=id;this.setTypeInMessage(UIMessages.UserTokenInput.MSG_TYPE_IN_USER_NAME);this._showDeletedUsers=0;this._showInactiveUsers=0;this._additionalRequestParams={};this._initCustomScrollbar();},setShowDeletedUsers:function(showDeletedUsers){this._showDeletedUsers=showDeletedUsers;},setShowInactiveUsers:function(showInactiveUsers){this._showInactiveUsers=showInactiveUsers;},addRequestParams:function(params){this._additionalRequestParams=$.extend(this._additionalRequestParams,params);},getQuerySearchingParamName:function(){return"user_name";},filterItemNameForDisplaying:function(name){var pattern=/\([^\@]+\@[^\)]*\)/;var email=pattern.exec(name);if(email){name=$.trim(name.replace(email,''));}
return name;},prepareItemsForTokenInput:function(items,checkIsChecked){var preparedItems=[];var inactiveStatus=" "+UIMessages.UsersTokenInputMessages.MSG_USER_INACTIVE;var deletedStatus=" "+UIMessages.UsersTokenInputMessages.MSG_USER_REMOVED;for(var i=0;i<items.length;++i){var user=items[i];var userName=user.user_name;userName+=(user.inactive===1)?inactiveStatus:"";userName+=(user.deleted===1)?deletedStatus:"";if(user.is_checked||!checkIsChecked){preparedItems.push({id:user.user_id,name:userName});}}
return preparedItems;},getRequestParams:function(){var params=this.base();params=$.extend(params,{limit:UsersTokenInput.USERS_REQUEST_LIMIT});if(this._showDeletedUsers){params=$.extend(params,{show_deleted:this._showDeletedUsers?1:0});}
if(this._showInactiveUsers){params=$.extend(params,{show_inactive:this._showInactiveUsers?1:0});}
if(this._additionalRequestParams){params=$.extend(params,this._additionalRequestParams);}
return params;},_initCustomScrollbar:function(){this.addListener('tokensChanged',this,this._onTokensChanged);},_onTokensChanged:function(){$('#'+this._id+' .custom_scrollbar').mCustomScrollbar("scrollTo","bottom");},_getScrollbarOptions:function(){return{theme:'iscloud',live:true,snapAmount:5,scrollInertia:200,scrollbarPosition:'outside',scrollButtons:{enable:true}};}},{MAX_USER_TOKEN_LENGTH:255,USERS_REQUEST_LIMIT:1000});

var TagsTokenInput=BaseTokenInput.extend({filterByTagContentCount:null,_isTokenDeselectEvent:false,constructor:function(id){this.setMaxTokenLength(TagsTokenInput.MAX_TOKEN_LENGTH);this.setMaxTokenLengthErrorMessage(UIMessages.TagsTokenInputMessages.MSG_TAG_TOKEN_IS_TOO_LONG);this.base(id);this.setInitOptions({classes:{dropdown:'token-input-dropdown tags_token_input_dropdown'}});this.setCheckSingleItem(false);this.setFilterByTagContentCount(false);this.setTypeInMessage(UIMessages.TagTokenInput.MSG_TYPE_IN_TAG_NAME);},init:function(initData){this.base(initData);this._initTokenDeselectHandler();},getQuerySearchingParamName:function(){return'tag_name';},prepareItemName:function(item){return item.name.toLowerCase();},prepareItemsForTokenInput:function(items){var preparedItems=[];for(var i=0;i<items.length;++i){tag=items[i];preparedItems.push({id:tag.id,name:tag.tag_name.toLowerCase()});}
return preparedItems;},setFilterByTagContentCount:function(filterByTagContentCount){this.filterByTagContentCount=filterByTagContentCount;},getRequestParams:function(){var params=this.base();params=$.extend(params,{filter_by_tag_content_count:(this.filterByTagContentCount)?1:0});return params;},onTokenInputFieldBlur:function(){if(this._isTokenDeselectEvent){this._isTokenDeselectEvent=false;return;}
if(!this.checkSingleItem){if(!this.tokenInputField.hasClass('type_in_invite')){this.addItems(this.parseInsertedTokens());this.setFieldDefaultWidth();}}
this.tokenInputField.val('');this.tryAddTypeInState();this.dispatchEvent(BaseTokenInput.event.BLUR);},parseInsertedTokens:function(){var tokenNames=this.tokenInputField.val().split(',');var tokens=[];for(var i=0;i<tokenNames.length;++i){var tokenName=$.trim(tokenNames[i]);if(tokenName!=''){tokens.push({name:tokenName});}}
return tokens;},disable:function(){this.base();this.tokenInputField.prop('disabled',true);this.tokenList.addClass('disabled');},enable:function(){this.base();this.tokenInputField.removeAttr('disabled');this.tokenList.removeClass('disabled');},_initTokenDeselectHandler:function(){var tokenHolder=$('#'+this.id+'TokenHolder');if(tokenHolder){var tokenList=tokenHolder.find('.token-input-list');if(tokenList){tokenList.on('onTokenDeselect',handler(this,'_handleTokenDeselect'));}}},_handleTokenDeselect:function(){this._isTokenDeselectEvent=true;}},{MAX_TOKEN_LENGTH:100});

var TextFormField=FormField.extend({field:null,initialize:function()
{this.field=$('#'+this.id);this.name=this.field.attr('name');this.saveCurrentValueAsInitial();this._initHandlers();this._showPlaceholder();},terminate:function()
{this.field.off();this.base();},getValue:function()
{if(this._placeholderIsShown())
{return'';}
return this._getRawValue();},setValue:function(value)
{if(value!=='')
{this._hidePlaceholder();this.field.val(value);}
else
{this.clear();}
this.dispatchEvent(FormField.event.CHANGE);},clear:function()
{this.field.val('');this.dispatchEvent(FormField.event.CHANGE);this.field.blur();this._showPlaceholder();},disable:function()
{this.field.prop('disabled',true);this.container.addClass(FormField.css.DISABLED);},enable:function()
{this.field.prop('disabled',false);this.container.removeClass(FormField.css.DISABLED);},isEnabled:function()
{return!this.container.hasClass(FormField.css.DISABLED);},select:function()
{this.field.select();},enableReadonly:function()
{this.field.prop('readonly',true);this.container.addClass(FormField.css.READONLY);},disableReadonly:function()
{this.field.prop('readonly',false);this.container.removeClass(FormField.css.READONLY);},isReadonly:function()
{return this.field.prop('readonly');},focusWithScroll:function(duration)
{var that=this;$.scrollTo(this.field,duration,function(){that.field.focus();});},focus:function()
{this.field.focus();},blur:function()
{this.field.blur();},isEmpty:function()
{return!Boolean(this.getValue());},_getRawValue:function()
{return $.trim(this.field.val())},_showDefaultValue:function()
{if(this.getValue()=='')
{this.field.val(this.defaultValue);}},_initHandlers:function()
{var thisPtr=this;this.field.focus(handler(this,'_onFocus'));this.field.blur(handler(this,'_onBlur'));this.field.keydown(function(e){thisPtr.dispatchEvent(FormField.event.KEYDOWN,e)});this.field.keypress(function(e){thisPtr.dispatchEvent(FormField.event.KEYPRESS,e)});this.field.keyup(function(e){if(UIEventUtils.getCharCodeFromKeypressEvent(e)==UICharUtils.code.ESC)
{thisPtr._onEscKeyUp();return false;}
thisPtr.dispatchEvent(FormField.event.KEYUP,e)});this.field.on(this.chooseInputEventByBrowser(),function(){thisPtr.dispatchEvent(FormField.event.INPUT);});this.field.change(function(e){thisPtr.dispatchEvent(FormField.event.CHANGE,e)});this.container.click(function(e){thisPtr.dispatchEvent(FormField.event.CLICK,e);});},_onEscKeyUp:function()
{this.container.removeClass(FormField.css.FOCUS);this.field.blur();this._showPlaceholder();},_onFocus:function()
{if(this.hasError())
{this._errorBehavior.showErrorDescription();}
if(!this.isReadonly())
{this._hidePlaceholder();this.container.addClass(FormField.css.FOCUS);this._showDefaultValue();this.dispatchEvent(FormField.event.FOCUS)}},_onBlur:function()
{if(this.hasError())
{this._errorBehavior.hideErrorDescription();}
if(!this.isReadonly())
{this._showPlaceholder();this.container.removeClass(FormField.css.FOCUS);this.dispatchEvent(FormField.event.BLUR);}},_placeholderIsShown:function()
{return this.field.hasClass(FormField.css.PLACEHOLDER);},_showPlaceholder:function()
{if(this._getRawValue()==''&&!this._hasFocus())
{this.field.val(this.placeholder);this.field.addClass(FormField.css.PLACEHOLDER);}},_hidePlaceholder:function()
{if(this._placeholderIsShown())
{this.field.val('');this.field.removeClass(FormField.css.PLACEHOLDER);}},_hasFocus:function()
{return this.field.is(':focus');}});

var PasswordFormField=FormField.extend({field:null,fieldPassword:null,fieldText:null,_passwordPlaceholder:null,_eyeButton:null,_strengthMark:null,_strengthPasswordChecker:null,initialize:function(){this._initInputs();this._initPasswordPlaceholder();this._initHandlers();this._showPlaceholder();this._initEyeButton();},terminate:function(){this.clear();this.fieldPassword.off();this.fieldText.off();this.base();},_initEyeButton:function(){var eyeId=this.id+'EyeIcon';this._eyeButton=document.getElementById(eyeId);if(this._eyeButton){this._eyeButton.addEventListener('click',function(e){var wasPassword=this._eyeButton.classList.contains(PasswordFormField.css.EYE_CLOSED);if(wasPassword){this.showPasswordChars();this._eyeButton.classList.remove(PasswordFormField.css.EYE_CLOSED);}
else{this.hidePasswordChars();this._eyeButton.classList.add(PasswordFormField.css.EYE_CLOSED);}
this._showEyeTooltip(eyeId,!wasPassword);}.bind(this));this._showEyeTooltip(eyeId,true);}},_showEyeTooltip:function(eyeId,show){var text=show?UIMessages.PasswordStrengthMessages.MSG_SHOW_PASSWORD:UIMessages.PasswordStrengthMessages.MSG_HIDE_PASSWORD;$('#'+eyeId).tooltip({message:text,preset:TooltipOptions.PRESET.LIGHT,positions:[TooltipOptions.POSITION.BOTTOM],parent:$('body'),overlap:10,});},_initInputs:function(){this.fieldPassword=$('#'+this.id);this.fieldText=$('#text'+this.id);this.field=this.fieldPassword;this.name=this.field.attr('name');},getValue:function(){return this._getRawValue();},setValue:function(value){this._hidePlaceholder();this.field.val(value);},clear:function(){this.field.val('');this._showPlaceholder();},disable:function(){this.fieldPassword.prop('disabled',true);this.fieldText.prop('disabled',true);this.container.addClass(FormField.css.DISABLED);},enable:function(){this.fieldPassword.prop('disabled',false);this.fieldText.prop('disabled',false);this.container.removeClass(FormField.css.DISABLED);},focusWithScroll:function(duration){$.scrollTo(this.field,duration);this.focus();},focus:function(){this.field.focus();},_getRawValue:function(){return $.trim(this.field.val());},_initPasswordPlaceholder:function(){this._passwordPlaceholder=document.getElementById(this.id+'Placeholder');},_initHandlers:function(){this._initFieldHandlers(this.fieldPassword);this._initFieldHandlers(this.fieldText);var thisPtr=this;this.container.click(function(e){thisPtr.dispatchEvent(FormField.event.CLICK,e);});},_initFieldHandlers:function(field){var thisPtr=this;field.on(this.chooseInputEventByBrowser(),function(){if(!thisPtr._needToShowPlaceholder()){thisPtr._hidePlaceholder();}
thisPtr.dispatchEvent(FormField.event.INPUT);});field.focus(handler(this,'_onFocus'));field.blur(handler(this,'_onBlur'));field.keyup(handler(this,'_onKeyup'));},_onFocus:function(){if(this.hasError()){this._errorBehavior.showErrorDescription();}
this._hidePlaceholder();this.container.addClass(FormField.css.FOCUS);this.dispatchEvent(FormField.event.FOCUS);},_onBlur:function(){if(this.hasError()){this._errorBehavior.hideErrorDescription();}
this._showPlaceholder();this.container.removeClass(FormField.css.FOCUS);this.dispatchEvent(FormField.event.BLUR);},showError:function(validatorMessage){this.base(validatorMessage);this._invalidateEyeVisible();},hideError:function(){this.base();this._invalidateEyeVisible();},_invalidateEyeVisible:function(){if(!this._eyeButton){return;}
var errorType=this._errorBehavior.getType();if(errorType===ErrorBehaviorType.TOOLTIP){this.hasError()?this._eyeButton.classList.add(PasswordFormField.css.HIDDEN):this._eyeButton.classList.remove(PasswordFormField.css.HIDDEN);}},_onKeyup:function(){this.dispatchEvent(FormField.event.KEYUP);},_needToShowPlaceholder:function(){return this._getRawValue()=='';},_showPlaceholder:function(){if(this._needToShowPlaceholder()){this._passwordPlaceholder.classList.remove(FormField.css.HIDDEN);}},_hidePlaceholder:function(){this._passwordPlaceholder.classList.add(FormField.css.HIDDEN);},showPasswordChars:function(){this.fieldText.val(this.getValue());this.fieldPassword.addClass(PasswordFormField.css.HIDDEN);this.fieldText.removeClass(PasswordFormField.css.HIDDEN);this.field=this.fieldText;},hidePasswordChars:function(){this.fieldPassword.val(this.getValue());this.fieldText.addClass(PasswordFormField.css.HIDDEN);this.fieldPassword.removeClass(PasswordFormField.css.HIDDEN);this.field=this.fieldPassword;},enableReadonly:function(){this.fieldPassword.prop('readonly',true);this.fieldText.prop('readonly',true);},disableReadonly:function(){this.fieldPassword.prop('readonly',false);this.fieldText.prop('readonly',false);},isEmpty:function(){return!Boolean(this.getValue());}},{css:{HIDDEN:'hidden',EYE_CLOSED:'closed'},});

var ToggleFormField=FormField.extend({_activeValue:null,_inactiveValue:null,_field:null,_flipswitch:null,_tooltip:null,_value:null,initialize:function()
{this._initTemplateData();this._initToggle();},terminate:function()
{this._field.val(this.getValue());this._flipswitch.off();this.base();},toggleChecked:function(active)
{if(active==undefined)
{active=!this.isActive();}
this._flipswitch.toggleClass(ToggleFormField.css_class.CHECKED,active);this._initTooltipByActivity(active);},getValue:function()
{return this._isActiveToValue(this.isActive());},setValue:function(value)
{if(!this.isEnabled())
{return;}
this._value=this._valueToIsActive(value);this.toggleChecked(this._value);this.dispatchEvent(FormField.event.CHANGE,value);},disable:function()
{this._flipswitch.toggleClass(ToggleFormField.css_class.DISABLED,true);},enable:function()
{this._flipswitch.toggleClass(ToggleFormField.css_class.DISABLED,false);},isEnabled:function()
{return!this._flipswitch.hasClass(ToggleFormField.css_class.DISABLED);},isActive:function()
{return this._flipswitch.hasClass(ToggleFormField.css_class.CHECKED);},_initTemplateData:function()
{this._field=$('#'+this.id);this.name=this._field.attr('name');this._activeValue=this._field.attr(ToggleFormField.attr.ACTIVE_VALUE);this._inactiveValue=this._field.attr(ToggleFormField.attr.INACTIVE_VALUE);this._flipswitch=this.container.find('.flipswitch').first();},_initToggle:function()
{this._listenToCheckbox();this.toggleChecked(this.isActive());this._initTooltipByActivity(this.isActive());this.isEnabled()?this.enable():this.disable();},_listenToCheckbox:function()
{this._flipswitch.on('click',handler(this,'_onFlipswitchClick'));},_onFlipswitchClick:function()
{var active=!this.isActive();this.setValue(active);},_isActiveToValue:function(isActive)
{return isActive?this._activeValue:this._inactiveValue;},_valueToIsActive:function(value)
{return(value==this._activeValue);},_initTooltipByActivity:function(isActive)
{this._resetTooltip();var message=this._getMessageByActivity(isActive);if(message)
{this._tooltip=this._flipswitch.tooltip({positions:TooltipOptions.POSITION.BOTTOM,message:message});}},_getMessageByActivity:function(isActive)
{return isActive?this._field.attr(ToggleFormField.attr.FORM_FIELD_TOOLTIP_ACTIVE_STATE):this._field.attr(ToggleFormField.attr.FORM_FIELD_TOOLTIP_INACTIVE_STATE);},_resetTooltip:function()
{if(this._tooltip)
{this._tooltip.reset();this._tooltip=null;}}},{css_class:{DISABLED:'disabled',CHECKED:'checked'},attr:{FORM_FIELD_TOOLTIP_ACTIVE_STATE:'data-form-field-tooltip-active-state',FORM_FIELD_TOOLTIP_INACTIVE_STATE:'data-form-field-tooltip-inactive-state',ACTIVE_VALUE:'data-form-field-active-value',INACTIVE_VALUE:'data-form-field-inactive-value'}});

var TooltipErrorBehavior=BaseErrorBehavior.extend({_errorContainer:null,_errorMark:null,initialize:function(options)
{this.base(options);this._errorContainer=$('#'+options.errorContainer+'Container');var errorMarkId=options.errorContainer+'ErrorContainerTooltip';this._setErrorMark(errorMarkId);},_setErrorMark:function(errorMarkId)
{this._errorMark=$('#'+errorMarkId);this._errorMark.tooltip({preset:TooltipOptions.PRESET.NO_POINTER,positions:[TooltipOptions.POSITION.RIGHT,TooltipOptions.POSITION.BOTTOM,TooltipOptions.POSITION.TOP],parent:$('body'),overlap:-16,});},showError:function(errorMessage)
{this._errorContainer.addClass(ErrorBehaviorType.TOOLTIP);this._errorMark.addClass(FormField.css.ERROR);this._errorMark.attr('bt-xTitle',errorMessage);},showErrorDescription:function()
{this._errorMark.btOn();},hideErrorDescription:function()
{this._errorMark.btOff();},hideError:function()
{this._errorContainer.removeClass(ErrorBehaviorType.TOOLTIP);this._errorMark.removeClass(FormField.css.ERROR);this._errorMark.removeAttr('bt-xTitle');this.hideErrorDescription();},getType:function()
{return ErrorBehaviorType.TOOLTIP}});

var TextErrorBehavior=BaseErrorBehavior.extend({_errorHolder:null,initialize:function(options)
{this.base(options);var errorHolderId=options.errorContainer+'ErrorContainerText';this._setErrorHolder(errorHolderId);},_setErrorHolder:function(errorHolderId)
{this._errorHolder=$('#'+errorHolderId);},showError:function(errorMessage)
{this._errorHolder.addClass(FormField.css.ERROR);this._errorHolder.text(errorMessage);},hideError:function()
{this._errorHolder.removeClass(FormField.css.ERROR);this._errorHolder.text('');},getType:function()
{return ErrorBehaviorType.TEXT}});

var ErrorBehaviorType=Base.extend({},{NO_ERROR:'no_error',TOOLTIP:'tooltip',TEXT:'text'});

var AutocompleteFormField=FormField.extend({_textField:null,_clearButton:null,_requestUrl:null,_textFieldElement:null,_textFieldContainer:null,_preloader:null,_dropdown:null,_keyboardNavigatedList:null,_resultContainer:null,_busy:false,_requestTimer:null,initialize:function(){this._initElements(this.id);this._attachEvents();this._updateClearButtonVisibility();},terminate:function(){this._dropdown.hide();this._keyboardNavigatedList.terminate();this._textField.terminate();this.base();},getValue:function(){return this._textField.getValue();},setValue:function(value){this._textField.setValue(value);this._updateClearButtonVisibility();},clear:function(){this._textField.clear();this._updateClearButtonVisibility();},disable:function(){this._textField.disable();},enable:function(){this._textField.enable();},isEnabled:function(){return this._textField.isEnabled();},focusWithScroll:function(duration){this._textField.focusWithScroll(duration);},showError:function(validatorMessage){this._textField.showError(validatorMessage);},hideError:function(){this._textField.hideError();},setRequestUrl:function(requestUrl){this._requestUrl=requestUrl;},_initElements:function(id){var textFieldId=this.id+AutocompleteFormField.TEXT_FIELD_POSTFIX;this._textField=FormFieldStorage.createFormFieldById(textFieldId);this._clearButton=$('#'+this.id+AutocompleteFormField.CLEAR_BUTTON_POSTFIX);this._clearButton.on('click',handler(this,'_onClearButtonClick'));this._textFieldElement=this._textField.getFormFieldElement();this._textFieldContainer=this._textField.getContainer();this._dropdown=new Dropdown(this.id+AutocompleteFormField.DROPDOWN_POSTFIX,this._textField.getContainer().attr('id'));this._dropdown.setMinWidth(this._textFieldContainer.width());this._resultContainer=this._dropdown.getElement().find('ul');this._requestUrl=$('#'+id+AutocompleteFormField.REQUEST_URL_POSTFIX).val();this._preloader=$('#'+id+AutocompleteFormField.PRELOADER_POSTFIX);this._keyboardNavigatedList=new KeyboardNavigatedList(this._textFieldElement);this.name=$('#'+id).attr('name');},_onChange:function(){this.dispatchEvent(FormField.event.CHANGE);},_onClearButtonClick:function(){this.clear();},_attachEvents:function(){this._attachChangeEvent();this._textField.addListener(FormField.event.INPUT,this,this._onInput);this._keyboardNavigatedList.addListener(KeyboardNavigatedList.SELECTION_DONE_EVENT,this,this._onDropdownElementSelected);this._keyboardNavigatedList.addListener(KeyboardNavigatedList.FOCUSABLE_OBJECT_BLUR,this,this._onBlur);},_onInput:function(){this._updateSuggestionsInDropdown();this._updateClearButtonVisibility();},_updateClearButtonVisibility:function(){var isHidden=this._textField.isEmpty()||this._busy;this._clearButton.toggleClass('hidden',isHidden);},_attachChangeEvent:function(){this._textField.addListener(FormField.event.CHANGE,this,this._onChange);},_onBlur:function(){this._dropdown.hide();this._updateClearButtonVisibility();},_updateSuggestionsInDropdown:function(){clearTimeout(this._requestTimer);if(this._busy){return;}
this._requestTimer=setTimeout(handler(this,'_getSuggestions'),AutocompleteFormField.REQUEST_DELAY);},_getSuggestions:function(){var query=$.trim(this._textFieldElement.val());if(AutocompleteFormField.MIN_QUERY_LENGTH>query.length){return;}
this._setBusy();this._makeRequest(query);},_makeRequest:function(query){$.post(this._requestUrl,{term:query},handler(this,'_onSuggestionsReceived'));},_onSuggestionsReceived:function(data){if(data.error){UiToast.showCritical(data.error);}else{this._resultContainer.html('');var resultCount=this._getJsonItemsCount(data);if(resultCount>0&&this._textFieldElement.is(':focus')){this._showSuggestions(data);}else{this._dropdown.hide();}}
this._setAvailable();},_showSuggestions:function(data){for(var key in data){if(data.hasOwnProperty(key)){var formattedSuggestion=this._formatSuggestion(key,data[key]);this._resultContainer.append(formattedSuggestion);}}
this._keyboardNavigatedList.initListItems(this._resultContainer);this._dropdown.show();},_onDropdownElementSelected:function(element){var selectedHyperlink=element.find('a');var suggestionTitle=selectedHyperlink.text();this._textField.setValue(suggestionTitle);this._dropdown.hide();},_formatSuggestion:function(value,name){return UIStringUtils.getParametrizedString(AutocompleteFormField.SUGGESTION_TEMPLATE,{title:name,name:name,value:value});},_setBusy:function(){this._busy=true;this._showPreloader();this._updateClearButtonVisibility();},_setAvailable:function(){this._busy=false;this._hidePreloader();this._updateClearButtonVisibility();},_showPreloader:function(){this._preloader.show();},_hidePreloader:function(){this._preloader.hide();},_getJsonItemsCount:function(object){var count=0;for(var key in object){count++;}
return count;},isEmpty:function(){return this._textField.isEmpty();}},{dropdown_position_class:{TOP:'dropdown_pos_top',RIGHT:'dropdown_pos_right'},TEXT_FIELD_POSTFIX:'TextField',CLEAR_BUTTON_POSTFIX:'ClearButton',REQUEST_URL_POSTFIX:'RequestUrl',DROPDOWN_POSTFIX:'Dropdown',PRELOADER_POSTFIX:'Preloader',MIN_QUERY_LENGTH:1,PRELOADER_CLASS_NAME:'preloader',SUGGESTION_TEMPLATE:'<li><a title="%title%" data-value="%value%" href="javascript:void(0);">%name%</a></li>',REQUEST_DELAY:500});

var DateFormFieldCalendar=EventDispatcher.extend({_id:null,_yearSelect:null,_monthSelect:null,_countRows:null,_firstDayOfWeek:null,_dateFormat:null,_minDate:null,_maxDate:null,_calendar:null,_selectedDate:null,_focusedDate:null,_container:null,_showOnlyCurrentMonthDays:null,_locale:null,_monthNames:null,_weekDayNames:null,constructor:function(id,minDate,maxDate,firstDayOfWeek,dateFormat,locale){this.base();this._minDate=minDate;this._maxDate=maxDate;this._minDate.clearTime();this._maxDate.clearTime();this._locale=locale;this._id=id;this._firstDayOfWeek=firstDayOfWeek;this._dateFormat=dateFormat;this._selectedDate=Date.today();this._focusedDate=this._selectedDate.clone().moveToFirstDayOfMonth();this._container=$('#'+this._id+'Container');this._monthNames=this._initMonthNames();this._weekDayNames=this._initWeekDayNames();},create:function(){var calendarHtml='<div id="'+this._id+'" class="ui_kit_calendar">'+
this._getHeaderHtml()+'<table id="'+this._id+'CalendarTable" class="calendar_table">'+'<thead>'+
this._getCalendarTitleHtml()+'</thead>'+'</table>'+'</div>';this._container.html(calendarHtml);this._calendar=$('#'+this._id);this._calendarTable=$('#'+this._id+'CalendarTable');this._monthSelect=$('#'+this._id+'MonthSelect');this._yearSelect=$('#'+this._id+'YearSelect');this._initEvents();},destroy:function(){this._terminateEvents();this._container.empty();},setSelectedDate:function(date){date=this._cutDate(date);this._selectedDate=date.clone().clearTime();this._focusedDate=this._selectedDate.clone().moveToFirstDayOfMonth();this.refresh();this.dispatchEvent(DateFormFieldCalendar.event.CALENDAR_CHANGED);},setContainer:function(container){this._container=container;},setMinDate:function(date){this._minDate=date.clearTime();},setMaxDate:function(date){this._maxDate=date.clearTime();},getMinDate:function(){return this._minDate;},getMaxDate:function(){return this._maxDate;},getSelectedDate:function(){return this._selectedDate;},getFocusedDate:function(){return this._focusedDate;},getDateString:function(){return this.getSelectedDate().toString(this._dateFormat);},setShowOnlyCurrentMonthDays:function(showOnlyCurrentMonthDays){this._showOnlyCurrentMonthDays=showOnlyCurrentMonthDays;},setCountRows:function(countRows){this._countRows=countRows;this.refresh();},getCountRows:function(){return this._countRows;},gotoPrevMonth:function(){this._focusedDate.addMonths(-1);this.refresh();this.dispatchEvent(DateFormFieldCalendar.event.CALENDAR_CHANGED);},gotoNextMonth:function(){this._focusedDate.addMonths(1);this.refresh();this.dispatchEvent(DateFormFieldCalendar.event.CALENDAR_CHANGED);},gotoPrevYear:function(){this._focusedDate.addYears(-1);this.refresh();this.dispatchEvent(DateFormFieldCalendar.event.CALENDAR_CHANGED);},gotoNextYear:function(){this._focusedDate.addYears(1);this.refresh();this.dispatchEvent(DateFormFieldCalendar.event.CALENDAR_CHANGED);},refresh:function(){this._clearCalendar();this._refreshTitle();this._buildMonthGrid();this._initMonthGrid();},getCalendar:function(){return this._calendar;},resetRangeHighlight:function(){var cells=this._calendar.find('td');var thisPtr=this;cells.each(function(){thisPtr._removeHighlight($(this));});},highlightCellsFromChosen:function(date){var chosenDate=this.getSelectedDate();if(date<=chosenDate){return;}
var cells=this._calendar.find('td');var thisPtr=this;var fill=false;if(!this._calendar.find('td.selected').length&&this.getFocusedDate()>chosenDate){fill=true;}
cells.each(function(){var curDate=thisPtr._getDateFromCell(this);if(fill&&curDate<=date){thisPtr._highlightCell($(this));}
if($(this).is('.selected')){fill=true;}});},highlightCellsToChosen:function(date){var chosenDate=this.getSelectedDate();if(date>=chosenDate){return;}
var cells=this._calendar.find('td');var thisPtr=this;var fill=true;if(!this._calendar.find('td.selected').length&&this.getFocusedDate()>chosenDate){fill=false;}
cells.each(function(){var curDate=thisPtr._getDateFromCell(this);if($(this).is('.selected')){fill=false;}
if(fill&&curDate>=date){thisPtr._highlightCell($(this));}});},_getHeaderHtml:function(){return'<div class="calendar_header">'+'<div class="month_part">'+'<img class="prev_month_icon" id="'+this._id+'PrevMonthLink" src="/images/ispring-ui/date_selector/prev.png" />'+'<div data-id="" id="'+this._id+'MonthSelect" class="title month"></div>'+'<img class="next_month_icon" id="'+this._id+'NextMonthLink" src="/images/ispring-ui/date_selector/next.png" />'+'</div>'+'<div class="year_part">'+'<img class="prev_year_icon" id="'+this._id+'PrevYearLink" src="/images/ispring-ui/date_selector/prev.png" />'+'<div id="'+this._id+'YearSelect" class="title year"></div>'+'<img class="next_year_icon" id="'+this._id+'NextYearLink" src="/images/ispring-ui/date_selector/next.png" />'+'</div>'+'</div>';},_getCalendarTitleHtml:function(){var localWeek=[];this._weekDayNames.forEach(function(dayName){localWeek.push('<th class="day_name">'+dayName+'</th>');});if(this._firstDayOfWeek!==1){for(var i=0;i<this._firstDayOfWeek-1;i++){localWeek.push(localWeek.shift());}}
return'<tr class="calendar_day_names">'+localWeek.join('')+'</tr>';},_initEvents:function(){$('#'+this._id+'PrevMonthLink').on('mouseup',handler(this,'gotoPrevMonth'));$('#'+this._id+'NextMonthLink').on('mouseup',handler(this,'gotoNextMonth'));$('#'+this._id+'PrevYearLink').on('mouseup',handler(this,'gotoPrevYear'));$('#'+this._id+'NextYearLink').on('mouseup',handler(this,'gotoNextYear'));},_terminateEvents:function(){$('#'+this._id+'PrevMonthLink').off();$('#'+this._id+'NextMonthLink').off();$('#'+this._id+'PrevYearLink').off();$('#'+this._id+'NextYearLink').off();},_buildMonthGrid:function(){var countDays=Date.getDaysInMonth(this._focusedDate.getFullYear(),this._focusedDate.getMonth());var firstDay=this._getLocalizedFirstDay();if(!this._showOnlyCurrentMonthDays){var prevMonth=this._focusedDate.clone().addMonths(-1);var prevMonthCountDays=Date.getDaysInMonth(prevMonth.getFullYear(),prevMonth.getMonth());var prevMonthDay=this._getFirstVisiblePrevMonthDay(prevMonthCountDays,firstDay);var nextMonthDay=1;}
var countWeeks=6;var currentDay=1;var minDay=0;var maxDay=6;for(var currWeek=0;currWeek<countWeeks;++currWeek){var weekRow=[];for(var currDayOfWeek=minDay;currDayOfWeek<=maxDay;++currDayOfWeek){if(currWeek==0&&currDayOfWeek<firstDay){(this._showOnlyCurrentMonthDays)?weekRow.push(''):weekRow.push(prevMonthDay++);}else if(currentDay<=countDays){weekRow.push(currentDay++);}else{(this._showOnlyCurrentMonthDays)?weekRow.push(''):weekRow.push(nextMonthDay++);}}
this._addCalendarRow(weekRow);}},_getLocalizedFirstDay:function(){var firstDay=this._focusedDate.getDay();var localFirstDayDifference=this._firstDayOfWeek-1;return(firstDay+DateFormFieldCalendar.DAYS_IN_WEEK-localFirstDayDifference)%DateFormFieldCalendar.DAYS_IN_WEEK;},_addCalendarRow:function(weekRow,addSpace){var row=$('<tr></tr>');row.addClass('calendar_days');this._calendarTable.append(row);for(var i=0;i<DateFormFieldCalendar.DAYS_IN_WEEK;++i){var cell=$('<td></td>');if(weekRow[i]!=''){cell.html(weekRow[i]);cell.attr('data-value',weekRow[i]);}else{cell.addClass('empty');}
row.append(cell);}
if(addSpace){var spaceRow=$('<tr></tr>');spaceRow.addClass('space');spaceRow.append('<td colspan="13"></td>');this._calendarTable.append(spaceRow);}},_initMonthGrid:function(){var thisPtr=this;var firstGridDay=parseInt(this._calendar.find('.calendar_days td').first().html());var currentDayDate=this._focusedDate.clone();if(firstGridDay>1){currentDayDate.addMonths(-1).addDays(firstGridDay-1);}
this._calendar.find('.calendar_days td[data-value]').each(function(){var cell=$(this);if(currentDayDate.getTime()==thisPtr._selectedDate.getTime()){cell.addClass('selected');}else if((currentDayDate.getTime()<thisPtr._minDate.getTime())||(currentDayDate.getTime()>thisPtr._maxDate.getTime())){cell.addClass('disabled');}
if(currentDayDate.getMonth()!=thisPtr._focusedDate.getMonth()){if(currentDayDate<thisPtr._focusedDate){cell.addClass('prev_month');}else{cell.addClass('next_month');}}
if(!cell.is('.disabled')){cell.on('click',function(){thisPtr._onCellClick(this);});}
currentDayDate.addDays(1);});},_refreshTitle:function(){var month=this._focusedDate.getMonth();var year=this._focusedDate.getFullYear();this._monthSelect.attr('date-id',month).html(this._monthNames[month]);this._yearSelect.html(year);},_onCellClick:function(cell){this.dispatchEvent(DateFormFieldCalendar.event.CELL_CLICKED);var newDate=this._getDateFromCell(cell);this.setSelectedDate(newDate);},_clearCalendar:function(){var calendar=this.getCalendar();calendar.find('tr.calendar_days').remove();calendar.find('tr.space').remove();},_highlightCell:function(cell){cell.addClass('in_range');},_removeHighlight:function(cell){cell.removeClass('in_range');},_cutDate:function(date){if(date<this._minDate){date=this._minDate;}
if(date>this._maxDate){date=this._maxDate;}
return date;},_getDateFromCell:function(cell){var newDate=this._focusedDate.clone();if($(cell).is('.prev_month')){newDate.addMonths(-1);}else if($(cell).is('.next_month')){newDate.addMonths(1);}
var newDay=parseInt($(cell).attr('data-value'));newDate.setDate(newDay);return newDate;},_getFirstVisiblePrevMonthDay:function(prevMonthDaysCount,firstDay){return prevMonthDaysCount-(--firstDay);},_initMonthNames:function(){var monthNames=[];var monthNamesContainer=$('#'+this._locale+'MonthNames');if(monthNamesContainer.length){monthNames=JSON.parse(monthNamesContainer.val());}else{monthNames=UIDateTimeUtils.getMonthNames(this._locale);}
return monthNames;},_initWeekDayNames:function(){var weekDayNames=[];var weekDayNamesContainer=$('#'+this._locale+'ShortWeekDayNames');if(weekDayNamesContainer.length){weekDayNames=JSON.parse(weekDayNamesContainer.val());}else{weekDayNames=UIDateTimeUtils.getWeekDayShortNames(this._locale);}
return weekDayNames;}},{DAYS_IN_WEEK:7,DAY_NAME_CELL_SELECTOR:'.day_name',event:{CALENDAR_CHANGED:'change',CELL_CLICKED:'cell_clicked'}});

var NullFormField=FormField.extend({initialize:function()
{},getName:function()
{this._logWarningMethodUsage('getName');return'';},getId:function()
{this._logWarningMethodUsage('getId');return'';},setContainer:function(container)
{this._logWarningMethodUsage('setContainer');},getContainer:function()
{this._logWarningMethodUsage('getContainer');return $();},setDefaultValue:function(defaultValue)
{this._logWarningMethodUsage('setDefaultValue');},setPlaceholderValue:function(value)
{this._logWarningMethodUsage('setPlaceholderValue');},getValue:function()
{this._logWarningMethodUsage('getValue');return 0;},setValue:function(value)
{this._logWarningMethodUsage('setValue');},restoreToInitialValue:function()
{this._logWarningMethodUsage('restoreToInitialValue');},saveCurrentValueAsInitial:function()
{this._logWarningMethodUsage('saveCurrentValueAsInitial');},showError:function(validatorMessage)
{this._logWarningMethodUsage('showError');},hideError:function()
{this._logWarningMethodUsage('hideError');},show:function()
{this._logWarningMethodUsage('show');},hide:function()
{this._logWarningMethodUsage('hide');},refresh:function()
{this._logWarningMethodUsage('refresh');},clear:function()
{this._logWarningMethodUsage('clear');},enable:function()
{this._logWarningMethodUsage('enable');},disable:function()
{this._logWarningMethodUsage('disable');},showLoading:function()
{this._logWarningMethodUsage('showLoading');},hideLoading:function()
{this._logWarningMethodUsage('hideLoading');},hideFieldRow:function()
{this._logWarningMethodUsage('hideFieldRow');},showFieldRow:function()
{this._logWarningMethodUsage('showFieldRow');},getFormFieldElement:function()
{this._logWarningMethodUsage('getFormFieldElement');return $();},isEmpty:function()
{this._logWarningMethodUsage('isEmpty');return false;},_logWarningMethodUsage:function(methodName)
{this._logWarning('NullFormField '+this.id+' using method '+methodName);},_logWarning:function(warning)
{try
{console&&console.log&&console.log(warning);}
catch(error)
{}}});

var TextareaAutogrowFormField=FormField.extend({field:null,initialize:function(){this.field=$('#'+this.id);this.name=this.container.find(TextareaAutogrowFormField.selector.FORM_FIELD_NAME).val();this.saveCurrentValueAsInitial();this._initHandlers();this._showPlaceholder();this._сlickCaretPositionFix();},terminate:function(){this.field.off();this.base();},getValue:function(){if(this._placeholderIsShown()){return'';}
return this._getRawValue();},setValue:function(value){if(value!==''){this._hidePlaceholder();this.field.text(value);}else{this.clear();}
this.dispatchEvent(FormField.event.CHANGE);},clear:function(){this.field.text('');this.dispatchEvent(FormField.event.CHANGE);this.field.blur();this._showPlaceholder();},disable:function(){this.field.prop('contenteditable',false);this.container.addClass(FormField.css.DISABLED);},enable:function(){this.field.prop('contenteditable',true);this.container.removeClass(FormField.css.DISABLED);},select:function(){this.focus();},enableReadonly:function(){this.field.prop('contenteditable',false);this.container.addClass(FormField.css.READONLY);},disableReadonly:function(){this.field.prop('contenteditable',true);this.container.removeClass(FormField.css.READONLY);},isReadonly:function(){return this.container.hasClass(FormField.css.READONLY);},focus:function(){this.field.focus();},blur:function(){this.field.blur();},_сlickCaretPositionFix:function(){var fieldComputedStyle=window.getComputedStyle(this.field[0]);var leftMargin=-parseInt(fieldComputedStyle.marginLeft);var topMargin=-parseInt(fieldComputedStyle.marginTop);this.field.on('mousedown',function(event){var height=this.field[0].clientHeight;var width=this.field[0].clientWidth;var posX=event.offsetX;var posY=event.offsetY;if(posX<leftMargin||posX>(width-leftMargin)||posY<topMargin||posY>(height-topMargin)){event.preventDefault();}}.bind(this));},_getRawValue:function(){var htmlValue=this.field.html();var convertedEndLinesValue=$.trim(htmlValue.replace(/\r/g,'').replace(/<br.*?>/g,'\r\n').replace(/<\/p>/g,'</p>\r\n'));var convertedHtmlEntitiesEndLinesValue=UIHtmlEntitiesCoding.decodeHtmlEntities(convertedEndLinesValue);var convertedNbspHtmlEntitiesEndLinesValue=convertedHtmlEntitiesEndLinesValue.replace(/\u00A0/g,' ');return convertedNbspHtmlEntitiesEndLinesValue;},_showDefaultValue:function(){if(this.getValue()===''){this.field.text(this.defaultValue);}},_initHandlers:function(){var thisPtr=this;this.field.focus(handler(this,'_onFocus'));this.field.blur(handler(this,'_onBlur'));this.field.keydown(function(e){thisPtr.dispatchEvent(FormField.event.KEYDOWN,e);});this.field.keypress(function(e){thisPtr.dispatchEvent(FormField.event.KEYPRESS,e);});this.field.keyup(function(e){if(UIEventUtils.getCharCodeFromKeypressEvent(e)==UICharUtils.code.ESC){thisPtr._onEscKeyUp();return false;}
thisPtr.dispatchEvent(FormField.event.KEYUP,e);});this.field.on(this.chooseInputEventByBrowser(),function(){thisPtr.dispatchEvent(FormField.event.INPUT);});this.field.change(function(e){thisPtr.dispatchEvent(FormField.event.CHANGE,e);});this.container.click(function(e){thisPtr.dispatchEvent(FormField.event.CLICK,e);});this.field.on('paste',function(event){thisPtr._pastePlainText(event);});},_onEscKeyUp:function(){this.container.removeClass(FormField.css.FOCUS);this.field.blur();this._showPlaceholder();},_pastePlainText:function(e){if(e.clipboardData||e.originalEvent.clipboardData){e.preventDefault();var event=e.originalEvent||e;document.execCommand('insertText',false,event.clipboardData.getData('text/plain'));}else if(window.clipboardData){e.preventDefault();document.selection.createRange().pasteHTML(window.clipboardData.getData('Text'));}},_onFocus:function(){if(this.hasError()){this._errorBehavior.showErrorDescription();}
if(!this.isReadonly()){this._hidePlaceholder();this.container.addClass(FormField.css.FOCUS);this._showDefaultValue();this.dispatchEvent(FormField.event.FOCUS);}},_onBlur:function(){if(this.hasError()){this._errorBehavior.hideErrorDescription();}
if(!this.isReadonly()){this._showPlaceholder();this.container.removeClass(FormField.css.FOCUS);this.dispatchEvent(FormField.event.BLUR);}},_placeholderIsShown:function(){return this.field.hasClass(FormField.css.PLACEHOLDER);},_showPlaceholder:function(){if(this._getRawValue()===''&&!this._hasFocus()){this.field.text(this.placeholder);this.field.addClass(FormField.css.PLACEHOLDER);}},_hidePlaceholder:function(){if(this._placeholderIsShown()){this.field.text('');this.field.removeClass(FormField.css.PLACEHOLDER);}},isEmpty:function(){return!Boolean(this.getValue());},_hasFocus:function(){return this.field.is(':focus');}},{selector:{FORM_FIELD_NAME:'[data-role-name]'}});

var HiddenFormField=FormField.extend({field:null,initialize:function()
{this.field=$('#'+this.id);this.name=this.field.attr('name');},getValue:function()
{return this.field.val();},setValue:function(value)
{this.field.val(value);this.dispatchEvent(FormField.event.CHANGE);},isEmpty:function()
{return!Boolean(this.getValue());},clear:function()
{this.setValue('');}});

var JsonHiddenFormField=FormField.extend({field:null,initialize:function()
{this.field=$('#'+this.id);this.name=this.field.attr('name');},getValue:function()
{return JSON.parse(this.field.val());},setValue:function(value)
{this.field.val(JSON.stringify(value));this.dispatchEvent(FormField.event.CHANGE);},isEmpty:function()
{return this.getValue()==null;},clear:function()
{this.setValue(null);}});

var MaskedFormField=FormField.extend({_field:null,initialize:function(){this._field=$('#'+this.id);this.name=this._field.attr('name');this._initInputMask();this.saveCurrentValueAsInitial();this._initHandlers();},terminate:function(){this._field.inputmask('remove');this._field.off();this.base();},getValue:function(){return $.trim(this._field.val());},setValue:function(newValue){this._field.inputmask('setvalue',newValue);},refresh:function(){this.clear();},_initInputMask:function(){var mask=this._field.attr(MaskedFormField.attr.FORM_FIELD_MASK);var maskPlaceholder=this._field.attr(MaskedFormField.attr.FORM_FIELD_MASK_PLACEHOLDER);var options={autoUnmask:false,placeholder:maskPlaceholder,clearMaskOnLostFocus:false,showMaskOnHover:false,showMaskOnFocus:false,definitions:{'n':{validator:'^([0-9]|[1-9][0-9])$',cardinality:2,prevalidator:[{validator:'[0-9]',cardinality:1}]},'d':{validator:'^([1-9]|[1-9][0-9]|[1-9][0-9][0-9])$',cardinality:3,prevalidator:[{validator:'[1-9]',cardinality:1},{validator:'[1-9][0-9]',cardinality:2}]},'z':{validator:'^([1-9][0-9][0-9])$',cardinality:3,prevalidator:[{validator:'[0-9]',cardinality:1},{validator:'[1-9][0-9]',cardinality:2}]},'u':{validator:'^([1][0][0])$',cardinality:3,prevalidator:[{validator:'[1-9]',cardinality:1},{validator:'[1-9][0-9]',cardinality:2}]},'x':{validator:'^([1][0][0][0])$',cardinality:4,prevalidator:[{validator:'[0-9]',cardinality:1},{validator:'[1-9][0-9]',cardinality:2},{validator:'[1-9][0-9][0-9]',cardinality:3}]},'t':{validator:'^([1][0][0][0])$',cardinality:4,prevalidator:[{validator:'[1-9]',cardinality:1},{validator:'[1-9][0-9]',cardinality:2},{validator:'[1-9][0-9][0-9]',cardinality:3}]},'h':{validator:'^([0-9]|[0][0-9]|[1][0-9]|[2][0-3])$',cardinality:2,prevalidator:[{validator:"[0-9]",cardinality:1}]},'s':{validator:'^([0-5][0-9])$',cardinality:2,prevalidator:[{validator:'[0-9]',cardinality:1}]},'m':{validator:'^([1][0][0][0][0][0][0])$',cardinality:7,prevalidator:[{validator:"[1-9]",cardinality:1},{validator:"[1-9][0-9]",cardinality:2},{validator:"[1-9][0-9][0-9]",cardinality:3},{validator:"[1-9][0-9][0-9][0-9]",cardinality:4},{validator:"[1-9][0-9][0-9][0-9][0-9]",cardinality:5},{validator:"[1-9][0-9][0-9][0-9][0-9][0-9]",cardinality:6}]}}};var radixPoint=this._field.attr(MaskedFormField.attr.FORM_FIELD_MASK_RADIX_POINT);if(radixPoint){options.radixPoint=radixPoint;}
this._field.inputmask(mask,options);},_initHandlers:function(){var thisPtr=this;this._field.focus(handler(this,'_onFocus'));this._field.blur(handler(this,'_onBlur'));this._field.keypress(function(e){thisPtr.dispatchEvent(FormField.event.KEYPRESS,e);});this._field.keyup(function(e){thisPtr.dispatchEvent(FormField.event.KEYUP,e);});this._field.change(function(e){thisPtr.dispatchEvent(FormField.event.CHANGE,e);});},_onFocus:function(){if(this.hasError()){this._errorBehavior.showErrorDescription();}
this.container.addClass(FormField.css.FOCUS);this.dispatchEvent(FormField.event.FOCUS);},_onBlur:function(){if(this.hasError()){this._errorBehavior.hideErrorDescription();}
this.container.removeClass(FormField.css.FOCUS);this.dispatchEvent(FormField.event.BLUR);},clear:function(){this.hideError();this.setValue('');this._field.blur();},disable:function(){this._field.prop('disabled',true);this.container.addClass(FormField.css.DISABLED);},enable:function(){this._field.prop('disabled',false);this.container.removeClass(FormField.css.DISABLED);},isEmpty:function(){return!Boolean(this.getValue());}},{attr:{FORM_FIELD_MASK:'data-form-field-mask',FORM_FIELD_MASK_PLACEHOLDER:'data-form-field-mask-placeholder',FORM_FIELD_MASK_RADIX_POINT:'data-form-field-radix-point'}});$(function(){Inputmask.extendAliases({'isoCurrency':{alias:'currency',prefix:'',groupSeparator:'',max:99999999.99,min:0,rightAlign:false},'unsigned_hundred':{alias:'u'}});});

var TokenFormField=FormField.extend({_reader:null,_holder:null,_widthTester:null,_maxTokenTextWidth:null,_requestParams:{},_limitTokenCount:0,_tagsTokenInput:{},initialize:function(){this.name=$('#'+this.id+'Items').attr('name');this._initTokenInput();},terminate:function(){this._tagsTokenInput.terminate();this.container.off();this.base();},getValue:function(){return this._tagsTokenInput.getNamesAsString();},clear:function(){this._tagsTokenInput.clear();},_initTokenInput:function(){this._tagsTokenInput=new TagsTokenInput(this.id);this._tagsTokenInput.setContainer(this.container);this._tagsTokenInput.setRequestUrl($('#'+this.id+'LoadTokenUrl').val());this._tagsTokenInput.setMaxTokenCount(TokenFormField.MAX_TAGS);this._tagsTokenInput.setMaxTokenLength(TokenFormField.MAX_TAG_LENGTH);this._tagsTokenInput.setTokenListSizeFixed(true);this._tagsTokenInput.addListener(BaseTokenInput.event.TYPE_IN_STATE,this,this._addPlaceholder);this._tagsTokenInput.addListener(BaseTokenInput.event.BLUR,this,this._removeFocus);this._tagsTokenInput.addListener(BaseTokenInput.event.FOCUS,this,this._removePlaceholder);this._tagsTokenInput.init();var formFieldElement=$('['+FormField.attr.FORM_FIELD_ID+'="'+this.id+'"]');var isDisabled=formFieldElement.attr(TokenFormField.attr.FORM_FIELD_IS_DISABLED);if(isDisabled){this._tagsTokenInput.disable();}
this.saveCurrentValueAsInitial();this.container.focus(handler(this,'_onFocus'));this._initIeFix();},_initIeFix:function(){if(UIBrowserUtils.isIe()){var thisPtr=this;this.container.on('mouseup',function(){if(!thisPtr.container.hasClass(FormField.css.FOCUS)){thisPtr._onFocus();}});}},_onFocus:function(){this._removePlaceholder();this._tagsTokenInput.focus();},_removePlaceholder:function(){this.container.removeClass(FormField.css.PLACEHOLDER);this.container.addClass(FormField.css.FOCUS);},_addPlaceholder:function(){this.container.addClass(FormField.css.PLACEHOLDER);this._removeFocus();},_removeFocus:function(){this.container.removeClass(FormField.css.FOCUS);},isEmpty:function(){return!Boolean(this._tagsTokenInput.getItems().length);}},{MAX_TAGS:20,MAX_TAG_LENGTH:100,SEARCH_TIMEOUT:50,SEARCH_DELAY:330,LIMIT_TOKEN_COUNT:10,READER_FREE_SPACE:30,CONTAINER_WIDTH_MAX_TOKEN_TEXT_WIDTH_DIFFERENCE:60,attr:{FORM_FIELD_IS_DISABLED:'data-form-field-is-disabled'}});

var SelectFormField=FormField.extend({_field:null,_customSelect:null,_dropdown:null,_dependentFields:null,_updateUrl:null,_refreshCallback:null,initialize:function()
{this._field=$('#'+this.id);this.name=this._field.attr('name');this._initCustomSelect();this._initHandlers();this._initDependentFields();this.saveCurrentValueAsInitial();},terminate:function()
{this._terminateHandlers();this._detachEventsFromDropdown();this._dropdown=undefined;this._customSelect.destroy();this._field.off();},getValue:function()
{if(this._placeholderIsShown())
{return'';}
return this._field.val();},setValue:function(newValue)
{this._customSelect.setValue(newValue);},disable:function()
{this._customSelect.disable();},enable:function()
{this._customSelect.enable();},refresh:function(callback)
{this._refreshCallback=callback;if(this._dependentFields)
{this._updateOptions();}
else
{this._refreshCustomSelect();this._applyRefreshCallback();}},setOptions:function(options)
{this._clearForUpdate();for(var key in options)
{var optionElement=$('<option value="'+key+'">'+options[key]+'</option>');this._field.append(optionElement);}
this._finishUpdate();},restoreToInitialValue:function()
{this.refresh(handler(this,'_onRestoreToInitialValueRefreshed'));},_applyRefreshCallback:function()
{if(this._refreshCallback)
{this._refreshCallback();this._refreshCallback=null;}
this.dispatchEvent(SelectFormField.event.REFRESHED);},_onRestoreToInitialValueRefreshed:function()
{this.setValue(this.initialValue);},_initDisplayTick:function()
{var needToShowTick=parseInt(this.getFormFieldElement().attr(SelectFormField.attr.SHOW_TICK))==1;var dropdownMenu=$(this._dropdown);if(needToShowTick)
{dropdownMenu.addClass(SelectFormField.SHOW_TICK);}
else if(dropdownMenu.hasClass(SelectFormField.SHOW_TICK))
{dropdownMenu.removeClass(SelectFormField.SHOW_TICK);}},_initDependentFields:function()
{var thisPtr=this;var dependentFields=this._field.data(SelectFormField.data.SELECT_FORM_FIELD_DEPENDENT_FIELDS);var updateUrl=this._field.data(SelectFormField.data.SELECT_FORM_FIELD_UPDATE_URL);var hasDependencies=(dependentFields.length&&updateUrl);if(hasDependencies)
{this._dependentFields=dependentFields;this._updateUrl=updateUrl;$.each(this._dependentFields,function(){var dependentFormField=FormFieldStorage.getFormFieldById(String(this));if(!FormField.isNullType(dependentFormField))
{dependentFormField.addListener(FormField.event.CHANGE,thisPtr,thisPtr._onDependentFieldChange);}});this._updateOptions();}},_onDependentFieldChange:function()
{this._updateOptions();},_updateOptions:function()
{this._clearForUpdate();var data={};$.each(this._dependentFields,function(){var dependentFormField=FormFieldStorage.getFormFieldById(String(this));if(!FormField.isNullType(dependentFormField))
{data[dependentFormField.getName()]=dependentFormField.getValue();}});var thisPtr=this;$.ajax({url:this._updateUrl,data:data,dataType:'json',success:function(response)
{if(response.content)
{thisPtr._updateOptionsContent(response.content);}
thisPtr._applyRefreshCallback();thisPtr._onChange();}})},_clearForUpdate:function()
{this.disable();this._field.children(':not(.placeholder)').remove();this._refreshCustomSelect();},_finishUpdate:function()
{this._refreshCustomSelect();this.enable();},_updateOptionsContent:function(content)
{this._field.append(content);this._finishUpdate();},_placeholderIsShown:function()
{return this._field.val()==this.placeholder;},_initCustomSelect:function()
{this.container.removeClass(SelectFormField.css.NOT_INITIALIZED);this._customSelect=new SelectBox(this._field,SelectFormField.CUSTOM_SELECT_OPTIONS);this._updateCustomSelectDropdown();},_attachEventsToDropdown:function()
{var select=this._customSelect.getSelectElement();var control=$(select).data(SelectFormField.SELECTBOX_CONTROL);this._dropdown=control.data(SelectFormField.SELECTBOX_OPTIONS);this._dropdown.find('li').bind(SelectFormField.SELECTBOX_MOUSEDOWN,handler(this,'_onMouseDown')).bind(SelectFormField.SELECTBOX_MOUSEUP,handler(this,'_removeOldChoice')).bind(SelectFormField.SELECTBOX_MOUSEOVER,handler(this,'_hideCurrentChoice')).bind(SelectFormField.SELECTBOX_MOUSEOUT,handler(this,'_showCurrentChoice'));},_detachEventsFromDropdown:function()
{if(this._dropdown)
{this._dropdown.find('li').off();}},_onMouseDown:function(event)
{event.preventDefault();},_removeOldChoice:function(event)
{if(UIEventUtils.isMouseButtonLeft(event))
{this._removeWasSelected();}},_hideCurrentChoice:function()
{this._dropdown.find("."+SelectFormField.DROPDOWN_SELECTED_CLASS).addClass(SelectFormField.DROPDOWN_WAS_SELECTED_CLASS).removeClass(SelectFormField.DROPDOWN_SELECTED_CLASS);},_showCurrentChoice:function()
{this._dropdown.find("."+SelectFormField.DROPDOWN_WAS_SELECTED_CLASS).addClass(SelectFormField.DROPDOWN_SELECTED_CLASS).removeClass(SelectFormField.DROPDOWN_WAS_SELECTED_CLASS);},_initHandlers:function()
{this._field.change(handler(this,'_onChange'));},_onChange:function()
{this._removeWasSelected();this.dispatchEvent(FormField.event.CHANGE);},_terminateHandlers:function()
{this._field.off();},_removeWasSelected:function()
{this._dropdown.find("."+SelectFormField.DROPDOWN_WAS_SELECTED_CLASS).removeClass(SelectFormField.DROPDOWN_WAS_SELECTED_CLASS);},isEmpty:function()
{return!Boolean(this.getValue());},_refreshCustomSelect:function()
{this._customSelect.refresh();this._updateCustomSelectDropdown();},_addTooltipInSelectOptions:function()
{$('ul.selectBox-options li').each(function()
{var text=$(this).text();$(this).attr('title',text);});},_updateCustomSelectDropdown:function()
{this._attachEventsToDropdown();this._initDisplayTick();this._addTooltipInSelectOptions();}},{SHOW_TICK:'show_tick',DROPDOWN_SELECTED_CLASS:'selectBox-selected',DROPDOWN_WAS_SELECTED_CLASS:'was-selected',SELECTBOX_CONTROL:'selectBox-control',SELECTBOX_OPTIONS:'selectBox-options',SELECTBOX_MOUSEOVER:'mouseover.selectBox',SELECTBOX_MOUSEOUT:'mouseout.selectBox',SELECTBOX_MOUSEUP:'mouseup.selectBox',SELECTBOX_MOUSEDOWN:'mousedown.selectBox',event:{REFRESHED:'refreshed'},css:{NOT_INITIALIZED:'not_initialized'},attr:{SHOW_TICK:'data-form-field-show-tick'},data:{SELECT_FORM_FIELD_DEPENDENT_FIELDS:'select-form-field-dependent-fields',SELECT_FORM_FIELD_UPDATE_URL:'select-form-field-update-url'},CUSTOM_SELECT_OPTIONS:{hideOnWindowScroll:true,mobile:true}});

var PassmeterFormField=PasswordFormField.extend({_strengthPasswordChecker:null,_strengthTooltip:null,_wrapper:null,initialize:function()
{this.base();this._wrapper=this.container.find('.form_field_wrapper');this._initPasswordStrength();},terminate:function()
{this._hideStrengthTooltip();this.base();},_initPasswordStrength:function()
{var minLength=this.field.data(PassmeterFormField.data.FROM_FIELD_MIN_LENGTH);var validationRule=this.field.data(PassmeterFormField.data.FORM_FIELD_VALIDATION_RULE);var customMessages=this.field.data(PassmeterFormField.data.STRENGTH_CHECKER_MESSAGES);this._strengthPasswordChecker=new PassmeterStrengthChecker(minLength,validationRule,customMessages);this._initStrengthTooltip();this.fieldPassword.keyup(this._processStrength.bind(this));this.fieldText.keyup(this._processStrength.bind(this));this.fieldPassword.focus(this._processStrength.bind(this));this.fieldText.focus(this._processStrength.bind(this));},_initStrengthTooltip:function()
{this._wrapper.tooltip({preset:TooltipOptions.PRESET.NO_POINTER,positions:[TooltipOptions.POSITION.RIGHT,TooltipOptions.POSITION.LEFT,TooltipOptions.POSITION.BOTTOM],parent:$('body'),overlap:-16,trigger:'none'});},_showStrengthTooltip:function(message)
{this._wrapper.attr('bt-xTitle',message);this._wrapper.btOn();},_hideStrengthTooltip:function()
{this._wrapper.btOff();},_processStrength:function(event)
{if(!this._isEnterPressed(event))
{this.hideError();this._strengthPasswordChecker.validateAndPrepareMessage(this.getValue());this._showStrengthTooltip(this._strengthPasswordChecker.getMessage());}},_onFocus:function()
{this.base();if(!this.hasError())
{this._processStrength();}},_onBlur:function()
{this._hideStrengthTooltip();this.base();},clear:function()
{this._hideStrengthTooltip();this.base();},showError:function(errorMessage)
{this._hideStrengthTooltip();this.base(errorMessage);},_isEnterPressed:function(event)
{var isEnterPressed=false;if(event&&event.type=='keyup')
{var keyUpCode=event.which||event.keyCode;isEnterPressed=(keyUpCode==UIKeyboardButtons.ENTER);}
return isEnterPressed;}},{data:{FROM_FIELD_MIN_LENGTH:'form-field-min-length',FORM_FIELD_VALIDATION_RULE:'form-field-validation-rule',STRENGTH_CHECKER_MESSAGES:'strength-checker-messages'}});

var UsersTokenFormField=FormField.extend({_usersList:null,initialize:function()
{this.name=$('#'+this.id+'Items').attr('name');this._initUsersList();},terminate:function()
{this._usersList.terminate();this.base();},_initUsersList:function()
{var userRequestUrl=$('#'+this.id+'UsersUrl').val();this._usersList=new UsersTokenInput(this.id);this._usersList.setRequestUrl(userRequestUrl);this._usersList.init();},setRequestAdditionalParams:function(params)
{this._usersList.addRequestParams(params);},getValue:function()
{return this._usersList.getItemsIds();},setValue:function(value)
{},restoreToInitialValue:function()
{this.refresh();},saveCurrentValueAsInitial:function()
{},refresh:function()
{this._usersList.refresh();},clear:function()
{this._usersList.clear();},disable:function()
{this._usersList.disable();},enable:function()
{this._usersList.enable();},isEmpty:function()
{return!Boolean(this._usersList.getItems().length);}},{});

var DefaultCheckboxFormField=BaseCheckboxFormField.extend({disable:function()
{this.base();this._field.prop('disabled',true);},enable:function()
{this.base();this._field.prop('disabled',false);},isEnabled:function()
{return this._field.is(':enabled');},getValue:function()
{return this._field.is(':checked');},setValue:function(value)
{this._field.prop('checked',Boolean(value));},silentSetValue:function(value)
{this._removeOnChangeListener();this.setValue(value);this._addOnChangeListener();},_initHandlers:function()
{this.base();var thisPtr=this;this._field.on('change',function(){if(thisPtr.getValue())
{thisPtr.dispatchEvent(FormField.event.CHECKED,thisPtr._getFieldData());}
else
{thisPtr.dispatchEvent(FormField.event.UNCHECKED,thisPtr._getFieldData());}});this._field.on('click',function(){thisPtr.dispatchEvent(FormField.event.CLICK);});this._addOnChangeListener();},_removeOnChangeListener:function()
{this._field.off('change',handler(this,'_onChange'));},_addOnChangeListener:function()
{this._field.on('change',handler(this,'_onChange'));},_onChange:function()
{this._field.val(this.getValue());this.dispatchEvent(FormField.event.CHANGE,this._getFieldData());},_initCheckbox:function()
{this.base();this._field.tooltip();this.saveCurrentValueAsInitial();}});

var RadioFormField=FormField.extend({_fields:null,initialize:function()
{this._initRadioFields();this.name=this._fields[0].attr('name');this.saveCurrentValueAsInitial();this._initHandlers();this._initState();},terminate:function()
{$.each(this._fields,function(){$(this).off().iCheck("destroy");});this.base();},_initState:function()
{var isDisabled=parseInt($('#'+this.id+'Disabled').val());if(isDisabled)
{this.disable();}},_initHandlers:function()
{var thisPtr=this;$.each(this._fields,function(key,field){field.on('ifChecked',function(){thisPtr.dispatchEvent(FormField.event.CHANGE,{id:this.id,value:field.val()});});});},setValue:function(newValue)
{$.each(this._fields,function(key,field){field.iCheck(field.val()==newValue?'check':'uncheck');});},disable:function()
{var thisPtr=this;$.each(this._fields,function(key,field){thisPtr._disableItem(field);});},enable:function()
{var thisPtr=this;$.each(this._fields,function(key,field){thisPtr._enableItem(field);});},_disableItem:function(item)
{item.parents('#'+item.attr('id')+'Container').addClass(FormField.css.DISABLED);item.iCheck('disable');},_enableItem:function(item)
{item.parents('#'+item.attr('id')+'Container').removeClass(FormField.css.DISABLED);item.iCheck('enable');},getValue:function()
{var fieldVal=null;$.each(this._fields,function(key,field){if(field.is(':checked'))
{fieldVal=field.val();}});return fieldVal;},_initRadioFields:function(fields)
{var fields=$('['+FormField.attr.FORM_FIELD_ID+'="'+this.id+'"]');if(!fields.length)
{throw new Error('Empty radio fields');}
var thisPtr=this;this._fields=[];$.each(fields,function(){thisPtr._initRadioItem($(this));});},_initRadioItem:function(fieldElement)
{var itemId=fieldElement.attr('id');fieldElement.iCheck({radioClass:RadioFormField.css.CUSTOM_RADIO,increaseArea:RadioFormField.style.CUSTOM_RADIO_HELPER_INCREASE_AREA});this._fields.push(fieldElement);var isDisabled=parseInt($('#'+itemId+'Disabled').val());if(isDisabled)
{this._disableItem(fieldElement);}},isEmpty:function()
{return!Boolean(this.getValue());}},{css:{CUSTOM_RADIO:'radio_ng radio_form_field'},style:{CUSTOM_RADIO_HELPER_INCREASE_AREA:'50%'}});

var SearchFormField=FormField.extend({_field:null,_clearButton:null,_searchButton:null,_storedValue:null,_filterTimeoutId:null,_inlineSearch:true,initialize:function(){this._inlineSearch=!!document.getElementById('inlineSearch').value;this._field=$('#'+this.id);if(this._field.is(":focus")){this._field.blur();}
this.name=this._field.attr('name');this._storedValue=this._field.val();this._initClearButton();this._initSearchButton();this._initHandlers();this._showPlaceholder();},terminate:function(){this._field.val('');this._field.off();this._clearButton.off();this.base();},getValue:function(){if(this._placeholderIsShown()){return'';}
return this._getRawValue();},setValue:function(value){this._setFieldValue(value);this._storedValue=value;},clear:function(silentMode){silentMode=(typeof silentMode==='undefined')?false:silentMode;this._field.val('');this._onFilterChange(silentMode);this._field.blur();this._showPlaceholder();},_setFieldValue:function(value){this._hidePlaceholder();this._field.val(value);},_getRawValue:function(){return $.trim(this._field.val());},_initSearchButton:function(){this._searchButton=$('#'+this.id+'SearchButton');if(this._searchButton.length>0&&!this._inlineSearch){this._searchButton.click(this._onSearchButtonClick.bind(this));}},_initClearButton:function(){this._clearButton=$('#'+this.id+'ClearButton');if(this._clearButton.length>0){this._clearButton.click(handler(this,'_onClearButtonClick'));}},_initHandlers:function(){this._field.focus(handler(this,'_onFocus'));this._field.blur(handler(this,'_onBlur'));if(this._inlineSearch){var filterChangeEvent=this.chooseInputEventByBrowser();this._field.on(filterChangeEvent,this._onFilterChange.bind(this));}
else{this._field.keyup(this._onFieldKeyUp.bind(this));}},_onFieldKeyUp:function(event){if(this._isEnterPressed(event)){this._onFilterChange();}},_isEnterPressed:function(event){var isEnterPressed=false;if(event&&event.type=='keyup'){var keyUpCode=event.which||event.keyCode;isEnterPressed=(keyUpCode==UIKeyboardButtons.ENTER);}
return isEnterPressed;},_onFocus:function(){this._hidePlaceholder();this.container.addClass(FormField.css.FOCUS);this.dispatchEvent(FormField.event.FOCUS);},_onBlur:function(){this._showPlaceholder();this.container.removeClass(FormField.css.FOCUS);this.dispatchEvent(FormField.event.BLUR);},_onSearchButtonClick:function(){this._onFilterChange();},_onClearButtonClick:function(){if(this.getValue()!=''){this.clear();this._field.focus();}},_onFilterChange:function(silentMode){silentMode=(typeof silentMode==='undefined')?false:silentMode;var value=this.getValue();if(value!=this._storedValue){this._storedValue=value;this._updateFilterTimeout(silentMode);}
this.dispatchEvent(FormField.event.CHANGE);},_updateFilterTimeout:function(silentMode){!this._inlineSearch&&this._field.attr('disabled',true);silentMode=(typeof silentMode==='undefined')?false:silentMode;if(this._filterTimeoutId!=null){clearTimeout(this._filterTimeoutId);}
if(silentMode!==true){this._filterTimeoutId=setTimeout(this._onFilterTimeout.bind(this),SearchFormField.FILTER_DELAY);}},_onFilterTimeout:function(){this._filterTimeoutId=null;!this._inlineSearch&&this._field.attr('disabled',false);this.dispatchEvent(SearchFormField.event.FILTER_CHANGED);},_placeholderIsShown:function(){return this._getRawValue()==this.placeholder;},_showPlaceholder:function(){if(this._getRawValue()==''){this._field.val(this.placeholder);this._field.addClass(FormField.css.PLACEHOLDER);this.container.addClass(FormField.css.PLACEHOLDER);}},_hidePlaceholder:function(){if(this._placeholderIsShown()){this._field.val('');this._field.removeClass(FormField.css.PLACEHOLDER);this.container.removeClass(FormField.css.PLACEHOLDER);}},isEmpty:function(){return!Boolean(this.getValue());}},{FILTER_DELAY:500,event:{FILTER_CHANGED:'filter_changed'}});

var QuickInsertFormField=FormField.extend({_textField:null,initialize:function()
{this._textField=FormFieldStorage.createFormFieldById(this.id+'TextField');this.name=this._textField.getName();this._initHandlers();},terminate:function()
{this._textField.terminate();this.base();},blur:function()
{this._textField.blur();},getValue:function()
{return this._textField.getValue();},setValue:function(value)
{this._textField.setValue(value);},setDefaultValue:function(defaultValue)
{this._textField.setDefaultValue(value);},restoreToInitialValue:function()
{this._textField.restoreToInitialValue();},saveCurrentValueAsInitial:function()
{this._textField.saveCurrentValueAsInitial();},clear:function()
{this._textField.clear()},disable:function()
{this._textField.disable();},enable:function()
{this.textField.enable();},focusWithScroll:function(duration)
{this._textField.focusWithScroll(duration);},_initHandlers:function()
{this._textField.addListener(FormField.event.BLUR,this,this._OnValueEnter);this._textField.addListener(FormField.event.KEYDOWN,this,this._onKeyDown);},_onKeyDown:function(e)
{var keyCode=(e.which||e.keyCode);if(keyCode==13)
{this._OnValueEnter(true);}},_OnValueEnter:function(afterEnterPress)
{afterEnterPress=afterEnterPress||false;var value=this._textField.getValue();if(!value&&!afterEnterPress)
{this.hideError();return;}
this.dispatchEvent(QuickInsertFormField.event.VALUE_ENTERED);},showError:function(validatorMessage)
{this._textField.showError(validatorMessage);},hideError:function()
{this._textField.hideError();},isEmpty:function()
{return this._textField.isEmpty();}},{event:{VALUE_ENTERED:'value_entered'}});

var DurationFormField=FormField.extend({_daysField:null,_hoursField:null,_minutesField:null,_isEnabled:null,initialize:function()
{this._initDurationFields();this._initTemplateData();},terminate:function()
{this._daysField.terminate();this._hoursField.terminate();this._minutesField.terminate();this.base();},getValue:function()
{var days=this._daysField.getValue();var hours=this._hoursField.getValue();var minutes=this._minutesField.getValue();return UIDateTimeUtils.convertToSeconds(days,hours,minutes,0);},setValue:function(value)
{value=parseInt(value);if(value<0)
{value=0;}
var duration=UIDateTimeUtils.getDurationAsObject(value);if(duration.seconds>=UIDateTimeUtils.SECONDS_IN_HALF_MINUTE)
{++duration.minutes;}
this._daysField.setValue(duration.days);this._hoursField.setValue(duration.hours);this._minutesField.setValue(duration.minutes);},isEnabled:function()
{return this._isEnabled;},disable:function()
{this._daysField.disable();this._hoursField.disable();this._minutesField.disable();this._isEnabled=false;},enable:function()
{this._daysField.enable();this._hoursField.enable();this._minutesField.enable();this._isEnabled=true;},_initDurationFields:function()
{this._daysField=FormFieldStorage.createFormFieldById(this.id+DurationFormField.selectors.DAYS_FIELD_ID_POSTFIX);this._hoursField=FormFieldStorage.createFormFieldById(this.id+DurationFormField.selectors.HOURS_FIELD_ID_POSTFIX);this._minutesField=FormFieldStorage.createFormFieldById(this.id+DurationFormField.selectors.MINUTES_FIELD_ID_POSTFIX);this._initHandlers(this._daysField);this._initHandlers(this._hoursField);this._initHandlers(this._minutesField);},_initHandlers:function(formField)
{var that=this;formField.addListener(FormField.event.CHANGE,this,function(e){if(formField.getValue()==='')
{formField.setValue(DurationFormField.DURATION_FIELD_DEFAULT_VALUE);}
that.dispatchEvent(FormField.event.CHANGE,e);});formField.addListener(FormField.event.KEYPRESS,this,function(e){that.dispatchEvent(FormField.event.KEYPRESS,e);});formField.addListener(FormField.event.KEYUP,this,function(e){that.dispatchEvent(FormField.event.KEYUP,e);});},_initTemplateData:function()
{var initialField=$('#'+this.id);this.name=initialField.attr('name');this._isEnabled=initialField.attr(DurationFormField.selectors.DISABLED_ATTRIBUTE)!==undefined;}},{DURATION_FIELD_DEFAULT_VALUE:0,selectors:{DAYS_FIELD_ID_POSTFIX:'DaysField',HOURS_FIELD_ID_POSTFIX:'HoursField',MINUTES_FIELD_ID_POSTFIX:'MinutesField',DISABLED_ATTRIBUTE:'disabled'}});

var FormFieldType=Base.extend({},{NULL_TYPE:'null_type',TEXT:'text',TEXT_AREA:'text_area',TEXT_AREA_AUTOGROW:'text_area_autogrow',MASKED:'masked',TOKEN:'token',SELECT:'select',PASSWORD:'password',PASS_METER:'pass_meter',USERS_TOKEN:'users_token',CHECKBOX:'checkbox',RADIO:'radio',SEARCH:'search',HIDDEN:'hidden',JSON_HIDDEN:'json_hidden',TOGGLE:'toggle',AUTOCOMPLETE:'autocomplete',AUTOCOMPLETE_CLOSED:'autocomplete_closed',QUICK_INSERT:'quick_insert',DATE_RANGE:'date_range',BROWSER_BASED_CHECKBOX:'browser_based_checkbox',DURATION:'duration',});

var ErrorBehaviorFactory=Base.extend({},{_newErrorBehaviorObject:function(type)
{switch(type)
{case ErrorBehaviorType.NO_ERROR:return new NoErrorBehavior();case ErrorBehaviorType.TOOLTIP:return new TooltipErrorBehavior();case ErrorBehaviorType.TEXT:return new TextErrorBehavior();default:throw new Error('Invalid error behavior type! '+type);}},create:function(errorBehaviorType,errorBehaviorOptions)
{var errorBehavior=this._newErrorBehaviorObject(errorBehaviorType);errorBehavior.initialize(errorBehaviorOptions);return errorBehavior;}});

var AutocompleteClosedFormField=AutocompleteFormField.extend({_realValue:null,_valueContainer:null,_prevValue:null,_prevVisibleValue:null,getValue:function()
{if(this.getVisibleValue()=="")
{this._silentClearValue();}
return this._realValue;},getVisibleValue:function()
{return this._textField.getValue();},setValue:function(value)
{var oldValue=this._realValue;this._realValue=value;if(oldValue!=this._realValue)
{this.dispatchEvent(AutocompleteClosedFormField.event.REAL_VALUE_CHANGED)}},silentSetValue:function(value)
{this._realValue=value;},setVisibleValue:function(value)
{this._textField.setValue(value);this._prevVisibleValue=value;},clear:function()
{this.base();this._clearValue();},_onDropdownElementSelected:function(element)
{this.base(element);var selectedHyperlink=element.find('a');this.setValue(selectedHyperlink.attr('data-value'));this._prevValue=this.getValue();this._valueContainer.val();this._prevVisibleValue=this.getVisibleValue();},_attachChangeEvent:function()
{this.addListener(AutocompleteClosedFormField.event.REAL_VALUE_CHANGED,this,this._onChange);},_onBlur:function()
{if(this.getVisibleValue()=="")
{this._clearValue();}
else
{this.setVisibleValue(this._prevVisibleValue);}
this.base();this._textField.blur();},_initElements:function(id)
{this.base(id);this._valueContainer=$('#'+id+AutocompleteClosedFormField.VALUE_POSTFIX);this._prevValue=this._valueContainer.val();this._prevVisibleValue=this.getVisibleValue();},_clearValue:function()
{this.setValue(null);this._prevValue=null;this._prevVisibleValue=null;},_silentClearValue:function()
{this.silentSetValue(null);this._prevValue=null;this._prevVisibleValue=null;},isEmpty:function()
{return!Boolean(this.getValue());}},{VALUE_POSTFIX:'Value',event:{REAL_VALUE_CHANGED:"real_value_changed"}});

var DateRangeFormField=FormField.extend({_calendarFrom:null,_calendarTo:null,_dropdown:null,_dateField:null,_calendarButton:null,_blurHandler:null,_valueBeforeShow:null,initialize:function(){var minDate=Date.parseExact($('#'+this.id+'MinValue').val(),UIDateTimeUtils.INNER_DATE_STRING_FORMAT);var maxDate=Date.parseExact($('#'+this.id+'MaxValue').val(),UIDateTimeUtils.INNER_DATE_STRING_FORMAT);var firstDayOfWeek=parseInt($('#'+this.id+'FirstDayOfWeek').val());var dateFormat=$('#'+this.id+'DateFormat').val();var locale=$('#'+this.id+'Locale').val();this._calendarFrom=this.initCalendar(this.id+'From',minDate,maxDate,firstDayOfWeek,dateFormat,locale);this._calendarTo=this.initCalendar(this.id+'To',minDate,maxDate,firstDayOfWeek,dateFormat,locale);this._calendarFrom.addListener(DateFormFieldCalendar.event.CALENDAR_CHANGED,this,this.onDateChanged);this._calendarTo.addListener(DateFormFieldCalendar.event.CALENDAR_CHANGED,this,this.onDateChanged);this._calendarFrom.addListener(DateFormFieldCalendar.event.CELL_CLICKED,this,this._onCellClicked);this._calendarTo.addListener(DateFormFieldCalendar.event.CELL_CLICKED,this,this._onCellClicked);this._dropdown=new Dropdown(this.id,this.id+'Field');this._calendarButton=$('#'+this.id+'Button');this._calendarButton.on('mousedown',handler(this,'_onCalendarButtonClicked'));this._blurHandler=handler(this,'_blurEvent');this._dateField=$('#'+this.id+'Field');this.name=this._dateField.attr('name');if(this._isDisabled()){this.disable();}
var thisPtr=this;$(DateRangeFormField.RANGE_OPTIONS_SELECTOR).on('mousedown',function(event){event.preventDefault();thisPtr._checkRangeOption(this);var rangeCode=$(this).attr('date-id');thisPtr._setRangeOption(rangeCode);});this.setValue(this._getInitialValue());this._dateField.show();},terminate:function(){this._saveCurrentValueAsInitial();this._dropdown.hide();this._calendarButton.off();this._dateField.off();$(DateRangeFormField.RANGE_OPTIONS_SELECTOR).off();this._calendarFrom.destroy();this._calendarTo.destroy();this.base();},initCalendar:function(calendarId,minDate,maxDate,firstDayOfWeek,dateFormat,locale){var calendar=new DateFormFieldCalendar(calendarId,minDate,maxDate,firstDayOfWeek,dateFormat,locale);calendar.setShowOnlyCurrentMonthDays(true);calendar.create(calendarId+'Container');return calendar;},disable:function(){this._dateField.prop('disabled',true);},enable:function(){this._dateField.removeAttr('disabled');},getValue:function(getRaw){var fromDate=this._calendarFrom.getSelectedDate();var toDate=this._calendarTo.getSelectedDate();var value=[getRaw?fromDate:fromDate.toString(UIDateTimeUtils.INNER_DATE_STRING_FORMAT),getRaw?toDate:toDate.toString(UIDateTimeUtils.INNER_DATE_STRING_FORMAT)];return value;},setValue:function(dates){this._calendarFrom.setSelectedDate(Date.parseExact(dates[0],UIDateTimeUtils.INNER_DATE_STRING_FORMAT));this._calendarTo.setSelectedDate(Date.parseExact(dates[1],UIDateTimeUtils.INNER_DATE_STRING_FORMAT));this.onDateChanged();},onDateChanged:function(){var date=this.getDateString();this._dateField.val(date);this._updateAvailableRange(this._calendarTo.getSelectedDate().clone(),this._calendarFrom.getSelectedDate().clone());this._refreshCalendars();},getDateString:function(){return this._calendarFrom.getDateString()+DateRangeFormField.DATE_SEPARATOR+this._calendarTo.getDateString();},getDateStringForReports:function(){return this._calendarFrom.getSelectedDate().toString(DateRangeFormField.DATE_STRING_FORMAT)+':'+this._calendarTo.getSelectedDate().toString(DateRangeFormField.DATE_STRING_FORMAT);},visible:function(){return this._dropdown.isVisible();},show:function(){this.setValue(this.getValue());this._refreshCalendars();this._valueBeforeShow=this.getValue();this._dropdown.show();this._dropdown.getElement().focus();$(document).on('mousedown',this._blurHandler);this.dispatchEvent(DateRangeFormField.event.SHOW);this._initTooltipsForCalendar();},hide:function(){if(this._valueBeforeShow){var currentValue=this.getValue();var isChanged=((currentValue[0]!=this._valueBeforeShow[0])||(currentValue[1]!=this._valueBeforeShow[1]));if(isChanged){this.dispatchEvent(FormField.event.CHANGE);}
this._valueBeforeShow=null;}
this._dropdown.hide();this.dispatchEvent(DateRangeFormField.event.HIDE);},_isDisabled:function(){return this.getFormFieldElement().is(':disabled');},_blurEvent:function(e){var container=this._dropdown.getElement();var button=this._calendarButton;if(!container.is(e.target)&&container.has(e.target).length===0&&!button.is(e.target)&&button.has(e.target).length===0){this.hide();$(document).off('mouseup',this._blurHandler);}},_onCellClicked:function(){var customRangeOption=$(DateRangeFormField.RANGE_OPTIONS_SELECTOR).filter('a[date-id="'+DateRangeFormField.range.CUSTOM+'"]');this._checkRangeOption(customRangeOption);this._setRangeOption(DateRangeFormField.range.CUSTOM);},_checkRangeOption:function(clickedItem){$(DateRangeFormField.RANGE_OPTIONS_SELECTOR).removeClass(DateRangeFormField.SELECTED_CLASS);$(clickedItem).addClass(DateRangeFormField.SELECTED_CLASS);},_updateAvailableRange:function(fromMaxDate,toMinDate){this._calendarFrom.setMaxDate(fromMaxDate);this._calendarTo.setMinDate(toMinDate);},_onCalendarButtonClicked:function(event){event.preventDefault();if(this.visible()){this.hide();}else if(!this._isDisabled()){this.show();}},_setRangeOption:function(rangeCode){var now=new Date();var today=new Date(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate());switch(rangeCode){case DateRangeFormField.range.DAY:this._setRangeInCalendars(today.clone().addDays(-1),today);break;case DateRangeFormField.range.WEEK:this._setRangeInCalendars(today.clone().addDays(-7),today.clone());break;case DateRangeFormField.range.MONTH:this._setRangeInCalendars(today.clone().addMonths(-1),today.clone());break;case DateRangeFormField.range.QUARTER:this._setRangeInCalendars(today.clone().addMonths(-3),today.clone());break;case DateRangeFormField.range.YEAR:this._setRangeInCalendars(today.clone().addYears(-1),today.clone());break;case DateRangeFormField.range.EVER:this._setRangeInCalendars(this._calendarFrom.getMinDate(),today.clone());break;case DateRangeFormField.range.CUSTOM:break;}},_setRangeInCalendars:function(fromDate,toDate){this._updateAvailableRange(toDate,fromDate);this._calendarFrom.setSelectedDate(fromDate);this._calendarTo.setSelectedDate(toDate);this._resetRangeHighlight();this._highlightRange();},_highlightRange:function(){this._calendarFrom.highlightCellsFromChosen(this._calendarTo.getSelectedDate());this._calendarTo.highlightCellsToChosen(this._calendarFrom.getSelectedDate());},_resetRangeHighlight:function(){this._calendarFrom.resetRangeHighlight();this._calendarTo.resetRangeHighlight();},_refreshCalendars:function(){this._calendarFrom.refresh();this._calendarTo.refresh();this._highlightRange();},_getInitialValue:function(){return this._dateField.val().split(DateRangeFormField.DATE_SEPARATOR);},_saveCurrentValueAsInitial:function(){return this._dateField.val(this.getValue().join(DateRangeFormField.DATE_SEPARATOR));},_initTooltipsForCalendar:function(){$(DateFormFieldCalendar.DAY_NAME_CELL_SELECTOR).each(function(){if(this.scrollWidth>this.offsetWidth){this.title=this.textContent;}});}},{event:{SHOW:'show',HIDE:'hide'},range:{DAY:'day',WEEK:'week',MONTH:'month',QUARTER:'quarter',YEAR:'year',EVER:'ever',CUSTOM:'custom'},DATE_STRING_FORMAT:'yyyy-MM-dd',DATE_SEPARATOR:' - ',RANGE_OPTIONS_SELECTOR:'.date_range_option',SELECTED_CLASS:'selected'});

var FormUtils=Base.extend({},{objectToPostVars:function(parameters){var vars={};Object.keys(parameters).forEach(function(paramName){FormUtils._processParam(vars,parameters[paramName],paramName);});return vars;},_processParam:function(vars,param,name){if(param instanceof Array||param instanceof Object){Object.keys(param).forEach(function(key){FormUtils._processParam(vars,param[key],name+'['+key+']');});return;}
if(typeof param!=='undefined'){vars[name]=String(param);}}});

var FormFieldFactory=Base.extend({},{_newFieldObject:function(id,type)
{switch(type)
{case FormFieldType.NULL_TYPE:return new NullFormField(id);case FormFieldType.TEXT:return new TextFormField(id);case FormFieldType.AUTOCOMPLETE:return new AutocompleteFormField(id);case FormFieldType.AUTOCOMPLETE_CLOSED:return new AutocompleteClosedFormField(id);case FormFieldType.TEXT_AREA:return new TextFormField(id);case FormFieldType.TEXT_AREA_AUTOGROW:return new TextareaAutogrowFormField(id);case FormFieldType.MASKED:return new MaskedFormField(id);case FormFieldType.TOKEN:return new TokenFormField(id);case FormFieldType.SELECT:return new SelectFormField(id);case FormFieldType.PASSWORD:return new PasswordFormField(id);case FormFieldType.PASS_METER:return new PassmeterFormField(id);case FormFieldType.USERS_TOKEN:return new UsersTokenFormField(id);case FormFieldType.CHECKBOX:return new CheckboxFormField(id);case FormFieldType.BROWSER_BASED_CHECKBOX:return FormFieldFactory._createCheckboxByBrowserType(id);case FormFieldType.RADIO:return new RadioFormField(id);case FormFieldType.SEARCH:return new SearchFormField(id);case FormFieldType.HIDDEN:return new HiddenFormField(id);case FormFieldType.JSON_HIDDEN:return new JsonHiddenFormField(id);case FormFieldType.TOGGLE:return new ToggleFormField(id);case FormFieldType.QUICK_INSERT:return new QuickInsertFormField(id);case FormFieldType.DATE_RANGE:return new DateRangeFormField(id);case FormFieldType.DURATION:return new DurationFormField(id);default:throw new Error('Invalid formField['+id+'] type! '+type);}},_createCheckboxByBrowserType:function(id)
{return(UIBrowserUtils.isIeLt8())?new DefaultCheckboxFormField(id):new CheckboxFormField(id);},create:function(formFieldId,formFieldType,newErrorBehavior)
{var newField=this._newFieldObject(formFieldId,formFieldType);newField.setErrorBehavior(newErrorBehavior);newField.initialize();return newField;}});

var UrlUtils=Base.extend({},{PROTOCOLS:['http','https','ftp','ftps'],EMPTY_PROTOCOL:'//',redirectToUrl:function(url){window.location.href=url;},openUrlInNewTab:function(url){var a=document.createElement('a');a.target='_blank';a.href=url;a.click();a.remove();},navigateWithTimeout:function(url,timeout){setTimeout(function(){UrlUtils.navigateToUrl(url);},timeout);},navigateToUrl:function(url,target,postVars,requestParameters){target=target||"_self";postVars=postVars||{};requestParameters=requestParameters||{};postVars=Object.assign(postVars,FormUtils.objectToPostVars(requestParameters));if(Object.keys(postVars).length===0&&target==='_self'){UrlUtils.redirectToUrl(url);}
else if(Object.keys(postVars).length===0&&target==='_blank'){if(DetectBrowser.isIosSafari()){UrlUtils.redirectToUrl(url);}
else{UrlUtils.openUrlInNewTab(url);}}
else{var form=$("#tmpNavigateForm");if(form.length===0){$(document.body).append('<form method="post" target="'+target+'" id="tmpNavigateForm"></form>');form=$("#tmpNavigateForm");}
else{form.empty();form.attr('target',target);}
form.attr('action',url);Object.keys(postVars).forEach(function(varName){var varValue=postVars[varName];var id=varName.split('[').join('_');id=id.split(']').join('');form.append('<input id="'+id+'" type="hidden" name="'+varName+'" value="" />');form.find("#"+id).val(varValue);});form.submit();}},uriParamsSerialize:function(params){var serializedPairs=[];if(params){for(var name in params){var pairStr=name+"="+encodeURIComponent(params[name]);serializedPairs.push(pairStr);}}
return serializedPairs.join("&");},addParamToUrl:function(url,paramKey,paramValue){var urlAlreadyHasQuery=url.indexOf('?')>0;var paramString=paramKey+'='+paramValue;return url+=urlAlreadyHasQuery?('&'+paramString):'?'+paramString;},addParamsToUrl:function(url,params){var result=url;$.each(params,function(paramKey,paramValue){result=UrlUtils.addParamToUrl(result,paramKey,paramValue);});return result;},getUrlWithoutQuery:function(url){var signPos=url.indexOf("?");return(signPos>=0)?url.substring(0,signPos):url;},getCurrentUrl:function(){return window.location.href;},getUrlQuery:function(url){var signPos=url.indexOf("?");return(signPos>=0)?url.substring(signPos+1):"";},parseQueryString:function(queryString){var holder={};if(queryString){var chunks=queryString.split('#')[0].split("&");for(var i=0;i<chunks.length;++i){var keyValuePair=chunks[i].split("=");var key=decodeURIComponent(keyValuePair[0]);var value=decodeURIComponent(keyValuePair[1]);holder[key]=value;}}
return holder;},replaceUrlParameter:function(url,paramName,paramValue){var mainUrl=UrlUtils.getUrlWithoutQuery(url);var queryString=UrlUtils.getUrlQuery(url);var params=UrlUtils.parseQueryString(queryString);params[paramName]=paramValue;queryString=UrlUtils.uriParamsSerialize(params);url=mainUrl+"?"+queryString;return url;},setPageParameter:function(name,value){var url=(value===null||value===undefined||value==="")?UrlUtils.removeUrlParameter(UrlUtils.getCurrentUrl(),name):UrlUtils.replaceUrlParameter(UrlUtils.getCurrentUrl(),name,value);var state=window.history.state;window.history.replaceState(state,'',url);},removeUrlParameter:function(url,paramName){var mainUrl=UrlUtils.getUrlWithoutQuery(url);var queryString=UrlUtils.getUrlQuery(url);var params=UrlUtils.parseQueryString(queryString);if(params.hasOwnProperty(paramName)){delete params[paramName];}
queryString=UrlUtils.uriParamsSerialize(params);url=mainUrl+(!StringUtils.isEmpty(queryString)?('?'+queryString):'');return url;},getUrlParameter:function(url,paramName){var queryString=UrlUtils.getUrlQuery(url);var params=UrlUtils.parseQueryString(queryString);return(params&&params[paramName])?(''+params[paramName]):null;},getRefreshUniqueUrl:function(url){return this.replaceUrlParameter(url,'r',new Date().getTime());},getUrlWithProtocol:function(url){var protoPostfix=':'+UrlUtils.EMPTY_PROTOCOL;for(var i=0;i<UrlUtils.PROTOCOLS.length;++i){var protoString=UrlUtils.PROTOCOLS[i]+protoPostfix;if(url.indexOf(protoString)===0){return url;}}
return UrlUtils.EMPTY_PROTOCOL+url;},getRelativeUrl:function(url){return url.replace(/^(?:\/\/|[^\/]+)*\//,'/');},reload:function(delay){if(delay){setTimeout(function(){window.location.reload();},delay);return;}
window.location.reload();}});

var FormFieldStorage=Base.extend({},{_formFields:[],getFormFields:function(containerSelector,fieldsSelector)
{var thisPtr=this;var formFieldIds=[];var formFields=[];var containers=$(containerSelector);var defaultFieldsSelector='['+FormField.attr.FORM_FIELD_ID+']';var additionalFieldsSelector=fieldsSelector?fieldsSelector:'';containers.find(additionalFieldsSelector+defaultFieldsSelector).each(function(){var formFieldId=$(this).attr(FormField.attr.FORM_FIELD_ID);if($.inArray(formFieldId,formFieldIds)==-1)
{formFieldIds.push(formFieldId);formFields.push(thisPtr.getFormFieldById(formFieldId))}});return formFields;},createFormFieldById:function(formFieldId)
{FormFieldStorage.removeFormFieldById(formFieldId);this._formFields[formFieldId]=this._initFormFieldById(formFieldId);return this._formFields[formFieldId];},getFormFieldById:function(formFieldId)
{if(this._formFields[formFieldId]==undefined)
{this.createFormFieldById(formFieldId);}
return this._formFields[formFieldId];},removeFieldsByIds:function(idList)
{if(idList&&idList.length)
{var thisPtr=this;$.each(idList,function(index,id){thisPtr.removeFormFieldById(id);});}},removeFormFieldById:function(formFieldId)
{if(this._fieldExist(formFieldId))
{this._formFields[formFieldId].terminate();this._formFields[formFieldId]=undefined;}
return this;},_initFormFieldById:function(formFieldId)
{var formFieldElement=$('['+FormField.attr.FORM_FIELD_ID+'="'+formFieldId+'"]');if(formFieldElement.length==0)
{return FormFieldFactory.create(formFieldId,FormFieldType.NULL_TYPE);}
var formFieldType=formFieldElement.attr(FormField.attr.FORM_FIELD_TYPE);var formFieldErrorType=formFieldElement.attr(FormField.attr.FORM_FIELD_ERROR_TYPE);var formFieldErrorContainerId=formFieldElement.attr(FormField.attr.FORM_FIELD_ERROR_CONTAINER_ID);var formFieldInitialValue=formFieldElement.attr(FormField.attr.FORM_FILED_INITIAL_VALUE);var newErrorBehavior=ErrorBehaviorFactory.create(formFieldErrorType,{errorContainer:formFieldErrorContainerId});var formField=FormFieldFactory.create(formFieldId,formFieldType,newErrorBehavior);if(formFieldInitialValue!=='')
{formField.setValue(formFieldInitialValue);}
return formField;},_fieldExist:function(formFieldId)
{return(typeof this._formFields[formFieldId]!="undefined");}});

var AjaxException=Base.extend({_response:null,constructor:function(response){this._response=response;},response:function(){return this._response;}});var AjaxErrorsException=Base.extend({_errors:null,constructor:function(errors){this._errors=errors;},errors:function(){return this._errors;}});var AjaxValidationException=Base.extend({_errors:null,constructor:function(errors){this._errors=errors;},errors:function(){return this._errors;}});var PermissionDeniedAjaxException=Base.extend();var AjaxGateway=Base.extend({_makeRequest:function(url,data,method){return Requester.makeRequest(url,data,method,Requester.REQUEST_DATA_TYPE.JSON).then(function(response){if(response[AjaxGateway.param.SUCCESS]){return response[AjaxGateway.param.DATA];}
if(response[AjaxGateway.param.ERROR_DATA]){throw new AjaxErrorsException(response[AjaxGateway.param.ERROR_DATA])}
if(response[AjaxGateway.param.VALIDATION_ERRORS]){throw new AjaxValidationException(response[AjaxGateway.param.VALIDATION_ERRORS])}
if(response[AjaxGateway.param.ERROR_CODE]){switch(response[AjaxGateway.param.ERROR_CODE]){case AjaxGateway.errorCode.PERMISSION_DENIED:throw new PermissionDeniedAjaxException();case AjaxGateway.errorCode.BAD_REQUEST:break;}}
throw new AjaxException(response);});},doGet:function(url,data){data=data||null;return this._makeRequest(url,data,Requester.REQUEST_METHOD.GET);},doPost:function(url,data){data=data||null;return this._makeRequest(url,data,Requester.REQUEST_METHOD.POST);}},{param:{SUCCESS:'ok',DATA:'data',VALIDATION_ERRORS:'validationErrors',ERROR_CODE:'errorCode',ERROR_DATA:'errorData'},errorCode:{PERMISSION_DENIED:1,BAD_REQUEST:2}});

var PopupFlashBoxAjaxExceptionHandler=Base.extend({},{handle:function(error){if(error instanceof PermissionDeniedAjaxException){UiToast.showCritical(Messages.Common.PERMISSION_DENIED_RELOAD);}
else if(error instanceof AjaxValidationException){}
else if(error instanceof AjaxErrorsException){}
else if(error instanceof TypeError){}
else{UiToast.showCritical(Messages.Common.UNEXPECTED_SERVER_ERROR);}},handleAndReject:function(error){PopupFlashBoxAjaxExceptionHandler.handle(error);throw error;}});

Namespace("scormplayer.manifest.sequencing",{RuleCondition:Base.extend({_operator:null,_condition:null,operator:function(operator)
{if(operator!==undefined)this._operator=operator;return this._operator;},condition:function(condition)
{if(condition!==undefined)this._condition=condition;return this._condition;}})});

Namespace("scormplayer.manifest.sequencing",{RuleConditionsCollection:Base.extend({_conditions:null,_combination:null,constructor:function()
{this._conditions=[];},combination:function(combination)
{if(combination!==undefined)this._combination=combination;return this._combination;},countConditions:function()
{return this._conditions.length;},addCondition:function(condition)
{this._conditions.push(condition);},getConditionByIndex:function(index)
{return this._conditions[index];}})});

var Popup=EventDispatcher.extend({id:null,popup:null,overlay:null,closeButton:null,contentContainer:null,progressIcon:null,opened:null,constructor:function(id){this.base();this.id=id;},getId:function(){return this.id;},initialize:function(){this.popup=$('#'+this.id);this.overlay=$('#'+this.id+'Overlay');this.closeButton=this.popup.find('.close_button');this.closeButton.click(handler(this,'_onCloseButtonClick'));this.contentContainer=this.popup.find('#'+this.id+'Content');this.progressIcon=this.popup.find('#'+this.id+'ProgressIcon');this.opened=false;},open:function(){$(':focus').blur();this.overlay.show();this.invalidateZIndex();this.opened=true;this.dispatchEvent(Popup.event.OPEN);},close:function(){if(!this.opened){return;}
this.overlay.hide();this.resetZIndex();this.opened=false;this.dispatchEvent(Popup.event.AFTER_CLOSE);},showLoading:function(){this.progressIcon.show();},hideLoading:function(){this.progressIcon.hide();},setContent:function(html){this.contentContainer.html(html);},removeContent:function(){this.contentContainer.empty();},getPopupZIndex:function(){return parseInt(this.overlay.css('z-index'));},invalidateZIndex:function(){var maxZIndex=Popup.getMaxZIndex();var zIndex=isNaN(maxZIndex)?Popup.DEFAULT_Z_INDEX:maxZIndex;this.setZIndex(zIndex);},resetZIndex:function(){this.setZIndex(Popup.DEFAULT_Z_INDEX);},setZIndex:function(zIndex){if(this.overlay){this.overlay.css('z-index',zIndex);}},tryCenterOnScroll:function(){},center:function(){},_onCloseButtonClick:function(){this.close();this.dispatchEvent(Popup.event.CLOSE);}},{event:{OPEN:'popupOpen',CLOSE:'close',AFTER_CLOSE:'after_close'},DEFAULT_Z_INDEX:51,Z_INDEX_OVER_UI_POPUPS:65,popups:{},_initPopup:function(popupId){if($('#'+popupId).length===0){return null;}
var jsClassName=$('#'+popupId+'PopupJSClass').val();var popupClass=window[jsClassName];if(!popupClass){popupClass=this;}
var popup=new popupClass(popupId);popup.initialize();this.popups[popupId]=popup;return popup;},initPopup:function(popupId){return Popup.getPopup(popupId);},getPopup:function(popupId){var popup;if(!this.popups.hasOwnProperty(popupId)){popup=Popup._initPopup(popupId);}else{popup=this.popups[popupId];}
return popup;},closeAllPopups:function(){for(var popupId in this.popups){if(this.popups.hasOwnProperty(popupId)&&this.popups[popupId].opened){this.popups[popupId].close();}}},getMaxZIndex:function(){var zIndex=NaN;for(var popupId in this.popups){var popup=this.getPopup(popupId);if(popup.opened){var popupZIndex=popup.getPopupZIndex();if(isNaN(zIndex)||(popupZIndex>zIndex)){zIndex=popupZIndex;}}}
var uiLayer=document.getElementById('uiPopupLayer');if(uiLayer&&uiLayer.children)
{var newPopupsLayer=uiLayer.children[0];if(newPopupsLayer&&getComputedStyle(newPopupsLayer).pointerEvents!="none")
{zIndex=Popup.Z_INDEX_OVER_UI_POPUPS;}}
return zIndex;}});

Namespace("utils",{IMementable:Base.extend({pushState:function(){},rollbackState:function(){},commitState:function(){}})});

Namespace("utils",{Mementable:utils.IMementable.extend({_states:null,copy:function(dest)
{for(var i in this)
{var value=this[i];var valueType=typeof(value);var isSimpleType=(valueType!="function"&&valueType!="object");if(isSimpleType||value===null)
{dest[i]=value;}}},_saveState:function()
{var state=new this.constructor();this.copy(state);return state;},_restoreState:function(state)
{state.copy(this);},pushState:function()
{if(!this._states)
{this._states=[];}
var state=this._saveState();this._states.push(state);},rollbackState:function()
{if(!this._states)
{return;}
var state=this._states.pop();if(state)
{this._restoreState(state);}},commitState:function()
{if(this._states)
{this._states.pop();}}})});

Namespace("scormplayer.manifest.sequencing",{Rule:Base.extend({_conditions:null,_action:null,conditions:function(conditions)
{if(conditions!==undefined)this._conditions=conditions;return this._conditions;},action:function(action)
{if(action!==undefined)this._action=action;return this._action;}})});

Namespace("scormplayer.manifest.sequencing",{ObjectiveMapInfo:Base.extend({_targetObjectiveId:null,_mappedAttributes:null,constructor:function()
{this._mappedAttributes={};},targetObjectiveId:function(id)
{if(id!==undefined)this._targetObjectiveId=id;return this._targetObjectiveId;},mappedAttribute:function(attrName,attrValue)
{if(attrValue!==undefined)this._mappedAttributes[attrName]=attrValue;return this._mappedAttributes[attrName];}})});

Namespace("scormplayer.manifest.sequencing",{SequenceRuleCondition:scormplayer.manifest.sequencing.RuleCondition.extend({_referencedObjectiveId:null,_measureThreshold:null,referencedObjectiveId:function(referencedObjectiveId)
{if(referencedObjectiveId!==undefined)this._referencedObjectiveId=referencedObjectiveId;return this._referencedObjectiveId;},measureThreshold:function(measureThreshold)
{if(measureThreshold!==undefined)this._measureThreshold=measureThreshold;return this._measureThreshold;}})});

Namespace("scormplayer.manifest.sequencing",{RulesCollection:Base.extend({_rules:null,_rulesByActionMap:null,constructor:function()
{this._rules=[];this._rulesByActionMap={};},countRules:function()
{return this._rules.length;},getRuleByIndex:function(index)
{return this._rules[index];},addRule:function(rule)
{this._rules.push(rule);var ruleAction=rule.action();if(!(ruleAction in this._rulesByActionMap))
{this._rulesByActionMap[ruleAction]=[];}
this._rulesByActionMap[ruleAction].push(rule);},getRulesWithActions:function(actions)
{if(!actions)
{return[];}
if(typeof(actions)=="string")
{actions=[actions];}
if(actions.length==1)
{return actions[0]in this._rulesByActionMap?this._rulesByActionMap[actions[0]]:[];}
var actionsMap={};for(var i in actions)
{actionsMap[actions[i]]=1;}
var rules=[];for(i in this._rules)
{var rule=this._rules[i];if(rule.action()in actionsMap)
{rules.push(rule);}}
return rules;},toArray:function()
{return this._rules;}})});

var ILocalStorageManager=EventDispatcher.extend({get:function(key){},getAll:function(){},getAllKeys:function(){},set:function(key,value){return false;},remove:function(key){},clearAll:function(){},isReady:function(){}});

Namespace("scormplayer.manifest.sequencing",{RollupRule:scormplayer.manifest.sequencing.Rule.extend({_childActivitySet:null,_minimumCount:null,_minimumPercent:null,childActivitySet:function(childActivitySet)
{if(childActivitySet!==undefined)this._childActivitySet=childActivitySet;return this._childActivitySet;},minimumCount:function(minimumCount)
{if(minimumCount!==undefined)this._minimumCount=minimumCount;return this._minimumCount;},minimumPercent:function(minimumPercent)
{if(minimumPercent!==undefined)this._minimumPercent=minimumPercent;return this._minimumPercent;}})});

Namespace("scormplayer.manifest.sequencing",{Objective:Base.extend({_id:null,_satisfiedByMeasure:null,_minNormalizedMeasure:null,_mapInfos:null,constructor:function()
{this._mapInfos=[];},id:function(id)
{if(id!==undefined)this._id=id;return this._id;},isSatisfiedByMeasure:function(satisfiedByMeasure)
{if(satisfiedByMeasure!==undefined)this._satisfiedByMeasure=satisfiedByMeasure;return this._satisfiedByMeasure;},minNormalizedMeasure:function(minNormalizedMeasure)
{if(minNormalizedMeasure!==undefined)this._minNormalizedMeasure=minNormalizedMeasure;return this._minNormalizedMeasure;},mapInfos:function(mapInfos)
{if(mapInfos!==undefined)this._mapInfos=mapInfos;return this._mapInfos;}})});

Namespace("utils",{ObjectUtils:{keys:function(obj){var keys=[];for(var key in obj){if(obj.hasOwnProperty(key)){keys.push(key);}}
return keys;},values:function(obj){var values=[];for(var key in obj){if(obj.hasOwnProperty(key)){values.push(obj[key]);}}
return values;},empty:function(obj){return this.keys(obj).length==0;},swap:function(obj){var swappedObj={};for(var i in obj){if(obj.hasOwnProperty(i)){swappedObj[obj[i]]=i;}}
return swappedObj;},stringifyValues:function(obj){var settings={};for(var settingName in obj){if(obj.hasOwnProperty(settingName)){settings[settingName]=obj[settingName];if(typeof obj[settingName]=='object'){settings[settingName]=JSON.stringify(obj[settingName]);}}}
return settings;}}});

var GoogleClosureCompiler=Base.extend({},{fixArrayElementsRecursive:function(o)
{return GoogleClosureCompiler.mapRecursive(o,function(e,i,o)
{if(GoogleClosureCompiler.isArrayLike(e))
{return Array.prototype.slice.call(e);}
return e;});},mapRecursive:function(obj,f,opt_obj)
{var res={};for(var key in obj)
{var value=obj[key];var type=GoogleClosureCompiler.typeOf(value);if(type=='object')
{value=GoogleClosureCompiler.fixArrayElementsRecursive(value);}
res[key]=f.call(opt_obj,value,key,obj);}
return res;},isArrayLike:function(val)
{var type=GoogleClosureCompiler.typeOf(val);return type=='array'||type=='object'&&typeof val.length=='number';},typeOf:function(value)
{var s=typeof value;if(s=='object')
{if(value)
{if(value instanceof Array)
{return'array';}
else if(value instanceof Object)
{return s;}
var className=Object.prototype.toString.call((value));if(className=='[object Window]')
{return'object';}
if((className=='[object Array]'||typeof value.length=='number'&&typeof value.splice!='undefined'&&typeof value.propertyIsEnumerable!='undefined'&&!value.propertyIsEnumerable('splice')))
{return'array';}
if((className=='[object Function]'||typeof value.call!='undefined'&&typeof value.propertyIsEnumerable!='undefined'&&!value.propertyIsEnumerable('call')))
{return'function';}}
else
{return'null';}}
else if(s=='function'&&typeof value.call=='undefined')
{return'object';}
return s;}});

var iSpringPlayerStateToJsonConverter=Base.extend({},{convert:function(state)
{return $.toJSON(GoogleClosureCompiler.fixArrayElementsRecursive(state));}});

var NullLocalStorageManager=ILocalStorageManager.extend({get:function(key)
{return'';},getAll:function()
{return[];},getAllKeys:function()
{return[];},isReady:function()
{return true;}},{});

var Html5LocalStorageManager=ILocalStorageManager.extend({get:function(key){var value=(window.localStorage[key]==null)?'':window.localStorage[key];return this._decodeValue(value);},getAll:function(){var arr=[];for(var i=0,len=window.localStorage.length;i<len;i++){var key=window.localStorage.key(i);var value=window.localStorage[key];value=this._decodeValue(value);arr.push([key,value]);}
return arr;},getAllKeys:function(){return Object.keys(window.localStorage);},set:function(key,value){try{window.localStorage[key]=this._encodeValue(value);return true;}
catch(e){if(e.name==='QuotaExceededError'){return false;}
throw e;}},remove:function(key){window.localStorage.removeItem(key);},clearAll:function(){window.localStorage.clear();},isReady:function(){return true;},_encodeValue:function(value){return iSpringPlayerStateToJsonConverter.convert(value);},_decodeValue:function(value){var data;try{data=$.secureEvalJSON(value);}
catch(e){return"";}
return data;}},{});

Namespace("scormplayer.manifest.sequencing",{ControlMode:Base.extend({_choiceControlEnabled:null,_choiceExitEnabled:null,_flowControlEnabled:null,_forwardOnly:null,_useCurrentAttemptObjectiveInfo:null,_useCurrentAttemptProgressInfo:null,choiceControlEnabled:function(enabled)
{if(enabled!==undefined)this._choiceControlEnabled=enabled;return this._choiceControlEnabled;},choiceExitEnabled:function(enabled)
{if(enabled!==undefined)this._choiceExitEnabled=enabled;return this._choiceExitEnabled;},flowControlEnabled:function(enabled)
{if(enabled!==undefined)this._flowControlEnabled=enabled;return this._flowControlEnabled;},isForwardOnly:function(forwardOnly)
{if(forwardOnly!==undefined)this._forwardOnly=forwardOnly;return this._forwardOnly;},useCurrentAttemptObjectiveInfo:function(useCurrentAttemptObjectiveInfo)
{if(useCurrentAttemptObjectiveInfo!==undefined)this._useCurrentAttemptObjectiveInfo=useCurrentAttemptObjectiveInfo;return this._useCurrentAttemptObjectiveInfo;},useCurrentAttemptProgressInfo:function(useCurrentAttemptProgressInfo)
{if(useCurrentAttemptProgressInfo!==undefined)this._useCurrentAttemptProgressInfo=useCurrentAttemptProgressInfo;return this._useCurrentAttemptProgressInfo;}})});

Namespace("scormplayer.manifest.sequencing",{SequenceRules:Base.extend({_preConditionRules:null,_postConditionRules:null,_exitConditionRules:null,preConditionRules:function(rules)
{if(rules!==undefined)this._preConditionRules=rules;return this._preConditionRules;},postConditionRules:function(rules)
{if(rules!==undefined)this._postConditionRules=rules;return this._postConditionRules;},exitConditionRules:function(rules)
{if(rules!==undefined)this._exitConditionRules=rules;return this._exitConditionRules;}})});

Namespace("scormplayer.manifest.sequencing",{LimitConditions:Base.extend({_attemptLimit:null,_durationLimit:null,attemptLimit:function(limit)
{if(limit!==undefined)this._attemptLimit=limit;return this._attemptLimit;},durationLimit:function(limit)
{if(limit!==undefined)this._durationLimit=limit;return this._durationLimit;}})});

Namespace("scormplayer.manifest.sequencing",{RollupRules:scormplayer.manifest.sequencing.RulesCollection.extend({_rollupObjectiveSatisfied:null,_rollupProgressCompletion:null,_objectiveMeasureWeight:null,isRollupObjectiveSatisfied:function(rollupObjectiveSatisfied)
{if(rollupObjectiveSatisfied!==undefined)this._rollupObjectiveSatisfied=rollupObjectiveSatisfied;return this._rollupObjectiveSatisfied;},isRollupProgressCompletion:function(rollupProgressCompletion)
{if(rollupProgressCompletion!==undefined)this._rollupProgressCompletion=rollupProgressCompletion;return this._rollupProgressCompletion;},objectiveMeasureWeight:function(objectiveMeasureWeight)
{if(objectiveMeasureWeight!==undefined)this._objectiveMeasureWeight=objectiveMeasureWeight;return this._objectiveMeasureWeight;}})});

Namespace("scormplayer.manifest.sequencing",{Objectives:Base.extend({_primaryObjective:null,_localObjectives:null,_localObjectivesMap:null,constructor:function()
{this._localObjectives=[];this._localObjectivesMap={};},primaryObjective:function(objective)
{if(objective!==undefined)this._primaryObjective=objective;return this._primaryObjective;},countLocalObjectives:function()
{return this._localObjectives.length;},getLocalObjectiveByIndex:function(objectiveIndex)
{return this._localObjectives[objectiveIndex];},getLocalObjectiveById:function(objectiveId)
{return this._localObjectivesMap[objectiveId];},addLocalObjective:function(objective)
{this._localObjectives.push(objective);this._localObjectivesMap[objective.id()]=objective;}})});

Namespace("scormplayer.manifest.sequencing",{RandomizationControls:Base.extend({_randomizationTiming:null,_selectCount:null,_reorderChilds:null,_selectionTiming:null,randomizationTiming:function(randomizationTiming)
{if(randomizationTiming!==undefined)this._randomizationTiming=randomizationTiming;return this._randomizationTiming;},selectCount:function(selectCount)
{if(selectCount!==undefined)this._selectCount=selectCount;return this._selectCount;},isReorderChilds:function(reorderChilds)
{if(reorderChilds!==undefined)this._reorderChilds=reorderChilds;return this._reorderChilds;},selectionTiming:function(selectionTiming)
{if(selectionTiming!==undefined)this._selectionTiming=selectionTiming;return this._selectionTiming;}})});

Namespace("scormplayer.manifest.sequencing",{DeliveryControls:Base.extend({_tracked:null,_completionSetByContent:null,_objectiveSetByContent:null,isTracked:function(tracked)
{if(tracked!==undefined)this._tracked=tracked;return this._tracked;},isCompletionSetByContent:function(completionSetByContent)
{if(completionSetByContent!==undefined)this._completionSetByContent=completionSetByContent;return this._completionSetByContent;},isObjectiveSetByContent:function(objectiveSetByContent)
{if(objectiveSetByContent!==undefined)this._objectiveSetByContent=objectiveSetByContent;return this._objectiveSetByContent;}})});

Namespace("scormplayer.manifest.sequencing",{ChoiceConsiderations:Base.extend({_preventActivation:null,_constrainChoice:null,isPreventActivation:function(preventActivation)
{if(preventActivation!==undefined)this._preventActivation=preventActivation;return this._preventActivation;},isConstrainChoice:function(constrainChoice)
{if(constrainChoice!==undefined)this._constrainChoice=constrainChoice;return this._constrainChoice;}})});

Namespace("scormplayer.manifest.sequencing",{RollupConsiderations:Base.extend({_requiredForSatisfied:null,_requiredForNotSatisfied:null,_requiredForCompleted:null,_requiredForIncomplete:null,_measureSatisfactionIfActive:null,requiredForSatisfied:function(requiredForSatisfied)
{if(requiredForSatisfied!==undefined)this._requiredForSatisfied=requiredForSatisfied;return this._requiredForSatisfied;},requiredForNotSatisfied:function(requiredForNotSatisfied)
{if(requiredForNotSatisfied!==undefined)this._requiredForNotSatisfied=requiredForNotSatisfied;return this._requiredForNotSatisfied;},requiredForCompleted:function(requiredForCompleted)
{if(requiredForCompleted!==undefined)this._requiredForCompleted=requiredForCompleted;return this._requiredForCompleted;},requiredForIncomplete:function(requiredForIncomplete)
{if(requiredForIncomplete!==undefined)this._requiredForIncomplete=requiredForIncomplete;return this._requiredForIncomplete;},isMeasureSatisfactionIfActive:function(measureSatisfactionIfActive)
{if(measureSatisfactionIfActive!==undefined)this._measureSatisfactionIfActive=measureSatisfactionIfActive;return this._measureSatisfactionIfActive;}})});

var LocalStorageManager=ILocalStorageManager.extend({},{READY_EVENT:'localStorageManagerIsReadyTouUseGetAndGetAllMethods',_instance:null,_createInstance:function()
{if(BrowserUtils.hasNativeLocalStorageSupport())
{LocalStorageManager._instance=new Html5LocalStorageManager();}
else
{LocalStorageManager._instance=new NullLocalStorageManager();}},getInstance:function()
{if(LocalStorageManager._instance==null)
{LocalStorageManager._createInstance();}
return LocalStorageManager._instance;}});

Namespace("scormplayer.manifest",{CourseItemCompletionThreshold:Base.extend({_completedByMeasure:null,_minProgressMeasure:null,_progressWeight:null,completedByMeasure:function(completed)
{if(completed!==undefined)this._completedByMeasure=completed;return this._completedByMeasure;},minProgressMeasure:function(measure)
{if(measure!==undefined)this._minProgressMeasure=measure;return this._minProgressMeasure;},progressWeight:function(weight)
{if(weight!==undefined)this._progressWeight=weight;return this._progressWeight;}})});

Namespace("scormplayer.manifest.sequencing",{SequencingData:Base.extend({_controlMode:null,_sequenceRules:null,_limitConditions:null,_rollupRules:null,_objectives:null,_randomizationControls:null,_deliveryControls:null,_choiceConsiderations:null,_rollupConsiderations:null,controlMode:function(controlMode)
{if(controlMode!==undefined)this._controlMode=controlMode;return this._controlMode;},sequenceRules:function(rules)
{if(rules!==undefined)this._sequenceRules=rules;return this._sequenceRules;},limitConditions:function(limitConditions)
{if(limitConditions!==undefined)this._limitConditions=limitConditions;return this._limitConditions;},rollupRules:function(rules)
{if(rules!==undefined)this._rollupRules=rules;return this._rollupRules;},objectives:function(objectives)
{if(objectives!==undefined)this._objectives=objectives;return this._objectives;},randomizationControls:function(randomizationControls)
{if(randomizationControls!==undefined)this._randomizationControls=randomizationControls;return this._randomizationControls;},deliveryControls:function(deliveryControls)
{if(deliveryControls!==undefined)this._deliveryControls=deliveryControls;return this._deliveryControls;},choiceConsiderations:function(considerations)
{if(considerations!==undefined)this._choiceConsiderations=considerations;return this._choiceConsiderations;},rollupConsiderations:function(considerations)
{if(considerations!==undefined)this._rollupConsiderations=considerations;return this._rollupConsiderations;}})});

Namespace("scormplayer.manifest",{CourseItem:Base.extend({_id:null,_title:null,_visible:null,_resourceId:null,_parameters:null,_timeLimitAction:null,_dataFromLMS:null,_completionThreshold:null,_sequencingData:null,id:function(id)
{if(id!==undefined)this._id=id;return this._id;},title:function(title)
{if(title!==undefined)this._title=title;return this._title;},visible:function(isVisible)
{if(isVisible!==undefined)this._visible=isVisible;return this._visible;},resourceId:function(resourceId)
{if(resourceId!==undefined)this._resourceId=resourceId;return this._resourceId;},hasResource:function()
{return this._resourceId!==null;},parameters:function(params)
{if(params!==undefined)this._parameters=params;return this._parameters;},timeLimitAction:function(action)
{if(action!==undefined)this._timeLimitAction=action;return this._timeLimitAction;},dataFromLMS:function(data)
{if(data!==undefined)this._dataFromLMS=data;return this._dataFromLMS;},completionThreshold:function(completionThreshold)
{if(completionThreshold!==undefined)this._completionThreshold=completionThreshold;return this._completionThreshold;},sequencingData:function(sequencing)
{if(sequencing!==undefined)this._sequencingData=sequencing;return this._sequencingData;}})});

Namespace("scormplayer.player.tracking",{Score:utils.Mementable.extend({_scaled:null,_raw:null,_min:null,_max:null,scaled:function(scaled)
{if(scaled!==undefined)this._scaled=scaled;return this._scaled;},raw:function(raw)
{if(raw!==undefined)this._raw=raw;return this._raw;},min:function(min)
{if(min!==undefined)this._min=min;return this._min;},max:function(max)
{if(max!==undefined)this._max=max;return this._max;}})});

var DetectBrowser={isChrome:function(){var isChromium=window.chrome;var winNav=window.navigator;var vendorName=winNav.vendor;var isOpera=typeof window.opr!=="undefined";var isIEedge=winNav.userAgent.indexOf("Edge")>-1;var isIOSChrome=winNav.userAgent.match("CriOS");var isYaBrowser=winNav.userAgent.indexOf("YaBrowser")>-1;if(isIOSChrome){return false;}
else if(isChromium!==null&&typeof isChromium!=="undefined"&&vendorName==="Google Inc."&&isOpera===false&&isIEedge===false&&isYaBrowser===false){return true;}
return false;},isIosSafari:function(){var userAgent=window.navigator.userAgent;return(userAgent.match(/(iPod|iPhone|iPad)/)&&userAgent.match(/WebKit/i)&&!userAgent.match(/CriOS/i))},isYandexBrowser:function(){var userAgent=window.navigator.userAgent;return(userAgent.indexOf('YaBrowser')!=-1)&&(userAgent.indexOf('chrome')<0);},isSafari:function(){var userAgent=navigator.userAgent.toLowerCase();return(userAgent.indexOf('safari')!=-1)&&(userAgent.indexOf('chrome')<0);},isFireFox:function(){var userAgentString=navigator.userAgent;return(userAgentString.toLocaleLowerCase().indexOf('firefox')!=-1);},isOpera:function(){return(!!window.opr&&!!opr.addons)||!!window.opera||navigator.userAgent.indexOf(' OPR/')>=0;},isISpringMobileApp:function(){var MOBILE_APP_USER_AGENT_SUBSTRING='ismobile';return navigator.userAgent.indexOf(MOBILE_APP_USER_AGENT_SUBSTRING)>=0;},isMSOfficeApp:function(){var userAgent=window.navigator.userAgent;return userAgent.match(/(ms-office|MSOffice|Microsoft Office)/)},isUnsupportedBrowser:function(){var unsupportedBrowser=!DetectBrowser.isChrome()&&!DetectBrowser.isYandexBrowser()&&!DetectBrowser.isSafari()&&!DetectBrowser.isFireFox()&&!DetectBrowser.isOpera()&&!DetectBrowser.isMSOfficeApp();if(unsupportedBrowser){var userAgent=window.navigator.userAgent;unsupportedBrowser=!(userAgent.match(/(iPod|iPhone|iPad|Android|Mac)/)&&userAgent.match(/WebKit/i));}
return unsupportedBrowser;}};

Namespace("scormplayer.player.tracking",{IObjective:Base.extend({id:function(id){},score:function(score){},scaledScore:function(score){},minScore:function(score){},maxScore:function(score){},rawScore:function(score){},satisfied:function(satisfied){},completed:function(completed){},completionMeasure:function(measure){},description:function(descr){},clone:function(){}})});

var BrowserUtils=Base.extend({},{ORIENTATION_PORTRAIT:'portrait',ORIENTATION_LANDSCAPE:'landscape',MIN_SCALE_VALUE:1,hasHlsSupport:function(){return BrowserUtils.isIosDevice()||BrowserUtils.isSafariBrowser();},hasHtml5Support:function(){return Modernizr.inlinesvg;},isChrome:function(){return DetectBrowser.isChrome();},isIosDevice:function(){return/(iPad|iPhone|iPod);/i.test(navigator.userAgent);},isIpad:function(){return navigator.userAgent.match(/iPad/i)!=null;},isMobile:function(){var agent=navigator.userAgent.toLowerCase();return BrowserUtils.isAndroidDevice()||BrowserUtils.isIosDevice()||(agent.indexOf('mobile')!=-1)||(agent.indexOf('touch')!=-1);},isTouchScreen:function(){if(!BrowserUtils.isMobile()){return false;}
return(('ontouchstart'in window)||(window["DocumentTouch"]!==undefined)&&document instanceof window["DocumentTouch"]);},getTypesAvailableForUpload:function(){return this.isAndroidDevice()?'video/*':'';},isAndroidDevice:function(){var ua=navigator.userAgent.toLowerCase();return ua.indexOf("android")>-1;},isIos7:function(){return/(iPad|iPhone);.*CPU.*OS 7_\d/i.test(navigator.userAgent);},isSafariBrowser:function(){var userAgent=navigator.userAgent.toLowerCase();return(userAgent.indexOf('safari')!=-1)&&(userAgent.indexOf('chrome')<0);},isIe:function(){var userAgentString=navigator.userAgent;return(userAgentString.indexOf('Trident/7.0')+1)||(jQuery.browser.msie);},isFireFox:function(){return DetectBrowser.isFireFox();},isIeLt10:function(){var ieV=jQuery.browser.version;return BrowserUtils.isIe()&&(ieV<=10);},isIeLt9:function(){var ieV=jQuery.browser.version;return BrowserUtils.isIe()&&(ieV<=9);},isIeLt8:function(){var ieV=jQuery.browser.version;return BrowserUtils.isIe()&&(ieV<=8);},isIeLt7:function(){var ieV=jQuery.browser.version;return BrowserUtils.isIe()&&(ieV<=7);},getFlashVersion:function(){try{try{var axo=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6');try{axo.AllowScriptAccess='always';}
catch(e){return'6,0,0';}}
catch(e){}
return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g,',').match(/^,?(.+),?$/)[1];}
catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}}
catch(e){}}
return'0,0,0';},hasHistorySupport:function(){return!!(window.history&&history.pushState);},hasNativeLocalStorageSupport:function(){var hasSupport=(typeof(Storage)!=="undefined")&&('localStorage'in window)&&(window['localStorage']!==null);if(hasSupport){try{var testLocalStorageKey='test_local_storage';window.localStorage.setItem(testLocalStorageKey,'test');window.localStorage.removeItem(testLocalStorageKey);}
catch(e){hasSupport=false;}}
return hasSupport;},hasLocalStorageSupport:function(){var hasSupport=false;try{var manager=LocalStorageManager.getInstance();var testLocalStorageKey='test_local_storage';manager.set(testLocalStorageKey,testLocalStorageKey);manager.get(testLocalStorageKey);manager.remove(testLocalStorageKey);hasSupport=true;}
catch(e){hasSupport=false;}
return hasSupport;},hasNavigatorSendBeaconSupport:function(){return Boolean(window.navigator)&&Boolean(window.navigator.sendBeacon);}});

Namespace("scormplayer.manifest",{SharedData:Base.extend({_id:null,_canRead:true,_canWrite:true,id:function(id)
{if(id!==undefined)this._id=id;return this._id;},canRead:function(canRead)
{if(canRead!==undefined)this._canRead=canRead;return this._canRead;},canWrite:function(canWrite)
{if(canWrite!==undefined)this._canWrite=canWrite;return this._canWrite;}})});

var UiPopup=EventDispatcher.extend({container:null,props:null,constructor:function(element){this.base();if(element){this.container=element;this.props=this._preprocessProps(JSON.parse(this.container.dataset.props||""));}
UiEnvironment.initLayers();},_preprocessProps:function(props){return props;}},{lockPageScrolling:function(){document.body.classList.add(UiPopup.LOCK_SCROLLING_CLASS);},unlockPageScrolling:function(){document.body.classList.remove(UiPopup.LOCK_SCROLLING_CLASS);},callbacks:{CLOSE:'close',RENDER:'render'},LOCK_SCROLLING_CLASS:'lock_scrolling'});

var OptionsCollection=Base.extend({_options:null,constructor:function(options)
{this._options=options;},getValueByKey:function(key,defaultValue)
{if(defaultValue===undefined)
{defaultValue=null;}
var value=defaultValue;if(this._options.hasOwnProperty(key)&&(this._options[key]!==null))
{value=this._options[key];}
return value;},setValueByKey:function(key,value)
{this._options[key]=value;}});

(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(c)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})}(jQuery),function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);var d=this.element[0],e=!1;while(d&&(d=d.parentNode))d==document&&(e=!0);if(!e&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.23"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length)return;var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){b=="accept"&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.23"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();g:for(var h=0;h<d.length;h++){if(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))continue;for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible=d[h].element.css("display")!="none";if(!d[h].visible)continue;e=="mousedown"&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight}}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var d=a.ui.intersect(b,this,this.options.tolerance),e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a,b){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}if(!a(this.handles[c]).length)continue}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){if(c.disabled)return;a(this).removeClass("ui-resizable-autohide"),b._handles.show()},function(){if(c.disabled)return;b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",i=="auto"?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);return l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b=this.options,c,e,f,g,h;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=e),g<h.maxHeight&&(h.maxHeight=g);this._vBoundaries=h},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.options,e=this.position,f=this.size,g=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),g=="sw"&&(a.left=e.left+(f.width-a.width),a.top=null),g=="nw"&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width)),a},_respectSize:function(a,b){var c=this.helper,e=this._vBoundaries,f=this._aspectRatio||b.shiftKey,g=this.axis,h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight);var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){var b=this.options;if(!this._proportionallyResizeElements.length)return;var c=this.helper||this.element;for(var d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(!a.browser.msie||!a(c).is(":hidden")&&!a(c).parents(":hidden").length)e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0});else continue}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.23"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a,b){i(a,b)}):i(e.alsoResize)},stop:function(b,c){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,d){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(!i)return;e.containerElement=a(i);if(/document/.test(h)||h==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.containerSize,g=d.containerOffset,h=d.size,i=d.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.position,g=d.containerOffset,h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis,j=e._aspectRatio||b.shiftKey;e.grid=typeof e.grid=="number"?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a,b){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(this.options.disabled)return;var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})},_mouseDrag:function(b){var c=this;this.dragged=!0;if(this.options.disabled)return;var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(!i||i.element==c.element[0])return;var j=!1;d.tolerance=="touch"?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):d.tolerance=="fit"&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}),!1},_mouseStop:function(b){var c=this;this.dragged=!1;var d=this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.23"})}(jQuery),function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var e=null,f=this,g=a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==f)return e=a(this),!1});a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target));if(!e)return!1;if(this.options.handle&&!c){var h=!1;a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(h=!0)});if(!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(!h)continue;if(g!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],g):!0)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(!b)return;a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=this.options.axis==="x"||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=this.options.axis==="y"||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&d||f=="left"&&!d:e&&(e=="down"&&c||e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=this,d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");for(var b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}}for(var g=e.length-1;g>=0;g--){var k=e[g][1],l=e[g][0];for(var i=0,m=l.length;i<m;i++){var n=a(l[i]);n.data(this.widgetName+"-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){if(e&&!d.forcePlaceholderSize)return;b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){var c=null,d=null;for(var e=this.containers.length-1;e>=0;e--){if(a.ui.contains(this.currentItem[0],this.containers[e].element[0]))continue;if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"];for(var i=this.items.length-1;i>=0;i--){if(!a.ui.contains(this.containers[d].element[0],this.items[i].item[0]))continue;var j=this.containers[d].floating?this.items[i].item.offset().left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=j-h>0?"down":"up")}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;return d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[],e=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.23"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=(a.curCSS||a.css)(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class")||"";a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),typeof g.attr("style")=="object"?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.23",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return a===0||a===1?a:-Math.pow(2,8*(a-1))*Math.sin(((a-1)*80-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){var b,c=4;while(a<((b=Math.pow(2,--c))-1)/11);return 1/Math.pow(4,3-c)-7.5625*Math.pow((b*3-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return a<.5?c(a*2)/2:c(a*-2+2)/-2+1}})}(jQuery),function(a,b){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h=f=="vertical"?"height":"width",i=f=="vertical"?g.height():g.width();e=="show"&&g.css(h,0);var j={};j[h]=e=="show"?i:0,g.animate(j,b.duration,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",g=b.options.distance||(j=="top"?c.outerHeight(!0)/3:c.outerWidth(!0)/3);e=="show"&&c.css("opacity",0).css(j,k=="pos"?-g:g),e=="hide"&&(g=g/(h*2)),e!="hide"&&h--;if(e=="show"){var l={opacity:1};l[j]=(k=="pos"?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g=g/2,h--}for(var m=0;m<h;m++){var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g,p[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing),g=e=="hide"?g*2:g/2}if(e=="hide"){var l={opacity:0};l[j]=(k=="pos"?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g,p[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a,b){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h=c[0].tagName=="IMG"?g:c,i={size:f=="vertical"?"height":"width",position:f=="vertical"?"top":"left"},j=f=="vertical"?h.height():h.width();e=="show"&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]=e=="show"?j:0,k[i.position]=e=="show"?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight(!0)/2:c.outerWidth(!0)/2);e=="show"&&c.css("opacity",0).css(g,h=="pos"?-i:i);var j={opacity:e=="show"?1:0};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;var g=e.outerWidth(!0),h=e.outerHeight(!0);for(var i=0;i<c;i++)for(var j=0;j<d;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+(b.options.mode=="show"?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+(b.options.mode=="show"?(i-Math.floor(c/2))*(h/c):0),opacity:b.options.mode=="show"?0:1}).animate({left:f.left+j*(g/d)+(b.options.mode=="show"?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+(b.options.mode=="show"?0:(i-Math.floor(c/2))*(h/c)),opacity:b.options.mode=="show"?1:0},b.duration||500);setTimeout(function(){b.options.mode=="show"?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a,b){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j=e=="show"!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l[e=="hide"?0:1]),e=="show"&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},p={};n[k[0]]=e=="show"?l[0]:f,p[k[1]]=e=="show"?l[1]:0,i.animate(n,h,b.options.easing).animate(p,h,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};e=="hide"&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),e=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=(b.options.times||5)*2-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),(d=="hide"&&g||d=="show"&&!g)&&e--;for(var i=0;i<e;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){h==0&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a,b){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:d=="hide"?e:100,from:d=="hide"?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:e=="hide"?0:100),g=b.options.direction||"both",h=b.options.origin;e!="effect"&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||(e=="show"?{height:0,width:0}:i);var j={y:g!="horizontal"?f/100:1,x:g!="vertical"?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&(e=="show"&&(c.from.opacity=0,c.to.opacity=1),e=="hide"&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};c.from=b.options.from||n,c.to=b.options.to||n;if(m){var p=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*p.y,c.from.left=(n.width-c.from.width)*p.x,c.to.top=(n.height-c.to.height)*p.y,c.to.left=(n.width-c.to.width)*p.x}var q={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};if(l=="box"||l=="both")q.from.y!=q.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,h,q.to.y,c.to)),q.from.x!=q.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to));(l=="content"||l=="both")&&q.from.y!=q.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,q.from.y,c.from),c.to=a.effects.setTransition(c,g,q.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from);if(l=="content"||l=="both")h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){var c=a(this);k&&a.effects.save(c,f);var d={height:c.height(),width:c.width()};c.from={height:d.height*q.from.y,width:d.width*q.from.x},c.to={height:d.height*q.to.y,width:d.width*q.to.x},q.from.y!=q.to.y&&(c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,h,q.to.y,c.to)),q.from.x!=q.to.x&&(c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,f)})});c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){c.to.opacity===0&&c.css("opacity",c.from.opacity),j=="hide"&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"left",g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",l={},m={},n={};l[j]=(k=="pos"?"-=":"+=")+g,m[j]=(k=="pos"?"+=":"-=")+g*2,n[j]=(k=="pos"?"-=":"+=")+g*2,c.animate(l,i,b.options.easing);for(var p=1;p<h;p++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a,b){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight(!0):c.outerWidth(!0));e=="show"&&c.css(g,h=="pos"?isNaN(i)?"-"+i:-i:i);var j={};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(c),b=="icons"&&(this._destroyIcons(),c&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(this.options.disabled||b.altKey||b.ctrlKey)return;var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0},resize:function(){var b=this.options,c;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(d.disabled)return;if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f);return}var h=a(b.currentTarget||c),i=h[0]===this.active[0];d.active=d.collapsible&&i?!1:this.headers.index(h);if(this.running||!d.collapsible&&i)return;var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"));return},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(!g)return;return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data),g.running=c.size()===0?b.size():c.size();if(h.animated){var j={};h.collapsible&&e?j={toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:j={toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),a.extend(a.ui.accordion,{version:"1.8.23",animations:{slide:function(b,c){b=a.extend({easing:"swing",duration:300},b,c);if(!b.toHide.size()){b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],i,j=b.toShow;i=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){c.prop=="height"&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i=this.type==="checkbox"||this.type==="radio",l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";h.label===null&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){if(h.disabled)return;a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(h.disabled)return;a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){if(f)return;b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(h.disabled)return;f=!1,d=a.pageX,e=a.pageY}).bind("mouseup.button",function(a){if(h.disabled)return;if(d!==a.pageX||e!==a.pageY)f=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(h.disabled)return!1;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(h.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled"){c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var b=this.buttonElement.removeClass(i),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length)return;c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length)return;d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName))return;this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName))return;c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null;var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}return!0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a)return;var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1)return;extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a)))a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME))return;if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst)return;var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0]))return;this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0]))return;var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase())return f=c[0],r+=d.length,!1});if(f!=-1)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0;for(var s=0;s<a.length;s++)if(m)a.charAt(s)=="'"&&!n("'")?m=!1:q();else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u)break;j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))while(d.length<c)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m);else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*1e4+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++)if(c)a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e);else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal)return;var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p)n--,n<0&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' data-handler="selectDay" data-event="click" data-month="'+Y.getMonth()+'" data-year="'+Y.getFullYear()+'"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var p=0;p<12;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;t<=u;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),i=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(i),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),l=a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(!1===c._trigger("beforeClose",b))return;return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)},open:function(){if(this._isOpen)return;var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return e.focus(1),!1}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){if(a==="click")return;a in e?e[a](b):e.attr(a,b)}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var b=this,c=b.options,d=a(document),e;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e=c.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g=typeof c=="string"?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&typeof d=="string"&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?a.isFunction(b)?this.each(function(c){a(this).offset(b.call(this,c,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),a.curCSS||(a.curCSS=a.css),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.23"})}(jQuery),function(a,b){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&d.values.length!==2&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(d.range==="min"||d.range==="max"?" ui-slider-range-"+d.range:"")));for(var i=e.length;i<g;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e=a(this).data("index.ui-slider-handle"),f,g,h,i;if(b.options.disabled)return;switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:d.preventDefault();if(!b._keySliding){b._keySliding=!0,a(this).addClass("ui-state-active"),f=b._start(d,e);if(f===!1)return}}i=b.options.step,b.options.values&&b.options.values.length?g=h=b.values(e):g=h=b.value();switch(d.keyCode){case a.ui.keyCode.HOME:h=b._valueMin();break;case a.ui.keyCode.END:h=b._valueMax();break;case a.ui.keyCode.PAGE_UP:h=b._trimAlignValue(g+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(g-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===b._valueMax())return;h=b._trimAlignValue(g+i);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===b._valueMin())return;h=b._trimAlignValue(g-i)}b._slide(d,e,h)}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options,d,e,f,g,h,i,j,k,l;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(b){var c=Math.abs(e-h.values(b));f>c&&(f=c,g=a(this),i=b)}),c.range===!0&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),j=this._start(b,i),j===!1?!1:(this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),k=g.offset(),l=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0,!0))},_mouseStart:function(a){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return this.orientation==="horizontal"?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),d<0&&(d=0),this.orientation==="vertical"&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),this.options.values.length===2&&this.options.range===!0&&(b===0&&c>d||b===1&&c<d)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){if(arguments.length){this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(b,c){var d,e,f;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);return}if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();d=this.options.values,e=arguments[0];for(f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments);switch(b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a),a},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b),b;c=this.options.values.slice();for(d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return Math.abs(c)*2>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,c=this.options,d=this,e=this._animateOff?!1:c.animate,f,g={},h,i,j,k;this.options.values&&this.options.values.length?this.handles.each(function(b,i){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",a(this).stop(1,1)[e?"animate":"css"](g,c.animate),d.options.range===!0&&(d.orientation==="horizontal"?(b===0&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({width:f-h+"%"},{queue:!1,duration:c.animate})):(b===0&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({height:f-h+"%"},{queue:!1,duration:c.animate}))),h=f}):(i=this.value(),j=this._valueMin(),k=this._valueMax(),f=k!==j?(i-j)/(k-j)*100:0,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](g,c.animate),b==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate),b==="max"&&this.orientation==="horizontal"&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:c.animate}),b==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate),b==="max"&&this.orientation==="vertical"&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.23"})}(jQuery),function(a,b){function e(){return++c}function f(){return++d}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if(a=="selected"){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var g=a(c).attr("href"),h=g.split("#")[0],i;h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g);if(f.test(g))d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)));else if(g&&g!=="#"){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list),k.data("destroy.tabs",!0)),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return e.selected=a,!1}),typeof e.selected!="number"&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),typeof e.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):e.selected===null&&(e.selected=-1),e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return d.lis.index(a)}))).sort(),a.inArray(e.selected,e.disabled)!=-1&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),e.selected>=0&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var g=0,h;h=this.lis[g];g++)a(h)[a.inArray(g,e.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");e.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(e.event!=="mouseover"){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b,c){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===!1)return this.blur(),!1;e.selected=d.anchors.index(this),d.abort();if(e.collapsible){if(c.hasClass("ui-tabs-selected"))return e.selected=-1,e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur(),!1}e.cookie&&d._cookie(e.selected,e.cookie);if(g.length)f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a,b){return a>=e?++a:a}),this._tabify(),this.anchors.length==1&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)==-1)return;return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this,c=this.options;return a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){a=this._getIndex(a);if(a==-1)if(this.options.collapsible&&this.options.selected!=-1)a=this.options.selected;else return this;return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.23"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(a){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}(jQuery);

Namespace("scormplayer.manifest",{CourseItemPresentation:Base.extend({_hiddenElements:null,constructor:function()
{this._hiddenElements=[];},hiddenElements:function(elements)
{if(elements!==undefined)this._hiddenElements=elements;return this._hiddenElements;}})});

Namespace("scormplayer.manifest",{SharedDataCollection:Base.extend({_datas:null,_datasByIdMap:null,constructor:function()
{this._datas=[];this._datasByIdMap={};},countSharedData:function()
{return this._datas.length;},getSharedDataByIndex:function(index)
{return this._datas[index];},getSharedDataById:function(id)
{return this._datasByIdMap[id];},addSharedData:function(data)
{this._datas.push(data);this._datasByIdMap[data.id()]=data;}})});

Namespace("scormplayer.manifest",{CourseLeafItem:scormplayer.manifest.CourseItem.extend({_presentation:null,_sharedData:null,presentation:function(presentation)
{if(presentation!==undefined)this._presentation=presentation;return this._presentation;},sharedData:function(data)
{if(data!==undefined)this._sharedData=data;return this._sharedData;}})});

Namespace("scormplayer.player.api",{RunTimeData:Base.extend({_data:null,_changedData:null,_parent:null,constructor:function()
{this._data={};this._changedData={};},get:function(name)
{return this._getChild(name,false);},set:function(name,value)
{var child=this;var dotIndex=name.lastIndexOf(".");if(dotIndex!=-1)
{var childName=name.substr(0,dotIndex);child=this._getChild(childName,true);if(child==null)
{return;}
name=name.substr(dotIndex+1);}
if(name!="^")
{child._data[name]=value;child._changedData[name]=true;if(value instanceof this.constructor)
{value._parent=child;}}},isset:function(name)
{return this._getChild(name,false)!=null;},unset:function(name)
{var child=this;var dotIndex=name.lastIndexOf(".");if(dotIndex!=-1)
{var childName=name.substr(0,dotIndex);child=this._getChild(childName,false);if(child==null)
{return;}
name=name.substr(dotIndex+1);}
if(name in child._data)
{var value=child._data[name];if(value instanceof this.constructor)
{value._parent=null;}
delete child._data[name];child._changedData[name]=true;}},count:function()
{return utils.ObjectUtils.keys(this._data).length;},isChanged:function(name)
{var child=this;var dotIndex=name.lastIndexOf(".");if(dotIndex!=-1)
{var childName=name.substr(0,dotIndex);child=this._getChild(childName,false);if(child==null)
{return false;}
name=name.substr(dotIndex+1);}
return name in child._changedData;},resetChanges:function()
{this._changedData={};for(var i in this._data)
{var child=this._data[i];if(child instanceof this.constructor)
{child.resetChanges();}}},toPlainObject:function()
{var data={};for(var name in this._data)
{var child=this._data[name];if(child instanceof this.constructor)
{var childData=child.toPlainObject();for(var childName in childData)
{data[name+"."+childName]=childData[childName];}}
else
{data[name]=child;}}
return data;},copy:function(destData,fields)
{if(arguments.length<2)
{fields=utils.ObjectUtils.keys(this._data);}
for(var i in fields)
{var name=fields[i];if(!this.isset(name))
{continue;}
var child=this.get(name);if(child instanceof this.constructor)
{child=child.clone();}
destData.set(name,child);}},clone:function()
{var clone=new this.constructor();for(var name in this._data)
{var child=this._data[name];if(child instanceof this.constructor)
{child=child.clone();child._parent=clone;}
clone._data[name]=child;}
return clone;},_getChild:function(name,createIfNotExists)
{var names=name.split(".");var child=this;var childData=child._data;for(var i in names)
{if(childData==null)
{return null;}
name=names[i];if(name in childData)
{child=childData[name];if(child instanceof this.constructor)
{childData=child._data;}
else
{childData=null;}}
else if(name=="^")
{child=child._parent;childData=child._data;}
else if(createIfNotExists)
{var newChild=new this.constructor();newChild._parent=child;child=newChild;childData[name]=child;childData=child._data;}
else
{return null;}}
return child;}})});

Namespace("scormplayer.manifest",{CourseAggregationItem:scormplayer.manifest.CourseItem.extend({_items:null,_itemsMap:null,constructor:function()
{this._items=[];this._itemsMap={};},addItem:function(item)
{this._items.push(item);this._itemsMap[item.id()]=item;},countItems:function()
{return this._items.length;},getItemByIndex:function(itemIndex)
{return this._items[itemIndex];},getItemById:function(itemId)
{return this._itemsMap[itemId];}})});

var PlayerEvent=Base.extend({},{PLAYBACK_STARTED:'playbackStarted',PLAYBACK_COMPLETE:'playbackComplete',PLAYBACK_ACTION_OCCURRED:'playbackActionOccurred',SLIDE_CLOSED:'slideClosed',SLIDE_OPENED:'slideOpened',PAGES_CLOSED:'pagesClosed',PAGES_OPENED:'pagesOpened',PAGES_COMPLETED:'pagesCompleted',STATE_CHANGED:'stateChanged',QUIZ_COMPLETE:'quizComplete',QUIZ_STATE_CHANGED:'quizStateChanged',SUB_QUIZ_COMPLETE:'subQuizComplete',SUB_QUIZ_STATE_CHANGED:'subQuizStateChanged',SCENARIO_COMPLETE:'scenarioComplete',SUB_SCENARIO_COMPLETE:'subScenarioComplete',EXIT:'exit',PLAY:'play',PAUSE:'pause',SEEK:'seek',SEEK_END:'seek_end',PASSWORD_REQUIRED:'passwordRequired',PROMPT_TO_RESUME_DECLINED_BY_USER:'promptToResumeDeclinedByUser',ALL_CONTROLS_INVISIBLE:'allControlsInvisible',ANY_CONTROL_VISIBLE:'anyControlVisible'});

Namespace("scormplayer.player.api",{ErrorType:{NO_ERROR:0,GENERAL_ERROR:1,GENERAL_INIT_ERROR:2,ALREADY_INIT:3,CONTENT_INSTANCE_TERMINATED:4,GENERAL_TERMINATION_ERROR:5,TERMINATION_BEFORE_INIT:6,ALREADY_TERMINATED:7,GET_VALUE_BEFORE_INIT:8,GET_VALUE_AFTER_TERMINATION:9,SET_VALUE_BEFORE_INIT:10,SET_VALUE_AFTER_TERMINATION:11,COMMIT_BEFORE_INIT:12,COMMIT_AFTER_TERMINATION:13,GENERAL_ARGUMENT_ERROR:14,GENERAL_GET_ERROR:15,GENERAL_SET_ERROR:16,GENERAL_COMMIT_ERROR:17,UNDEFINED_DATA_MODEL:18,UNIMPLEMENTED_DATA_MODEL:19,DATA_MODEL_NOT_INIT:20,DATA_MODEL_READ_ONLY:21,DATA_MODEL_WRITE_ONLY:22,DATA_MODEL_TYPE_MISMATCH:23,DATA_MODEL_OUT_OF_RANGE:24,DATA_MODEL_DEPENDENCY_NOT_ESTABLISHED:25,DATA_MODEL_DOESNOT_HAVE_CHILDREN:26,ARRAY_INDEX_REQUEST_OUT_OF_RANGE:27,ARRAY_INDEX_SET_OUT_OF_RANGE:28,DATA_MODEL_CAN_BE_SET_ONCE:29,DUPLICATED_UNIQUE:30,VALUE_TOO_LONG:31,DATA_MODEL_IS_KEYWORD:32,DATA_MODEL_CANT_HAVE_COUNT:33}});

Namespace("scormplayer.player.tracking",{MappedObjective:scormplayer.player.tracking.IObjective.extend({_objectives:null,_id:null,_defaultObjectiveId:null,_mapInfos:null,_allowWrite:true,_allowReadSatisfactionStatus:true,allowReadSatisfactionStatus:function(allow)
{if(allow!==undefined)this._allowReadSatisfactionStatus=allow;return this._allowReadSatisfactionStatus;},allowWrite:function(allow)
{if(allow!==undefined)this._allowWrite=allow;return this._allowWrite;},objectives:function(objectives)
{if(objectives!==undefined)
{this._objectives={};this.useObjectives(objectives);}
return this._objectives?utils.ObjectUtils.values(this._objectives):null;},useObjectives:function(objectives)
{if(!this._objectives)
{this._objectives={};}
for(var i in objectives)
{var objective=objectives[i];this._objectives[objective.id()]=objective;}},defaultObjectiveId:function(objectiveId)
{if(objectiveId!==undefined)this._defaultObjectiveId=objectiveId;return this._defaultObjectiveId;},_defaultObjective:function()
{return this._objectives&&this._defaultObjectiveId?this._objectives[this._defaultObjectiveId]:null;},_defaultValue:function(attrName)
{var defaultObjective=this._defaultObjective();return defaultObjective?defaultObjective[attrName]():null;},mapInfos:function(mapInfos)
{if(mapInfos!==undefined)this._mapInfos=mapInfos;return this._mapInfos;},id:function(id)
{if(id!==undefined)this._id=id;return this._id;},description:function(descr)
{var objective=this._defaultObjective();return objective?objective.description(descr):null;},score:function(score)
{if(score!==undefined)
{this.scaledScore(score.scaled());this.minScore(score.min());this.maxScore(score.max());this.rawScore(score.raw());}
score=new scormplayer.player.tracking.Score();score.scaled(this.scaledScore());score.min(this.minScore());score.max(this.maxScore());score.raw(this.rawScore());return score;},scaledScore:function(score)
{if(score!==undefined)
{this._mapAttribute(['normalizedMeasure','scaledScore'],this.constructor.WRITE,score);}
return this._mapAttribute(['normalizedMeasure','scaledScore'],this.constructor.READ);},minScore:function(score)
{if(score!==undefined)
{this._mapAttribute('minScore',this.constructor.WRITE,score);}
score=this._mapAttribute('minScore',this.constructor.READ);if(score===null)
{score=this._defaultValue('minScore');}
return score;},maxScore:function(score)
{if(score!==undefined)
{this._mapAttribute('maxScore',this.constructor.WRITE,score);}
score=this._mapAttribute('maxScore',this.constructor.READ);if(score===null)
{score=this._defaultValue('maxScore');}
return score;},rawScore:function(score)
{if(score!==undefined)
{this._mapAttribute('rawScore',this.constructor.WRITE,score);}
score=this._mapAttribute('rawScore',this.constructor.READ);if(score===null)
{score=this._defaultValue('rawScore');}
return score;},satisfied:function(satisfied)
{if(satisfied!==undefined)
{this._mapAttribute(['satisfiedStatus','satisfied'],this.constructor.WRITE,satisfied);}
if(this._allowReadSatisfactionStatus)
{return this._mapAttribute(['satisfiedStatus','satisfied'],this.constructor.READ);}
var defaultObjective=this._defaultObjective();return(defaultObjective?defaultObjective.satisfied():null);},completed:function(completed)
{if(completed!==undefined)
{this._mapAttribute(['completionStatus','completed'],this.constructor.WRITE,completed);}
completed=this._mapAttribute(['completionStatus','completed'],this.constructor.READ);if(completed===null)
{completed=this._defaultValue('completed');}
return completed;},completionMeasure:function(measure)
{if(measure!==undefined)
{this._mapAttribute(['progressMeasure','completionMeasure'],this.constructor.WRITE,measure);}
measure=this._mapAttribute(['progressMeasure','completionMeasure'],this.constructor.READ);if(measure===null)
{measure=this._defaultValue('completionMeasure');}
return measure;},_mapAttribute:function(attrName,opName,attrValue)
{var objectiveMethod=attrName;if(typeof(attrName)!='string')
{objectiveMethod=attrName[1];attrName=attrName[0];}
var defaultObjective=this._defaultObjective();if(!this._objectives||!this._mapInfos)
{return defaultObjective?defaultObjective[objectiveMethod](attrValue):null;}
var isWriteAttribute=(opName==this.constructor.WRITE);var objectives=[defaultObjective];if(!(isWriteAttribute&&!this._allowWrite))
{var mappedAttr=opName+attrName.charAt(0).toUpperCase()+attrName.substr(1);var objectiveId=null;for(var i in this._mapInfos)
{var mapInfo=this._mapInfos[i];if(mapInfo.mappedAttribute(mappedAttr))
{objectiveId=mapInfo.targetObjectiveId();break;}}
if(objectiveId&&objectiveId in this._objectives)
{if(!isWriteAttribute)
{objectives=[];}
objectives.push(this._objectives[objectiveId]);}}
var returnValue=null;for(var objectiveIndex in objectives)
{var objective=objectives[objectiveIndex];if(objective)
{returnValue=objective[objectiveMethod](attrValue);}}
return returnValue;},clone:function()
{var clone=new this.constructor();var clonedAttributes=["_id","_defaultObjectiveId","_mapInfos","_allowWrite","_allowReadSatisfactionStatus"];for(var i in clonedAttributes)
{var attrName=clonedAttributes[i];clone[attrName]=this[attrName];}
if(this._objectives)
{var objectivesCopy=$.extend({},this._objectives);clone._objectives=objectivesCopy;}
var defaultObjective=this._defaultObjective();if(defaultObjective)
{var clonedDefaultObjective=defaultObjective.clone();clone.useObjectives([clonedDefaultObjective]);}
return clone;}},{READ:"read",WRITE:"write"})});

Namespace("scormplayer.player.tracking",{Attempt:utils.IMementable.extend({_active:false,_suspended:false,_countAttempts:0,_objectives:null,_runTimeData:null,_experiencedDuration:0,active:function(active)
{if(active!==undefined)this._active=active;return this._active;},suspended:function(suspended)
{if(suspended!==undefined)this._suspended=suspended;return this._suspended;},objectives:function(objectives)
{if(objectives!==undefined)this._objectives=objectives;return this._objectives;},runTimeData:function(data)
{if(data!==undefined)this._runTimeData=data;return this._runTimeData;},experiencedDuration:function(duration)
{if(duration!==undefined)this._experiencedDuration=duration;return this._experiencedDuration;},countAttempts:function(countAttempts)
{if(countAttempts!==undefined)this._countAttempts=countAttempts;return this._countAttempts;},pushState:function()
{for(var i in this._objectives)
{this._objectives[i].pushState();}},rollbackState:function()
{for(var i in this._objectives)
{this._objectives[i].rollbackState();}
this._suspended=false;},commitState:function()
{for(var i in this._objectives)
{this._objectives[i].commitState();}}})});

var RequestType=Base.extend({},{SYNC:1,ASYNC:2,DEFERRED:3});

var ViewScormOptions=OptionsCollection.extend({getManifest:function()
{return this.getValueByKey(ViewScormOptions.key.MANIFEST);},getPackageDir:function()
{return this.getValueByKey(ViewScormOptions.key.PACKAGE_DIR);},getAccessToken:function()
{return this.getValueByKey(ViewScormOptions.key.ACCESS_TOKEN);},getCourseId:function()
{return this.getValueByKey(ViewScormOptions.key.COURSE_ID);},getContentState:function()
{return this.getValueByKey(ViewScormOptions.key.CONTENT_STATE);},getObjectives:function()
{return this.getValueByKey(ViewScormOptions.key.OBJECTIVES);},getGlobalSharedData:function()
{return this.getValueByKey(ViewScormOptions.key.GLOBAL_SHARED_DATA);},getUserName:function()
{return this.getValueByKey(ViewScormOptions.key.USER_NAME);},getUserId:function()
{return this.getValueByKey(ViewScormOptions.key.USER_ID);}},{key:{MANIFEST:'manifest',PACKAGE_DIR:'package_dir',ACCESS_TOKEN:'access_token',COURSE_ID:'course_id',CONTENT_STATE:'content_state',OBJECTIVES:'objectives',GLOBAL_SHARED_DATA:'global_shared_data',USER_NAME:'user_name',USER_ID:'user_id'}});

var CompletionSettings=OptionsCollection.extend({getLessonDuration:function()
{return this.getValueByKey(CompletionSettings.key.LESSON_DURATION);},needToDisplayMessage:function()
{return this.getValueByKey(CompletionSettings.key.NEED_TO_DISPLAY_MESSAGE);},needToTerminateLesson:function()
{return this.getValueByKey(CompletionSettings.key.NEED_TO_TERMINATE_LESSON);}},{key:{LESSON_DURATION:'lesson_duration',NEED_TO_DISPLAY_MESSAGE:'need_to_display_message',NEED_TO_TERMINATE_LESSON:'need_to_terminate_lesson'}});

var ValidatorBase=Base.extend({defaultOptions:null,options:null,error:null,currentValue:null,constructor:function(){this.defaultOptions={};this.options={};this.addDefaultOptions({required:true,required_msg:UIMessages.ValidatorMessages.MSG_DATA_REQUIRED,trim:true});},isRequired:function(required){if(required!=undefined){this.options.required=required;}
return required;},isTrimed:function(trim){if(trim!=undefined){this.options.trim=trim;}
return this.options.trim;},requiredMessage:function(msg){if(msg!=undefined){this.options.required_msg=msg;}
return this.options.required_msg;},addDefaultOptions:function(options){this.copyOptions(this.defaultOptions,options);},init:function(options){this.copyOptions(this.options,this.defaultOptions);this.copyOptions(this.options,options);},prepareValue:function(value){if(value&&this.options.trim){value=this.trim(value);}
return value;},isValid:function(value){this.error=null;this.currentValue=value;value=this.prepareValue(value);if(!value){var isError=this.options.required;if(isError){this.error=this.options.required_msg;}
return!isError;}
return this.validate(value);},validate:function(value){return false;},getError:function(){return this.error;},trim:function(str){return str.replace(/(^\s+)|(\s+$)/g,'');},copyOptions:function(destOptions,options){for(var i in options){destOptions[i]=options[i];}},prepareError:function(msg,vars){if(!vars){vars={};}
vars.value=this.currentValue;for(var varName in vars){var r=new RegExp('%'+varName+'%','g');msg=msg.replace(r,vars[varName]);}
return msg;}},{createValidator:function(validatorInfo){var validatorType=validatorInfo.type;var validator=this.getValidatorByType(validatorType);if(validator){validator.init(validatorInfo);}
return validator;},getValidatorByType:function(validatorType){var validators={stringValidator:StringValidator,integerValidator:IntegerValidator,contentItemListValidator:ContentItemListValidator,emailValidator:EmailValidator,validatorAnd:ValidatorAnd,validatorOr:ValidatorOr,validatorList:ValidatorList,validatorCompare:ValidatorCompare,choiceValidator:ChoiceValidator,regexValidator:RegexValidator,passwordValidator:PasswordValidator,passmeterValidator:PassmeterValidator,strongPassmeterValidator:StrongPassmeterValidator,numberValidator:NumberValidator,phoneValidator:PhoneValidator};var validator=null;if(validators[validatorType]){validator=new validators[validatorType];}
return validator;}});

var IContentStatisticsHandler=EventDispatcher.extend({saveContentViewedPreparedStatistics:function(contentItemId,statisticsVars,userId){},saveContentViewed:function(contentItemId,statisticsVars,requestType,userId){},saveISpringPersistedState:function(state,successHandler){},saveBrakeISpringViewChain:function(){},sendPartViewStat:function(params,requestType){},sendISpringContentStats:function(url,statsData,requestMethod){}});

var ViewContentOptions=OptionsCollection.extend({getUserId:function()
{return this.getValueByKey(ViewContentOptions.key.USER_ID);},getUserUid:function()
{return this.getValueByKey(ViewContentOptions.key.USER_UID);},getContentItemId:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_ITEM_ID);},getContentItemKey:function(){return this.getValueByKey(ViewContentOptions.key.CONTENT_ITEM_KEY);},getContentItemViewId:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_ITEM_VIEW_ID);},getParentLearningPathId:function(){return this.getValueByKey(ViewContentOptions.key.PARENT_LEARNING_PATH_ID);},getAdminPreviewNoStatistics:function()
{return this.getValueByKey(ViewContentOptions.key.ADMIN_PREVIEW_NO_STAT)===true;},getContentItemType:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_ITEM_TYPE);},getContentItemTitle:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_ITEM_TITLE,'');},isDownloadable:function()
{return this.getValueByKey(ViewContentOptions.key.IS_DOWNLOADABLE,false);},getViewUrl:function()
{return this.getValueByKey(ViewContentOptions.key.VIEW_URL,'');},getDownloadUrl:function()
{return this.getValueByKey(ViewContentOptions.key.DOWNLOAD_URL,'');},getResumePosition:function()
{return this.getValueByKey(ViewContentOptions.key.RESUME_POSITION);},getResumeType:function()
{return this.getValueByKey(ViewContentOptions.key.RESUME_TYPE);},getResumeState:function()
{return $.parseJSON(this.getValueByKey(ViewContentOptions.key.RESUME_STATE));},getSessionViewKey:function()
{return this.getValueByKey(ViewContentOptions.key.SESSION_VIEW_KEY,'');},getContentItemExtension:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_ITEM_EXTENSION,'');},getContentItemCreationDate:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_ITEM_CREATION_DATE,'');},getContentItemFormattedFileSize:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_ITEM_FORMATTED_FILE_SIZE,'');},getContentWidth:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_WIDTH);},getContentHeight:function()
{return this.getValueByKey(ViewContentOptions.key.CONTENT_HEIGHT);},getCustomThumbnailUrl:function()
{return this.getValueByKey(ViewContentOptions.key.CUSTOM_THUMBNAIL_URL);},getHlsPlaylistUrl:function()
{return this.getValueByKey(ViewContentOptions.key.HLS_PLAYLIST_URL);},getInactivityLogoutTimeout:function()
{return this.getValueByKey(ViewContentOptions.key.INACTIVITY_LOGOUT_TIMEOUT);},isLegacyISpringContent:function()
{return this.getValueByKey(ViewContentOptions.key.IS_LEGACY_ISPRING_CONTENT,false);},needToPreventWindowClosingOnComplete:function()
{return this.getValueByKey(ViewContentOptions.key.NEED_TO_PREVENT_WINDOW_CLOSING_ON_COMPLETE,false);},getFlashSkinUrl:function()
{return this.getValueByKey(ViewContentOptions.key.FLASH_SKIN_URL);},getCompletionSettings:function()
{var completionsSettingsArray=this.getValueByKey(ViewContentOptions.key.COMPLETION_SETTINGS);return(completionsSettingsArray)?new CompletionSettings(completionsSettingsArray):null;},getViewScormOptions:function()
{var scormOptionsArray=this.getValueByKey(ViewContentOptions.key.VIEW_SCORM_OPTIONS);return(scormOptionsArray)?new ViewScormOptions(scormOptionsArray):null;},getStorageAccessToken:function(){return this.getValueByKey(ViewContentOptions.key.STORAGE_ACCESS_TOKEN);},getMetaFinalStatusUid:function()
{return this.getValueByKey(ViewContentOptions.key.META_FINAL_STATUS_UID,'');}},{key:{USER_ID:'user_id',USER_UID:'user_uid',CONTENT_ITEM_ID:'content_item_id',CONTENT_ITEM_KEY:'content_item_key',CONTENT_ITEM_TYPE:'content_item_type',CONTENT_ITEM_TITLE:'content_item_title',CONTENT_ITEM_EXTENSION:'content_item_extension',CONTENT_ITEM_VIEW_ID:'content_item_view_id',PARENT_LEARNING_PATH_ID:'parent_learning_path_id',ADMIN_PREVIEW_NO_STAT:'admin_preview_no_stat',CONTENT_ITEM_CREATION_DATE:'content_item_creation_date',CONTENT_ITEM_FORMATTED_FILE_SIZE:'content_item_formatted_file_size',CONTENT_WIDTH:'content_width',CONTENT_HEIGHT:'content_height',CUSTOM_THUMBNAIL_URL:'custom_thumbnail_url',INACTIVITY_LOGOUT_TIMEOUT:'inactivity_logout_timeout',IS_DOWNLOADABLE:'is_downloadable',VIEW_URL:'view_url',HLS_PLAYLIST_URL:'hls_playlist_url',DOWNLOAD_URL:'download_url',COMPLETION_SETTINGS:'completion_settings',VIEW_SCORM_OPTIONS:'view_scorm_options',IS_LEGACY_ISPRING_CONTENT:'is_legacy_ispring_content',NEED_TO_PREVENT_WINDOW_CLOSING_ON_COMPLETE:'need_to_prevent_window_closing_on_complete',FLASH_SKIN_URL:'flash_skin_url',RESUME_POSITION:'resume_position',RESUME_TYPE:'resume_type',RESUME_STATE:'resume_state',SESSION_VIEW_KEY:'session_view_key',STORAGE_ACCESS_TOKEN:'storage_access_token',META_FINAL_STATUS_UID:'meta_final_status_uid'}});

var StatUrl=Base.extend({},{CONTENT_VIEWED:"/stat/content_viewed",PART_VIEW:"/stat/part_view",OPEN_CONTENT:"/stat/open",SLIDE_VIEW:"/stat/slide_view",SLIDE_VIEW_TIME:"/stat/slide_view_time",QUIZ_RESULTS:"/stat/quiz",ONLINE_QUIZ_RESULTS:"/stat/online_quiz",SCENARIO_RESULTS:"/stat/scenario",PERSIST_CONTENT_STATE:"/content/view/state/persist",BRAKE_VIEW_CHAIN:"/content/view/state/brake_view_chain",PERSIST_SCORM_STATE:"/stat/save_scorm_state",BEFORE_QUIZ:"/stat/before_quiz",AFTER_COMPLETE_QUIZ:"/stat/after_complete_quiz",AFTER_QUIZ:"/stat/after_quiz",QUIZ_STATE_CHANGED:"/stat/quiz_state_changed",BEFORE_GENERATE_QUIZ_REPORT:"/stat/before_generate_quiz_report",AFTER_SAVE_TO_LOCAL_STORAGE:"/stat/after_save_to_local_storage",REQUEST_ERROR_INFO:"/stat/request_error_info"});

var ContentStatisticsLogger=Base.extend({sendQuizViewId:function(url,viewId)
{var params={civ:viewId,r:new Date().getTime()};this._sendRequest(url,params);},sendLogMessage:function(url,params)
{params.r=(Date.now)?Date.now():(new Date().getTime());this._sendRequest(url,params);},sendContentOpenInfo:function(viewId)
{var params={civ:viewId,browser:navigator.userAgent,flash:BrowserUtils.getFlashVersion()};this._sendRequest(StatUrl.OPEN_CONTENT,params);},sendResponseErrorInfo:function(msg,url,xhr){var getData={errorUrl:url,status:xhr.status};var postData={responseHeaders:xhr.getAllResponseHeaders(),responseText:xhr.responseText};this.sendStatisticsErrorInfo(msg,getData,postData)},sendStatisticsErrorInfo:function(msg,getData,postData)
{var time=(Date.now)?Date.now():(new Date().getTime());getData.rand=StringUtils.getRandomString(20)+time;getData.msg=msg;var url=StatUrl.REQUEST_ERROR_INFO;url+="?"+UrlUtils.uriParamsSerialize(getData);var params={msg:msg,failedData:postData};$.post(url,params);},_sendRequest:function(url,data)
{$.get(url,data);}},{getInstance:function()
{if(!this.instance)
{this.instance=new this();}
return this.instance;}});window.g_errorHandler=function(e)
{try
{console&&console.dir&&console.dir(e);var getData={};var postData={};if(e.name!==undefined)
{getData.errorName=e.name;}
if(e.message!==undefined)
{getData.errorMessage=e.message;}
if(e.stack!==undefined)
{postData.errorStack=e.stack;}
ContentStatisticsLogger.getInstance().sendStatisticsErrorInfo("from global error handler",getData,postData);}
catch(error)
{}};

Namespace("scormplayer.player.tracking",{Activity:utils.IMementable.extend({_itemId:null,_isTracked:true,_objectives:null,_defaultObjective:null,_primaryObjective:null,_prevPrimaryObjective:null,_currentAttempt:null,_previousAttempt:null,_countAttempts:0,_parent:null,_childs:null,_availableChilds:null,constructor:function(itemId)
{this.base();this._itemId=itemId;},itemId:function()
{return this._itemId;},isTracked:function(tracked)
{if(tracked!==undefined)this._isTracked=tracked;return this._isTracked;},parent:function()
{return this._parent;},childs:function(childs)
{if(childs!==undefined)
{this._childs=childs;for(var i in childs)
{childs[i]._parent=this;}
this.availableChilds(childs);}
return this._childs;},availableChilds:function(childs)
{if(childs!==undefined)
{this._availableChilds=childs;}
return this._availableChilds;},countAttempts:function(count)
{if(count!==undefined)this._countAttempts=count;return this._countAttempts;},currentAttempt:function(attempt)
{if(attempt!==undefined)this._currentAttempt=attempt;return this._currentAttempt;},previousAttempt:function(attempt)
{if(attempt!==undefined)this._previousAttempt=attempt;return this._previousAttempt;},defaultObjective:function(objective)
{if(objective!==undefined)this._defaultObjective=objective;return this._defaultObjective;},primaryObjective:function(objective)
{if(objective!==undefined)this._primaryObjective=objective;return this._primaryObjective;},prevPrimaryObjective:function(objective)
{if(objective!==undefined)this._prevPrimaryObjective=objective;return this._prevPrimaryObjective;},objectives:function(objectives)
{if(objectives!==undefined)this._objectives=objectives;return this._objectives;},isLeaf:function()
{return this._childs===null;},active:function()
{return this._currentAttempt?this._currentAttempt.active():false;},suspended:function()
{return this._currentAttempt?this._currentAttempt.suspended():false;},pushState:function()
{if(this._currentAttempt)
{this._currentAttempt.pushState();}},rollbackState:function()
{if(this._currentAttempt)
{this._currentAttempt.rollbackState();}},commitState:function()
{if(this._currentAttempt)
{this._currentAttempt.commitState();}}},{createCourseItemActivity:function(item)
{var activity=new this(item.id());if(item instanceof scormplayer.manifest.CourseAggregationItem)
{var childsActivities=[];for(var i=0;i<item.countItems();++i)
{var childItem=item.getItemByIndex(i);var childActivity=this.createCourseItemActivity(childItem);childsActivities.push(childActivity);}
activity.childs(childsActivities);}
return activity;}})});

Namespace("scormplayer.player.api.type",{ValueType:Base.extend({init:function(typeInfo)
{},validateValue:function(value)
{},store:function(value)
{this.validateValue(value);return value;},restore:function(storedValue)
{return storedValue;}})});

var ContentStatisticsWorker=Base.extend({_localStorageKey:null,_url:null,setUrl:function(url)
{this._url=url;},setKey:function(key)
{this._localStorageKey=key;},addValidationKeyToData:function(data)
{data.validation_key=this._localStorageKey;},checkResponse:function(xhr)
{var result=false;var getData={errorUrl:this._url,status:xhr.status};var postData={responseHeaders:xhr.getAllResponseHeaders(),responseText:xhr.responseText};try
{var response=xhr.responseText?$.parseJSON(xhr.responseText):{};}
catch(e)
{this._sendCaughtError(e,postData,getData);return result;}
var isValidKey=response.validation_key==this._localStorageKey;if(response.success&&isValidKey)
{result=true;}
else
{ContentStatisticsLogger.getInstance().sendStatisticsErrorInfo("not valid response, expected key is "+this._localStorageKey,getData,postData);}
return result;},handleSendSuccess:function(response,status,xhr)
{},_sendCaughtError:function(e,postData,getData)
{if(e.name!==undefined)
{getData.errorName=e.name;}
if(e.message!==undefined)
{getData.errorMessage=e.message;}
if(e.stack!==undefined)
{postData.errorStack=e.stack;}
ContentStatisticsLogger.getInstance().sendStatisticsErrorInfo("not valid response, can't parse it. See previous error from ajax error handler",getData,postData);},_clearLastLocalStorageKey:function()
{LocalStorageManager.getInstance().remove(this._localStorageKey);this._localStorageKey=undefined;},_onSendSuccess:function(response,status,xhr)
{if(this.checkResponse(xhr))
{this.handleSendSuccess(response,status,xhr);}},_onSendingComplete:function(xhr)
{if(xhr.readyState==0||xhr.status==0)
{return;}
if(xhr.status==409)
{this._clearLastLocalStorageKey();return;}
if(xhr.status!=200)
{if(this.checkResponse(xhr))
{this._clearLastLocalStorageKey();}}}},{});

var StatNotifierConfig=Base.extend({},{_contentOptions:null,init:function(contentOptions)
{this._contentOptions=contentOptions;},getContentItemId:function()
{return this._contentOptions.getContentItemId();},getContentItemViewId:function()
{return this._contentOptions.getContentItemViewId();},getSessionViewKey:function()
{return this._contentOptions.getSessionViewKey();},getUserUid:function()
{return this._contentOptions.getUserUid();},getResumeType:function()
{return this._contentOptions.getResumeType();},getMetaFinalStatusUid:function()
{return this._contentOptions.getMetaFinalStatusUid();}});

var ContentStatistics=IContentStatisticsHandler.extend({_accountId:null,_accountUid:null,constructor:function(){this.base();this._accountId=$('#ai').val();this._accountUid=$('#aui').val();},saveContentViewedPreparedStatistics:function(contentItemId,statisticsVars,userId){var data=this.buildRequestData(contentItemId,statisticsVars,userId);if(!data){return;}
var url=this._copyParamsToGet(StatUrl.CONTENT_VIEWED,data);ContentStatisticsChecker.getInstance().savePreparedStatisticsToLocalStorage(data,url);},buildRequestData:function(contentItemId,statisticsVars,userId){userId=typeof userId!=='undefined'?userId:null;if(!statisticsVars||!parseInt(contentItemId)){return null;}
statisticsVars.content_item_id=contentItemId;if(userId){statisticsVars.user_id=userId;}
return statisticsVars;},saveContentViewed:function(contentItemId,statisticsVars,requestType,userId){var data=this.buildRequestData(contentItemId,statisticsVars,userId);if(!data){return;}
var url=this._copyParamsToGet(StatUrl.CONTENT_VIEWED,data);var worker=new ContentStatisticsContentViewedWorker();worker.setKey(ContentStatisticsChecker.getInstance().savePreparedStatisticsToLocalStorage(data,url));worker.setUrl(url);worker.sendContentViewedStat(data,requestType);},saveISpringPersistedState:function(state,successHandler){var data={content:state,materialID:StatNotifierConfig.getContentItemId().toString(),viewKey:StatNotifierConfig.getSessionViewKey(),userID:StatNotifierConfig.getUserUid(),finalStatusID:StatNotifierConfig.getMetaFinalStatusUid()};if(StatNotifierConfig.getResumeType()===ContentItemResumeMode.NEVER_RESUME)
{successHandler({mayResumeViewSession:true});}
else
{this._sendJSONRequest(StatUrl.PERSIST_CONTENT_STATE,data,true,successHandler,undefined,RequestMethod.POST);}},saveBrakeISpringViewChain:function(){var data={brake_view_chain:true,id_resource:StatNotifierConfig.getContentItemId(),id_resource_view:StatNotifierConfig.getContentItemViewId()};var successHandler=undefined;var completeHandler=undefined;if(!isNaN(data.id_resource)&&!isNaN(data.id_resource_view)){this._sendRequest(StatUrl.BRAKE_VIEW_CHAIN,data,RequestType.ASYNC,successHandler,completeHandler,RequestMethod.POST);}},doSendContentViewed:function(data,requestType,successHandler,completeHandler,url){url=url?url:StatUrl.CONTENT_VIEWED;this._sendRequest(url,data,requestType,successHandler,completeHandler,RequestMethod.POST);},sendPartViewStat:function(params,requestType){var url=this._copyParamsToGet(StatUrl.PART_VIEW,params);var worker=new ContentStatisticsPartViewWorker();worker.setKey(ContentStatisticsChecker.getInstance().savePartViewStatisticsToLocalStorage(params,url));worker.setUrl(url);worker.sendPartViewStat(params,url,requestType);},doSendPartViewStat:function(data,successHandler,completeHandler,url,requestType){url=url?url:StatUrl.PART_VIEW;this._sendRequest(url,data,requestType,successHandler,completeHandler);},sendISpringContentStats:function(url,statsData,requestMethod,requestType){requestMethod=typeof(requestMethod)=='undefined'?RequestMethod.POST:requestMethod;url=this._copyParamsToGet(url,statsData);var worker=new ContentStatisticsISpringContentWorker();var key=ContentStatisticsChecker.getInstance().saveISpringContentStatisticsToLocalStorage(url,statsData);worker.setKey(key);worker.setUrl(url);ContentStatisticsLogger.getInstance().sendLogMessage(StatUrl.AFTER_SAVE_TO_LOCAL_STORAGE,{saveToLocalStorageUrl:url});worker.sendISpringContentStats(url,statsData,requestMethod,requestType);},doSendISpringContentStats:function(url,data,successHandler,completeHandler,requestMethod,requestType){requestMethod=typeof(requestMethod)=='undefined'?RequestMethod.POST:requestMethod;this._sendRequest(url,data,requestType,successHandler,completeHandler,requestMethod);},triggerContentViewedEvent:function(contentItemId,countViews){this.dispatchEvent(ContentStatistics.event.CONTENT_VIEWED,contentItemId,countViews);},_isSupportDeferredSend:function(){return!ViewContentEnvironment.inMobileApp()&&window.navigator&&window.navigator.sendBeacon;},_sendDeferred:function(url,data){data=this._fillEmptyDataPrams(data);url=this._copyParamsToGet(url,data);var formData=this._convertObjectToFormData(data);return navigator.sendBeacon(url,formData);},hasUnsentStatistic:function(){return ContentStatisticsChecker.getInstance().hasUnsentStatistic();},_sendRequest:function(url,data,requestType,successHandler,completeHandler,requestMethod){requestType=(requestType===RequestType.DEFERRED&&!this._isSupportDeferredSend())?ContentStatistics.DEFAULT_REQUEST_TYPE:requestType;switch(requestType){case RequestType.SYNC:this._sendRequestBase(url,data,false,successHandler,completeHandler,requestMethod,false);break;case RequestType.ASYNC:this._sendRequestBase(url,data,true,successHandler,completeHandler,requestMethod,false);break;case RequestType.DEFERRED:if(!this._sendDeferred(url,data)){this._sendDeferred(StatUrl.REQUEST_ERROR_INFO,{msg:'could not send statistic deferred'});this._sendRequest(url,data,RequestType.SYNC,successHandler,completeHandler,requestMethod);}
break;}},_sendJSONRequest:function(url,data,async,successHandler,completeHandler,requestMethod){this._sendRequestBase(url,data,async,successHandler,completeHandler,requestMethod,true);},_sendRequestBase:function(url,data,async,successHandler,completeHandler,requestMethod,toJson){data=this._fillEmptyDataPrams(data);url=this._copyParamsToGet(url,data);requestMethod=typeof(requestMethod)=='undefined'?RequestMethod.POST:requestMethod;completeHandler=typeof(completeHandler)=='undefined'?function(){}:completeHandler;var contentType=toJson?"application/json; charset=utf-8":"application/x-www-form-urlencoded; charset=UTF-8";var that=this;$.ajax({type:requestMethod,url:url,data:toJson?JSON.stringify(data):data,dataType:"json",async:async,success:successHandler,contentType:contentType,complete:completeHandler,error:function(jqXHR,textStatus,errorThrown){that._handleAjaxError(url,requestMethod,jqXHR,textStatus,errorThrown,data);}});},_fillEmptyDataPrams:function(data){if(data['response_format']===undefined){data['response_format']="json";}
if(data[ContentStatistics.ACCOUNT_ID_PARAM_NAME]===undefined){data[ContentStatistics.ACCOUNT_ID_PARAM_NAME]=this._accountId;}
if(data[ContentStatistics.ACCOUNT_UID_PARAM_NAME]===undefined){data[ContentStatistics.ACCOUNT_UID_PARAM_NAME]=this._accountUid;}
return data;},_copyParamsToGet:function(url,data){if(data['session_view_key']!==undefined){url=UrlUtils.replaceUrlParameter(url,'svk',data['session_view_key']);}
if(data['content_view_id']!==undefined){url=UrlUtils.replaceUrlParameter(url,'civ',data['content_view_id']);}
if(data['id_resource_view']!==undefined){url=UrlUtils.replaceUrlParameter(url,'civ',data['id_resource_view']);}
return url;},_handleAjaxError:function(url,requestMethod,jqXHR,textStatus,errorThrown,data){if(jqXHR.readyState===0||jqXHR.status===0){return;}
if(jqXHR.status===401){return;}
if(jqXHR.status===409){return;}
if(jqXHR.status===410){if(jqXHR.responseText){var jsonResponseText=JSON.parse(jqXHR.responseText);jsonResponseText.redirect_url&&UrlUtils.redirectToUrl(data.redirect_url);}
return;}
var getData={};getData.textStatus=textStatus;getData.errorThrown=errorThrown;getData.errorUrl=url;getData.status=jqXHR.status;var postData=data;postData.responseHeaders=jqXHR.getAllResponseHeaders();if(jqXHR.responseText!==undefined){postData.responseText=jqXHR.responseText;}
ContentStatisticsLogger.getInstance().sendStatisticsErrorInfo("from ajax error handler",getData,postData);},_convertObjectToFormData:function(data){var formData=new FormData();var values=FormUtils.objectToPostVars(data);Object.keys(values).forEach(function(key){var value=values[key];formData.append(key,value);});return formData;}},{event:{CONTENT_VIEWED:'content_viewed'},CONTENT_VIEWED_STAT_UPDATE_INTERVAL:2000,ACCOUNT_ID_PARAM_NAME:'ai',ACCOUNT_UID_PARAM_NAME:'accountID',instance:null,DEFAULT_REQUEST_TYPE:RequestType.SYNC,getInstance:function(){if(!this.instance){this.instance=new this();}
return this.instance;}});

var ContentStatisticsContentViewedWorker=ContentStatisticsWorker.extend({sendContentViewedStat:function(data,requestType,url)
{this.addValidationKeyToData(data);ContentStatistics.getInstance().doSendContentViewed(data,requestType,safeHandler(this,"_onSendSuccess"),safeHandler(this,"_onSendingComplete"),url);},handleSendSuccess:function(response,status,xhr)
{this._clearLastLocalStorageKey();var countViews=response.count_views;var contentItemId=response.content_item_id;ContentStatistics.getInstance().triggerContentViewedEvent(contentItemId,countViews);}},{});

var ContentStatisticsChecker=EventDispatcher.extend({_resendStatisticTimeout:null,savePreparedStatisticsToLocalStorage:function(statData,url){var uniqueKey=(statData.content_view_id!==undefined)?statData.content_view_id:statData.unique_key;var key=this._getPreparedContentViewedStatLocalStorageKey(uniqueKey);this._saveStatisticsToLocalStorage(key,statData,url);return key;},removePreparedContentViewedStatFromLocalStorage:function(uniqueKey){var localStorageKey=this._getPreparedContentViewedStatLocalStorageKey(uniqueKey);LocalStorageManager.getInstance().remove(localStorageKey);},savePartViewStatisticsToLocalStorage:function(statData,url){var key=ContentStatisticsChecker.PART_VIEW_KEY_PREFIX+statData.id_resource_view+"_"+StringUtils.getRandomString(5);this._saveStatisticsToLocalStorage(key,statData,url);return key;},saveISpringContentStatisticsToLocalStorage:function(url,statData){var key=ContentStatisticsChecker.ISPRING_CONTENT_STATS_DATA_PREFIX+"_"+StringUtils.getRandomString(5);this._saveStatisticsToLocalStorage(key,statData,url);return key;},processSavedStatistics:function(requestType){var thisPtr=this;var storageManager=LocalStorageManager.getInstance();if(storageManager.isReady()){this._processSavedRequests(requestType);}
else{storageManager.addListener(LocalStorageManager.READY_EVENT,this,function(){storageManager.removeListener(LocalStorageManager.READY_EVENT,thisPtr);thisPtr._processSavedRequests(requestType);});}},hasUnsentStatistic:function(){var localStorageKeys=LocalStorageManager.getInstance().getAllKeys();return localStorageKeys.some(function(key){var isPartViewRequestData=key.indexOf(ContentStatisticsChecker.PART_VIEW_KEY_PREFIX)===0;var isISpringContentStatsData=key.indexOf(ContentStatisticsChecker.ISPRING_CONTENT_STATS_DATA_PREFIX)===0;return isPartViewRequestData||isISpringContentStatsData;});},_getPreparedContentViewedStatLocalStorageKey:function(uniqueKey){return ContentStatisticsChecker.PREPARED_CONTENT_VIEWED_STAT_DATA_PREFIX+uniqueKey;},_saveStatisticsToLocalStorage:function(key,statData,url){statData.url=url;statData.creationDate=(new Date()).getTime();var preparedStatistics={statData:statData,modifiedAt:ContentStatisticsChecker.getTime()};LocalStorageManager.getInstance().set(key,preparedStatistics);},_processSavedRequests:function(requestType){if(requestType===RequestType.SYNC){this._processSavedRequestParallel(requestType)}
else{this._processSavedRequestSerial(requestType)}},_processSavedRequestParallel:function(requestType){var allSavedData=LocalStorageManager.getInstance().getAll();var unexpiredTimeout=this._processAllSavedDataParallel(allSavedData,requestType);if(unexpiredTimeout!==null&&this._resendStatisticTimeout===null){this._resendStatisticTimeout=setTimeout(function(){this._processSavedRequests(requestType);this._resendStatisticTimeout=null;}.bind(this),unexpiredTimeout);}},_processAllSavedDataParallel:function(allSavedData,requestType){var maxUnexpiredTimeout=null;for(var i=0;i<allSavedData.length;++i){var keyValuePair=allSavedData[i];var unexpiredTimeout=this._processKeyValuePair(keyValuePair[0],keyValuePair[1],requestType);maxUnexpiredTimeout=(unexpiredTimeout===null)?maxUnexpiredTimeout:Math.max(maxUnexpiredTimeout,unexpiredTimeout);}
return maxUnexpiredTimeout;},_processSavedRequestSerial:function(requestType){var allSavedDataKeys=this._getContentStatisticKeysFromLocalStorage();if(allSavedDataKeys.length<=ContentStatisticsChecker.MAX_PARALLEL_STAT_SAVE_REQUESTS){this._processSavedRequestParallel(requestType)}
else{this._processAllSavedDataKeysSerial(allSavedDataKeys,requestType)}},_processAllSavedDataKeysSerial:function(allSavedDataKeys,requestType){var maxUnexpiredTimeout=null;var i=0;var sendNextFn=(function(){maxUnexpiredTimeout=maxUnexpiredTimeout===null?maxUnexpiredTimeout:maxUnexpiredTimeout-ContentStatisticsChecker.SERIAL_STAT_SAVE_REQUEST_TIMEOUT;var key=allSavedDataKeys[i];var value=LocalStorageManager.getInstance().get(key);if(value){var unexpiredTimeout=this._processKeyValuePair(key,value,requestType);maxUnexpiredTimeout=(unexpiredTimeout===null)?maxUnexpiredTimeout:Math.max(maxUnexpiredTimeout,unexpiredTimeout);}
if(++i<allSavedDataKeys.length){setTimeout(sendNextFn,ContentStatisticsChecker.SERIAL_STAT_SAVE_REQUEST_TIMEOUT)}
else{if(maxUnexpiredTimeout!==null&&this._resendStatisticTimeout===null){this._resendStatisticTimeout=setTimeout(function(){this._processSavedRequests(requestType);this._resendStatisticTimeout=null;}.bind(this),Math.max(maxUnexpiredTimeout,0));}}}).bind(this);sendNextFn()},_processKeyValuePair:function(key,data,requestType){var invalidData=!data||(data=="");if(invalidData){return null;}
var currentTime=ContentStatisticsChecker.getTime();var lastModified=parseInt(data.modifiedAt);if(isNaN(lastModified)){return null;}
var unexpiredTimeout=ContentStatisticsChecker.MODIFY_TIMEOUT-(currentTime-lastModified);var isTimeoutExpired=unexpiredTimeout<=0;if(isTimeoutExpired){this._sendData(key,data.statData,requestType);return null;}
return unexpiredTimeout;},_sendData:function(key,data,requestType){var isPreparedContentViewedStat=String(key).indexOf(ContentStatisticsChecker.PREPARED_CONTENT_VIEWED_STAT_DATA_PREFIX)==0;var isPartViewRequestData=String(key).indexOf(ContentStatisticsChecker.PART_VIEW_KEY_PREFIX)==0;var isISpringContentStatsData=String(key).indexOf(ContentStatisticsChecker.ISPRING_CONTENT_STATS_DATA_PREFIX)==0;var url=null;if(data.url!==undefined){url=data.url;data.url=undefined;}
if(isPartViewRequestData){this._sendPartViewStatData(key,data,url,requestType);}
else if(isPreparedContentViewedStat){this._sendContentViewedStatData(key,data,url,requestType);}
else if(isISpringContentStatsData){this._sendISpringContentStatsData(key,data,url,requestType);}},_sendPartViewStatData:function(key,data,url,requestType){var worker=new ContentStatisticsPartViewWorker();worker.setKey(key);worker.setUrl(url);worker.sendPartViewStat(data,url,requestType);},_sendContentViewedStatData:function(key,data,url,requestType){var worker=new ContentStatisticsContentViewedWorker();worker.setKey(key);worker.setUrl(url);worker.sendContentViewedStat(data,requestType,url);},_sendISpringContentStatsData:function(key,data,url,requestType){var worker=new ContentStatisticsISpringContentWorker();worker.setKey(key);worker.setUrl(url);worker.sendISpringContentStats(url,data,RequestMethod.POST,requestType);},_getContentStatisticKeysFromLocalStorage:function(){return LocalStorageManager.getInstance().getAllKeys().filter(function(key){return String(key).indexOf(ContentStatisticsChecker.PREPARED_CONTENT_VIEWED_STAT_DATA_PREFIX)===0||String(key).indexOf(ContentStatisticsChecker.PART_VIEW_KEY_PREFIX)===0||String(key).indexOf(ContentStatisticsChecker.ISPRING_CONTENT_STATS_DATA_PREFIX)===0;})}},{PART_VIEW_KEY_PREFIX:"content_part_view_request_",PREPARED_CONTENT_VIEWED_STAT_DATA_PREFIX:"prepared_content_viewed_stat_data_",ISPRING_CONTENT_STATS_DATA_PREFIX:"ispring_content_stats_data_",MODIFY_TIMEOUT:10*1000,MAX_PARALLEL_STAT_SAVE_REQUESTS:50,SERIAL_STAT_SAVE_REQUEST_TIMEOUT:100,_instance:null,getInstance:function(){if(ContentStatisticsChecker._instance==null){ContentStatisticsChecker._instance=new this();}
return ContentStatisticsChecker._instance;},getTime:function(){return(new Date()).getTime();}});$(function(){ContentStatisticsChecker.getInstance().processSavedStatistics(RequestType.ASYNC);});

Namespace.use(["scormplayer.player.tracking.Score","scormplayer.player.tracking.IObjective","utils.Mementable"],function(){var ObjectiveBaseClasses=Mementable.extend({}).implement([IObjective]);Namespace("scormplayer.player.tracking",{Objective:ObjectiveBaseClasses.extend({_id:null,_score:null,_satisfied:null,_completed:null,_completionMeasure:null,_description:null,constructor:function()
{this._score=new Score();},id:function(id)
{if(id!==undefined)this._id=id;return this._id;},score:function(score)
{if(score!==undefined)this._score=score;return this._score;},scaledScore:function(score)
{if(score!==undefined)this._score.scaled(score);return this._score.scaled();},minScore:function(score)
{if(score!==undefined)this._score.min(score);return this._score.min();},maxScore:function(score)
{if(score!==undefined)this._score.max(score);return this._score.max();},rawScore:function(score)
{if(score!==undefined)this._score.raw(score);return this._score.raw();},satisfied:function(satisfied)
{if(satisfied!==undefined)this._satisfied=satisfied;return this._satisfied;},completed:function(completed)
{if(completed!==undefined)this._completed=completed;return this._completed;},completionMeasure:function(measure)
{if(measure!==undefined)this._completionMeasure=measure;return this._completionMeasure;},description:function(descr)
{if(descr!==undefined)this._description=descr;return this._description;},copy:function(dest)
{this.base(dest);this._score.copy(dest._score);},clone:function()
{var clone=new this.constructor();this.copy(clone);return clone;},reset:function()
{this._satisfied=null;this._completed=null;this._score=new Score();this._completionMeasure=null;this._description=null;}})});});

var IStatNotifier=EventDispatcher.extend({sendSlideViewTimeStatistics:function(slideIndex,viewTime){},sendSlideViewStatistics:function(slideIndex){},sendQuizResults:function(quizResultsXml,slideIndex,quizVersion,persistedState){},sendOnlineQuizResults:function(quizAttemptJson){},sendScenarioReport:function(scenarioReport,slideIndex,persistedState){},sendData:function(url,requestParams,requestMethod){}});

Namespace("scormplayer.manifest",{Course:Base.extend({_id:null,_title:null,_rootItem:null,_objectivesGlobalToSystem:null,_sharedDataGlobalToSystem:null,_childItemsMap:null,id:function(id)
{if(id!==undefined)this._id=id;return this._id;},title:function(title)
{if(title!==undefined)this._title=title;return this._title;},objectivesGlobalToSystem:function(objectivesGlobalToSystem)
{if(objectivesGlobalToSystem!==undefined)this._objectivesGlobalToSystem=objectivesGlobalToSystem;return this._objectivesGlobalToSystem;},sharedDataGlobalToSystem:function(sharedDataGlobalToSystem)
{if(sharedDataGlobalToSystem!==undefined)this._sharedDataGlobalToSystem=sharedDataGlobalToSystem;return this._sharedDataGlobalToSystem;},rootItem:function(rootItem)
{if(rootItem!==undefined)this._rootItem=rootItem;return this._rootItem;},getItemById:function(itemId)
{if(!this._childItemsMap)
{this._childItemsMap={};this._addChildItemToMap(this._rootItem);}
return this._childItemsMap[itemId];},_addChildItemToMap:function(item)
{this._childItemsMap[item.id()]=item;if(item instanceof scormplayer.manifest.CourseAggregationItem)
{for(var i=0;i<item.countItems();++i)
{this._addChildItemToMap(item.getItemByIndex(i));}}}})});

var DummyContentStatistics=IContentStatisticsHandler.extend({constructor:function(){this.base();},saveContentViewedPreparedStatistics:function(contentItemId,statisticsVars,userId)
{},saveContentViewed:function(contentItemId,statisticsVars,requestType,userId)
{},saveISpringPersistedState:function(state,successHandler,completeHandler)
{},saveBrakeISpringViewChain:function()
{},sendPartViewStat:function(params,requestType)
{},sendISpringContentStats:function(url,statsData,requestMethod)
{},dispatchEvent:function(eventName)
{}});

var StatNotifier=IStatNotifier.extend({_slidesViewing:null,constructor:function(){this._slidesViewing={};},sendSlideViewTimeStatistics:function(slideIndex,viewTime){this._sendStat(StatUrl.SLIDE_VIEW_TIME,{'slide_index':slideIndex,'view_time':viewTime},RequestMethod.GET);},sendSlideViewStatistics:function(slideIndex){if(!this._slidesViewing[slideIndex]){this._slidesViewing[slideIndex]=1;this._sendStat(StatUrl.SLIDE_VIEW,{'slide_index':slideIndex},RequestMethod.GET);}},sendQuizResults:function(quizResultsXml,slideIndex,quizVersion,persistedState){var time=(Date.now)?Date.now():new Date().getTime();var params={'attempt_date':Math.round(time/1000),'quiz_results':quizResultsXml,'slide_index':slideIndex,intermediate_content_state:persistedState};if(quizVersion){params.quiz_version=quizVersion;}
ContentStatisticsLogger.getInstance().sendQuizViewId(StatUrl.BEFORE_QUIZ,this._getResourceViewId());var statQuizUrl=StatUrl.QUIZ_RESULTS;this._sendStat(statQuizUrl,params);ContentStatisticsLogger.getInstance().sendQuizViewId(StatUrl.AFTER_QUIZ,this._getResourceViewId());},sendOnlineQuizResults:function(quizAttemptJson){ContentStatisticsLogger.getInstance().sendQuizViewId(StatUrl.BEFORE_QUIZ,this._getResourceViewId());this._sendStat(StatUrl.ONLINE_QUIZ_RESULTS,{'online_quiz_report':quizAttemptJson,});ContentStatisticsLogger.getInstance().sendQuizViewId(StatUrl.AFTER_QUIZ,this._getResourceViewId());},sendScenarioReport:function(scenarioReport,slideIndex,persistedState){var time=(Date.now)?Date.now():new Date().getTime();var params={'attempt_date':Math.round(time/1000),'scenario_report':scenarioReport,'slide_index':slideIndex,intermediate_content_state:persistedState};var statScenarioUrl=StatUrl.SCENARIO_RESULTS;this._sendStat(statScenarioUrl,params);},sendData:function(url,requestParams,requestMethod){url=UrlUtils.replaceUrlParameter(url,'civ',this._getResourceViewId());requestMethod=typeof(requestMethod)=='undefined'?RequestMethod.POST:requestMethod;ContentStatistics.getInstance().sendISpringContentStats(url,requestParams,requestMethod,RequestType.ASYNC);},_sendStat:function(url,params,requestMethod){requestMethod=typeof(requestMethod)=='undefined'?RequestMethod.POST:requestMethod;var requestParams={id_resource_view:this._getResourceViewId(),id_resource:StatNotifierConfig.getContentItemId()};var sessionViewKey=StatNotifierConfig.getSessionViewKey();if(sessionViewKey){requestParams["session_view_key"]=sessionViewKey;}
for(var paramName in params){if(params.hasOwnProperty(paramName)){requestParams[paramName]=params[paramName];}}
this.sendData(url,requestParams,requestMethod);},_getResourceViewId:function(){return StatNotifierConfig.getContentItemViewId();}});

var DummyStatNotifier=IStatNotifier.extend({sendSlideViewTimeStatistics:function(slideIndex,viewTime)
{},sendSlideViewStatistics:function(slideIndex)
{},sendQuizResults:function(quizResultsXml,slideIndex,quizVersion,persistedState)
{},sendScenarioReport:function(scenarioReport,slideIndex,persistedState)
{},sendData:function(url,requestParams,requestMethod)
{}});

var StatCollector=EventDispatcher.extend({viewContentOptions:null,statNotifier:null,_startPlayTime:null,_updateContentStatisticsIntervalId:null,_isPlaybackActionOccurred:null,_statisticsHandler:null,_defaultStatisticsHandler:null,constructor:function(viewContentOptions,customStatisticsHandler){this.viewContentOptions=viewContentOptions;this._defaultStatisticsHandler=viewContentOptions.getAdminPreviewNoStatistics()?new DummyContentStatistics():ContentStatistics.getInstance();this._statisticsHandler=customStatisticsHandler?customStatisticsHandler:this._defaultStatisticsHandler;this.statNotifier=viewContentOptions.getAdminPreviewNoStatistics()?new DummyStatNotifier():new StatNotifier();this._isPlaybackActionOccurred=false;},stop:function(requestType){this._clearUpdateStatisticsInterval();this._saveContentViewedStatistics(requestType);},setPlaybackActionOccurred:function(){this._isPlaybackActionOccurred=true;},handlePlaybackStarted:function(){this._startPlayTime=_.now();this._sendOpenContentRequest();this._updateContentStatisticsIntervalId=setInterval(handler(this,'_updatePreparedContentStatistics'),ContentStatistics.CONTENT_VIEWED_STAT_UPDATE_INTERVAL);},getViewDurationInSeconds:function(){return Math.round(this._getViewDuration()/1000);},isPlaybackActionOccurred:function(){return this._isPlaybackActionOccurred;},getStatisticsVars:function(){return{duration:this.getViewDurationInSeconds(),is_playback_action_occurred:(this.isPlaybackActionOccurred())?1:0,content_view_id:this.viewContentOptions.getContentItemViewId(),parent_learning_path_id:this.viewContentOptions.getParentLearningPathId()};},getDefaultStatisticHandler:function(){return this._defaultStatisticsHandler;},_sendOpenContentRequest:function(){ContentStatisticsLogger.getInstance().sendContentOpenInfo(this.viewContentOptions.getContentItemViewId());},_getViewDuration:function(){var viewDuration=0;if(this._startPlayTime){viewDuration=(_.now()-this._startPlayTime);}
return viewDuration;},_saveContentViewedStatistics:function(requestType){this._statisticsHandler.saveContentViewed(this.viewContentOptions.getContentItemId(),this.getStatisticsVars(),requestType,this.viewContentOptions.getUserId());},_updatePreparedContentStatistics:function(){this._statisticsHandler.saveContentViewedPreparedStatistics(this.viewContentOptions.getContentItemId(),this.getStatisticsVars(),this.viewContentOptions.getUserId());},_clearUpdateStatisticsInterval:function(){clearInterval(this._updateContentStatisticsIntervalId);}});

var BasePlayer=EventDispatcher.extend({_isPlaybackStarted:null,_isPlaybackComplete:null,constructor:function()
{this._isPlaybackStarted=false;this._isPlaybackComplete=false;},isPlaybackStarted:function()
{return this._isPlaybackStarted;},isPlaybackComplete:function()
{return this._isPlaybackComplete;},tryToSetPlaybackStarted:function()
{if(!this._isPlaybackStarted)
{this.setPlaybackStarted();}},setPlaybackStarted:function()
{this._isPlaybackStarted=true;this.dispatchEvent(PlayerEvent.PLAYBACK_STARTED);},handlePlaybackComplete:function()
{if(this._isPlaybackStarted)
{this._isPlaybackComplete=true;this.dispatchEvent(PlayerEvent.PLAYBACK_COMPLETE);}},handlePlaybackActionOccurred:function()
{this.dispatchEvent(PlayerEvent.PLAYBACK_ACTION_OCCURRED);}});

var StringValidator=ValidatorBase.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_symbols:[],invalid_symbols_msg:UIMessages.ValidatorMessages.MSG_INVALID_SYMBOL,min_length:1,min_length_msg:UIMessages.ValidatorMessages.MSG_MIN_STRING_LENGTH,max_length:null,max_length_msg:UIMessages.ValidatorMessages.MSG_MAX_STRING_LENGTH});},validate:function(val)
{var character;var valueLength=val.length;if(this.options.min_length!=null&&valueLength<this.options.min_length)
{this.error=this.prepareError(this.options.min_length_msg,{min_length:this.options.min_length});}
else if(this.options.max_length!=null&&valueLength>this.options.max_length)
{this.error=this.prepareError(this.options.max_length_msg,{max_length:this.options.max_length});}
else if(this.options.invalid_symbols!=null&&(character=this._findInvalidCharacter(val))!==false)
{this.error=this.prepareError(this.options.invalid_symbols_msg,{invalid_character:character});}
else
{return true;}
return false;},_findInvalidCharacter:function(str)
{var character=false;$.each(this.options.invalid_symbols,function(index,symbol){if(_.contains(str,symbol))
{character=symbol;}});return character;}});

var ConfirmPopup=Popup.extend({_buttons:null,_additionalCssClass:null,_confirmationData:null,initialize:function(){this._additionalCssClass='';this.base();this._buttons=SaveCancelButtons.initButtons('confirmPopupButtons');this._buttons.addListener(SaveButton.event.SAVE,this,this._onSaveClicked);this._buttons.addListener(SaveCancelButtons.event.CANCEL,this,this._onCancelClicked);},setTitle:function(text){this.contentContainer.find('.title_icon').html(text);},setConfirmButtonText:function(text){this._buttons.setText(text);},setCancelButtonText:function(text){this._buttons.setCancelText(text);},setContent:function(html){this.contentContainer.find('.text_container').html(html);},addCssClass:function(cssClass){this._additionalCssClass+=' '+cssClass;this.popup.addClass(this._additionalCssClass);},setConfirmationData:function(confirmationData){this._confirmationData=confirmationData;},setSaveButtonColor:function(color){this._buttons.setSaveButtonColor(color);},hideCancelSection:function(){this._buttons.hideCancelSection();},showCancelSection:function(){this._buttons.showCancelSection();},clearPopupState:function(){this._removeEventListeners();this.popup.removeClass(this._additionalCssClass);},_onSaveClicked:function(){this.close();this.dispatchEvent(ConfirmPopup.event.CONFIRMED,this._confirmationData);},_onCancelClicked:function(){this._onCloseButtonClick();this.dispatchEvent(ConfirmPopup.event.CANCELED);},_removeEventListeners:function(){if(!this._listeners){return;}
var eventName=ConfirmPopup.event.CONFIRMED;this._listeners[eventName]=[];eventName=ConfirmPopup.event.CANCELED;this._listeners[eventName]=[];eventName=Popup.event.CLOSE;this._listeners[eventName]=[];}},{event:{CONFIRMED:'confirmed',CANCELED:'canceled',},setup:function(params){var popup=ConfirmPopup.get();popup.clearPopupState();popup.setContent(params['content']);popup.setTitle(params['title']);popup.setConfirmButtonText(params['confirm_text']);if(params['cancel_text']!==undefined){popup.setCancelButtonText(params['cancel_text']);}
if(params['data']!=undefined){popup.setConfirmationData(params['data']);}
if(params['confirm_handler']!=undefined){popup.addListener(ConfirmPopup.event.CONFIRMED,this,params['confirm_handler']);}
if(params['close_handler']!=undefined){popup.addListener(Popup.event.CLOSE,this,params['close_handler']);}
if(params['cancel_handler']!=undefined){popup.addListener(ConfirmPopup.event.CANCELED,this,params['cancel_handler']);}
if(params['show_cancel_button']!==undefined&&!params['show_cancel_button']){popup.hideCancelSection();}else{popup.showCancelSection();}
var saveButtonColor=params['save_button_color']!=undefined?params['save_button_color']:$('#confirmPopupSaveButtonColor').val();popup.setSaveButtonColor(saveButtonColor);return popup;},get:function(){return Popup.getPopup('ConfirmPopup');}});

Namespace("scormplayer.player.tracking",{ActivitiesCollection:Base.extend({_rootActivity:null,_activitiesMap:null,_activitiesTree:null,_reversedActivitiesTree:null,_leafActivities:null,rootActivity:function(activity)
{if(activity!==undefined)this._rootActivity=activity;return this._rootActivity;},getActivityByItemId:function(itemId)
{return this._activitiesMap[itemId];},getActivityPath:function(activity)
{var path=[activity];while(activity.parent()!=null)
{activity=activity.parent();path.push(activity);}
path.reverse();return path;},getLastAncestor:function(activity1,activity2)
{var activity1Path=this.getActivityPath(activity1);var activity2Path=this.getActivityPath(activity2);var minPathLength=Math.min(activity1Path.length,activity2Path.length);for(var i=1;i<minPathLength;++i)
{if(activity1Path[i]!==activity2Path[i])
{return activity1Path[i-1];}}
return activity1Path[minPathLength-1];},getActivitiesOrder:function(activity1,activity2)
{if(activity1===activity2)
{return null;}
var activity1Index=this._getActivityIndex(activity1);var activity2Index=this._getActivityIndex(activity2);return activity1Index<activity2Index;},isActivityAvailable:function(activity)
{return this._getActivityIndex(activity)>=0;},getNextActivity:function(activity)
{var activityIndex=this._getActivityIndex(activity);if(activityIndex>=0)
{var activityNode=this._activitiesTree[activityIndex];for(var i=activityIndex+1;i<this._activitiesTree.length;++i)
{var nextActivityNode=this._activitiesTree[i];if(nextActivityNode.level()<=activityNode.level())
{return nextActivityNode.activity();}}}
return null;},getPreviousActivity:function(activity)
{var activityIndex=this._getActivityReversedIndex(activity);if(activityIndex>0)
{var activityNode=this._reversedActivitiesTree[activityIndex];for(var i=activityIndex-1;i>=0;--i)
{var previousActivityNode=this._reversedActivitiesTree[i];if(previousActivityNode.level()<=activityNode.level())
{return previousActivityNode.activity();}}}
return null;},_getActivityIndex:function(activity)
{var countActivities=this._activitiesTree.length;for(var i=0;i<countActivities;++i)
{var node=this._activitiesTree[i];if(node.activity()===activity)
{return i;}}
return-1;},_getActivityReversedIndex:function(activity)
{var countActivities=this._reversedActivitiesTree.length;for(var i=0;i<countActivities;++i)
{var node=this._reversedActivitiesTree[i];if(node.activity()===activity)
{return i;}}
return-1;},update:function()
{this._initActivitiesMap();this._initActivitiesTree();this._initLeafActivities();},_initActivitiesMap:function()
{this._activitiesMap={};this.forEach(handler(this,"_addActivityToMap"));},_addActivityToMap:function(activity)
{this._activitiesMap[activity.itemId()]=activity;},_initActivitiesTree:function()
{this._activitiesTree=[];this._reversedActivitiesTree=[];this._addActivityToTree(this._rootActivity,0);},_addActivityToTree:function(activity,level)
{var node=new this.constructor.ActivityNode(activity,level);this._activitiesTree.push(node);var childs=activity.availableChilds();if(childs)
{for(var i in childs)
{this._addActivityToTree(childs[i],level+1);}}
this._reversedActivitiesTree.push(node);},countLeafActivities:function()
{return this._leafActivities.length;},getLeafActivityByIndex:function(index)
{return this._leafActivities[index];},_initLeafActivities:function()
{this._leafActivities=[];this.forAvailable(handler(this,"_addLeafActivity"));},_addLeafActivity:function(activity)
{if(activity.isLeaf())
{this._leafActivities.push(activity);}},forEach:function(method)
{var args=Array.prototype.slice.call(arguments);args=[this._rootActivity].concat(args);this._walkEachActivity.apply(this,args);},_walkEachActivity:function(activity,method)
{var args=Array.prototype.slice.call(arguments);var methodArgs=args.slice();methodArgs.splice(1,1);method.apply(null,methodArgs);var childs=activity.childs();if(childs)
{args.splice(0,1);for(var i in childs)
{var childActivity=childs[i];this._walkEachActivity.apply(this,[childActivity].concat(args));}}},forAvailable:function(method)
{var args=Array.prototype.slice.call(arguments);args=[this._rootActivity].concat(args);this._walkAvailableActivity.apply(this,args);},_walkAvailableActivity:function(activity,method)
{var args=Array.prototype.slice.call(arguments);var methodArgs=args.slice();methodArgs.splice(1,1);method.apply(null,methodArgs);var childs=activity.availableChilds();if(childs)
{args.splice(0,1);for(var i in childs)
{var childActivity=childs[i];this._walkAvailableActivity.apply(this,[childActivity].concat(args));}}}},{ActivityNode:Base.extend({_activity:null,_level:0,constructor:function(activity,level)
{this._activity=activity;this._level=level;},activity:function()
{return this._activity;},level:function()
{return this._level;}}),createCourseActivities:function(course)
{var activities=new this();var rootActivity=scormplayer.player.tracking.Activity.createCourseItemActivity(course.rootItem());activities.rootActivity(rootActivity);return activities;}})});

Namespace("scormplayer.player.tracking",{ObjectivesCollection:utils.IMementable.extend({_objectives:null,_objectivesByIdMap:null,constructor:function()
{this._objectives=[];this._objectivesByIdMap={};},addObjective:function(objective)
{this._objectives.push(objective);this._objectivesByIdMap[objective.id()]=objective;},countObjectives:function()
{return this._objectives.length;},getObjectiveByIndex:function(index)
{return this._objectives[index];},getObjectiveById:function(objectiveId)
{return this._objectivesByIdMap[objectiveId];},removeObjective:function(objective)
{var objectiveIndex=$.inArray(objective,this._objectives);if(objectiveIndex>=0)
{this._objectives.splice(objectiveIndex,1);delete this._objectivesByIdMap[objective.id()];}},pushState:function()
{for(var i in this._objectives)
{this._objectives[i].pushState();}},rollbackState:function()
{for(var i in this._objectives)
{this._objectives[i].rollbackState();}},commitState:function()
{for(var i in this._objectives)
{this._objectives[i].commitState();}}})});

var ValidatorsGroup=ValidatorBase.extend({constructor:function()
{this.base();},init:function(options)
{this.base(options);var validators=[];for(var i in this.options.validators)
{var validatorInfo=this.options.validators[i];validators.push(ValidatorBase.createValidator(validatorInfo));}
this.options.validators=validators;}});

var RealTimeNotificationDispatcher=EventDispatcher.extend({_realtimeApi:null,_realTimeMessagingNotificationChannelName:"",_realTimeNotificationChannelName:"",_realTimeServiceNotificationChannelName:"",constructor:function(){this._realTimeMessagingNotificationChannelName=$("#realTimeMessagingNotificationChannelName").val();this._realTimeNotificationChannelName=$("#realTimeNotificationChannelName").val();this._realTimeServiceNotificationChannelName=$('#realTimeServiceNotificationChannelName').val();try{this._realtimeApi=RealTimeNotificationApi.getInstance();this._initSubscriptions();}
catch(error){}},_initSubscriptions:function(){this._realtimeApi.subscribe(this._realTimeNotificationChannelName,function(message){var data=message.data;this.dispatchEvent(RealTimeNotificationDispatcher.event.NOTIFICATION,data);}.bind(this));this._realtimeApi.subscribe(this._realTimeMessagingNotificationChannelName,function(message){var data=message.data;this.dispatchEvent(RealTimeNotificationDispatcher.event.MESSAGING_NOTIFICATION,data);}.bind(this));this._realtimeApi.subscribe(this._realTimeServiceNotificationChannelName,function(message){var data=message.data;this.dispatchEvent(RealTimeNotificationDispatcher.event.SERVICE_NOTIFICATION,data);}.bind(this));}},{event:{NOTIFICATION:"notification",MESSAGING_NOTIFICATION:"messaging",SERVICE_NOTIFICATION:"service_notification"},serviceNotificationType:{UPLOAD_CONTENT_COMPLETE:'uploadContentComplete',EXPORT_LONGREAD_COMPLETE:'exportLongreadComplete',COPY_CONTENT_COMPLETE:'copyContentComplete'},_instance:null,initInstance:function(){if(!this._instance){this._instance=new this();}},getInstance:function(){this.initInstance();return this._instance;}});$(function(){RealTimeNotificationDispatcher.initInstance();});

Namespace("scormplayer.player",{ActivityStatusEvaluater:Base.extend({isActivitySatisfied:function(activity,courseItem)
{var primaryObjective=activity.primaryObjective();var attempt=(activity.currentAttempt()||activity.previousAttempt());if(attempt)
{primaryObjective.useObjectives(attempt.objectives());}
return this.isObjectiveSatisfied(activity,courseItem,primaryObjective);},isActivityCompleted:function(activity,courseItem)
{var primaryObjective=activity.primaryObjective();var attempt=(activity.currentAttempt()||activity.previousAttempt());if(attempt)
{primaryObjective.useObjectives(attempt.objectives());}
return this.isObjectiveCompleted(activity,courseItem,primaryObjective);},isObjectiveSatisfied:function(activity,courseItem,objective)
{var objectiveInfo=this._getObjectiveInfo(objective,courseItem);if(objectiveInfo&&objectiveInfo.isSatisfiedByMeasure())
{var rollupConsiderations=courseItem.sequencingData().rollupConsiderations();var canMeasureSatisfaction=!activity.active()||rollupConsiderations.isMeasureSatisfactionIfActive();if(!canMeasureSatisfaction)
{return null;}
var measure=objective.scaledScore();if(measure!==null)
{return measure>=objectiveInfo.minNormalizedMeasure();}
return null;}
return objective.satisfied();},isObjectiveCompleted:function(activity,courseItem,objective)
{var isPrimaryObjective=(activity.primaryObjective()===objective||activity.prevPrimaryObjective()===objective);if(isPrimaryObjective)
{var completionThreshold=courseItem.completionThreshold();if(completionThreshold&&completionThreshold.completedByMeasure())
{var measure=objective.completionMeasure();if(measure!==null)
{return measure>=completionThreshold.minProgressMeasure();}
return null;}}
return objective.completed();},_getObjectiveInfo:function(objective,courseItem)
{var sequencingData=courseItem.sequencingData();if(!sequencingData)
{return null;}
var objectives=sequencingData.objectives();if(!objectives)
{return null;}
var primaryObjective=objectives.primaryObjective();if(!objective.id())
{return primaryObjective;}
var objectiveInfo=objectives.getLocalObjectiveById(objective.id());if(objectiveInfo)
{return objectiveInfo;}
if(objective.id()==primaryObjective.id())
{return primaryObjective;}
return null;}})});

var PassmeterValidator=ValidatorBase.extend({_hasWeakPasswordError:null,_passmeterMessage:null,constructor:function()
{this.base();this.addDefaultOptions({max_length:PassmeterStrengthChecker.MAX_LENGTH,weak_password_length_msg:UIMessages.ValidatorMessages.MSG_PASSMETER_LENGTH});},validate:function(value)
{var hasError=false;value=PassmeterStrengthChecker.trimEmoji(value);this._hasWeakPasswordError=false;if(!this.validateMaximalLength(value))
{this.error=this.options.max_length_msg;hasError=true;}
else
{hasError=!this.validateMinimalLength(value);this._passmeterMessage=this._getLengthOptionMessage(hasError);this._hasWeakPasswordError=hasError;if(hasError)
{this.error=this._passmeterMessage;}}
return!hasError;},_fillTemplate:function(text,hasError){var message=PassmeterStrengthChecker.MESSAGE_TEMPLATE.replace('%text%',text);var markClass=hasError?PassmeterStrengthChecker.MARK_CLASS.DEFAULT_ICON:PassmeterStrengthChecker.MARK_CLASS.SUCCESS_ICON;return message.replace('%mark_class%',markClass);},_getLengthOptionMessage:function(hasError){var text=this.options.weak_password_length_msg.replace('%min_length%',this.options.min_length);return this._fillTemplate(text,hasError);},validateMaximalLength:function(value){return value.length<=this.options.max_length;},validateMinimalLength:function(value){return value.length>=this.options.min_length;}});

var PostValidator=ValidatorBase.extend({errors:null,isValid:function(values,errors)
{this.errors=errors;return this.validate(values);},validate:function(values)
{return false;},setError:function(errorName,error)
{this.errors[errorName]=error;}});

var ValidatorUtils=Base.extend({},{getMessagesArray:function(errors)
{var errorMessages=[];for(var fieldName in errors)
{var fieldError=errors[fieldName];if(!fieldError)
{continue;}
var fieldError=fieldError.escapeHTML();errorMessages.push(fieldError);}
return errorMessages;}});

var IntegerValidator=ValidatorBase.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_INVALID_INTEGER,min:0,min_msg:UIMessages.ValidatorMessages.MSG_MIN_NUMBER,max:null,max_msg:UIMessages.ValidatorMessages.MSG_MAX_NUMBER,trim:false});},validate:function(value)
{var intValue=parseInt(value);if(isNaN(intValue)||(intValue+"")!=value)
{this.error=this.options.invalid_msg;}
else if(this.options.min!=null&&intValue<this.options.min)
{this.error=this.prepareError(this.options.min_msg,{min:this.options.min});}
else if(this.options.max!=null&&intValue>this.options.max)
{this.error=this.prepareError(this.options.max_msg,{max:this.options.max});}
else
{return true;}
return false;}});

var NumberValidator=ValidatorBase.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_INVALID_NUMBER,min:0,min_msg:UIMessages.ValidatorMessages.MSG_MIN_NUMBER,max:null,max_msg:UIMessages.ValidatorMessages.MSG_MAX_NUMBER,trim:false});},validate:function(value)
{var clearValue=parseFloat(value);if(isNaN(clearValue))
{this.error=this.options.invalid_msg;}
else if(this.options.min!=null&&clearValue<this.options.min)
{this.error=this.prepareError(this.options.min_msg,{min:this.options.min});}
else if(this.options.max!=null&&clearValue>this.options.max)
{this.error=this.prepareError(this.options.max_msg,{max:this.options.max});}
else
{return true;}
return false;}});

var EmailValidator=StringValidator.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_INVALID_EMAIL});},validate:function(value)
{var regexp=/^([^@\sа-яё]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i;if(!regexp.test(value))
{this.error=this.prepareError(this.options.invalid_msg,this.options);}
else
{return this.base(value);}
return false;}});

var PhoneValidator=StringValidator.extend({constructor:function(){this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_INVALID_PHONE});},validate:function(value){if(value.trim()===''){return this.base(value);}
var cleanValue=this._getCleanPhoneValue(value);var regexp=/^\+[1-9]\d{6,14}$/i;if(!regexp.test(cleanValue)){this.error=this.prepareError(this.options.invalid_msg,this.options);}else{return this.base(value);}
return false;},_getCleanPhoneValue:function(value){return value.trim().replace(/[)(\s\/-]/g,'')}});

var PasswordValidator=StringValidator.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_PASSWORD_NOT_VALID,no_upper_msg:UIMessages.ValidatorMessages.MSG_PASSWORD_NO_UPPER,no_digit_msg:UIMessages.ValidatorMessages.MSG_PASSWORD_NO_DIGIT});},validate:function(value)
{if(this.base(value))
{this.error="";}
var validRegExp=PasswordValidator.VALID_REG_EXP;var digitRegExp=PasswordValidator.DIGIT_REG_EXP;var upperRefExp=PasswordValidator.UPPER_REG_EXP;if(!validRegExp.test(value))
{this.error+=((this.error)?'|':'')+this.prepareError(this.options.invalid_msg,{});}
if(!digitRegExp.test(value))
{this.error+=((this.error)?'|':'')+this.prepareError(this.options.no_digit_msg,{});}
if(!upperRefExp.test(value))
{this.error+=((this.error)?'|':'')+this.prepareError(this.options.no_upper_msg,{});}
return(this.error=="");}},{VALID_REG_EXP:/^[a-zA-Z0-9]*$/,DIGIT_REG_EXP:/[0-9]/,UPPER_REG_EXP:/[A-Z]/});

var StrongPassmeterValidator=PassmeterValidator.extend({constructor:function()
{this.base();this.addDefaultOptions({weak_password_upper_case_msg:UIMessages.ValidatorMessages.MSG_PASSMETER_UPPER_CASE,weak_password_digit_msg:UIMessages.ValidatorMessages.MSG_PASSMETER_DIGIT,weak_password_lower_case_msg:UIMessages.ValidatorMessages.MSG_PASSMETER_LOWER_CASE,weak_password_special_chars_msg:UIMessages.ValidatorMessages.MSG_PASSMETER_SPECIAL_CHARS});},validate:function(value){var wasError=!this.base(value);if(wasError&&!this._hasWeakPasswordError){return false;}
if(this.options.rules.useDigits){var hasDigitError=!PassmeterStrengthChecker.validateDigitNumber(value);wasError=wasError||hasDigitError;this._passmeterMessage+=this._getDigitOptionMessage(hasDigitError);}
if(this.options.rules.useUpperCase){var hasUpperCaseError=!PassmeterStrengthChecker.validateUpperCaseLetterNumber(value);wasError=wasError||hasUpperCaseError;this._passmeterMessage+=this._getUpperCaseOptionMessage(hasUpperCaseError);}
if(this.options.rules.useLowerCase){var hasLowerCase=!PassmeterStrengthChecker.validateLowerCase(value);wasError=wasError||hasLowerCase;this._passmeterMessage+=this._getLowerCaseOptionMessage(hasLowerCase);}
if(this.options.rules.useSpecialChars){var hasSpecialChars=!PassmeterStrengthChecker.validateSpecialChars(value);wasError=wasError||hasSpecialChars;this._passmeterMessage+=this._getSpecialCharsOptionMessage(hasSpecialChars);}
if(wasError){this.error=this._passmeterMessage;return false;}
return true;},_fillTemplate:function(text,hasError){var message=PassmeterStrengthChecker.MESSAGE_TEMPLATE.replace('%text%',text);var markClass=hasError?PassmeterStrengthChecker.MARK_CLASS.DEFAULT_ICON:PassmeterStrengthChecker.MARK_CLASS.SUCCESS_ICON;return message.replace('%mark_class%',markClass);},_getUpperCaseOptionMessage:function(hasError){return this._fillTemplate(this.options.weak_password_upper_case_msg,hasError);},_getLowerCaseOptionMessage:function(hasError){return this._fillTemplate(this.options.weak_password_lower_case_msg,hasError);},_getSpecialCharsOptionMessage:function(hasError){return this._fillTemplate(this.options.weak_password_special_chars_msg,hasError);},_getDigitOptionMessage:function(hasError){return this._fillTemplate(this.options.weak_password_digit_msg,hasError);}});

var ValidatorAnd=ValidatorsGroup.extend({validate:function(value)
{var validators=this.options.validators;for(var i in validators)
{var validator=validators[i];if(!validator.isValid(value))
{this.error=validator.getError();return false;}}
return true;}});

var ValidatorOr=ValidatorsGroup.extend({validate:function(value)
{var errors=[];var validators=this.options.validators;for(var i in validators)
{var validator=validators[i];if(validator.isValid(value))
{return true;}
errors.push(validator.getError());}
if(errors)
{this.error=errors.join(UIMessages.ValidatorMessages.MSG_OR);return false;}
return true;}});

var ValidatorCompare=PostValidator.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_COMPARE_INVALID});},validate:function(values)
{var leftField=this.options.left_field;var rightField=this.options.right_field;var operator=this.options.operator;var leftFieldValue=values[leftField];var rightFieldValue=values[rightField];if(!eval("leftFieldValue"+operator+"rightFieldValue"))
{var error=this.prepareError(this.options.invalid_msg,{left_field:leftField,right_field:rightField,operator:operator});this.setError(leftField,error);return false;}
return true;}});

var ChoiceValidator=ValidatorBase.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_INVALID_CHOICE,choices:'',trim:false});},validate:function(value)
{var choices=this.options.choices.split(",");if(_.contains(choices,value))
{return true;}
this.error=this.options.invalid_msg;return false;}});

var RegexValidator=StringValidator.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_INVALID});},validate:function(value)
{var pattern=this.options.pattern;pattern=pattern.substr(1);var lastDelimPos=_.lastIndexOf(pattern,"/");var flags=pattern.substr(lastDelimPos+1);pattern=pattern.substr(0,lastDelimPos);var regexp=new RegExp(pattern,flags);if(!regexp.test(value))
{this.error=this.prepareError(this.options.invalid_msg);}
else
{return this.base(value);}
return false;}});

var ValidatorList=ValidatorBase.extend({constructor:function()
{this.base();this.addDefaultOptions({delimiter:",",validator:{}});},init:function(options)
{this.base(options);this.options.validator=ValidatorBase.createValidator(this.options.validator);},validate:function(value)
{var validator=this.options.validator;var values=this.splitValues(value);var errors=[];for(var i in values)
{value=values[i];if(!validator.isValid(value))
{errors.push(validator.getError());}}
if(!errors.length)
{return true;}
this.error=errors.join("\n");return false;},splitValues:function(values)
{var delimiters=this.options.delimiter;if(typeof(delimiters)=="object")
{var firstDelimiter=null;for(var i in delimiters)
{var delimiter=delimiters[i];if(firstDelimiter==null)
{firstDelimiter=delimiter;}
while(delimiter!=firstDelimiter&&values.search(delimiter)!=-1)
{values=values.replace(delimiter,firstDelimiter);}}
delimiters=firstDelimiter;}
return this.deleteEmptyElements(values.split(delimiters));},deleteEmptyElements:function(arr)
{var newArray=[];for(var i=0;i<arr.length;i++)
{var elem=arr[i];if($.trim(elem)!="")
{newArray.push(arr[i]);}}
return newArray;}});

var ContentItemListValidator=ValidatorBase.extend({constructor:function()
{this.base();this.addDefaultOptions({invalid_msg:UIMessages.ValidatorMessages.MSG_INVALID_INTEGER,default_value:null,available_values:null,available_values_msg:UIMessages.ValidatorMessages.MSG_NOT_AVAILABLE_VALUE,trim:false});},validate:function(value)
{var result=true;var hasDefaultOptionAndRequired=(this.options.default_value!=null)&&this.options.required;var isValueDefaultValue=this.options.default_value==value;if(hasDefaultOptionAndRequired&&value==this.options.default_value)
{this.error=this.options.required_msg;result=false;}
else if(!isValueDefaultValue&&(this.options.available_values!=null))
{var available_values=this.options.available_values.split(",");if(!_.contains(available_values,value))
{this.error=this.options.available_values_msg;result=false;}}
return result;}});

Namespace("scormplayer.player.tracking",{TrackingData:utils.IMementable.extend({_currentActivity:null,_suspendedActivity:null,_activities:null,_globalObjectives:null,constructor:function()
{this._globalObjectives=new scormplayer.player.tracking.ObjectivesCollection();},currentActivity:function(activity)
{if(activity!==undefined)this._currentActivity=activity;return this._currentActivity;},suspendedActivity:function(activity)
{if(activity!==undefined)this._suspendedActivity=activity;return this._suspendedActivity;},activities:function(activities)
{if(activities!==undefined)this._activities=activities;return this._activities;},globalObjectives:function(objectives)
{if(objectives!==undefined)this._globalObjectives=objectives;return this._globalObjectives;},pushState:function()
{this._globalObjectives.pushState();if(this._currentActivity)
{this._currentActivity.pushState();}},rollbackState:function()
{this._globalObjectives.rollbackState();if(this._currentActivity)
{this._currentActivity.rollbackState();}},commitState:function()
{this._globalObjectives.commitState();if(this._currentActivity)
{this._currentActivity.commitState();}}})});

var PlayerStatCollector=StatCollector.extend({contentPlayer:null,constructor:function(viewContentOptions,player,customStatisticsHandler)
{this.base(viewContentOptions,customStatisticsHandler);this.contentPlayer=player;this.listenToPlayerEvents();},listenToPlayerEvents:function()
{this.contentPlayer.addListener(PlayerEvent.PLAYBACK_ACTION_OCCURRED,this,this.setPlaybackActionOccurred);this.contentPlayer.addListener(PlayerEvent.PLAYBACK_STARTED,this,this.handlePlaybackStarted);}});

(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler("remove");}catch(e){}}
_cleanData(elems);};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);};$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{})._init();}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(value===undefined){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(value===undefined){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}
return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});}));

(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory(window.jQuery);}}(function($){'use strict';var counter=0;$.ajaxTransport('iframe',function(options){if(options.async){var initialIframeSrc=options.initialIframeSrc||'javascript:false;',form,iframe,addParamChar;return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>');form.attr('accept-charset',options.formAcceptCharset);addParamChar=/\?/.test(options.url)?'&':'?';if(options.type==='DELETE'){options.url=options.url+addParamChar+'_method=DELETE';options.type='POST';}else if(options.type==='PUT'){options.url=options.url+addParamChar+'_method=PUT';options.type='POST';}else if(options.type==='PATCH'){options.url=options.url+addParamChar+'_method=PATCH';options.type='POST';}
counter+=1;iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind('load',function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind('load').bind('load',function(){var response;try{response=iframe.contents();if(!response.length||!response[0].firstChild){throw new Error();}}catch(e){response=undefined;}
completeCallback(200,'success',{'iframe':response});$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form);window.setTimeout(function(){form.remove();},0);});form.prop('target',iframe.prop('name')).prop('action',options.url).prop('method',options.type);if(options.formData){$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop('name',field.name).val(field.value).appendTo(form);});}
if(options.fileInput&&options.fileInput.length&&options.type==='POST'){fileInputClones=options.fileInput.clone();options.fileInput.after(function(index){return fileInputClones[index];});if(options.paramName){options.fileInput.each(function(index){$(this).prop('name',paramNames[index]||options.paramName);});}
form.append(options.fileInput).prop('enctype','multipart/form-data').prop('encoding','multipart/form-data');options.fileInput.removeAttr('form');}
form.submit();if(fileInputClones&&fileInputClones.length){options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop('name',clone.prop('name')).attr('form',clone.attr('form'));clone.replaceWith(input);});}});form.append(iframe).appendTo(document.body);},abort:function(){if(iframe){iframe.unbind('load').prop('src',initialIframeSrc);}
if(form){form.remove();}}};}});$.ajaxSetup({converters:{'iframe text':function(iframe){return iframe&&$(iframe[0].body).text();},'iframe json':function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text());},'iframe html':function(iframe){return iframe&&$(iframe[0].body).html();},'iframe xml':function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML((xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml)||$(xmlDoc.body).html());},'iframe script':function(iframe){return iframe&&$.globalEval($(iframe[0].body).text());}}});}));

(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory(window.jQuery);}}(function($){'use strict';var counter=0,names=['accepts','cache','contents','contentType','crossDomain','data','dataType','headers','ifModified','mimeType','password','processData','timeout','traditional','type','url','username'],convert=function(p){return p;};$.ajaxSetup({converters:{'postmessage text':convert,'postmessage json':convert,'postmessage html':convert}});$.ajaxTransport('postmessage',function(options){if(options.postMessage&&window.postMessage){var iframe,loc=$('<a>').prop('href',options.postMessage)[0],target=loc.protocol+'//'+loc.host,xhrUpload=options.xhr().upload;return{send:function(_,completeCallback){counter+=1;var message={id:'postmessage-transport-'+counter},eventName='message.'+message.id;iframe=$('<iframe style="display:none;" src="'+
options.postMessage+'" name="'+
message.id+'"></iframe>').bind('load',function(){$.each(names,function(i,name){message[name]=options[name];});message.dataType=message.dataType.replace('postmessage ','');$(window).bind(eventName,function(e){e=e.originalEvent;var data=e.data,ev;if(e.origin===target&&data.id===message.id){if(data.type==='progress'){ev=document.createEvent('Event');ev.initEvent(data.type,false,true);$.extend(ev,data);xhrUpload.dispatchEvent(ev);}else{completeCallback(data.status,data.statusText,{postmessage:data.result},data.headers);iframe.remove();$(window).unbind(eventName);}}});iframe[0].contentWindow.postMessage(message,target);}).appendTo(document.body);},abort:function(){if(iframe){iframe.remove();}}};}});}));

(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory(window.jQuery);}}(function($){'use strict';if(window.XDomainRequest&&!$.support.cors){$.ajaxTransport(function(s){if(s.crossDomain&&s.async){if(s.timeout){s.xdrTimeout=s.timeout;delete s.timeout;}
var xdr;return{send:function(headers,completeCallback){var addParamChar=/\?/.test(s.url)?'&':'?';function callback(status,statusText,responses,responseHeaders){xdr.onload=xdr.onerror=xdr.ontimeout=$.noop;xdr=null;completeCallback(status,statusText,responses,responseHeaders);}
xdr=new XDomainRequest();if(s.type==='DELETE'){s.url=s.url+addParamChar+'_method=DELETE';s.type='POST';}else if(s.type==='PUT'){s.url=s.url+addParamChar+'_method=PUT';s.type='POST';}else if(s.type==='PATCH'){s.url=s.url+addParamChar+'_method=PATCH';s.type='POST';}
xdr.open(s.type,s.url);xdr.onload=function(){callback(200,'OK',{text:xdr.responseText},'Content-Type: '+xdr.contentType);};xdr.onerror=function(){callback(404,'Not Found');};if(s.xdrTimeout){xdr.ontimeout=function(){callback(0,'timeout');};xdr.timeout=s.xdrTimeout;}
xdr.send((s.hasContent&&s.data)||null);},abort:function(){if(xdr){xdr.onerror=$.noop();xdr.abort();}}};}});}}));

var FormValidator=Base.extend({validatorSchema:null,postValidator:null,errors:null,constructor:function(){this.validatorSchema=new Object();this.errors=new Object();},setValidatorSchema:function(schema,postValidatorSchema){for(var fieldName in schema){var validatorInfo=schema[fieldName];this.validatorSchema[fieldName]=ValidatorBase.createValidator(validatorInfo);}
if(postValidatorSchema){this.postValidator=ValidatorBase.createValidator(postValidatorSchema);}},getValidatorSchema:function(){return this.validatorSchema;},validateField:function(fieldName,fieldValue)
{var validator=this.validatorSchema[fieldName];if(!validator){return true;}
var isValid=validator.isValid(fieldValue);var error=validator.getError();if(error){error=validator.prepareError(error,{field_name:fieldName});}
this.errors[fieldName]=error;return isValid;},validate:function(fields){var isValid=true;for(var fieldName in this.validatorSchema){var fieldValue=fields[fieldName];isValid=(this.validateField(fieldName,fieldValue)&&isValid);}
if(isValid&&this.postValidator){isValid=this.postValidator.isValid(fields,this.errors);}
return isValid;},validateForm:function(form){var fields={};for(var fieldName in this.validatorSchema){var field=form.find("[name="+fieldName+"]");if(field.length>0){fields[fieldName]=field.val();}}
return this.validate(fields);},getErrors:function(){return this.errors;},getError:function(fieldName){return this.errors[fieldName];},getErrorsCount:function(){var count=0;for(var fieldName in this.errors){if(this.errors.hasOwnProperty(fieldName)&&this.errors[fieldName]){++count;}}
return count;}},{validators:new Object(),initFormValidator:function(id,schema,postValidatorSchema){var formValidator=new this();formValidator.setValidatorSchema(schema,postValidatorSchema);this.validators[id]=formValidator;return formValidator;},getFormValidator:function(id){return this.validators[id];}});

Namespace("utils",{ArrayUtils:{range:function(low,high,step)
{var reversed=false;if(low>high)
{reversed=true;var temp=high;high=low;low=temp;}
if(!step)
{step=1;}
else if(step<0)
{step=-step;}
var ar=[];for(var i=low;i<=high;i+=step)
{ar.push(i);}
if(reversed)
{ar.reverse();}
return ar;},shuffle:function(ar)
{var i=ar.length;while(--i)
{var j=Math.floor(Math.random()*(i+1));var temp=ar[i];ar[i]=ar[j];ar[j]=temp;}
return ar;},unique:function(ar,cmpFunc)
{var newAr=ar.slice();if(cmpFunc)
{newAr.sort(cmpFunc);}
else
{newAr.sort();}
var arLength=newAr.length;for(var i=1;i<arLength;++i)
{if(newAr[i-1]==newAr[i])
{newAr.splice(i,1);--i;--arLength;}}
return newAr;}}});

(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','jquery.ui.widget'],factory);}else{factory(window.jQuery);}}(function($){'use strict';$.support.fileInput=!(new RegExp('(Android (1\\.[0156]|2\\.[01]))'+'|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)'+'|(w(eb)?OSBrowser)|(webOS)'+'|(Kindle/(1\\.0|2\\.[05]|3\\.0))').test(window.navigator.userAgent)||$('<input type="file">').prop('disabled'));$.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);$.support.xhrFormDataFileUpload=!!window.FormData;$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);$.widget('blueimp.fileupload',{options:{dropZone:$(document),pasteZone:$(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:'Uploaded bytes exceed file size'},i18n:function(message,context){message=this.messages[message]||message.toString();if(context){$.each(context,function(key,value){message=message.replace('{'+key+'}',value);});}
return message;},formData:function(form){return form.serializeArray();},add:function(e,data){if(e.isDefaultPrevented()){return false;}
if(data.autoUpload||(data.autoUpload!==false&&$(this).fileupload('option','autoUpload'))){data.process().done(function(){data.submit();});}},processData:false,contentType:false,cache:false},_specialOptions:['fileInput','dropZone','pasteZone','multipart','forceIframeTransport'],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments);},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;if(!this.bitrate||!interval||timeDiff>interval){this.bitrate=(loaded-this.loaded)*(1000/timeDiff)*8;this.loaded=loaded;this.timestamp=now;}
return this.bitrate;};},_isXHRUpload:function(options){return!options.forceIframeTransport&&((!options.multipart&&$.support.xhrFileUpload)||$.support.xhrFormDataFileUpload);},_getFormData:function(options){var formData;if($.type(options.formData)==='function'){return options.formData(options.form);}
if($.isArray(options.formData)){return options.formData;}
if($.type(options.formData)==='object'){formData=[];$.each(options.formData,function(name,value){formData.push({name:name,value:value});});return formData;}
return[];},_getTotal:function(files){var total=0;$.each(files,function(index,file){total+=file.size||1;});return total;},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};if(obj._progress){$.extend(obj._progress,progress);}else{obj._progress=progress;}},_initResponseObject:function(obj){var prop;if(obj._response){for(prop in obj._response){if(obj._response.hasOwnProperty(prop)){delete obj._response[prop];}}}else{obj._response={};}},_onProgress:function(e,data){if(e.lengthComputable){var now=((Date.now)?Date.now():(new Date()).getTime()),loaded;if(data._time&&data.progressInterval&&(now-data._time<data.progressInterval)&&e.loaded!==e.total){return;}
data._time=now;loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0);this._progress.loaded+=(loaded-data._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval);data._progress.loaded=data.loaded=loaded;data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval);this._trigger('progress',$.Event('progress',{delegatedEvent:e}),data);this._trigger('progressall',$.Event('progressall',{delegatedEvent:e}),this._progress);}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();if(xhr.upload){$(xhr.upload).bind('progress',function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable;e.loaded=oe.loaded;e.total=oe.total;that._onProgress(e,options);});options.xhr=function(){return xhr;};}},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==='[object '+type+']';},_initXHRData:function(options){var that=this,formData,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName=$.type(options.paramName)==='array'?options.paramName[0]:options.paramName;options.headers=$.extend({},options.headers);if(options.contentRange){options.headers['Content-Range']=options.contentRange;}
if(!multipart||options.blob||!this._isInstanceOf('File',file)){options.headers['Content-Disposition']='attachment; filename="'+
encodeURI(file.name)+'"';}
if(!multipart){options.contentType=file.type||'application/octet-stream';options.data=options.blob||file;}else if($.support.xhrFormDataFileUpload){if(options.postMessage){formData=this._getFormData(options);if(options.blob){formData.push({name:paramName,value:options.blob});}else{$.each(options.files,function(index,file){formData.push({name:($.type(options.paramName)==='array'&&options.paramName[index])||paramName,value:file});});}}else{if(that._isInstanceOf('FormData',options.formData)){formData=options.formData;}else{formData=new FormData();$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value);});}
if(options.blob){formData.append(paramName,options.blob,file.name);}else{$.each(options.files,function(index,file){if(that._isInstanceOf('File',file)||that._isInstanceOf('Blob',file)){formData.append(($.type(options.paramName)==='array'&&options.paramName[index])||paramName,file,file.uploadName||file.name);}});}}
options.data=formData;}
options.blob=null;},_initIframeSettings:function(options){var targetHost=$('<a></a>').prop('href',options.url).prop('host');options.dataType='iframe '+(options.dataType||'');options.formData=this._getFormData(options);if(options.redirect&&targetHost&&targetHost!==location.host){options.formData.push({name:options.redirectParamName||'redirect',value:options.redirect});}},_initDataSettings:function(options){if(this._isXHRUpload(options)){if(!this._chunkedUpload(options,true)){if(!options.data){this._initXHRData(options);}
this._initProgressListener(options);}
if(options.postMessage){options.dataType='postmessage '+(options.dataType||'');}}else{this._initIframeSettings(options);}},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;if(!paramName){paramName=[];fileInput.each(function(){var input=$(this),name=input.prop('name')||'files[]',i=(input.prop('files')||[1]).length;while(i){paramName.push(name);i-=1;}});if(!paramName.length){paramName=[fileInput.prop('name')||'files[]'];}}else if(!$.isArray(paramName)){paramName=[paramName];}
return paramName;},_initFormSettings:function(options){if(!options.form||!options.form.length){options.form=$(options.fileInput.prop('form'));if(!options.form.length){options.form=$(this.options.fileInput.prop('form'));}}
options.paramName=this._getParamName(options);if(!options.url){options.url=options.form.prop('action')||location.href;}
options.type=(options.type||($.type(options.form.prop('method'))==='string'&&options.form.prop('method'))||'').toUpperCase();if(options.type!=='POST'&&options.type!=='PUT'&&options.type!=='PATCH'){options.type='POST';}
if(!options.formAcceptCharset){options.formAcceptCharset=options.form.attr('accept-charset');}},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);this._initFormSettings(options);this._initDataSettings(options);return options;},_getDeferredState:function(deferred){if(deferred.state){return deferred.state();}
if(deferred.isResolved()){return'resolved';}
if(deferred.isRejected()){return'rejected';}
return'pending';},_enhancePromise:function(promise){promise.success=promise.done;promise.error=promise.fail;promise.complete=promise.always;return promise;},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();context=context||this.options.context||promise;if(resolveOrReject===true){dfd.resolveWith(context,args);}else if(resolveOrReject===false){dfd.rejectWith(context,args);}
promise.abort=dfd.promise;return this._enhancePromise(promise);},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise();};data.process=function(resolveFunc,rejectFunc){if(resolveFunc||rejectFunc){data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).pipe(function(){if(data.errorThrown){return $.Deferred().rejectWith(that,[data]).promise();}
return getPromise(arguments);}).pipe(resolveFunc,rejectFunc);}
return this._processQueue||getPromise([this]);};data.submit=function(){if(this.state()!=='pending'){data.jqXHR=this.jqXHR=(that._trigger('submit',$.Event('submit',{delegatedEvent:e}),this)!==false)&&that._onSend(e,this);}
return this.jqXHR||that._getXHRPromise();};data.abort=function(){if(this.jqXHR){return this.jqXHR.abort();}
this.errorThrown='abort';that._trigger('fail',null,this);return that._getXHRPromise(false);};data.state=function(){if(this.jqXHR){return that._getDeferredState(this.jqXHR);}
if(this._processQueue){return that._getDeferredState(this._processQueue);}};data.processing=function(){return!this.jqXHR&&this._processQueue&&that._getDeferredState(this._processQueue)==='pending';};data.progress=function(){return this._progress;};data.response=function(){return this._response;};},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader('Range'),parts=range&&range.split('-'),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1;},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise(),jqXHR,upload;if(!(this._isXHRUpload(options)&&slice&&(ub||mcs<fs))||options.data){return false;}
if(testOnly){return true;}
if(ub>=fs){file.error=options.i18n('uploadedBytes');return this._getXHRPromise(false,options.context,[null,'error',file.error]);}
upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type);o.chunkSize=o.blob.size;o.contentRange='bytes '+ub+'-'+
(ub+o.chunkSize-1)+'/'+fs;that._initXHRData(o);that._initProgressListener(o);jqXHR=((that._trigger('chunksend',null,o)!==false&&$.ajax(o))||that._getXHRPromise(false,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||(ub+o.chunkSize);if(currentLoaded+o.chunkSize-o._progress.loaded){that._onProgress($.Event('progress',{lengthComputable:true,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o);}
options.uploadedBytes=o.uploadedBytes=ub;o.result=result;o.textStatus=textStatus;o.jqXHR=jqXHR;that._trigger('chunkdone',null,o);that._trigger('chunkalways',null,o);if(ub<fs){upload();}else{dfd.resolveWith(o.context,[result,textStatus,jqXHR]);}}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR;o.textStatus=textStatus;o.errorThrown=errorThrown;that._trigger('chunkfail',null,o);that._trigger('chunkalways',null,o);dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown]);});};this._enhancePromise(promise);promise.abort=function(){return jqXHR.abort();};upload();return promise;},_beforeSend:function(e,data){if(this._active===0){this._trigger('start');this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0;}
this._initResponseObject(data);this._initProgressObject(data);data._progress.loaded=data.loaded=data.uploadedBytes||0;data._progress.total=data.total=this._getTotal(data.files)||1;data._progress.bitrate=data.bitrate=0;this._active+=1;this._progress.loaded+=data.loaded;this._progress.total+=data.total;},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;if(options._progress.loaded<total){this._onProgress($.Event('progress',{lengthComputable:true,loaded:total,total:total}),options);}
response.result=options.result=result;response.textStatus=options.textStatus=textStatus;response.jqXHR=options.jqXHR=jqXHR;this._trigger('done',null,options);},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;if(options.recalculateProgress){this._progress.loaded-=options._progress.loaded;this._progress.total-=options._progress.total;}
response.jqXHR=options.jqXHR=jqXHR;response.textStatus=options.textStatus=textStatus;response.errorThrown=options.errorThrown=errorThrown;this._trigger('fail',null,options);},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger('always',null,options);},_onSend:function(e,data){if(!data.submit){this._addConvenienceMethods(e,data);}
var that=this,jqXHR,aborted,slot,pipe,options=that._getAJAXSettings(data),send=function(){that._sending+=1;options._bitrateTimer=new that._BitrateTimer();jqXHR=jqXHR||(((aborted||that._trigger('send',$.Event('send',{delegatedEvent:e}),options)===false)&&that._getXHRPromise(false,options.context,aborted))||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options);}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options);}).always(function(jqXHRorResult,textStatus,jqXHRorError){that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options);that._sending-=1;that._active-=1;if(options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending){var nextSlot=that._slots.shift();while(nextSlot){if(that._getDeferredState(nextSlot)==='pending'){nextSlot.resolve();break;}
nextSlot=that._slots.shift();}}
if(that._active===0){that._trigger('stop');}});return jqXHR;};this._beforeSend(e,options);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){slot=$.Deferred();this._slots.push(slot);pipe=slot.pipe(send);}else{this._sequence=this._sequence.pipe(send,send);pipe=this._sequence;}
pipe.abort=function(){aborted=[undefined,'abort','abort'];if(!jqXHR){if(slot){slot.rejectWith(options.context,aborted);}
return send();}
return jqXHR.abort();};return this._enhancePromise(pipe);}
return send();},_onAdd:function(e,data){var that=this,result=true,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),paramNameSet,paramNameSlice,fileSet,i,j=0;if(limitSize&&(!filesLength||files[0].size===undefined)){limitSize=undefined;}
if(!(options.singleFileUploads||limit||limitSize)||!this._isXHRUpload(options)){fileSet=[files];paramNameSet=[paramName];}else if(!(options.singleFileUploads||limitSize)&&limit){fileSet=[];paramNameSet=[];for(i=0;i<filesLength;i+=limit){fileSet.push(files.slice(i,i+limit));paramNameSlice=paramName.slice(i,i+limit);if(!paramNameSlice.length){paramNameSlice=paramName;}
paramNameSet.push(paramNameSlice);}}else if(!options.singleFileUploads&&limitSize){fileSet=[];paramNameSet=[];for(i=0;i<filesLength;i=i+1){batchSize+=files[i].size+overhead;if(i+1===filesLength||((batchSize+files[i+1].size+overhead)>limitSize)||(limit&&i+1-j>=limit)){fileSet.push(files.slice(j,i+1));paramNameSlice=paramName.slice(j,i+1);if(!paramNameSlice.length){paramNameSlice=paramName;}
paramNameSet.push(paramNameSlice);j=i+1;batchSize=0;}}}else{paramNameSet=paramName;}
data.originalFiles=files;$.each(fileSet||files,function(index,element){var newData=$.extend({},data);newData.files=fileSet?element:[element];newData.paramName=paramNameSet[index];that._initResponseObject(newData);that._initProgressObject(newData);that._addConvenienceMethods(e,newData);result=that._trigger('add',$.Event('add',{delegatedEvent:e}),newData);return result;});return result;},_replaceFileInput:function(input){var inputClone=input.clone(true);$('<form></form>').append(inputClone)[0].reset();input.after(inputClone).detach();$.cleanData(input.unbind('remove'));this.options.fileInput=this.options.fileInput.map(function(i,el){if(el===input[0]){return inputClone[0];}
return el;});if(input[0]===this.element[0]){this.element=inputClone;}},_handleFileTreeEntry:function(entry,path){var that=this,dfd=$.Deferred(),errorHandler=function(e){if(e&&!e.entry){e.entry=entry;}
dfd.resolve([e]);},dirReader;path=path||'';if(entry.isFile){if(entry._file){entry._file.relativePath=path;dfd.resolve(entry._file);}else{entry.file(function(file){file.relativePath=path;dfd.resolve(file);},errorHandler);}}else if(entry.isDirectory){dirReader=entry.createReader();dirReader.readEntries(function(entries){that._handleFileTreeEntries(entries,path+entry.name+'/').done(function(files){dfd.resolve(files);}).fail(errorHandler);},errorHandler);}else{dfd.resolve([]);}
return dfd.promise();},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path);})).pipe(function(){return Array.prototype.concat.apply([],arguments);});},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;if(items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)){return this._handleFileTreeEntries($.map(items,function(item){var entry;if(item.webkitGetAsEntry){entry=item.webkitGetAsEntry();if(entry){entry._file=item.getAsFile();}
return entry;}
return item.getAsEntry();}));}
return $.Deferred().resolve($.makeArray(dataTransfer.files)).promise();},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var entries=fileInput.prop('webkitEntries')||fileInput.prop('entries'),files,value;if(entries&&entries.length){return this._handleFileTreeEntries(entries);}
files=$.makeArray(fileInput.prop('files'));if(!files.length){value=fileInput.prop('value');if(!value){return $.Deferred().resolve([]).promise();}
files=[{name:value.replace(/^.*\\/,'')}];}else if(files[0].name===undefined&&files[0].fileName){$.each(files,function(index,file){file.name=file.fileName;file.size=file.fileSize;});}
return $.Deferred().resolve(files).promise();},_getFileInputFiles:function(fileInput){if(!(fileInput instanceof $)||fileInput.length===1){return this._getSingleFileInputFiles(fileInput);}
return $.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments);});},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files;if(that.options.replaceFileInput){that._replaceFileInput(data.fileInput);}
if(that._trigger('change',$.Event('change',{delegatedEvent:e}),data)!==false){that._onAdd(e,data);}});},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};if(items&&items.length){$.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();if(file){data.files.push(file);}});if(this._trigger('paste',$.Event('paste',{delegatedEvent:e}),data)!==false){this._onAdd(e,data);}}},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();this._getDroppedFiles(dataTransfer).always(function(files){data.files=files;if(that._trigger('drop',$.Event('drop',{delegatedEvent:e}),data)!==false){that._onAdd(e,data);}});}},_onDragOver:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;if(dataTransfer&&$.inArray('Files',dataTransfer.types)!==-1&&this._trigger('dragover',$.Event('dragover',{delegatedEvent:e}))!==false){e.preventDefault();dataTransfer.dropEffect='copy';}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste});}
if($.support.fileInput){this._on(this.options.fileInput,{change:this._onChange});}},_destroyEventHandlers:function(){this._off(this.options.dropZone,'dragover drop');this._off(this.options.pasteZone,'paste');this._off(this.options.fileInput,'change');},_setOption:function(key,value){var reinit=$.inArray(key,this._specialOptions)!==-1;if(reinit){this._destroyEventHandlers();}
this._super(key,value);if(reinit){this._initSpecialOptions();this._initEventHandlers();}},_initSpecialOptions:function(){var options=this.options;if(options.fileInput===undefined){options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]');}else if(!(options.fileInput instanceof $)){options.fileInput=$(options.fileInput);}
if(!(options.dropZone instanceof $)){options.dropZone=$(options.dropZone);}
if(!(options.pasteZone instanceof $)){options.pasteZone=$(options.pasteZone);}},_getRegExp:function(str){var parts=str.split('/'),modifiers=parts.pop();parts.shift();return new RegExp(parts.join('/'),modifiers);},_isRegExpOption:function(key,value){return key!=='url'&&$.type(value)==='string'&&/^\/.*\/[igm]{0,3}$/.test(value);},_initDataAttributes:function(){var that=this,options=this.options,clone=$(this.element[0].cloneNode(false));$.each(clone.data(),function(key,value){var dataAttributeName='data-'+
key.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase();if(clone.attr(dataAttributeName)){if(that._isRegExpOption(key,value)){value=that._getRegExp(value);}
options[key]=value;}});},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers();},active:function(){return this._active;},progress:function(){return this._progress;},add:function(data){var that=this;if(!data||this.options.disabled){return;}
if(data.fileInput&&!data.files){this._getFileInputFiles(data.fileInput).always(function(files){data.files=files;that._onAdd(null,data);});}else{data.files=$.makeArray(data.files);this._onAdd(null,data);}},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var that=this,dfd=$.Deferred(),promise=dfd.promise(),jqXHR,aborted;promise.abort=function(){aborted=true;if(jqXHR){return jqXHR.abort();}
dfd.reject(null,'abort','abort');return promise;};this._getFileInputFiles(data.fileInput).always(function(files){if(aborted){return;}
if(!files.length){dfd.reject();return;}
data.files=files;jqXHR=that._onSend(null,data).then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR);},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown);});});return this._enhancePromise(promise);}
data.files=$.makeArray(data.files);if(data.files.length){return this._onSend(null,data);}}
return this._getXHRPromise(false,data&&data.context);}});}));

var UIConstants={MAX_UPLOAD_FILE_SIZE:2147483648,MAX_UPLOAD_IMAGE_SIZE:26214400,MAX_UPLOAD_AVATAR_SIZE:26214400,MAX_UPLOAD_LOGO_SIZE:1048576};

var ShowErrorMessageFromInput=EventDispatcher.extend({inputElement:null,messageContainerElement:null,constructor:function(messageContainerId,inputId)
{this.inputElement=$("#"+inputId);this.messageContainerElement=$("#"+messageContainerId);},showMessage:function(message)
{if(message!=null&&message!="")
{this.inputElement.addClass(ShowErrorMessageFromInput.INPUT_ERROR_CLASS);this.messageContainerElement.text(message);this.messageContainerElement.show();}
else
{this.inputElement.removeClass(ShowErrorMessageFromInput.INPUT_ERROR_CLASS);this.messageContainerElement.hide();}}},{INPUT_ERROR_CLASS:"error_input"});

Namespace("scormplayer.player.sequence.rule",{RuleEvaluater:Base.extend({_conditionsEvaluateMethods:null,isRuleActionPerformed:function(rule)
{var performAction=true;var ruleConditions=rule.conditions();var conditionsCombination=ruleConditions.combination();var countConditions=ruleConditions.countConditions();for(var i=0;i<countConditions;++i)
{var condition=ruleConditions.getConditionByIndex(i);var conditionResult=this._evaluateCondition(condition);if(conditionResult&&conditionsCombination=='any')
{performAction=true;break;}
performAction=performAction&&conditionResult;}
return performAction;},_evaluateCondition:function(condition)
{var conditionResult=this._evaluateConditionWithoutOperator(condition);var conditionOperator=condition.operator();if(conditionOperator=='not')
{conditionResult=(conditionResult===null?null:!conditionResult);}
return conditionResult;},_evaluateConditionWithoutOperator:function(ruleCondition)
{var condition=ruleCondition.condition();if(condition in this._conditionsEvaluateMethods)
{var evaluateMethod=this._conditionsEvaluateMethods[condition];return this[evaluateMethod].apply(this,[ruleCondition]);}
return null;}})});

var HtmlUploader=EventDispatcher.extend({_fileUpload:null,_filters:null,_uploadsData:null,_id:null,constructor:function(id)
{this._id=id;this._fileUpload=$('#'+id+'FileUpload');this._fileUpload.fileupload({maxFileSize:UIConstants.MAX_UPLOAD_FILE_SIZE,add:function(){},progressInterval:1,singleFileUploads:true,pasteZone:null,dropZone:null});this._uploadsData=[];this._bindEvents();},startUpload:function(url,postVars,index)
{if(index===undefined)
{index=this._getLastUploadIndex();}
var uploadData=this._getUploadDataByIndex(index);uploadData.url=url;if(postVars)
{uploadData.formData=postVars;}
uploadData.submit();},cancelUpload:function(index)
{if(index===undefined)
{index=this._getLastUploadIndex();}
var uploadData=this._getUploadDataByIndex(index);uploadData.jqXHR.abort();},setFilters:function(filters)
{this._filters=filters;},setTitle:function(newTitle)
{this._fileUpload.attr('title',newTitle);},activate:function()
{},openBrowseWindow:function()
{$('#'+this._id+'FileUpload').focus().trigger('click');},getMaxFileSize:function()
{return UIConstants.MAX_UPLOAD_FILE_SIZE;},_onInvalidFileType:function(fileType)
{this.dispatchEvent(HtmlUploader.event.INVALID_DATA_TYPE,fileType);},_onValidFileType:function()
{this.dispatchEvent(HtmlUploader.event.VALID_DATA_TYPE);},_bindEvents:function()
{var thisPtr=this;this._fileUpload.bind('fileuploadadd',function(e,data)
{thisPtr._onFileSelected(data);});this._fileUpload.bind('fileuploaddone',function(e,data)
{thisPtr._onFileUploadDone(data.index,data.result);});this._fileUpload.bind('fileuploadprogress',function(e,data)
{thisPtr._onFileUploadProgress(data.index,data.loaded,data.total);});this._fileUpload.bind('fileuploadfail',function(e,data)
{if(data.errorThrown!="abort")
{thisPtr._onFileUploadFail(data);}});},_onFileUploadFail:function(data)
{this._raiseUploadError('',null,data.index);},_onFileSelected:function(data)
{var selectedFile=data.files[0];var fileName=selectedFile.name;var fileType=this._getFileType(fileName);if(this._checkFileType(fileName))
{this._onValidFileType();data.index=this._uploadsData.length;this._uploadsData.push(data);this.dispatchEvent(HtmlUploader.event.SELECT,fileName,selectedFile.size,fileType,selectedFile,data.index);}
else
{this._onInvalidFileType(fileType);}},_getResultFromJson:function(data)
{var result=data;if(typeof data==='string'||data instanceof String)
{try
{result=$.parseJSON(result);}
catch(e)
{}}
return result;},_onFileUploadDone:function(index,result)
{result=this._extractResult(result);if(result&&result.error)
{this._raiseUploadError(result.message,result.code,index);return;}
if(result&&result.text!=undefined)
{result=result.text();}
this.dispatchEvent(HtmlUploader.event.COMPLETE,index);this.dispatchEvent(HtmlUploader.event.UPLOAD_COMPLETE_DATA,result,index);},_extractResult:function(result)
{if(this._isResultIframe())
{result=result.find('body').html();}
return this._getResultFromJson(result);},_isResultIframe:function()
{return!$.support.xhrFormDataFileUpload;},_onFileUploadProgress:function(index,loaded,total)
{this.dispatchEvent(HtmlUploader.event.PROGRESS,loaded,total,index);},_raiseUploadError:function(message,code,index)
{this.dispatchEvent(HtmlUploader.event.ERROR,message,code,index);},_checkFileType:function(fileName)
{var type=this._getFileType(fileName);return this._filters?this._filters.test(type):true;},_getFileType:function(fileName)
{var re=/.+\.(.+)/i;var result=re.exec(fileName);return(result&&result.length>1)?result[1]:'';},_getUploadDataByIndex:function(index)
{var uploadData=this._uploadsData[index];if(!uploadData)
{throw new Error("There is no upload data with specified index");}
return uploadData;},_getLastUploadIndex:function()
{if(this._uploadsData.length)
{return(this._uploadsData.length-1);}
throw new Error("There is no selected files for upload.");}},{initUploader:function(id)
{return new HtmlUploader(id);},_isEnabled:function()
{return!$("#uploadButtonContainer").hasClass("disabled");},getUploaderCode:function(fieldId,text,multiple)
{var multipleAttr=(multiple!=undefined)?' multiple':'';var buttonLabel=(text)?'<span class="label">'+text+'</span>':'';var buttonCode=this._isEnabled()?'<input id="'+fieldId+'FileUpload" title="'+UIMessages.FileUpload.MSG_NO_FILE_SELECTED+'" type="file" name="Filedata" '+multipleAttr+">":"";return'<div id="'+fieldId+'FileUploadButton" class="file_input_button upload_button">'+buttonLabel+buttonCode+'</div>';},event:{SELECT:'select',UPLOAD_COMPLETE_DATA:'uploadCompleteData',PROGRESS:'progress',ERROR:'error',COMPLETE:'complete',INVALID_DATA_TYPE:'invalid_data_type',VALID_DATA_TYPE:'valid_data_type'}});

Namespace("scormplayer.player.sequence.rule",{RuleEvaluaterForActivity:scormplayer.player.sequence.rule.RuleEvaluater.extend({_activity:null,_courseItem:null,_activityStatusEvaluater:null,constructor:function(statusEvaluater)
{this.base();this._activityStatusEvaluater=statusEvaluater;this._conditionsEvaluateMethods={satisfied:"_evaluateSatisfiedCondition",objectiveStatusKnown:"_evaluateObjectiveStatusKnownCondition",objectiveMeasureKnown:"_evaluateObjectiveMeasureKnownCondition",completed:"_evaluateCompletedCondition",activityProgressKnown:"_evaluateActivityProgressKnownCondition",attempted:"_evaluateAttemptedCondition",attemptLimitExceeded:"_evaluateAttemptLimitExceededCondition"};},_getReferencedObjective:function(condition)
{return this._activity.primaryObjective();},_isReferencedObjectiveSatisfied:function(condition)
{var referencedObjective=this._getReferencedObjective(condition);return this._activityStatusEvaluater.isObjectiveSatisfied(this._activity,this._courseItem,referencedObjective);},_isReferencedObjectiveCompleted:function(condition)
{var referencedObjective=this._getReferencedObjective(condition);return this._activityStatusEvaluater.isObjectiveCompleted(this._activity,this._courseItem,referencedObjective);},_evaluateSatisfiedCondition:function(condition)
{if(!this._activity.isTracked())
{return null;}
return this._isReferencedObjectiveSatisfied(condition);},_evaluateObjectiveStatusKnownCondition:function(condition)
{if(!this._activity.isTracked())
{return false;}
return this._isReferencedObjectiveSatisfied(condition)!==null;},_evaluateObjectiveMeasureKnownCondition:function(condition)
{if(!this._activity.isTracked())
{return false;}
var objective=this._getReferencedObjective(condition);return objective.scaledScore()!==null;},_evaluateCompletedCondition:function(condition)
{if(!this._activity.isTracked())
{return null;}
return this._isReferencedObjectiveCompleted(condition);},_evaluateActivityProgressKnownCondition:function(condition)
{if(!this._activity.isTracked())
{return false;}
return this._isReferencedObjectiveCompleted(condition)!==null;},_evaluateAttemptedCondition:function()
{if(!this._activity.isTracked())
{return null;}
return this._activity.countAttempts()>0;},_evaluateAttemptLimitExceededCondition:function()
{if(!this._activity.isTracked())
{return null;}
var sequencingData=this._courseItem.sequencingData();var limitConditions=(sequencingData?sequencingData.limitConditions():null);if(limitConditions&&limitConditions.attemptLimit()!==null)
{if(!(this._activity.active()||this._activity.suspended()))
{return limitConditions.attemptLimit()<=this._activity.countAttempts();}}
return false;}})});

var MessagingNotificationType=Base.extend({},{NEW_MESSAGES:"newMessages",UNREAD_CONVERSATIONS_COUNT_CHANGED:"unreadConversationsCountChanged",MESSAGE_EDITED:"messageEdited",MESSAGE_DELETED:"messageDeleted"});

(function($){var CSS_CLASS_HIDDEN='hidden';var CSS_CLASS_INVISIBLE='invisible';$.fn.extend({addClassHidden:function(){return this.addClass(CSS_CLASS_HIDDEN);},removeClassHidden:function(){return this.removeClass(CSS_CLASS_HIDDEN);},toggleClassHidden:function(state){return this.toggleClass(CSS_CLASS_HIDDEN,state);},hasClassHidden:function(){return this.hasClass(CSS_CLASS_HIDDEN);},addClassInvisible:function(){return this.addClass(CSS_CLASS_INVISIBLE);},removeClassInvisible:function(){return this.removeClass(CSS_CLASS_INVISIBLE);},toggleClassInvisible:function(state){return this.toggleClass(CSS_CLASS_INVISIBLE,state);},hasClassInvisible:function(){return this.hasClass(CSS_CLASS_INVISIBLE);}});})(jQuery);

Namespace("scormplayer.player.sequence.request",{Request:Base.extend({_type:null,constructor:function(type)
{this._type=type;},type:function()
{return this._type;}})});

var MessagingCenter=AjaxGateway.extend({_conversationsWithUnreadMessagesSignal:null,_openPopupSignal:null,_newMessagesSignal:null,_editMessageSignal:null,_deleteMessageSignal:null,constructor:function(){this.base();RealTimeNotificationDispatcher.getInstance().addListener(RealTimeNotificationDispatcher.event.MESSAGING_NOTIFICATION,this,this._onMessageNotification);this._conversationsWithUnreadMessagesSignal=this._createSignal();this._openPopupSignal=this._createSignal();this._newMessagesSignal=this._createSignal();this._editMessageSignal=this._createSignal();this._deleteMessageSignal=this._createSignal();},_createSignal:function(){return UiLib.createSignal();},getUnreadMessagesSignal:function(){return this._conversationsWithUnreadMessagesSignal;},getNewMessagesSignal:function(){return this._newMessagesSignal;},getEditMessageSignal:function(){return this._editMessageSignal;},getDeleteMessageSignal:function(){return this._deleteMessageSignal;},openDialogSignal:function(){return this._openPopupSignal;},_onMessageNotification:function(data){if(data.type===MessagingNotificationType.NEW_MESSAGES){this._newMessagesSignal.dispatch(data.conversationId);}
if(data.type===MessagingNotificationType.MESSAGE_EDITED){this._editMessageSignal.dispatch({c:data.conversationId,m:data.messageId});}
if(data.type===MessagingNotificationType.MESSAGE_DELETED){this._deleteMessageSignal.dispatch({c:data.conversationId,m:data.messageId});}
if(data.type===MessagingNotificationType.UNREAD_CONVERSATIONS_COUNT_CHANGED){var syncUnreadConversationsCounterUrl=document.getElementById('unreadConversationCountUrl').value;this.doPost(syncUnreadConversationsCounterUrl).then(function(response){this._conversationsWithUnreadMessagesSignal.dispatch(response.count);}.bind(this)).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}},openMessagesPopup:function(userId,contentId){var data=userId?{user:userId,content:contentId,}:null;this._openPopupSignal.dispatch(data);}},{_instance:null,getInstance:function(){if(this._instance===null){this._instance=new MessagingCenter();}
return this._instance;}});

var LessonDurationChecker=EventDispatcher.extend({_statCollector:null,_completionSettings:null,_checkLessonDurationIntervalId:null,_needToShowLessonTimeoutMessage:null,constructor:function(statCollector,completionSettings)
{this._statCollector=statCollector;this._completionSettings=completionSettings;this._needToShowLessonTimeoutMessage=this._completionSettings.needToDisplayMessage();},start:function()
{this._checkLessonDurationIntervalId=setInterval(_.bind(this._checkLessonDuration,this),LessonDurationChecker.CHECK_LESSON_DURATION_INTERVAL);},stop:function()
{if(this._checkLessonDurationIntervalId)
{clearInterval(this._checkLessonDurationIntervalId);}},_checkLessonDuration:function()
{if(this._statCollector.getViewDurationInSeconds()>=this._completionSettings.getLessonDuration())
{this._handleLessonDurationExceeded();}},_handleLessonDurationExceeded:function()
{var needToTerminateLesson=this._completionSettings.needToTerminateLesson();if(this._needToShowLessonTimeoutMessage)
{var lessonTimeoutMessage=Messages.ViewContentMessages.MSG_LESSON_TIMEOUT+'.\n';lessonTimeoutMessage+=(needToTerminateLesson)?Messages.ViewContentMessages.MSG_LESSON_INTERRUPT:Messages.ViewContentMessages.MSG_LESSON_CONTINUE;UiToast.showBasic(lessonTimeoutMessage);this._needToShowLessonTimeoutMessage=false;}
if(needToTerminateLesson)
{this.dispatchEvent(LessonDurationChecker.event.NEED_TO_TERMINATE_LESSON);}
this.stop();}},{event:{NEED_TO_TERMINATE_LESSON:'need_to_terminate_lesson'},CHECK_LESSON_DURATION_INTERVAL:1000});

var ViewContentToolbarSettings=Base.extend({_autoHide:false,_showTitle:true,_hideSuspendAllControl:false,_fixedControlPosition:false,constructor:function(settings){this._autoHide=this._getBooleanValue(settings,ViewContentToolbarSettings.setting.AUTO_HIDE,this._autoHide);this._showTitle=this._getBooleanValue(settings,ViewContentToolbarSettings.setting.SHOW_TITLE,this._showTitle);this._hideSuspendAllControl=this._getBooleanValue(settings,ViewContentToolbarSettings.setting.HIDE_SUSPEND_ALL_CONTROL,this._hideSuspendAllControl);this._fixedControlPosition=this._getBooleanValue(settings,ViewContentToolbarSettings.setting.FIXED_CONTROL_POSITION,this._fixedControlPosition);},getAutoHide:function(){return this._autoHide;},getShowTitle:function(){return this._showTitle;},getHideSuspendAllControl:function(){return this._hideSuspendAllControl;},getFixedControlPosition:function(){return this._fixedControlPosition;},_getBooleanValue:function(settings,name,defaultValue){if(settings instanceof Object){if(typeof settings[name]==='boolean'){return settings[name];}}
return defaultValue;}},{setting:{AUTO_HIDE:'autoHide',SHOW_TITLE:'showTitle',HIDE_SUSPEND_ALL_CONTROL:'hideSuspendAllControl',FIXED_CONTROL_POSITION:'fixedControlPosition'}});

Namespace("scormplayer.player.sequence.rule.sequencing",{RuleEvaluater:scormplayer.player.sequence.rule.RuleEvaluaterForActivity.extend({constructor:function(activity,courseItem,activityStatusEvaluater)
{this.base(activityStatusEvaluater);this._activity=activity;this._courseItem=courseItem;$.extend(this._conditionsEvaluateMethods,{objectiveMeasureGreaterThan:"_evaluateObjectiveMeasureGreaterCondition",objectiveMeasureLessThan:"_evaluateObjectiveMeasureLessCondition",always:"_evaluateAlwaysCondition"});},_getReferencedObjective:function(condition)
{var activity=this._activity;var attempt=(activity.currentAttempt()||activity.previousAttempt());var attemptObjectives=(attempt?attempt.objectives():[]);var referencedObjectiveId=condition.referencedObjectiveId();if(referencedObjectiveId)
{var objectives=this._activity.objectives();for(var i in objectives)
{if(objectives[i].id()==referencedObjectiveId)
{objectives[i].useObjectives(attemptObjectives);return objectives[i];}}}
var primaryObjective=activity.prevPrimaryObjective();if(!primaryObjective)
{primaryObjective=activity.primaryObjective();primaryObjective.useObjectives(attemptObjectives);}
return primaryObjective;},_evaluateObjectiveMeasureGreaterCondition:function(condition)
{if(!this._activity.isTracked())
{return null;}
var objective=this._getReferencedObjective(condition);var scaledScore=objective.scaledScore();if(scaledScore===null)
{return null;}
return scaledScore>condition.measureThreshold();},_evaluateObjectiveMeasureLessCondition:function(condition)
{if(!this._activity.isTracked())
{return null;}
var objective=this._getReferencedObjective(condition);var scaledScore=objective.scaledScore();if(scaledScore===null)
{return null;}
return scaledScore<condition.measureThreshold();},_evaluateAlwaysCondition:function()
{return true;}})});

Namespace("scormplayer.player.sequence.rule",{RulesEvaluater:Base.extend({_getAppliedAction:function(rules,ruleEvaluater)
{for(var i in rules)
{var rule=rules[i];if(ruleEvaluater.isRuleActionPerformed(rule))
{return rule.action();}}
return null;}})});

var ContentItemResumeMode=Base.extend({},{NO_RESUME:'no_resume',PROMPT_TO_RESUME:'prompt',ALWAYS_RESUME:'always',NEVER_RESUME:'never'});

var ViewContentController=EventDispatcher.extend({viewContentOverlay:null,viewContentOptions:null,statCollector:null,contentPlayer:null,_pingUrl:null,_refreshUserSessionIntervalId:null,_lessonDurationChecker:null,_autoHideToolbar:false,_toolbarSettings:null,_isViewing:false,_isWindowUnloading:false,constructor:function(viewContentOverlay,viewContentOptions){this.viewContentOverlay=viewContentOverlay;this.viewContentOptions=viewContentOptions;var params={'key':viewContentOptions.getContentItemKey(),'sat':viewContentOptions.getStorageAccessToken()};this._pingUrl=UrlUtils.addParamsToUrl($("#pingUrl").val(),params);},startView:function(){StatNotifierConfig.init(this.viewContentOptions);this.viewContentOverlay.addListener(ViewContentOverlay.event.KEY_DOWN,this,this.onKeyDown);this.viewContentOverlay.addListener(ViewContentOverlay.event.KEY_UP,this,this.onKeyUp);this._refreshUserSessionIntervalId=setInterval(handler(this,"_refreshUserSession"),ViewContentController.REFRESH_USER_SESSION_INTERVAL);this._startCheckingLessonDurationIfNecessary();this._isViewing=true;},stopView:function(requestType){this.terminateViewSession(requestType);if(this.statCollector){this.statCollector.removeAllListeners();}
if(this.contentPlayer){this.contentPlayer.removeAllListeners();}
if(this._lessonDurationChecker){this._lessonDurationChecker.removeAllListeners();}
this.viewContentOverlay.removeListener(ViewContentOverlay.event.KEY_DOWN,this);this.viewContentOverlay.removeListener(ViewContentOverlay.event.KEY_UP,this);},terminateViewSession:function(requestType){if(!this._isViewing){return;}
this._isViewing=false;if(this.statCollector){this.statCollector.stop(requestType);}
if(this._lessonDurationChecker){this._lessonDurationChecker.stop();}
clearInterval(this._refreshUserSessionIntervalId);},isStopViewAllowed:function(){return true;},setToolbarSettings:function(settings){this._toolbarSettings=settings;this.viewContentOverlay.setTitleVisible(this._toolbarSettings.getShowTitle());this.viewContentOverlay.setToolbarButtonPositionFixed(this._toolbarSettings.getFixedControlPosition());this._autoHideToolbar=this._toolbarSettings.getAutoHide();},getToolbarSettings:function(){return this._toolbarSettings;},isWindowUnloading:function(){return this._isWindowUnloading;},setWindowUnloading:function(isWindowUnloading){this._isWindowUnloading=isWindowUnloading;},initialize:function(){},setContentPlayer:function(contentPlayer){this.contentPlayer=contentPlayer;contentPlayer.addListener(PlayerEvent.EXIT,this,this._handlePlayerExitEvent);contentPlayer.addListener(PlayerEvent.ALL_CONTROLS_INVISIBLE,this,this._handleAllControlsInvisible);contentPlayer.addListener(PlayerEvent.ANY_CONTROL_VISIBLE,this,this._handleAnyControlVisible);},setStatCollector:function(statCollector){this.statCollector=statCollector;},dispatchCloseEvent:function(){this.dispatchEvent(ViewContentController.event.CLOSE);},dispatchReadyEvent:function(){this.dispatchEvent(ViewContentController.event.READY);},onKeyDown:function(event){},onKeyUp:function(event){},onPlayerExit:function(){},_handlePlayerExitEvent:function(){if(!this.viewContentOptions.needToPreventWindowClosingOnComplete()){this.dispatchEvent(ViewContentController.event.PLAYER_EXIT);this.onPlayerExit();}},_handleAllControlsInvisible:function(){if(this._autoHideToolbar){this.viewContentOverlay.setToolbarVisible(false);}},_handleAnyControlVisible:function(){if(this._autoHideToolbar){this.viewContentOverlay.setToolbarVisible(true);}},_startCheckingLessonDurationIfNecessary:function(){var completionSettings=this.viewContentOptions.getCompletionSettings();if(completionSettings){this._lessonDurationChecker=new LessonDurationChecker(this.statCollector,completionSettings);this._lessonDurationChecker.addListener(LessonDurationChecker.event.NEED_TO_TERMINATE_LESSON,this,this.dispatchCloseEvent);this._lessonDurationChecker.start();}},_refreshUserSession:function(){if(this._pingUrl){$.get(this._pingUrl,function(result){if(result==="0"){this.dispatchEvent(ViewContentController.event.VIEW_EXPIRED);}}.bind(this));}},allowUnloadRestrictionCheck:function(inMobileApp){return true;}},{REFRESH_USER_SESSION_INTERVAL:10*60*1000,event:{READY:"ready",CLOSE:"close",VIEW_EXPIRED:"view_expired",PLAYER_EXIT:"player_exit"}});

Namespace.use("scormplayer.player.sequence.rule.*",function(){Namespace("scormplayer.player.sequence.rule.sequencing",{RulesEvaluater:RulesEvaluater.extend({_course:null,_activityStatusEvaluater:null,course:function(course)
{if(course!==undefined)this._course=course;return this._course;},activityStatusEvaluater:function(activityStatusEvaluater)
{if(activityStatusEvaluater!==undefined)this._activityStatusEvaluater=activityStatusEvaluater;return this._activityStatusEvaluater;},getAppliedPreAction:function(activity,possibleActions)
{var rules=this._getSequenceRules(activity);var preRules=(rules?rules.preConditionRules():null);if(preRules)
{return this._getActivityAppliedAction(activity,preRules,possibleActions);}
return null;},isPreActionApplied:function(activity,action)
{return this.getAppliedPreAction(activity,[action])!==null;},getAppliedPostAction:function(activity,possibleActions)
{var rules=this._getSequenceRules(activity);var postRules=(rules?rules.postConditionRules():null);if(postRules)
{return this._getActivityAppliedAction(activity,postRules,possibleActions);}
return null;},isPostActionApplied:function(activity,action)
{return this.getAppliedPostAction(activity,[action])!==null;},getAppliedExitAction:function(activity)
{var rules=this._getSequenceRules(activity);var exitRules=(rules?rules.exitConditionRules():null);if(exitRules)
{return this._getActivityAppliedAction(activity,exitRules);}
return null;},isExitActionApplied:function(activity,action)
{return this.getAppliedExitAction(activity,[action])!==null;},_getActivityAppliedAction:function(activity,rules,possibleActions)
{var checkedRules=(possibleActions?rules.getRulesWithActions(possibleActions):rules.toArray());return this._getAppliedAction(checkedRules,this._getRuleEvaluater(activity));},_getSequenceRules:function(activity)
{var courseItem=this._course.getItemById(activity.itemId());var sequencingData=courseItem.sequencingData();return(sequencingData?sequencingData.sequenceRules():null);},_getRuleEvaluater:function(activity)
{var courseItem=this._course.getItemById(activity.itemId());return new sequencing.RuleEvaluater(activity,courseItem,this._activityStatusEvaluater);}},{PRE_ACTION:{skip:"skip",disabled:"disabled",hiddenFromChoice:"hiddenFromChoice",stopForwardTraversal:"stopForwardTraversal"},POST_ACTION:{exitParent:"exitParent",exitAll:"exitAll",retry:"retry",retryAll:"retryAll","continue":"continue",previous:"previous"},EXIT_ACTION:{exit:"exit"}})});});

var AnimatedProperty=Base.extend({_value:null,_targetValue:null,_initialSpeed:null,_speed:null,_acceleration:null,_direction:null,_valueChangeHandler:null,constructor:function(value,targetValue,initialSpeed,acceleration,valueChangeHandler)
{this._value=value;this._targetValue=targetValue;this._initialSpeed=initialSpeed;this._acceleration=acceleration;this._valueChangeHandler=valueChangeHandler;this._direction=((targetValue-value)>=0)?1:-1;this._initSpeed();},hasReachedTargetValue:function()
{return(this._value==this._targetValue);},updateValue:function(deltaTimeMicroseconds)
{var deltaValue=this._speed*deltaTimeMicroseconds+this._acceleration*deltaTimeMicroseconds*deltaTimeMicroseconds*0.5;this._speed+=this._acceleration*deltaTimeMicroseconds;var newValue=this._value+deltaValue*this._direction;if((this._targetValue-newValue)*this._direction<=0)
{newValue=this._targetValue;}
if(newValue!=this._value)
{this._valueChangeHandler(newValue);this._value=newValue;}},_initSpeed:function()
{var distanceToTarget=Math.abs(this._targetValue-this._value);var timeFromCurrentPosition=(-this._initialSpeed+Math.sqrt(this._initialSpeed*this._initialSpeed+2*this._acceleration*distanceToTarget))/this._acceleration;this._speed=this._initialSpeed+this._acceleration*timeFromCurrentPosition;}});

var Timer=Base.extend({_intervalId:null,_lastTickTime:null,setInterval:function(handlerFunction,interval)
{this._lastTickTime=this.getTime();var thisPtr=this;this._intervalId=setInterval(function(){handlerFunction();thisPtr._lastTickTime=thisPtr.getTime();},interval);},getTimeSinceLastTick:function()
{var currentTime=this.getTime();return currentTime-this._lastTickTime;},stop:function()
{clearInterval(this._intervalId);},getTime:function()
{var d=new Date();return d.getTime();}});

var LegacyAnimation=EventDispatcher.extend({_animatedProperties:null,_timer:null,constructor:function()
{this._timer=new Timer();},setAnimatedProperties:function(animatedProperties)
{this._animatedProperties=animatedProperties;},animateProperties:function()
{this.startNewAnimation(handler(this,'_handlePropertiesAnimation'));},startNewAnimation:function(animationHandlerFunction)
{this._timer.setInterval(animationHandlerFunction,LegacyAnimation.ANIMATION_RATE);},getTimeSinceLastAnimation:function()
{return this._timer.getTimeSinceLastTick();},stopAnimation:function()
{this._timer.stop();},onPropertiesAnimationFinished:function()
{this.stopAnimation();},_handlePropertiesAnimation:function()
{var deltaTimeMicroseconds=this.getTimeSinceLastAnimation();var areAllAnimationsFinished=true;for(var i=0;i<this._animatedProperties.length;i++)
{var animatedProperty=this._animatedProperties[i];if(!animatedProperty.hasReachedTargetValue())
{animatedProperty.updateValue(deltaTimeMicroseconds);areAllAnimationsFinished=false;}}
if(areAllAnimationsFinished)
{this.onPropertiesAnimationFinished();}}},{ANIMATION_RATE:20});

var AttachmentsConstants=Base.extend({},{MAX_QUESTION_ANSWER_FILE_SIZE:100*1024*1024,});

var ISpringContentPlayer=BasePlayer.extend({iSpringPlayer:null,resumeType:null,constructor:function(resumeType)
{this.base();this.resumeType=resumeType;},setISpringPlayer:function(iSpringPlayer)
{this.iSpringPlayer=iSpringPlayer;},getResumeState:function()
{try
{if(this.resumeType&&this.resumeType!==ContentItemResumeMode.NEVER_RESUME&&this.iSpringPlayer&&_.isFunction(this.iSpringPlayer.persistState))
{return this.iSpringPlayer.persistState();}}
catch(e)
{}
return null;},checkUserResumeOptionAfterTimeout:function()
{if(this.resumeType===ContentItemResumeMode.PROMPT_TO_RESUME)
{setTimeout(handler(this,'checkIfUserDeclinedResume'),ISpringContentPlayer.CHANGE_STATE_TIMEOUT);}},checkIfUserDeclinedResume:function()
{},handleCloseEvent:function(flag)
{var thisPtr=this;setTimeout(function(){thisPtr.dispatchEvent(PlayerEvent.EXIT);},ISpringContentPlayer.EXIT_EVENT_TIMEOUT);if(flag&&_.isFunction(flag.preventAction))
{flag.preventAction();}}},{EXIT_EVENT_TIMEOUT:200,CHANGE_STATE_TIMEOUT:500});

Namespace("scormplayer.manifest.json.sequencing",{RuleConditionLoader:Base.extend({load:function(conditionJson)
{var condition=this._createCondition();condition.operator(conditionJson.operator);condition.condition(conditionJson.condition);return condition;},_createCondition:function()
{return new scormplayer.manifest.sequencing.RuleCondition();}})});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.scorm2004.type",{LongIdValue:scormplayer.player.api.type.ValueType.extend({validateValue:function(value)
{value=$.trim(value);if(value=="")
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
var isUrn=(value.toLowerCase().indexOf("urn:")==0);if(isUrn)
{this._validateUrn(value);}
else
{var containsAlphaChars=(value.search(/\w/)>=0);var containsIllegalChars=(value.search(/[^\w\+\-\=\(\)\.\:\@\;\$\_\!\*\'\%]/)>=0);if(!containsAlphaChars||containsIllegalChars)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}},_validateUrn:function(value)
{var parts=value.split(":");var nid=parts[1];if(nid==""||nid.indexOf(" ")>=0)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
if(parts.length>2)
{var nss=parts[2];if(nss.indexOf(" ")>=0)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}}})});});

Namespace("scormplayer.player.api.scorm2004.type.interaction",{SetValue:scormplayer.player.api.type.ValueType.extend({_itemType:null,_delimiter:"[,]",constructor:function(itemType,delimiter)
{this.base();if(itemType!==undefined)this._itemType=itemType;if(delimiter!==undefined)this._delimiter=delimiter;},itemType:function(type)
{if(type!==undefined)this._itemType=type;return this._itemType;},delimiter:function(delimiter)
{if(delimiter!==undefined)this._delimiter=delimiter;return this._delimiter;},validateValue:function(value)
{var items=value.split(this._delimiter);for(var i in items)
{var item=items[i];this._itemType.validateValue(item);}}})});

Namespace("scormplayer.log",{ILogger:Base.extend({register:function(caller,callerName){},log:function(caller,msg){}})});

var ISpringContentStatCollector=PlayerStatCollector.extend({_savePersistedStateAntiBounceTimerId:null,tryToSavePlayerState:function(){var playerState=this.contentPlayer.getResumeState();if(playerState){this._resetAntiBounceTimeOfSaveStateRequest();this.sendSaveStateRequest(playerState);}},listenToPlayerEvents:function(){this.base();this.contentPlayer.addListener(PlayerEvent.STATE_CHANGED,this,this._onStateChanged);this.contentPlayer.addListener(PlayerEvent.PROMPT_TO_RESUME_DECLINED_BY_USER,this,this._onPromptToResumeDeclinedByUser);},sendSaveStateRequest:function(playerState){if(!this._savePersistedStateAntiBounceTimerId&&this._isUserAuthenticated()){this.getDefaultStatisticHandler().saveISpringPersistedState(iSpringPlayerStateToJsonConverter.convert(playerState),handler(this,"_onSaveISpringContentItemViewSuccessResponse"));this._savePersistedStateAntiBounceTimerId=setTimeout(handler(this,'_resetAntiBounceTimeOfSaveStateRequest'),ISpringContentStatCollector.ANTI_BOUNCE_TIMEOUT);}},getStatisticsVars:function(){var params={session_view_key:this.viewContentOptions.getSessionViewKey(),intermediate_content_state:iSpringPlayerStateToJsonConverter.convert(this.contentPlayer.getResumeState()),};return $.extend(params,this.base());},_onStateChanged:function(playerState){this.sendSaveStateRequest(playerState);},_resetAntiBounceTimeOfSaveStateRequest:function(){this._savePersistedStateAntiBounceTimerId=null;},_onSaveISpringContentItemViewSuccessResponse:function(response){if(response.mayResumeViewSession!=undefined&&response.mayResumeViewSession){return;}
else if(response.success!=undefined&&parseInt(response.success)){return;}
this.dispatchEvent(ISpringContentStatCollector.event.CONTENT_ALREADY_OPENED);},_onPromptToResumeDeclinedByUser:function(){if(this._isUserAuthenticated()){this.getDefaultStatisticHandler().saveBrakeISpringViewChain();}},_isUserAuthenticated:function(){return this.viewContentOptions.getUserId()!==null;}},{DEFAULT_SLIDE_INDEX:0,ANTI_BOUNCE_TIMEOUT:5000,event:{CONTENT_ALREADY_OPENED:'contentAlreadyOpened'}});

var AttachmentsController=Base.extend({constructor:function(){},checkSize:function(fileSize,fileName){var MAX_FILE_SIZE=AttachmentsConstants.MAX_QUESTION_ANSWER_FILE_SIZE;if(fileSize>MAX_FILE_SIZE){UiToast.showCritical(fileName+': '+Messages.AttachmentsList.MSG_TOO_BIG_FILE);return false;}
return true;},uploadAttachment:function(file,url,responseData){var formData=new FormData();formData.append('Filedata',file);return Requester.makeRequest(url,formData,Requester.REQUEST_METHOD.POST,Requester.REQUEST_DATA_TYPE.JSON).then(function(){return{id:responseData.attachment_id+'',name:file.name,size:file.size,downloadUrl:responseData.download_url};}).catch(function(e){UiToast.showCritical(Messages.Request.SERVER_ERROR);throw e;});}});

var Flash=Base.extend({},{getPlayerEmbed:function(idPlayer,playerLocation,playerVars,width,height,flashParams)
{var htmlVars=this.getFlashVars(playerVars);var defaultFlashParams={allowScriptAccess:"always",quality:"high",bgcolor:"#ffffff",allowFullScreen:"true",flashVars:htmlVars,wmode:"opaque"};flashParams=$.extend(defaultFlashParams,flashParams);if(flashParams.wmode==null)
{delete flashParams.wmode;}
var html='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="//fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" width="'+width+'" height="'+height+'" id="'+idPlayer+'">'
+'<param name="movie" value="'+playerLocation+'" />';for(var i in flashParams)
html+='<param name="'+i+'" value="'+flashParams[i]+'" />';html+='<embed src="'+playerLocation+'" width="'+width+'" height="'+height+'" name="'+idPlayer+'" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer"';for(i in flashParams)
html+=i+'="'+flashParams[i]+'" ';html+='></embed></object>';return html;},getPlayerEmbedByOptions:function(objectId,flashOptions)
{var movieLocation=flashOptions.getResourceLocation();var flashVars=flashOptions.getContentOptions();var width=flashOptions.getWidth();var height=flashOptions.getHeight();var wmode=flashOptions.getWmode();var bgColor=flashOptions.getBgColor();return Flash.getPlayerEmbed(objectId,movieLocation,flashVars,width,height,{wmode:wmode,bgcolor:bgColor});},getFlashVars:function(playerVars)
{var htmlVars='';for(var i in playerVars)
htmlVars+=i+'='+encodeURIComponent(playerVars[i])+'&';htmlVars=htmlVars.substr(0,htmlVars.length-1);return htmlVars;},insertFlashMovie:function(idObject,movieLocation,flashVars,width,height,flashParams)
{document.write(this.getPlayerEmbed(idObject,movieLocation,flashVars,width,height,flashParams));},getFlashApp:function(appName)
{return document[appName];},isEnabled:function()
{var flashEnabled=false;try
{flashEnabled=navigator.mimeTypes["application/x-shockwave-flash"]||window.ActiveXObject&&new ActiveXObject('ShockwaveFlash.ShockwaveFlash');}
catch(e)
{}
return!!flashEnabled;}});

Namespace("scormplayer.manifest.json.sequencing",{RuleConditionsLoader:Base.extend({load:function(conditionsJson)
{var conditions=new scormplayer.manifest.sequencing.RuleConditionsCollection();conditions.combination(conditionsJson.combination);conditionsJson=conditionsJson.conditions;for(var i in conditionsJson)
{var conditionJson=conditionsJson[i];conditions.addCondition(this._loadCondition(conditionJson));}
return conditions;},_loadCondition:function(conditionJson)
{var loader=new scormplayer.manifest.json.sequencing.RuleConditionLoader();return loader.load(conditionJson);}})});

Namespace.use("utils.ArrayUtils",function(){Namespace("scormplayer.player",{ActivitiesRandomizer:{randomize:function(activity)
{var childs=activity.availableChilds();if(!childs)
{return;}
ArrayUtils.shuffle(childs);activity.availableChilds(childs);}}});});

Namespace("scormplayer.player",{SharedData:utils.Mementable.extend({_data:null,constructor:function()
{this._data={};},set:function(id,value)
{this._data[id]=value;},get:function(id)
{return this._data[id];},exist:function(id)
{return(id in this._data);},clear:function()
{this._data={};},toPlainObject:function()
{return this._data;},copy:function(dest)
{dest._data=$.extend({},this._data);}})});

var Form=EventDispatcher.extend({_fields:null,_validator:null,_sendDataLoader:null,_sendDataUrl:null,_submittingValueHandler:null,constructor:function(fieldIds,validatorId,submitUrl,newFields)
{this._sendDataUrl=submitUrl;this._initFormFields(fieldIds,newFields);this._initFormValidator(validatorId);this._initSendLoader();},setValue:function(fieldName,value)
{this._fields[fieldName].setValue(value);},setSubmittingValueHandler:function(handler,context)
{this._submittingValueHandler={callable:handler,context:context};},submit:function()
{var data=this.getFieldsData();if(this._validate(data))
{data=this._applySubmittingValueHandler(data);this._sendData(data);}},isValid:function()
{var data=this.getFieldsData();return this._validate(data);},clearFieldsByIds:function(idsList)
{var thisPtr=this;$.each(idsList,function(index,fieldId){var field=thisPtr.getFieldById(fieldId);if(field)
{field.clear();}});this.hideError();},clear:function()
{$.each(this._fields,function(name,field){field.clear();});this.hideError();},hideError:function()
{$.each(this._fields,function(name,field){field.hideError();});},disable:function()
{$.each(this._fields,function(name,field)
{field.disable();});},restoreToInitialValues:function()
{$.each(this._fields,function(name,field){field.restoreToInitialValue();});},saveCurrentValuesAsInitials:function()
{$.each(this._fields,function(name,field){field.saveCurrentValueAsInitial();});},getFirstErrorField:function()
{var errorField=null;$.each(this._fields,function(name,field){if(field.hasError())
{errorField=field;return;}});return errorField;},getField:function(fieldName)
{return this._fields.hasOwnProperty(fieldName)?this._fields[fieldName]:null;},getFieldById:function(fieldId)
{var resultField=null;$.each(this._fields,function(name,field){if(fieldId==field.getId())
{resultField=field;return;}});return resultField;},setLoadIndicator:function(loadIndicator)
{this._sendDataLoader.setLoadIndicator(loadIndicator);},getFieldsData:function()
{var data={};$.each(this._fields,function(name,field){field.hideError();data[name]=field.getValue();});return data;},getSubmittedData:function()
{return this._applySubmittingValueHandler(this.getFieldsData());},renderErrors:function(errors)
{for(var fieldName in errors)
{if(!errors.hasOwnProperty(fieldName))
{continue;}
var field=this.getField(fieldName);var fieldError=errors[fieldName];if(fieldError&&field)
{field.showError(fieldError);}}},_applySubmittingValueHandler:function(data)
{var result=data;var handlerInfo=this._submittingValueHandler;if(handlerInfo)
{$.each(data,function(fieldName,fieldValue)
{result[fieldName]=handlerInfo.callable.apply(handlerInfo.context,[fieldName,fieldValue]);});}
return result;},_initFormFields:function(fieldIds,newFields)
{var thisPtr=this;this._fields={};$.each(fieldIds,function(index,fieldId){if(newFields)
{FormFieldStorage.removeFormFieldById(fieldId);}
var newField=FormFieldStorage.getFormFieldById(fieldId);thisPtr._fields[newField.getName()]=newField;});},_initFormValidator:function(validatorId)
{this._validator=FormValidator.getFormValidator(validatorId);if(!this._validator)
{throw new Error('Form validator not found! '+validatorId);}},_initSendLoader:function()
{this._sendDataLoader=new UrlLoader();this._sendDataLoader.addListener(UrlLoader.event.LOAD_COMPLETE,this,this._onSubmit);this._sendDataLoader.addListener(UrlLoader.event.LOAD_ERROR,this,this._onError);},_validate:function(data)
{if(this._validator.validate(data))
{return true;}
var thisPtr=this;var errors=this._validator.getErrors();$.each(errors,function(name,error){if(error)
{thisPtr._fields[name].showError(error);thisPtr.dispatchEvent(Form.event.VALIDATION_ERROR,name,error);}});return false;},_sendData:function(data)
{this._sendDataLoader.loadJson(this._sendDataUrl,data);},_onSubmit:function(response)
{if(response.errors&&!$.isEmptyObject(response.errors))
{this._onError(response.errors)}
else
{this.dispatchEvent(Form.event.LOADED,response);}},_onError:function(errors)
{this.renderErrors(errors);this.dispatchEvent(Form.event.LOAD_ERROR,errors);}},{event:{LOADED:'loaded',LOAD_ERROR:'error',VALIDATION_ERROR:'validation_error'}});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.type",{StateValue:scormplayer.player.api.type.ValueType.extend({_states:null,constructor:function(states)
{this.base();if(states!==undefined)this._states=states;},init:function(typeInfo)
{if("states"in typeInfo)
{this._states=typeInfo.states;}},states:function(states)
{if(states!==undefined)this._states=states;return this._states;},validateValue:function(value)
{if(this._states&&$.inArray(value,this._states)==-1)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}})});});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.type",{NumberValue:scormplayer.player.api.type.ValueType.extend({_min:null,_max:null,init:function(typeInfo)
{if("min"in typeInfo)
{this._min=typeInfo.min;}
if("max"in typeInfo)
{this._max=typeInfo.max;}},min:function(min)
{if(min!==undefined)this._min=min;return this._min;},max:function(max)
{if(max!==undefined)this._max=max;return this._max;},validateValue:function(value)
{var floatValue=parseFloat(value);if(isNaN(floatValue)||floatValue!=value)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
if(this._min!==null&&floatValue<this._min)
{throw ErrorType.DATA_MODEL_OUT_OF_RANGE;}
if(this._max!==null&&floatValue>this._max)
{throw ErrorType.DATA_MODEL_OUT_OF_RANGE;}},store:function(value)
{this.base(value);return parseFloat(value);},restore:function(floatValue)
{return floatValue+"";}})});});

Namespace("scormplayer.player.storage",{ScoreExporter:{exportScore:function(score)
{return{min:score.min(),max:score.max(),raw:score.raw(),scaled:score.scaled()};}}});

Namespace("scormplayer.player.storage",{ScoreImporter:{importScore:function(scoreJson)
{var score=new scormplayer.player.tracking.Score();score.min(scoreJson.min);score.max(scoreJson.max);score.raw(scoreJson.raw);score.scaled(scoreJson.scaled);return score;}}});

Namespace("scormplayer.player.sequence.request",{NavigationRequest:scormplayer.player.sequence.request.Request.extend({_itemId:null,constructor:function(type,itemId)
{this.base(type);if(itemId!==undefined)this._itemId=itemId;},itemId:function()
{return this._itemId;}},{START:"start",RESUME_ALL:"resumeAll",CHOICE:"choice",PREVIOUS:"previous",CONTINUE:"continue",ABANDON:"abandon",ABANDON_ALL:"abandonAll",EXIT:"exit",EXIT_ALL:"exitAll",JUMP:"jump",SUSPEND_ALL:"suspendAll"})});

Namespace.use("scormplayer.player.ActivitiesRandomizer",function(){Namespace("scormplayer.player",{ActivitiesSelector:{selectChilds:function(activity,countChilds)
{var childs=activity.childs();if(!childs||childs.length==0)
{return;}
activity.availableChilds(childs);ActivitiesRandomizer.randomize(activity);countChilds=Math.min(countChilds,childs.length);var availableChilds=activity.availableChilds().slice(0,countChilds);activity.availableChilds(availableChilds);}}});});

var NotificationsCounterApi=AjaxGateway.extend({_syncNotificationsCountUrl:null,constructor:function(){this._syncNotificationsCountUrl=$('#syncNotificationsCounter').val();},syncNotificationsCount:function(){return this.doPost(this._syncNotificationsCountUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}});

var MessagesPopupApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},getConversations:function(){return this.doGet(this._apiProps.getConversationsUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getAvailableParticipants:function(count,searchString){var params={count:count,searchString:searchString,};return this.doGet(this._apiProps.getAvailableParticipantsUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getConversation:function(conversationId){var params={conversationId:conversationId};return this.doGet(this._apiProps.getConversationUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},deleteConversation:function(conversationId){var params={conversationId:conversationId};return this.doPost(this._apiProps.deleteConversationUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getInitialMessages:function(conversationId,count){var params={conversationId:conversationId,count:count,};return this.doGet(this._apiProps.getInitialMessagesUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getOldMessages:function(conversationId,count,lastMessageId){var params={conversationId:conversationId,count:count,lastMessageId:lastMessageId,};return this.doGet(this._apiProps.getOldMessagesUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getEditedMessage:function(messageId){var params={messageId:messageId,};return this.doGet(this._apiProps.getEditedMessageUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getNewMessages:function(conversationId,lastMessageId){var params={conversationId:conversationId,lastMessageId:lastMessageId,};return this.doGet(this._apiProps.getNewMessagesUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},sendMessage:function(messageData){if(!messageData.relatedCourseId)
{delete messageData.relatedCourseId}
return this.doPost(this._apiProps.sendMessageUrl,messageData).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},editMessage:function(messageData){return this.doPost(this._apiProps.editMessageUrl,messageData).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},deleteMessage:function(messageId){var params={messageId:messageId};return this.doPost(this._apiProps.deleteMessageUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},markMessagesAsRead:function(conversationId){var params={conversationId:conversationId};return this.doPost(this._apiProps.markMessagesAsReadUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},addAttachment:function(fileName,fileSize,participantId){var params={fileName:fileName,fileSize:fileSize,participantId:participantId,};return this.doPost(this._apiProps.addAttachmentUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},deleteAttachment:function(attachmentId){var params={attachmentId:attachmentId};return this.doPost(this._apiProps.deleteAttachmentUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getOpenedPopupData:function(userId,contentId){var params={userId:userId,};if(contentId)
{params.contentId=contentId;}
return this.doPost(this._apiProps.getOpenedPopupDataUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}});

(function(b){b.support.touch="ontouchend"in document;if(!b.support.touch){return;}var c=b.ui.mouse.prototype,e=c._mouseInit,a;function d(g,h){if(g.originalEvent.touches.length>1){return;}g.preventDefault();var i=g.originalEvent.changedTouches[0],f=document.createEvent("MouseEvents");f.initMouseEvent(h,true,true,window,1,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);g.target.dispatchEvent(f);}c._touchStart=function(g){var f=this;if(a||!f._mouseCapture(g.originalEvent.changedTouches[0])){return;}a=true;f._touchMoved=false;d(g,"mouseover");d(g,"mousemove");d(g,"mousedown");};c._touchMove=function(f){if(!a){return;}this._touchMoved=true;d(f,"mousemove");};c._touchEnd=function(f){if(!a){return;}d(f,"mouseup");d(f,"mouseout");if(!this._touchMoved){d(f,"click");}a=false;};c._mouseInit=function(){var f=this;f.element.bind("touchstart",b.proxy(f,"_touchStart")).bind("touchmove",b.proxy(f,"_touchMove")).bind("touchend",b.proxy(f,"_touchEnd"));e.call(f);};})(jQuery);

Namespace("scormplayer.manifest.json.sequencing",{RuleLoader:Base.extend({load:function(ruleJson)
{var rule=this._createRule();rule.action(ruleJson.action);rule.conditions(this._loadConditions(ruleJson.conditions));return rule;},_createRule:function()
{return new scormplayer.manifest.sequencing.Rule();},_loadConditions:function(conditionsJson)
{var loader=new scormplayer.manifest.json.sequencing.RuleConditionsLoader();return loader.load(conditionsJson);}})});

Namespace.use(["scormplayer.player.tracking.*","scormplayer.player.sequence.rule.sequencing.RulesEvaluater","scormplayer.player.ActivitiesSelector","scormplayer.player.ActivitiesRandomizer"],function(){Namespace("scormplayer.player",{ActivityManager:Base.extend({SELECTION_TIMING:{never:"never",once:"once",onEachNewAttempt:"onEachNewAttempt"},_trackingData:null,_course:null,_rulesEvaluater:null,constructor:function(activityStatusEvaluater)
{this._rulesEvaluater=new RulesEvaluater();this._rulesEvaluater.activityStatusEvaluater(activityStatusEvaluater);},course:function(course)
{if(course!==undefined)
{this._course=course;this._rulesEvaluater.course(course);}
return this._course;},trackingData:function(data)
{if(data!==undefined)this._trackingData=data;return this._trackingData;},initActivities:function(activities,firstInitializion)
{activities.forEach(handler(this,"_initActivity"),firstInitializion);activities.update();},_initActivity:function(activity,applyRandomization)
{var sequencingData=this._getActivitySequencingData(activity);activity.isTracked(sequencingData.deliveryControls().isTracked());this._initActivityObjectives(activity);if(applyRandomization)
{this._applyActivityRandomization(activity,[this.SELECTION_TIMING.once],[this.SELECTION_TIMING.once,this.SELECTION_TIMING.onEachNewAttempt]);}},_initActivityObjectives:function(activity)
{var defaultObjective=new MappedObjective();defaultObjective.id("#default");defaultObjective.defaultObjectiveId("##default");activity.defaultObjective(defaultObjective);this._initActivityPrimaryObjective(activity);this._initActivityLocalObjectives(activity);},_initActivityPrimaryObjective:function(activity)
{var activityItem=this._course.getItemById(activity.itemId());var objectives=activityItem.sequencingData().objectives();var primaryObjective=new MappedObjective();primaryObjective.defaultObjectiveId("#primary");primaryObjective.allowWrite(activity.isTracked());var primaryObjectiveInfo=(objectives?objectives.primaryObjective():null);if(primaryObjectiveInfo)
{primaryObjective.id(primaryObjectiveInfo.id());primaryObjective.mapInfos(primaryObjectiveInfo.mapInfos());primaryObjective.allowReadSatisfactionStatus(!primaryObjectiveInfo.isSatisfiedByMeasure());this._initGlobalObjectives(primaryObjective,primaryObjectiveInfo);var prevPrimaryObjective=activity.prevPrimaryObjective();if(prevPrimaryObjective)
{prevPrimaryObjective.mapInfos(primaryObjectiveInfo.mapInfos());this._initGlobalObjectives(prevPrimaryObjective,primaryObjectiveInfo);}}
activity.primaryObjective(primaryObjective);},_initActivityLocalObjectives:function(activity)
{var objectives=this._getActivitySequencingData(activity).objectives();if(objectives)
{var localObjectives=[];for(var i=0;i<objectives.countLocalObjectives();++i)
{var localObjectiveInfo=objectives.getLocalObjectiveByIndex(i);var localObjective=new MappedObjective();localObjective.id(localObjectiveInfo.id());localObjective.defaultObjectiveId("##"+localObjectiveInfo.id());localObjective.mapInfos(localObjectiveInfo.mapInfos());localObjective.allowWrite(activity.isTracked());localObjective.allowReadSatisfactionStatus(!localObjectiveInfo.isSatisfiedByMeasure());localObjectives.push(localObjective);this._initGlobalObjectives(localObjective,localObjectiveInfo);}
activity.objectives(localObjectives);}},_initGlobalObjectives:function(objective,objectiveInfo)
{var globalObjectives=this._trackingData.globalObjectives();var objectives=[];var mapInfos=objectiveInfo.mapInfos();for(var i in mapInfos)
{var mapInfo=mapInfos[i];var globalObjectiveId=mapInfo.targetObjectiveId();var globalObjective=globalObjectives.getObjectiveById(globalObjectiveId);if(!globalObjective)
{globalObjective=new Objective();globalObjective.id(globalObjectiveId);globalObjectives.addObjective(globalObjective);}
objectives.push(globalObjective);}
objective.useObjectives(objectives);},_applyActivityRandomization:function(activity,availableSelectionTiming,availableRandomizationTiming)
{var activityChanged=false;var randomizationControls=this._getActivitySequencingData(activity).randomizationControls();var selectionTiming=randomizationControls.selectionTiming();var countSelectedChilds=randomizationControls.selectCount();if($.inArray(selectionTiming,availableSelectionTiming)!=-1&&countSelectedChilds>0)
{ActivitiesSelector.selectChilds(activity,countSelectedChilds);activityChanged=true;}
var applyRandomization=randomizationControls.isReorderChilds();var randomizationTiming=randomizationControls.randomizationTiming();if(applyRandomization&&$.inArray(randomizationTiming,availableRandomizationTiming)!=-1)
{ActivitiesRandomizer.randomize(activity);activityChanged=true;}
return activityChanged;},canDeliverActivity:function(activity)
{var activityPath=this._trackingData.activities().getActivityPath(activity);for(var i in activityPath)
{activity=activityPath[i];var activityDisabled=this._rulesEvaluater.isPreActionApplied(activity,RulesEvaluater.PRE_ACTION.disabled);if(activityDisabled)
{return false;}
if(!(activity.active()||activity.suspended()))
{var sequencingData=this._getActivitySequencingData(activity);var attemptLimit=sequencingData.limitConditions().attemptLimit();if(attemptLimit!==null&&activity.countAttempts()>=attemptLimit&&activity.isTracked())
{return false;}}}
return true;},onStartActivityAttempt:function(activity)
{var activities=this._trackingData.activities();var rootActivity=activities.rootActivity();if(rootActivity===activity)
{activities.forEach(function(activity){activity.prevPrimaryObjective(null);});}},onStopActivityAttempt:function(activity)
{var activityUpdated=this._applyActivityRandomization(activity,[],[this.SELECTION_TIMING.onEachNewAttempt]);if(activityUpdated)
{this._trackingData.activities().update();}},_getActivitySequencingData:function(activity)
{var activityItem=this._course.getItemById(activity.itemId());return activityItem.sequencingData();}})});});

Namespace.use("scormplayer.player.storage.ScoreExporter",function(){Namespace("scormplayer.player.storage",{BaseObjectiveExporter:{exportObjective:function(objective)
{return{id:objective.id(),score:ScoreExporter.exportScore(objective.score()),satisfied:objective.satisfied(),completed:objective.completed(),completionMeasure:objective.completionMeasure(),description:objective.description()};}}});});

Namespace.use("scormplayer.player.storage.ScoreImporter",function(){Namespace("scormplayer.player.storage",{BaseObjectiveImporter:{initObjective:function(objective,objectiveJson)
{objective.id(objectiveJson.id);objective.satisfied(objectiveJson.satisfied);objective.completed(objectiveJson.completed);objective.completionMeasure(objectiveJson.completionMeasure);objective.description(objectiveJson.description);objective.score(ScoreImporter.importScore(objectiveJson.score));}}});});

var NotificationsCenter=EventDispatcher.extend({_counterSignal:null,_syncPopupSignal:null,_counterApi:null,constructor:function(){this.base();this._counterSignal=this._createSignal();this._syncPopupSignal=this._createSignal();this._counterApi=new NotificationsCounterApi({});var realTimeNotificationDispatcher=RealTimeNotificationDispatcher.getInstance();realTimeNotificationDispatcher.addListener(RealTimeNotificationDispatcher.event.NOTIFICATION,this,_.throttle(this._onUpdateRequested,NotificationsCenter.LOAD_NOTIFICATIONS_THROTTLE));},_createSignal:function(){return UiLib.createSignal();},_onUpdateRequested:function(){this._syncPopupSignal.dispatch();this._counterApi.syncNotificationsCount().then(function(response){this._onNotificationsCountUpdated(response.unread);}.bind(this));},getUnreadNotificationsSignal:function(){return this._counterSignal;},getSyncNotificationsPopupSignal:function(){return this._syncPopupSignal;},_onNotificationsCountUpdated:function(count){this._counterSignal.dispatch(count);}},{_instance:null,LOAD_NOTIFICATIONS_THROTTLE:200,getInstance:function(){if(this._instance===null){this._instance=new NotificationsCenter();}
return this._instance;}});

var NotificationsPopupApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},changeTargetSettings:function(params){return this.doPost(this._apiProps.changeTargetSettingsUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getTargetSettings:function(){return this.doGet(this._apiProps.getNotificationsTargetUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},syncNotifications:function(params){return this.doGet(this._apiProps.syncNotificationsUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getNotifications:function(params){return this.doGet(this._apiProps.getNotificationsUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},setUnread:function(params){return this.doGet(this._apiProps.setUnreadUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},markAllRead:function(){return this.doGet(this._apiProps.markAllReadUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},openNotificationUrl:function(url){UrlUtils.navigateWithTimeout(url,0);return Promise.resolve();}});

var MessagesAttachmentsController=Base.extend({_attachmentController:null,constructor:function(){this._attachmentController=new AttachmentsController();},addAttachment:function(api,file,participantId){if(!this._attachmentController.checkSize(file.size,file.name)){return Promise.reject();}
return api.addAttachment(file.name,file.size,participantId).then(function(responseData){return this._attachmentController.uploadAttachment(file,responseData.uploadUrl,{attachment_id:responseData.attachmentId,download_url:responseData.downloadUrl,}).then(function(attachmentData){return{attachmentData:attachmentData,conversationId:responseData.conversationId}});}.bind(this));},deleteAttachment:function(api,attachmentId){return api.deleteAttachment(attachmentId);}},{_instance:null,getInstance:function(){if(this._instance===null){this._instance=new MessagesAttachmentsController();}
return this._instance;}});

Namespace("scormplayer.manifest",{Resource:Base.extend({_id:null,_href:null,_type:null,id:function(id)
{if(id!==undefined)this._id=id;return this._id;},href:function(href)
{if(href!==undefined)this._href=href;return this._href;},type:function(type)
{if(type!==undefined)this._type=type;return this._type;}},{SCO:"sco",ASSET:"asset"})});

Namespace("scormplayer.manifest.json.sequencing",{SequenceRuleConditionLoader:scormplayer.manifest.json.sequencing.RuleConditionLoader.extend({load:function(conditionJson)
{var condition=this.base(conditionJson);condition.referencedObjectiveId(conditionJson.referencedObjectiveId);condition.measureThreshold(conditionJson.measureThreshold);return condition;},_createCondition:function()
{return new scormplayer.manifest.sequencing.SequenceRuleCondition();}})});

Namespace("scormplayer.lms",{IUserInfo:Base.extend({getId:function(){},getName:function(){}})});

Namespace("scormplayer.lms.ui",{ControlState:Base.extend({_enabled:true,_visible:true,enabled:function(enabled)
{if(enabled!==undefined)this._enabled=enabled;return this._enabled;},visible:function(visible)
{if(visible!==undefined)this._visible=visible;return this._visible;}})});

Namespace("scormplayer.lms.ui",{MenuItem:Base.extend({_id:null,_label:null,_selected:false,_enabled:true,_completed:null,_passed:null,_items:null,constructor:function()
{this._items=[];},id:function(id)
{if(id!==undefined)this._id=id;return this._id;},label:function(label)
{if(label!==undefined)this._label=label;return this._label;},selected:function(selected)
{if(selected!==undefined)this._selected=selected;return this._selected;},enabled:function(enabled)
{if(enabled!==undefined)this._enabled=enabled;return this._enabled;},completed:function(completed)
{if(completed!==undefined)this._completed=completed;return this._completed;},passed:function(passed)
{if(passed!==undefined)this._passed=passed;return this._passed;},items:function(items)
{if(items!==undefined)this._items=items;return this._items;},addItem:function(item)
{this._items.push(item);}})});

Namespace("scormplayer.player.api",{LangCode:{_codesStr:"i,x,aa,ab,ae,af,ak,am,an,ar,as,av,ay,az,ba,be,bg,bh,bi,bm,bn,bo,br,bs,ca,ce,ch,co,cr,cs,cu,cv,cy,da,de,dv,dz,ee,el,en,eo,es,et,eu,fa,ff,fi,fj,fo,fr,fy,ga,gd,gl,gn,gu,gv,ha,he,hi,ho,hr,ht,hu,hy,hz,ia,id,ie,ig,ii,ik,io,is,it,iu,ja,jv,ka,kg,ki,kj,kk,kl,km,kn,ko,kr,ks,ku,kv,kw,ky,la,lb,lg,li,ln,lo,lt,lu,lv,mg,mh,mi,mk,ml,mn,mo,mr,ms,mt,my,na,nb,nd,ne,ng,nl,nn,no,nr,nv,ny,oc,oj,om,or,os,pa,pi,pl,ps,pt,qu,rm,rn,ro,ru,rw,sa,sc,sd,se,sg,sh,si,sk,sl,sm,sn,so,sq,sr,ss,st,su,sv,sw,ta,te,tg,th,ti,tk,tl,tn,to,tr,ts,tt,tw,ty,ug,uk,ur,uz,ve,vi,vo,wa,wo,xh,yi,yo,za,zh,zu,aar,abk,ace,ach,ada,afa,afh,afr,aka,akk,alb,ale,alg,amh,ang,apa,ara,arc,arm,arn,arp,art,arw,asm,ath,ava,ave,awa,aym,aze,bad,bai,bak,bal,bam,ban,baq,bas,bat,bej,bel,bem,ben,ber,bho,bih,bik,bin,bis,bla,bnt,bod,bra,bre,bua,bug,bul,bur,cad,cai,car,cat,cau,ceb,cel,ces,cha,chb,che,chg,chi,chm,chn,cho,chr,chu,chv,chy,cop,cor,cos,cpe,cpf,cpp,cre,crp,cus,cym,cze,dak,dan,del,deu,din,div,doi,dra,dua,dum,dut,dyu,dzo,efi,egy,eka,ell,elx,eng,enm,epo,esk,esl,est,eus,ewe,ewo,fan,fao,fas,fat,fij,fin,fiu,fon,fra,fre,frm,fro,fry,ful,gaa,gae,gai,gay,gdh,gem,geo,ger,gez,gil,glg,gmh,goh,gon,got,grb,grc,gre,grn,guj,hai,hau,haw,heb,her,hil,him,hin,hmo,hun,hup,hye,iba,ibo,ice,ijo,iku,ilo,ina,inc,ind,ine,ine,ipk,ira,iri,iro,isl,ita,jav,jaw,jpn,jpr,jrb,kaa,kab,kac,kal,kam,kan,kar,kas,kat,kau,kaw,kaz,kha,khi,khm,kho,kik,kin,kir,kok,kom,kon,kor,kpe,kro,kru,kua,kum,kur,kus,kut,lad,lah,lam,lao,lat,lav,lez,lin,lit,lol,loz,ltz,lub,lug,lui,lun,luo,mac,mad,mag,mah,mai,mak,mak,mal,man,mao,map,mar,mas,max,may,men,mga,mic,min,mis,mkh,mlg,mlt,mni,mno,moh,mol,mon,mos,mri,msa,mul,mun,mus,mwr,mya,myn,nah,nai,nau,nav,nbl,nde,ndo,nep,new,nic,niu,nla,nno,non,nor,nso,nub,nya,nym,nyn,nyo,nzi,oci,oji,ori,orm,osa,oss,ota,oto,paa,pag,pal,pam,pan,pap,pau,peo,per,phn,pli,pol,pon,por,pra,pro,pus,que,raj,rar,roa,roh,rom,ron,rum,run,rus,sad,sag,sah,sai,sal,sam,san,sco,scr,sel,sem,sga,shn,sid,sin,sio,sit,sla,slk,slo,slv,smi,smo,sna,snd,sog,som,son,sot,spa,sqi,srd,srr,ssa,ssw,ssw,suk,sun,sus,sux,sve,swa,swe,syr,tah,tam,tat,tel,tem,ter,tgk,tgl,tha,tib,tig,tir,tiv,tli,tmh,tog,ton,tru,tsi,tsn,tso,tuk,tum,tur,tut,twi,tyv,uga,uig,ukr,umb,und,urd,uzb,vai,ven,vie,vol,vot,wak,wal,war,was,wel,wen,wol,xho,yao,yap,yid,yor,zap,zen,zha,zho,zul,zun,fur,gla,gba,cmc,chp,nwc,crh,hrv,dar,day,myv,nds,gor,gwi,hat,hit,hmn,smn,inh,ile,gle,krc,csb,kmb,kos,lim,jbo,dsb,lua,smj,lus,mnc,mdr,glv,mdf,nap,nia,nog,sme,phi,sat,sas,scc,srp,iii,sgn,sms,den,snk,sma,tai,tet,tlh,tpi,tkl,tup,tvl,hsb,wln,ypk,znd,fil,mwl,scn,ady,arg,ast,aus,btk,byn,nob,bos,dgr,nld,ido,kbd,xal,mkd,rap,udm,chk",_codes:null,_initCodes:function()
{this._codes={};var codes=this._codesStr.split(",");for(var i in codes)
{var code=codes[i];this._codes[code]=true;}},isValid:function(code)
{if(this._codes===null)
{this._initCodes();}
return(code in this._codes);}}});

Namespace("scormplayer.player.api.scorm2004",{DelimitersParser:{parse:function(value,possibleDelimiters,delimitersValues)
{var valueWithoutDelimiters=value;var usedDelimiters={};var matches=null;while((matches=valueWithoutDelimiters.match(/^\{(\w+)=([^}]*)\}/))!=null)
{var delimiterName=matches[1];var delimiterValue=matches[2];if((delimiterName in possibleDelimiters)&&!(delimiterName in usedDelimiters))
{valueWithoutDelimiters=valueWithoutDelimiters.substr(matches[0].length);usedDelimiters[delimiterName]=1;var possibleDelimiterValues=possibleDelimiters[delimiterName];if(possibleDelimiterValues!==null)
{if(typeof(possibleDelimiterValues)=="string")
{possibleDelimiterValues=[possibleDelimiterValues];}
if($.inArray(delimiterValue,possibleDelimiterValues)<0)
{return null;}}
if(delimitersValues!==undefined)
{delimitersValues[delimiterName]=delimiterValue;}}
else
{break;}}
return valueWithoutDelimiters;}}});

var NotificationsPropsBuilder=Base.extend({},{build:function(apiProps){var api=new NotificationsPopupApi(apiProps);return{connector:{syncNotifications:api.syncNotifications.bind(api),getNotifications:api.getNotifications.bind(api),setUnread:api.setUnread.bind(api),markAllRead:api.markAllRead.bind(api),openNotificationUrl:api.openNotificationUrl.bind(api),changeTargetSettings:api.changeTargetSettings.bind(api),getTargetSettings:api.getTargetSettings.bind(api),},syncSignal:NotificationsCenter.getInstance().getSyncNotificationsPopupSignal(),config:{isAdminPortal:apiProps.config.isAdminPortal,canUserViewAdminPortal:apiProps.config.canUserViewAdminPortal,},}}});

var MessagesPopupPropsBuilder=Base.extend({},{build:function(props){var messagesApi=new MessagesPopupApi(props.connector);var messagingCenter=MessagingCenter.getInstance();var controller=MessagesAttachmentsController.getInstance();var settings={connector:{getConversations:messagesApi.getConversations.bind(messagesApi),getConversation:messagesApi.getConversation.bind(messagesApi),deleteConversation:messagesApi.deleteConversation.bind(messagesApi),getInitialMessages:messagesApi.getInitialMessages.bind(messagesApi),getOldMessages:messagesApi.getOldMessages.bind(messagesApi),getNewMessages:messagesApi.getNewMessages.bind(messagesApi),getEditedMessage:messagesApi.getEditedMessage.bind(messagesApi),sendMessage:messagesApi.sendMessage.bind(messagesApi),getAvailableParticipants:messagesApi.getAvailableParticipants.bind(messagesApi),markMessagesAsRead:messagesApi.markMessagesAsRead.bind(messagesApi),addAttachment:controller.addAttachment.bind(controller,messagesApi),deleteAttachment:controller.deleteAttachment.bind(controller,messagesApi),deleteMessage:messagesApi.deleteMessage.bind(messagesApi),editMessage:messagesApi.editMessage.bind(messagesApi),},popupConnector:{getOpenedPopupData:messagesApi.getOpenedPopupData.bind(messagesApi)},currentUser:props.currentUser,restrictions:props.restrictions,newMessagesSignal:messagingCenter.getNewMessagesSignal(),deleteMessageSignal:messagingCenter.getDeleteMessageSignal(),editMessageSignal:messagingCenter.getEditMessageSignal(),openDialogSignal:messagingCenter.openDialogSignal(),};return settings;}});

Namespace("scormplayer.manifest.json.sequencing",{ObjectiveMapInfoLoader:Base.extend({load:function(mapInfoJson)
{var mapInfo=new scormplayer.manifest.sequencing.ObjectiveMapInfo();mapInfo.targetObjectiveId(mapInfoJson.targetObjectiveId);for(var attr in mapInfoJson)
{if(attr!="targetObjectiveId")
{mapInfo.mappedAttribute(attr,mapInfoJson[attr]);}}
return mapInfo;}})});

Namespace("scormplayer.manifest.json.sequencing",{SequenceRuleConditionsLoader:scormplayer.manifest.json.sequencing.RuleConditionsLoader.extend({_loadCondition:function(conditionJson)
{var loader=new scormplayer.manifest.json.sequencing.SequenceRuleConditionLoader();return loader.load(conditionJson);}})});

Namespace("scormplayer.lms.ui",{IPlayerUIListener:Base.extend({previousLinkClicked:function(){},nextLinkClicked:function(){},menuItemClicked:function(itemId){},exitLinkClicked:function(){},suspendLinkClicked:function(){}})});

Namespace("scormplayer.lms.ui",{MenuControlState:scormplayer.lms.ui.ControlState.extend({_items:null,items:function(items)
{if(items!==undefined)this._items=items;return this._items;}})});

Namespace("scormplayer.player",{INavigationRequestListener:Base.extend({handleRequest:function(request){},isRequestValid:function(request){}})});

Namespace.use(["scormplayer.player.api.ErrorType","scormplayer.player.api.LangCode"],function(){Namespace("scormplayer.player.api.scorm2004.type",{LangTypeValue:scormplayer.player.api.type.ValueType.extend({validateValue:function(value)
{if(value=="")
{return;}
value=value.toLowerCase();var langParts=value.split("-");var langCode=langParts[0];if(!LangCode.isValid(langCode))
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}})});});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.scorm2004.type.interaction",{PairValue:scormplayer.player.api.type.ValueType.extend({RESTRICTIONS:null,_delimiter:"[.]",_firstItemType:null,_secondItemType:null,_restrictions:0,constructor:function(firstItemType,secondItemType,restrictions,delimiter)
{this.base();this.RESTRICTIONS=scormplayer.player.api.scorm2004.type.interaction.PairValue.RESTRICTIONS;if(firstItemType!==undefined)this._firstItemType=firstItemType;if(secondItemType!==undefined)this._secondItemType=secondItemType;if(restrictions!==undefined)this._restrictions=restrictions;if(delimiter!==undefined)this._delimiter=delimiter;},firstItemType:function(type)
{if(type!==undefined)this._firstItemType=type;return this._firstItemType;},secondItemType:function(type)
{if(type!==undefined)this._secondItemType=type;return this._secondItemType;},delimiter:function(delimiter)
{if(delimiter!==undefined)this._delimiter=delimiter;return this._delimiter;},restrictions:function(restrictions)
{if(restrictions!==undefined)this._restrictions=restrictions;return this._restrictions;},validateValue:function(value)
{var pair=value.split(this._delimiter);if(pair.length!==2)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
var firstItem=pair[0];var secondItem=pair[1];if(firstItem!=="")
{if(this._firstItemType)
{this._firstItemType.validateValue(firstItem);}}
else if(this._restrictions&this.RESTRICTIONS.requireFirst)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
if(secondItem!=="")
{if(this._secondItemType)
{this._secondItemType.validateValue(secondItem);}}
else if(this._restrictions&this.RESTRICTIONS.requireSecond)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}},{RESTRICTIONS:{allowEmpty:0x00,requireFirst:0x10,requireSecond:0x01,bothRequired:0x11}})});});

Namespace.use(["scormplayer.player.storage.BaseObjectiveExporter"],function(){Namespace("scormplayer.player.storage",{ObjectiveExporter:{exportObjective:function(objective)
{return BaseObjectiveExporter.exportObjective(objective);}}});});

Namespace.use(["scormplayer.player.storage.BaseObjectiveImporter","scormplayer.player.tracking.Objective"],function(){Namespace("scormplayer.player.storage",{ObjectiveImporter:{importObjective:function(objectiveJson)
{var objective=new Objective();BaseObjectiveImporter.initObjective(objective,objectiveJson);return objective;}}});});

Namespace("scormplayer.player",{IActivityAttemptListener:Base.extend({onStartActivityAttempt:function(activity){},onStopActivityAttempt:function(activity){}})});

var UserPortalTopPanelUserMenuApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},getUserProfile:function(params){return this.doPost(this._apiProps.getUserProfileUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getUserAchievementsSummary:function(params){return this.doPost(this._apiProps.getUserAchievementsSummaryUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}});

var TopPanelMessagesPropsBuilder=Base.extend({},{build:function(props){return props&&props.enabled?{updateSignal:MessagingCenter.getInstance().getUnreadMessagesSignal(),counter:props.counter,popupSettings:MessagesPopupPropsBuilder.build(props.api),}:undefined;},});

var TopPanelNotificationsPropsBuilder=Base.extend({},{build:function(props){return props?{updateSignal:NotificationsCenter.getInstance().getUnreadNotificationsSignal(),counter:props.counter,popupSettings:NotificationsPropsBuilder.build(props.api)}:undefined;}});

var ViewIframeContentController=ViewContentController.extend({contentFrame:null,stopView:function(requestType)
{if(this.contentFrame)
{this.contentFrame.off();this.contentFrame.attr('src',null);var contentFrameBody=this.getContentFrameBody();if(contentFrameBody)
{contentFrameBody.off();}}
this.base(requestType);},insertContentFrame:function()
{this.contentFrame=$('<iframe>');var frameAttributes={'src':this.viewContentOptions.getViewUrl(),'class':'content_frame','allowfullscreen':'allowfullscreen'};if(BrowserUtils.isIosDevice())
{frameAttributes['scrolling']='no';frameAttributes['class']+=' ios_content_frame';}
this.contentFrame.on('load',_.bind(this.handleContentFrameLoad,this));this.contentFrame.attr(frameAttributes);this.viewContentOverlay.insertContent(this.contentFrame);},handleContentFrameLoad:function(event)
{var frameBody=this.getContentFrameBody();if(frameBody)
{frameBody.on('keydown',_.bind(this.onKeyDown,this));frameBody.on('keyup',_.bind(this.onKeyUp,this));}},getContentFrameBody:function()
{var contentFrameBody=null;if(this.contentFrame)
{try
{contentFrameBody=this.contentFrame.contents().find('body');}
catch(e)
{}}
return contentFrameBody;}});

Namespace("scormplayer.manifest",{ResourcesCollection:Base.extend({_resources:null,constructor:function()
{this._resources=[];},addResource:function(resource)
{this._resources.push(resource);},getResourceById:function(resourceId)
{var countResources=this._resources.length;for(var i=0;i<countResources;++i)
{var resource=this._resources[i];if(resource.id()==resourceId)
{return resource;}}
return null;}})});

Namespace("scormplayer.manifest.json.sequencing",{ObjectiveLoader:Base.extend({load:function(objectiveJson)
{var objective=new scormplayer.manifest.sequencing.Objective();objective.id(objectiveJson.id);objective.isSatisfiedByMeasure(objectiveJson.satisfiedByMeasure);objective.minNormalizedMeasure(objectiveJson.minNormalizedMeasure);var mapInfos=[];var mapInfosJson=objectiveJson.mapInfo;for(var i in mapInfosJson)
{var mapInfoJson=mapInfosJson[i];mapInfos.push(this._loadMapInfo(mapInfoJson));}
objective.mapInfos(mapInfos);return objective;},_loadMapInfo:function(mapInfoJson)
{var loader=new scormplayer.manifest.json.sequencing.ObjectiveMapInfoLoader();return loader.load(mapInfoJson);}})});

Namespace("scormplayer.manifest.json.sequencing",{SequenceRuleLoader:scormplayer.manifest.json.sequencing.RuleLoader.extend({_loadConditions:function(conditionsJson)
{var loader=new scormplayer.manifest.json.sequencing.SequenceRuleConditionsLoader();return loader.load(conditionsJson);}})});

Namespace("scormplayer.manifest.json.sequencing",{RollupRuleLoader:scormplayer.manifest.json.sequencing.RuleLoader.extend({load:function(ruleJson)
{var rule=this.base(ruleJson);rule.childActivitySet(ruleJson.childActivitySet);rule.minimumCount(ruleJson.minimumCount);rule.minimumPercent(ruleJson.minimumPercent);return rule;},_createRule:function()
{return new scormplayer.manifest.sequencing.RollupRule();}})});

Namespace("scormplayer.lms.ui",{IPlayerUI:EventDispatcher.extend({loadResource:function(resourceUrl){},unloadResource:function(callback){},control:function(controlName){},update:function(){},setListener:function(listener){}})});

Namespace("scormplayer.player",{ContentState:utils.IMementable.extend({_trackingData:null,_sharedData:null,constructor:function()
{this._sharedData=new scormplayer.player.SharedData();},trackingData:function(data)
{if(data!==undefined)this._trackingData=data;return this._trackingData;},sharedData:function(data)
{if(data!==undefined)this._sharedData=data;return this._sharedData;},pushState:function()
{this._trackingData.pushState();this._sharedData.pushState();},rollbackState:function()
{this._trackingData.rollbackState();this._sharedData.rollbackState();},commitState:function()
{this._trackingData.commitState();this._sharedData.commitState();}})});

Namespace.use("scormplayer.player.tracking.*",function(){Namespace("scormplayer.player",{ActivityAttemptsManager:Base.extend({_course:null,_trackingData:null,_listener:null,_logger:null,course:function(course)
{if(course!==undefined)this._course=course;return this._course;},trackingData:function(data)
{if(data!==undefined)this._trackingData=data;return this._trackingData;},logger:function(logger)
{if(logger!==undefined)
{this._logger=logger;logger.register(this,"ActivityManager");}
return this._logger;},listener:function(listener)
{if(listener!==undefined)this._listener=listener;return this._listener;},startActivityAttempt:function(activity)
{var activityPath=this._trackingData.activities().getActivityPath(activity);for(var i in activityPath)
{activity=activityPath[i];var activityAttempt=activity.currentAttempt();if(activityAttempt&&!(activityAttempt.active()||activityAttempt.suspended()))
{activity.previousAttempt(activityAttempt);activityAttempt=null;}
if(!activityAttempt)
{activityAttempt=this.createActivityAttempt(activity);this._updateChildActivitiesAttempts(activity,false,false);activity.currentAttempt(activityAttempt);activity.countAttempts(activity.countAttempts()+1);activity.prevPrimaryObjective(null);this._listener.onStartActivityAttempt(activity);}
activityAttempt.suspended(false);activityAttempt.active(true);activityAttempt.countAttempts(activityAttempt.countAttempts()+1);}},_updateChildActivitiesAttempts:function(activity,usePreviousObjectiveInfo,usePreviousProgressInfo)
{var sequencingData=this._getActivitySequencingData(activity);var controlMode=(sequencingData?sequencingData.controlMode():null);if(controlMode)
{usePreviousObjectiveInfo=(usePreviousObjectiveInfo||!controlMode.useCurrentAttemptObjectiveInfo());usePreviousProgressInfo=(usePreviousProgressInfo||!controlMode.useCurrentAttemptProgressInfo());}
var childs=activity.availableChilds();for(var i in childs)
{var childActivity=childs[i];if(childActivity.previousAttempt())
{var primaryObjective=childActivity.primaryObjective();var attemptObjectives=childActivity.previousAttempt().objectives();var attemptPrimaryObjective=null;for(var j in attemptObjectives)
{if(attemptObjectives[j].id()==primaryObjective.defaultObjectiveId())
{attemptPrimaryObjective=attemptObjectives[j];break;}}
if(attemptPrimaryObjective)
{if(!usePreviousObjectiveInfo)
{attemptPrimaryObjective.satisfied(null);attemptPrimaryObjective.score(new Score());}
if(!usePreviousProgressInfo)
{attemptPrimaryObjective.completed(null);attemptPrimaryObjective.completionMeasure(null);}}
this._updateChildActivitiesAttempts(childActivity,usePreviousObjectiveInfo,usePreviousProgressInfo);}}},_saveActivityPrimaryObjective:function(activity)
{var primaryObjective=activity.primaryObjective();var prevPrimaryObjective=primaryObjective.clone();activity.prevPrimaryObjective(prevPrimaryObjective);},createActivityAttempt:function(activity)
{var attempt=new Attempt();var activityObjectives=[activity.primaryObjective(),activity.defaultObjective()];if(activity.objectives())
{activityObjectives=activityObjectives.concat(activity.objectives());}
var attemptObjectives=[];for(var i in activityObjectives)
{var objective=new Objective();objective.id(activityObjectives[i].defaultObjectiveId());attemptObjectives.push(objective);}
attempt.objectives(attemptObjectives);return attempt;},stopActivityAttempt:function(activity)
{var activityAttempt=activity.currentAttempt();if(!activityAttempt)
{return;}
activityAttempt.active(false);if(!activity.isLeaf())
{var childSuspended=false;var childs=activity.availableChilds();for(var i in childs)
{var childActivity=childs[i];if(childActivity.currentAttempt()&&childActivity.currentAttempt().suspended())
{childSuspended=true;break;}}
activityAttempt.suspended(childSuspended);}
if(!activityAttempt.suspended())
{this._saveActivityPrimaryObjective(activity);activity.previousAttempt(activityAttempt);activity.currentAttempt(null);this._listener.onStopActivityAttempt(activity);}},stopDescendentAttempts:function(activity)
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity)
{return;}
var lastAncestor=this._trackingData.activities().getLastAncestor(activity,currentActivity);var currentActivityPath=this._trackingData.activities().getActivityPath(currentActivity);for(var i=currentActivityPath.length-1;i>=0;--i)
{activity=currentActivityPath[i];if(activity==lastAncestor)
{break;}
if(activity.active())
{this.stopActivityAttempt(activity);}}},_getActivitySequencingData:function(activity)
{var activityItem=this._course.getItemById(activity.itemId());return activityItem.sequencingData();}})});});

Namespace("scormplayer.player.api",{IErrorsCollection:Base.extend({getErrorCode:function(errorType){},getErrorMessage:function(errorCode){},getDiagnosticByErrorType:function(errorType){},getDiagnosticByErrorCode:function(errorCode){}})});

Namespace("scormplayer.player.api",{ValueType:{STRING:"string",TIME:"time",ARRAY:"array",OBJECT:"object",STATE:"state",NUMBER:"number",TIMEINTERVAL:"timeinterval",LONG_ID:"long_id",INTERACTION_RESULT:"interaction_result",LANG_STRING:"lang_string",LANG_TYPE:"lang_type"}});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.type",{StringValue:scormplayer.player.api.type.ValueType.extend({_maxLength:null,init:function(typeInfo)
{if("max_length"in typeInfo)
{this._maxLength=typeInfo.max_length;}},maxLength:function(maxLength)
{if(maxLength!==undefined)this._maxLength=maxLength;return this._maxLength;},validateValue:function(value)
{if(this._maxLength!==null&&value.length>this._maxLength)
{throw ErrorType.VALUE_TOO_LONG;}}})});});

Namespace.use(["scormplayer.player.api.ErrorType","scormplayer.player.api.scorm2004.DelimitersParser","scormplayer.player.api.scorm2004.type.LangTypeValue"],function(){Namespace("scormplayer.player.api.scorm2004.type",{LangStringValue:scormplayer.player.api.type.ValueType.extend({validateValue:function(value)
{var delimiters={};value=DelimitersParser.parse(value,{lang:null},delimiters);if("lang"in delimiters)
{if(delimiters.lang=="")
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
var langType=new LangTypeValue();langType.validateValue(delimiters.lang);}}})});});

Namespace("scormplayer.player.storage",{RunTimeDataExporter:{exportRunTimeData:function(runTimeData)
{return runTimeData.toPlainObject();}}});

Namespace("scormplayer.player.storage",{RunTimeDataImporter:{importRunTimeData:function(dataJson)
{var data=new scormplayer.player.api.RunTimeData();for(var name in dataJson)
{data.set(name,dataJson[name]);}
return data;}}});

var UserPortalTopPanelPropsBuilder=Base.extend({},{build:function(props){var userMenuApi=new UserPortalTopPanelUserMenuApi(props.userMenu.api);var userMenu={userProfileConnector:{getUserProfile:userMenuApi.getUserProfile.bind(userMenuApi),},userAchievementsSummaryConnector:{getUserAchievementsSummary:userMenuApi.getUserAchievementsSummary.bind(userMenuApi),},targetPages:props.userMenu.targetPages,userInfo:props.userMenu.userInfo,};var options={logo:props.logo,accountExternalLinks:props.accountExternalLinks,navigation:props.navigation,buttons:{messages:TopPanelMessagesPropsBuilder.build(props.messages),notifications:TopPanelNotificationsPropsBuilder.build(props.notifications)},userMenuPlaceholder:userMenu,achievementsEnabled:props.achievementsEnabled,avatarUrl:props.avatarUrl};return options;},});

Namespace("scormplayer.manifest.json.sequencing",{ControlModeLoader:Base.extend({load:function(controlModeJson)
{var controlMode=new scormplayer.manifest.sequencing.ControlMode();controlMode.choiceControlEnabled(controlModeJson.choiceControlEnabled);controlMode.choiceExitEnabled(controlModeJson.choiceExitEnabled);controlMode.flowControlEnabled(controlModeJson.flowControlEnabled);controlMode.isForwardOnly(controlModeJson.forwardOnly);controlMode.useCurrentAttemptObjectiveInfo(controlModeJson.useCurrentAttemptObjectiveInfo);controlMode.useCurrentAttemptProgressInfo(controlModeJson.useCurrentAttemptProgressInfo);return controlMode;}})});

Namespace("scormplayer.manifest.json.sequencing",{LimitConditionsLoader:Base.extend({load:function(limitConditionsJson)
{var limitConditions=new scormplayer.manifest.sequencing.LimitConditions();limitConditions.attemptLimit(limitConditionsJson.attemptLimit);limitConditions.durationLimit(limitConditionsJson.durationLimit);return limitConditions;}})});

Namespace("scormplayer.manifest.json.sequencing",{RandomizationControlsLoader:Base.extend({load:function(controlsJson)
{var controls=new scormplayer.manifest.sequencing.RandomizationControls();controls.randomizationTiming(controlsJson.randomizationTiming);controls.selectCount(controlsJson.selectCount);controls.isReorderChilds(controlsJson.reorderChilds);controls.selectionTiming(controlsJson.selectionTiming);return controls;}})});

Namespace("scormplayer.manifest.json.sequencing",{DeliveryControlsLoader:Base.extend({load:function(controlsJson)
{var controls=new scormplayer.manifest.sequencing.DeliveryControls();controls.isTracked(controlsJson.tracked);controls.isCompletionSetByContent(controlsJson.completionSetByContent);controls.isObjectiveSetByContent(controlsJson.objectiveSetByContent);return controls;}})});

Namespace("scormplayer.manifest.json.sequencing",{ChoiceConsiderationsLoader:Base.extend({load:function(considerationsJson)
{var considerations=new scormplayer.manifest.sequencing.ChoiceConsiderations();considerations.isPreventActivation(considerationsJson.preventActivation);considerations.isConstrainChoice(considerationsJson.constrainChoice);return considerations;}})});

Namespace("scormplayer.manifest.json.sequencing",{RollupConsiderationsLoader:Base.extend({load:function(considerationsJson)
{var considerations=new scormplayer.manifest.sequencing.RollupConsiderations();considerations.requiredForSatisfied(considerationsJson.requiredForSatisfied);considerations.requiredForNotSatisfied(considerationsJson.requiredForNotSatisfied);considerations.requiredForCompleted(considerationsJson.requiredForCompleted);considerations.requiredForIncomplete(considerationsJson.requiredForIncomplete);considerations.isMeasureSatisfactionIfActive(considerationsJson.measureSatisfactionIfActive);return considerations;}})});

Namespace("scormplayer.manifest.json.sequencing",{ObjectivesLoader:Base.extend({load:function(objectivesJson)
{var objectives=new scormplayer.manifest.sequencing.Objectives();objectives.primaryObjective(this._loadObjective(objectivesJson.primaryObjective));var localObjectivesJson=objectivesJson.localObjectives;for(var i in localObjectivesJson)
{var localObjectiveJson=localObjectivesJson[i];objectives.addLocalObjective(this._loadObjective(localObjectiveJson));}
return objectives;},_loadObjective:function(objectiveJson)
{var loader=new scormplayer.manifest.json.sequencing.ObjectiveLoader();return loader.load(objectiveJson);}})});

Namespace("scormplayer.manifest.json.sequencing",{SequenceRulesLoader:Base.extend({load:function(rulesJson)
{var rules=new scormplayer.manifest.sequencing.SequenceRules();if("preConditionRules"in rulesJson)
{rules.preConditionRules(this._loadRules(rulesJson.preConditionRules));}
if("postConditionRules"in rulesJson)
{rules.postConditionRules(this._loadRules(rulesJson.postConditionRules));}
if("exitConditionRules"in rulesJson)
{rules.exitConditionRules(this._loadRules(rulesJson.exitConditionRules));}
return rules;},_loadRules:function(rulesJson)
{var rules=new scormplayer.manifest.sequencing.RulesCollection();for(var i in rulesJson)
{var ruleJson=rulesJson[i];rules.addRule(this._loadRule(ruleJson));}
return rules;},_loadRule:function(ruleJson)
{var loader=new scormplayer.manifest.json.sequencing.SequenceRuleLoader();return loader.load(ruleJson);}})});

Namespace("scormplayer.manifest.json.sequencing",{RollupRulesLoader:Base.extend({load:function(rulesJson)
{var rules=new scormplayer.manifest.sequencing.RollupRules();rules.isRollupObjectiveSatisfied(rulesJson.rollupObjectiveSatisfied);rules.isRollupProgressCompletion(rulesJson.rollupProgressCompletion);rules.objectiveMeasureWeight(rulesJson.objectiveMeasureWeight);rulesJson=rulesJson.rules;for(var i in rulesJson)
{var ruleJson=rulesJson[i];rules.addRule(this._loadRule(ruleJson));}
return rules;},_loadRule:function(ruleJson)
{var loader=new scormplayer.manifest.json.sequencing.RollupRuleLoader();return loader.load(ruleJson);}})});

Namespace("scormplayer.player.api",{IApi:Base.extend({initialize:function(){},terminate:function(){},getValue:function(varName){},setValue:function(varName,varValue){},commit:function(){},getLastError:function(){},getErrorString:function(errorCode){},getDiagnostic:function(errorCode){}})});

Namespace.use(["scormplayer.player.api.*","utils.ObjectUtils"],function(){Namespace("scormplayer.player.api",{RunTimeDataWrapper:Base.extend({_runTimeData:null,_courseItem:null,_types:null,constructor:function()
{this._types={};this._types[ValueType.STRING]=type.StringValue;this._types[ValueType.STATE]=type.StateValue;this._types[ValueType.NUMBER]=type.NumberValue;},runTimeData:function(runTimeData)
{if(runTimeData!==undefined)this._runTimeData=runTimeData;return this._runTimeData;},courseItem:function(courseItem)
{if(courseItem!==undefined)this._courseItem=courseItem;return this._courseItem;},getValue:function(name)
{var requests=this._getRequests(name,false);return this._applyRequests(requests);},setValue:function(name,value)
{var requests=this._getRequests(name,true);return this._applyRequests(requests,value);},_getProperties:function(){},_applyRequests:function(requests,newValue)
{var countRequests=requests.length;var requestsArgs=[];var data=this._runTimeData;for(var i=0;i<countRequests;++i)
{var request=requests[i];var method=request.method;var methodArgs=("args"in request?request.args:[]);methodArgs=methodArgs.concat([data,newValue]);requestsArgs.push(methodArgs);try
{data=this[method].apply(this,methodArgs);}
catch(e)
{for(var j=i-1;j>=0;--j)
{request=requests[j];if("rollback"in request)
{this[request.rollback].apply(this,requestsArgs[j]);}}
throw e;}}
return data;},_getRequests:function(valueName,isChangeValue)
{var properties=this._getProperties();var propertiesNames=valueName.split(".");var rootProperty=propertiesNames[0];if(!(rootProperty in properties))
{throw ErrorType.UNDEFINED_DATA_MODEL;}
var requests=[];this._buildRequests(properties[rootProperty],propertiesNames,requests,!isChangeValue);return requests;},_buildRequests:function(propInfo,propNames,requests,returnValue)
{if(propNames.length==0)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
var propType=this._getPropType(propInfo);var propName=propNames.shift();if(propInfo.get&&returnValue)
{requests.length=0;requests.push({method:propInfo.get,args:[propNames,propInfo]});return;}
if(propInfo.set&&!returnValue)
{requests.length=0;requests.push({method:propInfo.set,args:[propNames,propInfo]});return;}
var isAggregationProp=(propType==ValueType.ARRAY||propType==ValueType.OBJECT);if(!isAggregationProp)
{if(propNames.length>0)
{if(propNames.length==1)
{if(propNames[0]=="_children")
{throw ErrorType.DATA_MODEL_DOESNOT_HAVE_CHILDREN;}
else if(propNames[0]=="_count")
{throw ErrorType.DATA_MODEL_CANT_HAVE_COUNT;}}
throw ErrorType.UNDEFINED_DATA_MODEL;}
if(returnValue&&!this._propInfoValue(propInfo,"read",true))
{throw ErrorType.DATA_MODEL_WRITE_ONLY;}
if(!returnValue&&!this._propInfoValue(propInfo,"write",false))
{throw ErrorType.DATA_MODEL_READ_ONLY;}
var method=(returnValue?"_get":"_set")+"LeafProperty";requests.push({method:method,args:[propName,propInfo]});}
else
{this._buildRequestsForAggregationProp(propName,propInfo,propNames,requests,returnValue);}},_buildRequestsForAggregationProp:function(propName,propInfo,propNames,requests,returnValue)
{if(propNames.length==0)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
requests.push({method:"_getAggregationProp",args:[propName,true]});var isLastProperty=(propNames.length==1);if(isLastProperty)
{this._buildRequestForAggregationChildProp(propInfo,propNames[0],requests,returnValue);}
else
{var propChilds=this._getPropChilds(propInfo);var nextPropName=propNames[0];if(this._getPropType(propInfo)==ValueType.ARRAY)
{var childIndex=parseInt(nextPropName);if(!(childIndex>=0))
{throw ErrorType.UNDEFINED_DATA_MODEL;}
propNames.shift();if(propNames.length==0)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
nextPropName=propNames[0];var requestInfo={method:"_getArrayProperty",args:[propInfo,childIndex,!returnValue,nextPropName]};if(!returnValue)
{requestInfo.rollback="_rollbackCreatedArrayElement";}
requests.push(requestInfo);}
if(!(nextPropName in propChilds))
{throw ErrorType.UNDEFINED_DATA_MODEL;}
this._buildRequests(propChilds[nextPropName],propNames,requests,returnValue);}},_buildRequestForAggregationChildProp:function(propInfo,childPropName,requests,returnValue)
{if(childPropName=="_children")
{if(!returnValue)
{throw ErrorType.DATA_MODEL_IS_KEYWORD;}
requests.push({method:"_getPropertyChilds",args:[propInfo]});return;}
var propChilds=this._getPropChilds(propInfo);var propType=this._getPropType(propInfo);if(propType==ValueType.OBJECT)
{if(!(childPropName in propChilds))
{throw ErrorType.UNDEFINED_DATA_MODEL;}
this._buildRequests(propChilds[childPropName],[childPropName],requests,returnValue);}
else
{if(childPropName=="_count")
{if(!returnValue)
{throw ErrorType.DATA_MODEL_IS_KEYWORD;}
requests.push({method:"_getArrayCount"});}
else
{throw ErrorType.UNDEFINED_DATA_MODEL;}}},_getAggregationProp:function(propName,createIfNotExists,data)
{var prop=data.get(propName);if(prop==null)
{if(createIfNotExists)
{prop=new RunTimeData();data.set(propName,prop);}
else
{throw ErrorType.DATA_MODEL_NOT_INIT;}}
return prop;},_setLeafProperty:function(propName,propInfo,data,value)
{if(!this._propInfoValue(propInfo,"changeable",true)&&data.isset(propName))
{var existingValue=data.get(propName);if(existingValue!=value)
{throw ErrorType.DATA_MODEL_CAN_BE_SET_ONCE;}}
if(this._propInfoValue(propInfo,"unique",false))
{var neighborDatas=data.get("^");for(var i=0;i<neighborDatas.count();++i)
{var neighborData=neighborDatas.get(i+"");if(neighborData!==null&&neighborData!==data&&neighborData.get(propName)===value)
{throw ErrorType.DUPLICATED_UNIQUE;}}}
if(propInfo.leaf_set)
{return this[propInfo.leaf_set].apply(this,arguments);}
this._setProperty(propName,value,propInfo,data);return true;},_setProperty:function(propName,propValue,propInfo,data)
{var propType=this._getPropType(propInfo);if(propType in this._types)
{var type=new this._types[propType]();type.init(propInfo);propValue=type.store(propValue);}
data.set(propName,propValue);},_getLeafProperty:function(propName,propInfo,data)
{if(propInfo.leaf_get)
{return this[propInfo.leaf_get].apply(this,arguments);}
var value=data.get(propName);if(value==null)
{if("default"in propInfo)
{value=propInfo["default"];}
else
{throw ErrorType.DATA_MODEL_NOT_INIT;}}
return this._getProperty(propInfo,value);},_getProperty:function(propInfo,propValue)
{var propType=this._getPropType(propInfo);if(propType in this._types)
{var type=new this._types[propType]();type.init(propInfo);return type.restore(propValue);}
return propValue;},_getArrayProperty:function(propInfo,index,createIfNotExists,propName,data)
{var value=data.get(index+"");if(value==null)
{if(!createIfNotExists)
{throw ErrorType.ARRAY_INDEX_REQUEST_OUT_OF_RANGE;}
var count=data.count();if(count!=index)
{throw ErrorType.ARRAY_INDEX_SET_OUT_OF_RANGE;}
if(!this._propInfoValue(propInfo,"write",true))
{throw ErrorType.DATA_MODEL_READ_ONLY;}
if(!("insert_keys"in propInfo))
{throw ErrorType.ARRAY_INDEX_SET_OUT_OF_RANGE;}
if($.inArray(propName,propInfo.insert_keys)==-1)
{throw ErrorType.DATA_MODEL_DEPENDENCY_NOT_ESTABLISHED;}
value=new RunTimeData();data.set(index+"",value);}
return value;},_rollbackCreatedArrayElement:function(propInfo,index,createIfNotExists,propName,data)
{var createdElement=data.get(index+"");if(createdElement!==null&&createdElement.count()==0)
{data.unset(index+"");}},_getArrayCount:function(data)
{return data.count();},_getPropertyChilds:function(propInfo)
{if(!this._propInfoValue(propInfo,"show_childs",true))
{throw ErrorType.DATA_MODEL_DOESNOT_HAVE_CHILDREN;}
var childs=this._getPropChilds(propInfo);return ObjectUtils.keys(childs).join(",");},_getPropType:function(propInfo)
{var type=this._propInfoValue(propInfo,"type",null);if(type==null)
{type=("childs"in propInfo?ValueType.OBJECT:ValueType.STRING);}
return type;},_getPropChilds:function(propInfo)
{return propInfo.childs;},_propInfoValue:function(propInfo,valName,defaultValue)
{return(valName in propInfo?propInfo[valName]:defaultValue);}})});});

Namespace.use("scormplayer.player.storage.BaseObjectiveExporter",function(){Namespace("scormplayer.player.storage",{MappedObjectiveExporter:{exportObjective:function(objective)
{var baseJson=BaseObjectiveExporter.exportObjective(objective);return $.extend(baseJson,{defaultObjectiveId:objective.defaultObjectiveId(),allowWrite:objective.allowWrite(),allowReadSatisfactionStatus:objective.allowReadSatisfactionStatus()});}}});});

Namespace.use(["scormplayer.player.tracking.Objective","scormplayer.player.tracking.MappedObjective","scormplayer.player.storage.BaseObjectiveImporter"],function(){Namespace("scormplayer.player.storage",{MappedObjectiveImporter:{importObjective:function(objectiveJson)
{var objective=new MappedObjective();objective.defaultObjectiveId(objectiveJson.defaultObjectiveId);objective.allowWrite(objectiveJson.allowWrite);objective.allowReadSatisfactionStatus(objectiveJson.allowReadSatisfactionStatus);var defaultObjective=new Objective();defaultObjective.id(objective.defaultObjectiveId());objective.useObjectives([defaultObjective]);BaseObjectiveImporter.initObjective(objective,objectiveJson);return objective;}}});});

Namespace.use(["scormplayer.player.storage.ObjectiveExporter","scormplayer.player.storage.RunTimeDataExporter"],function(){Namespace("scormplayer.player.storage",{AttemptExporter:{exportAttempt:function(attempt)
{var attemptJson={active:attempt.active(),suspended:attempt.suspended(),countAttempts:attempt.countAttempts(),experiencedDuration:attempt.experiencedDuration()};var runTimeData=attempt.runTimeData();if(runTimeData)
{attemptJson.runTimeData=RunTimeDataExporter.exportRunTimeData(runTimeData);}
var objectives=attempt.objectives();if(objectives)
{attemptJson.objectives=this._exportObjectives(objectives);}
return attemptJson;},_exportObjectives:function(objectives)
{var objectivesJson=[];for(var i=0;i<objectives.length;++i)
{objectivesJson.push(ObjectiveExporter.exportObjective(objectives[i]));}
return objectivesJson;}}});});

Namespace.use(["scormplayer.player.tracking.Attempt","scormplayer.player.storage.RunTimeDataImporter","scormplayer.player.storage.ObjectiveImporter"],function(){Namespace("scormplayer.player.storage",{AttemptImporter:{importAttempt:function(attemptJson)
{var attempt=new Attempt();attempt.active(attemptJson.active);attempt.suspended(attemptJson.suspended);attempt.countAttempts(attemptJson.countAttempts);attempt.experiencedDuration(attemptJson.experiencedDuration);if("runTimeData"in attemptJson)
{attempt.runTimeData(RunTimeDataImporter.importRunTimeData(attemptJson.runTimeData));}
if("objectives"in attemptJson)
{attempt.objectives(this._importObjectives(attemptJson.objectives));}
return attempt;},_importObjectives:function(objectivesJson)
{var objectives=[];for(var i=0;i<objectivesJson.length;++i)
{var objective=ObjectiveImporter.importObjective(objectivesJson[i]);objectives.push(objective);}
return objectives;}}});});

Namespace("scormplayer.log",{NullLogger:scormplayer.log.ILogger.extend({})});

Namespace("scormplayer.player.sequence.request",{SequenceRequest:scormplayer.player.sequence.request.Request.extend({_itemId:null,constructor:function(type,itemId)
{this.base(type);if(itemId!==undefined)this._itemId=itemId;},itemId:function()
{return this._itemId;}},{START:"start",RESUME_ALL:"resumeAll",CHOICE:"choice",PREVIOUS:"previous",CONTINUE:"continue",EXIT:"exit",JUMP:"jump",RETRY:"retry"})});

Namespace("scormplayer.player.sequence.request",{DeliveryRequest:scormplayer.player.sequence.request.Request.extend({_itemId:null,constructor:function(type,itemId)
{this.base(type);this._itemId=itemId;},itemId:function()
{return this._itemId;}},{DELIVER:"deliver"})});

var Slider=EventDispatcher.extend({_slider:null,_loadingBar:null,_progressBar:null,_thumb:null,_seeking:null,constructor:function(id)
{this._slider=$('#'+id);this._loadingBar=$('#'+id+'LoadingBar');this._progressBar=$('#'+id+'ProgressBar');this._thumb=$('#'+id+'Thumb');this._seeking=false;this._initialize();},seeking:function()
{return this._seeking;},setOption:function(option,value)
{this._slider.slider("option",option,value);},option:function(option)
{return this._slider.slider("option",option);},setValue:function(value)
{this._slider.slider("value",value);this._invalidateProgressBar();},value:function()
{return this._slider.slider("value");},setLoadProgress:function(progress)
{this._loadingBar.css('width',progress+'%');},_initialize:function()
{var thisPtr=this;this._slider.slider({value:0,min:0,orientation:"horizontal",range:"min",step:0.01,slide:function(){thisPtr._onSeeking();},stop:function(){thisPtr._onStopSeeking();}});},_onSeeking:function()
{if(!this._seeking)
{this._seeking=true;}
this._invalidateProgressBar();this.dispatchEvent(Slider.SEEK);},_onStopSeeking:function()
{this._seeking=false;this.dispatchEvent(Slider.SEEK_END);},_invalidateProgressBar:function()
{var progress=this.value()/this.option("max")*100;progress=Math.min(progress,100);this._progressBar.css("width",progress+'%');}},{SEEK:'onSeek',SEEK_END:'onSeekEnded',getSliderCode:function(id,divClass)
{var rootDiv=Slider._generateDivCode(id,divClass,false);var loadingBarDiv=Slider._generateDivCode(id+'LoadingBar','loading bar',true);var progressBarDiv=Slider._generateDivCode(id+'ProgressBar','progress bar',true);var thumbDiv=Slider._generateDivCode(id+'Thumb','ui-slider-handle',true);return rootDiv+loadingBarDiv+progressBarDiv+thumbDiv+'</div>';},_generateDivCode:function(id,divClass,needCloseTag)
{var code='<div id="'+id+'" class="'+divClass+'">';if(needCloseTag)
{code+='</div>';}
return code;}});

var VolumePicker=EventDispatcher.extend({_volumeIcon:null,_volumeSlider:null,_volume:null,_volumeBeforeMute:null,_isMutedWithButton:false,constructor:function(volumePickerId)
{this._volume=VolumePicker.DEFAULT_VOLUME_VALUE;this._volumeBeforeMute=this._volume;this._volumeIcon=$('#'+volumePickerId+'VolumeIcon');this._volumeSlider=$('#'+volumePickerId);this._volumeSlider.slider({value:this._volume,min:VolumePicker.MIN_VOLUME_VALUE,max:VolumePicker.MAX_VOLUME_VALUE,orientation:"horizontal",range:"min",step:VolumePicker.VOLUME_STEP,slide:handler(this,'_onSlide')});this._volumeIcon.on('click',handler(this,'_onVolumeIconClick'));},seek:function(volume)
{this._volumeSlider.slider("value",volume);this._setNewVolume(volume);},_onVolumeIconClick:function()
{var newVolumeValue=this._volume;if(this._volume!=VolumePicker.MIN_VOLUME_VALUE)
{this._isMutedWithButton=true;this._volumeBeforeMute=this._volume;newVolumeValue=VolumePicker.MIN_VOLUME_VALUE;}
else if(this._isMutedWithButton)
{newVolumeValue=this._volumeBeforeMute;this._isMutedWithButton=false;}
this.seek(newVolumeValue);this._dispatchVolumeChange(newVolumeValue);},_onSlide:function(event,ui)
{if((event.originalEvent)&&(event.originalEvent.type=="keydown"))
{event.preventDefault();}
else
{var newVolumeValue=ui.value;this._setNewVolume(newVolumeValue);this._dispatchVolumeChange(newVolumeValue);}},_setNewVolume:function(newVolume)
{if(newVolume==VolumePicker.MIN_VOLUME_VALUE)
{if(this._volume!=VolumePicker.MIN_VOLUME_VALUE)
{this._volumeBeforeMute=this._volume;}}
else
{this._isMutedWithButton=false;}
this._updateVolumeIcon(newVolume);this._volume=newVolume;},_dispatchVolumeChange:function(volume)
{this.dispatchEvent(VolumePicker.event.VOLUME_CHANGE,volume);},_updateVolumeIcon:function(volumeValue)
{this._volumeIcon.removeClass(VolumePicker.MUTED_VOLUME_CLASS);this._volumeIcon.removeClass(VolumePicker.LOW_VOLUME_CLASS);this._volumeIcon.removeClass(VolumePicker.MEDIUM_VOLUME_CLASS);if(volumeValue==VolumePicker.MIN_VOLUME_VALUE)
{this._volumeIcon.addClass(VolumePicker.MUTED_VOLUME_CLASS);}
else if(volumeValue<=VolumePicker.LOW_VOLUME_LIMIT)
{this._volumeIcon.addClass(VolumePicker.LOW_VOLUME_CLASS);}
else if(volumeValue<=VolumePicker.MEDIUM_VOLUME_LIMIT)
{this._volumeIcon.addClass(VolumePicker.MEDIUM_VOLUME_CLASS);}}},{event:{VOLUME_CHANGE:'volume_change',VOLUME_ICON_CLICK:'volume_icon_click'},DEFAULT_VOLUME_VALUE:0.4,LOW_VOLUME_LIMIT:0.2,MEDIUM_VOLUME_LIMIT:0.5,MUTED_VOLUME_CLASS:'muted',LOW_VOLUME_CLASS:'low',MEDIUM_VOLUME_CLASS:'medium',VOLUME_STEP:0.02,KEYBOARD_VOLUME_STEP:0.04,MAX_VOLUME_VALUE:1,MIN_VOLUME_VALUE:0,ARROW_UP_KEY:38,ARROW_DOWN_KEY:40,getPickerCode:function()
{return'<div class="volume_picker_container">'+'<div id="volumePickerVolumeIcon" class="volume_icon"></div>'+'<div id="volumePicker" class="volume_picker"></div>'+'<div class="clearfix"></div>'+'</div>';}});

var SimplePopup=EventDispatcher.extend({_isShown:false,_popupTrigger:null,_popupContainer:null,_hideOnTriggerEvent:true,_lastMouseEvent:null,_triggerEvent:null,constructor:function(options)
{this._initPopup(this._extendDefaultOptions(options));},show:function()
{if(!this._onBeforeShow())
{return;}
this._isShown=true;this._popupContainer.removeClass(SimplePopup.cssClass.HIDDEN);var popupPosition=this._calculatePopupPosition(this._popupTrigger,this._popupContainer);this._setPopupPosition(popupPosition);},hide:function()
{this._onBeforeHide();this._popupContainer.addClass(SimplePopup.cssClass.HIDDEN);this._isShown=false;},_extendDefaultOptions:function(options)
{var defaultOptions={popup_trigger:null,popup_container:null,trigger_event:'click',hide_on_trigger_event:true,calculate_position:null,before_show:null,before_hide:null};$.extend(defaultOptions,options);return defaultOptions;},_initPopup:function(options)
{this._popupTrigger=options.popup_trigger;this._popupContainer=options.popup_container;this._hideOnTriggerEvent=options.hide_on_trigger_event;this._triggerEvent=options.trigger_event;if(options.calculate_position)
{this._calculatePopupPosition=options.calculate_position;}
if(options.before_show)
{this._onBeforeShow=options.before_show;}
if(options.before_hide)
{this._onBeforeHide=options.before_hide;}
this._initContext();this.hide();$(document).on("contextmenu",handler(this,"_onDocumentContextMenu"));var documentTriggerEvent=(UIBrowserUtils.isTouchScreen())?"touchstart":"mousedown";$(document).on(documentTriggerEvent,handler(this,'_onDocumentEvent'));},_setPopupPosition:function(popupPosition)
{this._popupContainer.offset(popupPosition);},_initContext:function()
{this._popupContainer.css({position:'absolute'});},_onDocumentContextMenu:function(event)
{if(this._mouseIsInPopupTrigger(event)||this._mouseIsInPopupContainer(event))
{event.preventDefault();}},_onDocumentEvent:function(event)
{this._lastMouseEvent=event;var isTriggerEvent=(SimplePopup.mouseKeyMap[this._triggerEvent]==event.which)||(event.which==0);if(this._mouseIsInPopupTrigger(event))
{if((!this._isShown||!this._hideOnTriggerEvent)&&isTriggerEvent&&!this._popupTrigger.hasClass("disabled"))
{this.show();}
else
{this.hide();}}
else if(this._isShown&&!this._mouseIsInPopupContainer(event))
{this.hide();}},_mouseIsInPopupTrigger:function(event)
{return this._isMouseInsideElement(this._popupTrigger,event);},_mouseIsInPopupContainer:function(event)
{return this._isMouseInsideElement(this._popupContainer,event);},_onBeforeShow:function()
{return true;},_onBeforeHide:function()
{return true;},_calculatePopupPosition:function(popupTrigger,popupContainer)
{return{left:this._lastMouseEvent.pageX,top:this._lastMouseEvent.pageY}},_isMouseInsideElement:function(element,mouseEvent)
{var target=mouseEvent.target;return(element.has(target).length||element.is(target));}},{cssClass:{HIDDEN:'hidden'},mouseKeyMap:{click:1,contextmenu:3}});

var ViewISpringContentController=ViewIframeContentController.extend({_connectorName:null,_closePageTimeoutId:null,_isStopViewAllowed:null,_registered:false,startView:function(){this.base();this._registered=false;this._isStopViewAllowed=false;this.contentPlayer.addListener(PlayerEvent.PLAYBACK_COMPLETE,this,this._onPlaybackComplete);this._initConnector();this.insertContentFrame();},stopView:function(requestType){this.base(requestType);clearTimeout(this._closePageTimeoutId);},isStopViewAllowed:function(){this.statCollector.tryToSavePlayerState();return this._isStopViewAllowed;},setConnectorName:function(connectorName){this._connectorName=connectorName;},setStatCollector:function(statCollector){this.base(statCollector);statCollector.addListener(ISpringContentStatCollector.event.CONTENT_ALREADY_OPENED,this,this._handleContentAlreadyOpenedEvent);},handleContentFrameLoad:function(event){this.base(event);this._startCheckingUserInactivityIfNecessary();},_onPlaybackComplete:function(){this._isStopViewAllowed=true;},_startCheckingUserInactivityIfNecessary:function(){var contentFrameBody=this.getContentFrameBody();var inactivityTimeoutMinutes=this.viewContentOptions.getInactivityLogoutTimeout();if(contentFrameBody&&(inactivityTimeoutMinutes>0)){var inactivityTimeoutInMilliseconds=inactivityTimeoutMinutes*60*1000;var thisPtr=this;contentFrameBody.on('mouseup mousedown keypress touchstart touchend touchcancel touchmove',function(){thisPtr._closePageAfterTimeout(inactivityTimeoutInMilliseconds);});this._closePageAfterTimeout(inactivityTimeoutInMilliseconds);}},_closePageAfterTimeout:function(timeout){if(this._closePageTimeoutId){clearTimeout(this._closePageTimeoutId);}
this._closePageTimeoutId=setTimeout(_.bind(this.dispatchCloseEvent,this),timeout);},_initConnector:function(){if(this._connectorName){window[this._connectorName]={register:_.bind(this._handleConnectorRegisterEvent,this),getState:_.bind(this._getInitialState,this)};}},_handleConnectorRegisterEvent:function(iSpringPlayer){if(this._registered){return}
this.contentPlayer.setISpringPlayer(iSpringPlayer);this.contentPlayer.start();this._registered=true;},_handleContentAlreadyOpenedEvent:function(){this._isStopViewAllowed=true;this.viewContentOverlay.showMessageBlock(Messages.ViewContentMessages.CONTENT_IS_ALREADY_OPENED,Messages.ViewContentMessages.CLOSE_COURSE_AND_RELOAD_PAGE);},_getInitialState:function(){return this.viewContentOptions.getResumeState();}});

Namespace("scormplayer.manifest",{ManifestMetadata:Base.extend({_schema:null,_schemaVersion:null,schema:function(schema)
{if(schema!==undefined)this._schema=schema;return this._schema;},schemaVersion:function(version)
{if(version!==undefined)this._schemaVersion=version;return this._schemaVersion;}})});

Namespace("scormplayer.manifest",{CoursesCollection:Base.extend({_courses:null,constructor:function()
{this._courses=[];},addCourse:function(course)
{this._courses.push(course);},getCourseById:function(courseId)
{var countCourses=this._courses.length;for(var i=0;i<countCourses;++i)
{var course=this._courses[i];if(course.id()==courseId)
{return course;}}
return null;}})});

Namespace("scormplayer.manifest.json",{CompletionThresholdLoader:Base.extend({load:function(completionThresholdJson)
{var completionThreshold=new scormplayer.manifest.CourseItemCompletionThreshold();completionThreshold.completedByMeasure(completionThresholdJson.completedByMeasure);completionThreshold.minProgressMeasure(completionThresholdJson.minProgressMeasure);completionThreshold.progressWeight(completionThresholdJson.progressWeight);return completionThreshold;}})});

Namespace.use("scormplayer.manifest.json.sequencing.*",function(){Namespace("scormplayer.manifest.json.sequencing",{SequencingDataLoader:Base.extend({load:function(sequencingDataJson)
{if("constrainedChoiceConsiderations"in sequencingDataJson)
{sequencingDataJson.choiceConsiderations=sequencingDataJson.constrainedChoiceConsiderations;}
var sequencingData=new scormplayer.manifest.sequencing.SequencingData();var sequencingDataLoaders={controlMode:ControlModeLoader,limitConditions:LimitConditionsLoader,randomizationControls:RandomizationControlsLoader,deliveryControls:DeliveryControlsLoader,choiceConsiderations:ChoiceConsiderationsLoader,rollupConsiderations:RollupConsiderationsLoader,objectives:ObjectivesLoader,sequenceRules:SequenceRulesLoader,rollupRules:RollupRulesLoader};for(var attr in sequencingDataLoaders)
{var loader=new sequencingDataLoaders[attr]();if(attr in sequencingDataJson)
{var attrValue=loader.load(sequencingDataJson[attr]);sequencingData[attr](attrValue);}}
return sequencingData;}})});});

Namespace("scormplayer.player",{ICourseItemLoader:Base.extend({loadCourseItem:function(itemId){},unloadCourseItem:function(callback){}})});

Namespace.use("scormplayer.player.api.ErrorType",function(){var diagnostics={NO_ERROR:"No error occurred, the previous API call was successful",GENERAL_ERROR:"No specific error code exists to describe the error",GENERAL_INIT_ERROR:"Call to Initialize failed for an unknown reason",ALREADY_INIT:"Call to Initialize failed because Initialize was already called",CONTENT_INSTANCE_TERMINATED:"Call to Initialize failed because Terminate was already called",GENERAL_TERMINATION_ERROR:"Call to Terminate failed for an unknown reason",TERMINATION_BEFORE_INIT:"Call to Terminate failed because it was made before the call to Initialize",ALREADY_TERMINATED:"Call to Terminate failed because Terminate was already called",GET_VALUE_BEFORE_INIT:"Call to GetValue failed because it was made before the call to Initialize",GET_VALUE_AFTER_TERMINATION:"Call to GetValue failed because it was made after the call to Terminate",SET_VALUE_BEFORE_INIT:"Call to SetValue failed because it was made before the call to Initialize",SET_VALUE_AFTER_TERMINATION:"Call to SetValue failed because it was made after the call to Terminate",COMMIT_BEFORE_INIT:"Call to Commit failed because it was made before the call to Initialize",COMMIT_AFTER_TERMINATION:"Call to Commit failed because it was made after the call to Terminate",GENERAL_ARGUMENT_ERROR:"An invalid argument was passed to an API method",GENERAL_GET_ERROR:"Indicates a failed GetValue call where no other specific error code is applicable.",GENERAL_SET_ERROR:"Indicates a failed SetValue call where no other specific error code is applicable",GENERAL_COMMIT_ERROR:"Indicates a failed Commit call where no other specific error code is applicable",UNDEFINED_DATA_MODEL:"The data model element name passed to GetValue or SetValue is not a valid SCORM data model element",UNIMPLEMENTED_DATA_MODEL:"The data model element indicated in a call to GetValue or SetValue is valid, but was not implemented by this LMS",DATA_MODEL_NOT_INIT:"Attempt to read a data model element that has not been initialized by the LMS or through a SetValue call",DATA_MODEL_READ_ONLY:"SetValue was called with a data model element that can only be read",DATA_MODEL_WRITE_ONLY:"GetValue was called on a data model element that can only be written to",DATA_MODEL_TYPE_MISMATCH:"SetValue was called with a value that is not consistent with the data format of the supplied data model element",DATA_MODEL_OUT_OF_RANGE:"The numeric value supplied to a SetValue call is outside of the numeric range allowed for the supplied data model element",DATA_MODEL_DEPENDENCY_NOT_ESTABLISHED:"Some data model elements cannot be set until another data model element was set",DATA_MODEL_DOESNOT_HAVE_CHILDREN:"The data model element does not have children",ARRAY_INDEX_REQUEST_OUT_OF_RANGE:"The data model element collection was attempted to be set out of order",ARRAY_INDEX_SET_OUT_OF_RANGE:"The data model element request failed to be processed due to an index out of range error",DATA_MODEL_CAN_BE_SET_ONCE:"The data model element's value is already set and cannot be changed",DUPLICATED_UNIQUE:"The data model element's value is already in use and is not unique",DATA_MODEL_IS_KEYWORD:"The data model element's value is a keyword and cannot be written to",DATA_MODEL_CANT_HAVE_COUNT:"The data model element does not support _count keyword",VALUE_TOO_LONG:"The data model value length is too long"};var fixedDiagnostics={};for(var errorName in diagnostics)
{var errorType=ErrorType[errorName];fixedDiagnostics[errorType]=diagnostics[errorName];}
Namespace("scormplayer.player.api",{ErrorsDiagnostics:fixedDiagnostics});});

Namespace.use("scormplayer.player.api.*",function(){Namespace("scormplayer.player.api",{ErrorsCollection:IErrorsCollection.extend({_getErrors:function(){},_getErrorInfoByType:function(errorType)
{var errors=this._getErrors();return(errorType in errors?errors[errorType]:null);},_getErrorInfoByCode:function(errorCode)
{var errors=this._getErrors();for(var errorType in errors)
{var error=errors[errorType];if(error.code==errorCode)
{return error;}}
return null;},setErrorsDiagnostics:function(diagnostics)
{var errors=this._getErrors();for(var errorType in diagnostics)
{if(errorType in errors)
{errors[errorType].diagnostic=diagnostics[errorType];}}},getErrorCode:function(errorType)
{var error=this._getErrorInfoByType(errorType);return(error==null?null:error.code);},getErrorMessage:function(errorCode)
{var error=this._getErrorInfoByCode(errorCode);return(error==null?"":error.message);},getDiagnosticByErrorType:function(errorType)
{var error=this._getErrorInfoByType(errorType);return(error==null?"":error.diagnostic);},getDiagnosticByErrorCode:function(errorCode)
{var error=this._getErrorInfoByCode(errorCode);return(error==null?"":error.diagnostic);}})});});

Namespace("scormplayer.player.api",{IApiListener:Base.extend({onApiTerminated:function(){},onApiCommited:function(){}})});

Namespace("scormplayer.player",{ITrackingRunTimeDataMapper:Base.extend({activityManager:function(manager){},course:function(course){},activityToRunTimeData:function(activity,runTimeData){},runTimeDataToActivity:function(runTimeData,activity){},finalRunTimeDataToActivity:function(runTimeData,activity,playerReady){}})});

Namespace.use(["scormplayer.player.storage.AttemptExporter","scormplayer.player.storage.ScoreExporter","scormplayer.player.storage.MappedObjectiveExporter"],function(){Namespace("scormplayer.player.storage",{ActivityExporter:{exportActivity:function(activity,courseItem,activityStatusEvaluater)
{var activityJson={itemId:activity.itemId(),countAttempts:activity.countAttempts()};var childActivities=activity.childs();if(childActivities)
{activityJson.childs=this._exportChildActivities(childActivities);}
var availableChilds=activity.availableChilds();if(availableChilds)
{activityJson.availableChilds=this._exportChildActivities(availableChilds);}
var currentAttempt=activity.currentAttempt();if(currentAttempt)
{activityJson.currentAttempt=AttemptExporter.exportAttempt(currentAttempt);}
var previousAttempt=activity.previousAttempt();if(previousAttempt)
{activityJson.previousAttempt=AttemptExporter.exportAttempt(previousAttempt);}
if(activity.prevPrimaryObjective())
{activityJson.prevPrimaryObjective=MappedObjectiveExporter.exportObjective(activity.prevPrimaryObjective());}
this._exportActivityStatus(activity,activityJson,courseItem,activityStatusEvaluater);return activityJson;},_exportActivityStatus:function(activity,activityJson,courseItem,activityStatusEvaluater)
{if(activity.isTracked())
{var objective=activity.primaryObjective();if(!objective)
{return;}
activityJson.satisfied=activityStatusEvaluater.isActivitySatisfied(activity,courseItem);activityJson.completed=activityStatusEvaluater.isActivityCompleted(activity,courseItem);activityJson.score=ScoreExporter.exportScore(objective.score());activityJson.completionMeasure=objective.completionMeasure();}
else
{activityJson.satisfied=null;activityJson.completed=null;activityJson.score=null;activityJson.completionMeasure=null;}},_exportChildActivities:function(activities)
{var activitiesJson=[];for(var i in activities)
{var activity=activities[i];activitiesJson.push(activity.itemId());}
return activitiesJson;}}});});

Namespace.use(["scormplayer.player.tracking.Activity","scormplayer.player.storage.AttemptImporter","scormplayer.player.storage.MappedObjectiveImporter"],function(){Namespace("scormplayer.player.storage",{ActivityImporter:{importActivity:function(activityJson)
{var activity=new Activity(activityJson.itemId);activity.countAttempts(activityJson.countAttempts);if("currentAttempt"in activityJson)
{var currentAttempt=AttemptImporter.importAttempt(activityJson.currentAttempt);activity.currentAttempt(currentAttempt);}
if("previousAttempt"in activityJson)
{var previousAttempt=AttemptImporter.importAttempt(activityJson.previousAttempt);activity.previousAttempt(previousAttempt);}
if("prevPrimaryObjective"in activityJson)
{var objective=MappedObjectiveImporter.importObjective(activityJson.prevPrimaryObjective);activity.prevPrimaryObjective(objective);}
return activity;}}});});

Namespace("scormplayer.player.sequence.rule.rollup",{RuleEvaluater:scormplayer.player.sequence.rule.RuleEvaluaterForActivity.extend({_parentActivity:null,_parentCourseItem:null,_childActivities:null,constructor:function(parentActivity,parentCourseItem,childActivities,activityStatusEvaluater)
{this.base(activityStatusEvaluater);this._parentActivity=parentActivity;this._parentCourseItem=parentCourseItem;this._childActivities=childActivities;},isRuleActionPerformed:function(rule)
{if(!this._childActivities.length)
{return false;}
var countPassedChilds=0;var countFailedChilds=0;for(var i in this._childActivities)
{this._activity=this._childActivities[i];this._courseItem=this._parentCourseItem.getItemById(this._activity.itemId());var childStatus=this.base(rule);countPassedChilds+=(childStatus===true?1:0);countFailedChilds+=(childStatus===false?1:0);}
switch(rule.childActivitySet())
{case'all':return countPassedChilds==this._childActivities.length;case'any':return countPassedChilds>0;case'none':return countFailedChilds==this._childActivities.length;case'atLeastCount':return countPassedChilds>=rule.minimumCount();case'atLeastPercent':var percentPassedChilds=countPassedChilds/this._childActivities.length;return percentPassedChilds>=rule.minimumPercent();}
return false;}})});

Namespace("scormplayer.player.sequence.request",{TerminationRequest:scormplayer.player.sequence.request.Request.extend({},{ABANDON:"abandon",ABANDON_ALL:"abandonAll",EXIT:"exit",EXIT_ALL:"exitAll",EXIT_PARENT:"exitParent",SUSPEND_ALL:"suspendAll"})});

Namespace.use("scormplayer.player.sequence.rule.sequencing.*",function(){Namespace("scormplayer.player.sequence",{FlowProcessor:Base.extend({DIRECTION:null,_course:null,_trackingData:null,_activityManager:null,_sequencingRulesEvaluater:null,constructor:function(activityStatusEvaluater)
{this.DIRECTION=this.constructor.DIRECTION;this._sequencingRulesEvaluater=new RulesEvaluater();this._sequencingRulesEvaluater.activityStatusEvaluater(activityStatusEvaluater);},course:function(course)
{if(course!==undefined)
{this._course=course;this._sequencingRulesEvaluater.course(course);}
return this._course;},trackingData:function(data)
{if(data!==undefined)this._trackingData=data;return this._trackingData;},activityManager:function(manager)
{if(manager!==undefined)this._activityManager=manager;return this._activityManager;},_nextActivity:function(parentActivity,forwardDirection,startChildActivityIndex)
{var canFlowInDirection=this._canFlowActivityInDirection(parentActivity,forwardDirection);if(!canFlowInDirection)
{return new this.constructor.NextActivityResult(parentActivity,false,true);}
var activityChilds=parentActivity.availableChilds();var endChildActivityIndex=(forwardDirection?activityChilds.length-1:0);var nextActivityIncrement=(forwardDirection?1:-1);if(startChildActivityIndex===null||startChildActivityIndex===undefined)
{startChildActivityIndex=(forwardDirection?0:activityChilds.length-1);}
var targetActivity=null;for(var i=startChildActivityIndex;(endChildActivityIndex-i)*nextActivityIncrement>=0;i+=nextActivityIncrement)
{var activity=activityChilds[i];var activitySkipped=this._sequencingRulesEvaluater.isPreActionApplied(activity,RulesEvaluater.PRE_ACTION.skip);if(activitySkipped)
{continue;}
var canDeliver=this._activityManager.canDeliverActivity(activity);if(!canDeliver)
{return new this.constructor.NextActivityResult(activity,false,false);}
if(!this._activityItemHasResource(activity))
{var result=null;var controlMode=this._getActivityControlMode(activity);if(!forwardDirection&&controlMode.isForwardOnly())
{result=this._nextActivity(activity,true);}
else
{result=this._nextActivity(activity,forwardDirection);}
if(result)
{if(result.canBeDelivered()&&!result.canFlow()&&forwardDirection)
{result.canFlow(true);}
return result;}}
else
{targetActivity=activity;break;}}
if(targetActivity)
{return new this.constructor.NextActivityResult(targetActivity,true,true);}
return null;},flow:function(activity,direction,considerChilds)
{var forwardDirection=(direction==this.DIRECTION.forward);var parentActivity=null;var startActivityIndex=null;if(considerChilds)
{if(activity.isLeaf())
{return null;}
parentActivity=activity;}
else
{if(!activity.parent())
{return null;}
parentActivity=activity.parent();var activityIndex=$.inArray(activity,parentActivity.availableChilds());if(activityIndex<0)
{return null;}
startActivityIndex=activityIndex+(forwardDirection?1:-1);}
while(parentActivity)
{var result=this._nextActivity(parentActivity,forwardDirection,startActivityIndex);if(result)
{return result.canFlow()?this._createFlowResult(result.activity().itemId()):null;}
activity=parentActivity;parentActivity=activity.parent();if(parentActivity)
{startActivityIndex=$.inArray(activity,parentActivity.availableChilds())+
(forwardDirection?1:-1);}}
return forwardDirection?this._createFlowResult(null,true):null;},_createFlowResult:function(itemId,endSession)
{endSession=(endSession===undefined?false:endSession);return new this.constructor.Result(itemId,endSession);},_canFlowActivityInDirection:function(activity,forwardDirection)
{var courseItem=this._course.getItemById(activity.itemId());var controlMode=courseItem.sequencingData().controlMode();return controlMode.flowControlEnabled()&&(forwardDirection||!controlMode.isForwardOnly());},_getActivityControlMode:function(activity)
{var courseItem=this._course.getItemById(activity.itemId());return courseItem.sequencingData().controlMode();},_activityItemHasResource:function(activity)
{var courseItem=this._course.getItemById(activity.itemId());return courseItem.hasResource();}},{DIRECTION:{forward:"forward",backward:"backward"},Result:Base.extend({_itemId:null,_endSession:false,constructor:function(itemId,endSession)
{this._itemId=itemId;this._endSession=endSession;},itemId:function()
{return this._itemId;},endSession:function()
{return this._endSession;}}),NextActivityResult:Base.extend({_activity:null,_canBeDelivered:false,_canFlow:true,constructor:function(activity,canFlow,canBeDelivered)
{this._activity=activity;this._canFlow=canFlow;this._canBeDelivered=canBeDelivered;},activity:function()
{return this._activity;},canFlow:function(canFlow)
{if(canFlow!==undefined)this._canFlow=canFlow;return this._canFlow;},canBeDelivered:function(canBeDelivered)
{if(canBeDelivered!==undefined)this._canBeDelivered=canBeDelivered;return this._canBeDelivered;}})})});});

Namespace("scormplayer.manifest.json",{SharedDataLoader:Base.extend({load:function(dataJson)
{var data=new scormplayer.manifest.SharedData();data.id(dataJson.id);data.canRead(dataJson.canRead);data.canWrite(dataJson.canWrite);return data;}})});

var IControlPanel=EventDispatcher.extend({setPlaying:function(playing)
{throw new Error('not implemented');},isSeeking:function()
{throw new Error('not implemented');},playing:function()
{throw new Error('not implemented');},setDuration:function(duration)
{throw new Error('not implemented');},duration:function()
{throw new Error('not implemented');},setProgress:function(progress)
{throw new Error('not implemented');},progress:function()
{throw new Error('not implemented');},setLoadProgress:function(progress)
{throw new Error('not implemented');},width:function()
{throw new Error('not implemented');},height:function()
{throw new Error('not implemented');},setVolume:function(volume)
{throw new Error('not implemented');}});

var ButtonPopup=SimplePopup.extend({constructor:function(options)
{this.base(options);},_calculatePopupPosition:function(triggerElement)
{var triggerOffset=triggerElement.offset();return{left:triggerOffset.left,top:triggerOffset.top+triggerElement.outerHeight()};}});

var EventUtils=Base.extend({},{mouseButton:{LEFT:1,WHICH_MIDDLE:2,BUTTON_MIDDLE:4},getCharCodeFromKeypressEvent:function(event)
{if(event.charCode)
{return event.charCode;}
if(event.keyCode)
{return event.keyCode;}
if(event.which)
{return event.which;}
return 0;},isMouseButtonLeft:function(event)
{return(event.which==EventUtils.mouseButton.LEFT);},isMouseButtonMiddle:function(event)
{return(event.which&&event.which===EventUtils.mouseButton.WHICH_MIDDLE||event.button&&event.button===EventUtils.mouseButton.BUTTON_MIDDLE);},getSrcElement:function(event)
{var srcElement=event.srcElement;if(!srcElement)
{srcElement=event.originalEvent?event.originalEvent.target:null;}
return srcElement;}});

var ContentItemInfo=OptionsCollection.extend({getType:function()
{return this.getValueByKey(ContentItemInfo.key.TYPE);},getId:function()
{return this.getValueByKey(ContentItemInfo.key.ID);},getLearningPathId:function()
{return this.getValueByKey(ContentItemInfo.key.LEARNING_PATH_ID);},getKey:function()
{return this.getValueByKey(ContentItemInfo.key.KEY);},getViewContentUrl:function()
{return this.getValueByKey(ContentItemInfo.key.VIEW_CONTENT_URL);},getTitle:function()
{return this.getValueByKey(ContentItemInfo.key.TITLE,'');},setTitle:function(title)
{this.setValueByKey(ContentItemInfo.key.TITLE,title);},getTimestamp:function()
{return this.getValueByKey(ContentItemInfo.key.TIMESTAMP);}},{key:{ID:'id',LEARNING_PATH_ID:'learning_path_id',KEY:'key',TITLE:'title',TYPE:'type',VIEW_CONTENT_URL:'view_content_url',TIMESTAMP:'timestamp'}});

var Navigation=EventDispatcher.extend({currentRelativeUrl:null,constructor:function()
{this.currentRelativeUrl=this.getPathAndQueryAsRelativeUrl();},getCurrentRelativeUrl:function()
{return this.currentRelativeUrl;},tryToChangeState:function(url,params)
{var newRelativeUrl=UrlUtils.getRelativeUrl(url);if(newRelativeUrl!==this.currentRelativeUrl)
{this.changeState(newRelativeUrl,params);}},changeState:function(url,params)
{var newRelativeUrl=UrlUtils.getRelativeUrl(url);this.currentRelativeUrl=newRelativeUrl;this.dispatchEvent(Navigation.event.STATE_CHANGE,newRelativeUrl,params);},getPathAndQueryAsRelativeUrl:function()
{return window.location.pathname+window.location.search;}},{event:{STATE_CHANGE:'stateChange'}});

Namespace("scormplayer.manifest.json",{CourseItemLoader:Base.extend({_initCourseItem:function(item,itemJson)
{item.id(itemJson.id);item.title(itemJson.title);item.visible(itemJson.visible);item.resourceId(itemJson.resourceId);item.parameters(itemJson.parameters);item.timeLimitAction(itemJson.timeLimitAction);item.dataFromLMS(itemJson.dataFromLMS);if("completionThreshold"in itemJson)
{item.completionThreshold(this._loadCompletionThreshold(itemJson.completionThreshold));}
if("sequencing"in itemJson)
{item.sequencingData(this._loadSequencingData(itemJson.sequencing));}},_loadCompletionThreshold:function(completionThresholdJson)
{var loader=new scormplayer.manifest.json.CompletionThresholdLoader();return loader.load(completionThresholdJson);},_loadSequencingData:function(sequencingJson)
{var loader=new scormplayer.manifest.json.sequencing.SequencingDataLoader();return loader.load(sequencingJson);}})});

Namespace("scormplayer.manifest.json",{CourseItemPresentationLoader:Base.extend({load:function(presentationJson)
{var presentation=new scormplayer.manifest.CourseItemPresentation();presentation.hiddenElements(presentationJson.hiddenElements);return presentation;}})});

Namespace("scormplayer.player",{SequenceAction:Base.extend({_code:null,_itemId:null,constructor:function(code,itemId)
{this._code=code;this._itemId=itemId;},code:function()
{return this._code;},itemId:function()
{return this._itemId;}},{EXIT:1,DELIVER_ACTIVITY:2})});

Namespace.use("scormplayer.player.api.type.StateValue",function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{TrueFalseValue:StateValue.extend({constructor:function()
{this.base(["true","false"]);}})});});

Namespace.use(["scormplayer.player.api.ErrorType","scormplayer.player.api.scorm2004.type.interaction.SetValue","scormplayer.player.api.scorm2004.type.LongIdValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{MultipleChoiceValue:SetValue.extend({constructor:function()
{this.base(new LongIdValue());},validateValue:function(value)
{if(value=="")
{return;}
this.base(value);var items=value.split(this._delimiter);var uniqueItems=utils.ArrayUtils.unique(items);if(items.length!=uniqueItems.length)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.interaction.SetValue","scormplayer.player.api.scorm2004.type.interaction.PairValue","scormplayer.player.api.scorm2004.type.LongIdValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{MatchingValue:SetValue.extend({constructor:function()
{this.base(new PairValue(new LongIdValue(),new LongIdValue(),PairValue.RESTRICTIONS.bothRequired));}})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.interaction.SetValue","scormplayer.player.api.scorm2004.type.LongIdValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{SequencingValue:SetValue.extend({constructor:function()
{this.base(new LongIdValue());},validateValue:function(value)
{if(value=="")
{return;}
this.base(value);}})});});

Namespace.use("scormplayer.player.storage.ActivityExporter",function(){Namespace("scormplayer.player.storage",{ActivitiesCollectionExporter:{exportActivities:function(activities,course,activityStatusEvaluater)
{var activitiesJson={};var rootActivity=activities.rootActivity();activitiesJson.rootActivity=rootActivity.itemId();activitiesJson.activities={};activities.forEach(handler(this,"_exportActivity"),activitiesJson.activities,course,activityStatusEvaluater);return activitiesJson;},_exportActivity:function(activity,activitiesJson,course,activityStatusEvaluater)
{var courseItem=course.getItemById(activity.itemId());var activityJson=ActivityExporter.exportActivity(activity,courseItem,activityStatusEvaluater);activitiesJson[activity.itemId()]=activityJson;}}});});

Namespace.use(["scormplayer.player.*","utils.ObjectUtils"],function(){Namespace("scormplayer.player.storage",{ActivitiesCollectionImporter:{importActivities:function(activitiesJson)
{var activities=new tracking.ActivitiesCollection();if("rootActivity"in activitiesJson)
{var rootActivityId=activitiesJson.rootActivity;activitiesJson=activitiesJson.activities;var rootActivity=this._importActivity(activitiesJson[rootActivityId],activitiesJson);activities.rootActivity(rootActivity);}
activities.update();return activities;},_importActivity:function(activityJson,activitiesJson)
{var activity=storage.ActivityImporter.importActivity(activityJson);if("childs"in activityJson)
{var childActivities={};var childActivitiesIds=activityJson.childs;for(var i in childActivitiesIds)
{var activityId=childActivitiesIds[i];if(activityId in activitiesJson)
{var childActivity=this._importActivity(activitiesJson[activityId],activitiesJson);childActivities[activityId]=childActivity;}}
activity.childs(ObjectUtils.values(childActivities));if("availableChilds"in activityJson)
{var availableChildsIds=activityJson.availableChilds;var availableChilds=[];for(var i in availableChildsIds)
{var activityId=availableChildsIds[i];if(activityId in childActivities)
{availableChilds.push(childActivities[activityId]);}}
activity.availableChilds(availableChilds);}}
return activity;}}});});

Namespace.use(["scormplayer.player.storage.ObjectiveExporter"],function(){Namespace("scormplayer.player.storage",{ObjectivesCollectionExporter:{exportObjectives:function(objectives)
{var objectivesAr=[];for(var i=0;i<objectives.countObjectives();++i)
{var objective=objectives.getObjectiveByIndex(i);objectivesAr.push(ObjectiveExporter.exportObjective(objective));}
return objectivesAr;}}});});

Namespace.use(["scormplayer.player.storage.ObjectiveImporter","scormplayer.player.tracking.ObjectivesCollection"],function(){Namespace("scormplayer.player.storage",{ObjectivesCollectionImporter:{importObjectives:function(objectivesJson)
{var objectives=new ObjectivesCollection();for(var i=0;i<objectivesJson.length;++i)
{var objective=ObjectiveImporter.importObjective(objectivesJson[i]);objectives.addObjective(objective);}
return objectives;}}});});

Namespace.use("scormplayer.player.sequence.rule.*",function(){Namespace("scormplayer.player.sequence.rule.rollup",{RulesEvaluater:RulesEvaluater.extend({_course:null,_sequenceRulesEvaluater:null,_activityStatusEvaluater:null,constructor:function()
{this.base();this._sequenceRulesEvaluater=new sequencing.RulesEvaluater();},course:function(course)
{if(course!==undefined)
{this._course=course;this._sequenceRulesEvaluater.course(course);}
return this._course;},activityStatusEvaluater:function(activityStatusEvaluater)
{if(activityStatusEvaluater!==undefined)
{this._activityStatusEvaluater=activityStatusEvaluater;this._sequenceRulesEvaluater.activityStatusEvaluater(activityStatusEvaluater);}
return this._activityStatusEvaluater;},isActionApplied:function(activity,action)
{var activityChilds=activity.availableChilds();var rollupChilds=[];for(var i in activityChilds)
{var childActivity=activityChilds[i];if(this._isActivityIncludedToRollup(childActivity,action))
{rollupChilds.push(childActivity);}}
if(!rollupChilds.length)
{return true;}
var courseItem=this._course.getItemById(activity.itemId());var ruleEvaluater=new rollup.RuleEvaluater(activity,courseItem,rollupChilds,this._activityStatusEvaluater);var sequencingData=courseItem.sequencingData();var rollupRules=(sequencingData?sequencingData.rollupRules():null);var rulesWithAction=(rollupRules?rollupRules.getRulesWithActions(action):[]);if(!rulesWithAction.length)
{return false;}
return this._getAppliedAction(rulesWithAction,ruleEvaluater)!==null;},_isActivityIncludedToRollup:function(activity,action)
{if(!activity.isTracked())
{return false;}
var courseItem=this._course.getItemById(activity.itemId());var sequencingData=courseItem.sequencingData();var rollupRules=sequencingData.rollupRules();var rollupConsiderations=sequencingData.rollupConsiderations();var rollupAvailable=false;var actionConsideration='';if(action==this.constructor.ACTION.satisfied||action==this.constructor.ACTION.notSatisfied)
{rollupAvailable=rollupRules.isRollupObjectiveSatisfied();actionConsideration=action==this.constructor.ACTION.satisfied?rollupConsiderations.requiredForSatisfied():rollupConsiderations.requiredForNotSatisfied();}
else
{rollupAvailable=rollupRules.isRollupProgressCompletion();actionConsideration=action==this.constructor.ACTION.completed?rollupConsiderations.requiredForCompleted():rollupConsiderations.requiredForIncomplete();}
if(rollupAvailable)
{return this._checkRollupActionConsideration(activity,actionConsideration);}
return false;},_checkRollupActionConsideration:function(activity,actionConsideration)
{switch(actionConsideration)
{case this.constructor.ACTION_CONSIDERATION.notSuspended:return activity.currentAttempt()&&!activity.suspended();case this.constructor.ACTION_CONSIDERATION.attempted:return activity.countAttempts()>0;case this.constructor.ACTION_CONSIDERATION.notSkipped:return!this._sequenceRulesEvaluater.isPreActionApplied(activity,sequencing.RulesEvaluater.PRE_ACTION.skip);default:return true;}}},{ACTION:{notSatisfied:"notSatisfied",satisfied:"satisfied",incomplete:"incomplete",completed:"completed"},ACTION_CONSIDERATION:{always:"always",notSuspended:"ifNotSuspended",attempted:"ifAttempted",notSkipped:"ifNotSkipped"}})});});

Namespace.use(["scormplayer.player.sequence.*","scormplayer.player.sequence.request.DeliveryRequest","scormplayer.player.sequence.rule.sequencing.RulesEvaluater"],function(){Namespace("scormplayer.player.sequence",{ChoiceFlowProcessor:Base.extend({_course:null,_trackingData:null,_activities:null,_activityManager:null,_flowProcessor:null,_rulesEvaluater:null,constructor:function(activityStatusEvaluater)
{this._flowProcessor=new FlowProcessor(activityStatusEvaluater);this._rulesEvaluater=new RulesEvaluater();this._rulesEvaluater.activityStatusEvaluater(activityStatusEvaluater);},course:function(course)
{if(course!==undefined)
{this._course=course;this._flowProcessor.course(course);this._rulesEvaluater.course(course);}
return this._course;},trackingData:function(data)
{if(data!==undefined)
{this._trackingData=data;this._activities=data.activities();this._flowProcessor.trackingData(data);}
return this._trackingData;},activityManager:function(manager)
{if(manager!==undefined)
{this._activityManager=manager;this._flowProcessor.activityManager(manager);}
return this._activityManager;},process:function(activity,checkIsChoiceControlEnabled)
{if(checkIsChoiceControlEnabled===undefined)
{checkIsChoiceControlEnabled=true;}
if(!this._activityValidChoiceTarget(activity))
{return null;}
if(checkIsChoiceControlEnabled&&activity.parent())
{var parentControlMode=this._getActivitySequencingData(activity.parent()).controlMode();if(!parentControlMode.choiceControlEnabled())
{return null;}}
var canFlowToActivity=true;var currentActivity=this._trackingData.currentActivity();if(currentActivity)
{var commonAncestor=this._activities.getLastAncestor(activity,currentActivity);if(currentActivity===activity)
{}
else if(currentActivity.parent()===activity.parent())
{canFlowToActivity=this._canFlowToSiblingActivity(currentActivity,activity);}
else if(currentActivity===commonAncestor)
{canFlowToActivity=this._canFlowToChildActivity(currentActivity,activity);}
else if(activity===commonAncestor)
{canFlowToActivity=this._canFlowToParentActivity(currentActivity,activity);}
else
{canFlowToActivity=this._canFlowToOtherBranch(currentActivity,activity);}}
else
{canFlowToActivity=this._canFlowToChildActivity(this._activities.rootActivity(),activity);}
if(canFlowToActivity)
{return this._flow(activity);}
return null;},_canFlowToSiblingActivity:function(currentActivity,targetActivity)
{var allSiblings=currentActivity.parent().availableChilds();var currentActivityIndex=$.inArray(currentActivity,allSiblings);var targetActivityIndex=$.inArray(targetActivity,allSiblings);if(currentActivityIndex<0||targetActivityIndex<0)
{throw"current or target activity isn't available";}
var forwardDirection=(targetActivityIndex>currentActivityIndex);for(var i=currentActivityIndex;i!=targetActivityIndex;i+=(forwardDirection?1:-1))
{var activity=allSiblings[i];if(!this._activityReachable(activity,forwardDirection))
{return false;}}
return true;},_canFlowToChildActivity:function(currentActivity,targetActivity)
{var activityPath=this._activities.getActivityPath(targetActivity);var currentActivityIndex=$.inArray(currentActivity,activityPath);if(currentActivityIndex<0)
{throw"current activity isn't parent of target activity";}
for(var i=currentActivityIndex;i<activityPath.length-1;++i)
{var activity=activityPath[i];if(!this._activityReachable(activity,true))
{return false;}
if(!activity.active()&&activity!==currentActivity)
{var sequencingData=this._getActivitySequencingData(activity);if(sequencingData.choiceConsiderations().isPreventActivation())
{return false;}}}
return true;},_canFlowToParentActivity:function(currentActivity,targetActivity)
{var activityPath=this._activities.getActivityPath(currentActivity);var targetActivityIndex=$.inArray(targetActivity,activityPath);if(targetActivityIndex<0)
{throw"target activity isn't parent of current activity";}
for(var i=activityPath.length-1;i>targetActivityIndex;--i)
{var activity=activityPath[i];var sequencingData=this._getActivitySequencingData(activity);if(!sequencingData.controlMode().choiceExitEnabled())
{return false;}}
return true;},_canFlowToOtherBranch:function(currentActivity,targetActivity)
{var commonAncestor=this._activities.getLastAncestor(currentActivity,targetActivity);if(!this._canFlowToParentActivity(currentActivity,commonAncestor))
{return false;}
var constrainedActivity=this._getConstrainedActivity(commonAncestor,currentActivity);if(constrainedActivity&&this._isChoiceConstrained(targetActivity,constrainedActivity))
{return false;}
var forwardDirection=this._activities.getActivitiesOrder(currentActivity,targetActivity);if(forwardDirection)
{return this._canFlowToChildActivity(commonAncestor,targetActivity);}
var activityPath=this._activities.getActivityPath(targetActivity);var ancestorIndex=$.inArray(commonAncestor,activityPath);for(var i=ancestorIndex+1;i<activityPath.length;++i)
{var activity=activityPath[i];if(!activity.active())
{var sequencingData=this._getActivitySequencingData(activity);if(sequencingData.choiceConsiderations().isPreventActivation())
{return false;}}}
return true;},_isChoiceConstrained:function(targetActivity,constrainedActivity)
{var forwardDirection=this._activities.getActivitiesOrder(constrainedActivity,targetActivity);var nextActivity=forwardDirection?this._activities.getNextActivity(constrainedActivity):this._activities.getPreviousActivity(constrainedActivity);if(!nextActivity)
{return true;}
var targetActivityPath=this._activities.getActivityPath(targetActivity);return $.inArray(nextActivity,targetActivityPath)==-1;},_getConstrainedActivity:function(parentActivity,childActivity)
{var activityPath=this._activities.getActivityPath(childActivity);var parentIndex=$.inArray(parentActivity,activityPath);if(parentIndex<0)
{throw"parent doesn't exists in child's activity path";}
for(var i=activityPath.length-1;i>parentIndex;--i)
{var activity=activityPath[i];if(activity.isLeaf())
{continue;}
var sequencingData=this._getActivitySequencingData(activity);if(sequencingData.choiceConsiderations().isConstrainChoice())
{return activity;}}
return null;},_activityReachable:function(activity,forwardDirection)
{if(forwardDirection)
{var denyForwardFlowing=this._rulesEvaluater.isPreActionApplied(activity,RulesEvaluater.PRE_ACTION.stopForwardTraversal);return!denyForwardFlowing;}
if(!activity.parent())
{return false;}
var parentControlMode=this._getActivitySequencingData(activity.parent()).controlMode();return!parentControlMode.isForwardOnly();},_flow:function(activity)
{var courseItem=this._course.getItemById(activity.itemId());if(!courseItem.hasResource())
{var flowResult=this._flowProcessor.flow(activity,FlowProcessor.DIRECTION.forward,true);if(flowResult&&flowResult.itemId())
{activity=this._trackingData.activities().getActivityByItemId(flowResult.itemId());}
else
{return null;}}
else
{if(!this._activityManager.canDeliverActivity(activity))
{return null;}}
return new DeliveryRequest(DeliveryRequest.DELIVER,activity.itemId());},_activityValidChoiceTarget:function(activity)
{var activityPath=this._trackingData.activities().getActivityPath(activity);for(var i in activityPath)
{activity=activityPath[i];var hiddenFromChoice=this._rulesEvaluater.isPreActionApplied(activity,RulesEvaluater.PRE_ACTION.hiddenFromChoice);if(hiddenFromChoice)
{return false;}}
return this._activities.isActivityAvailable(activity);},_getActivitySequencingData:function(activity)
{return this._course.getItemById(activity.itemId()).sequencingData();}})});});

Namespace("scormplayer.manifest.json",{SharedDataCollectionLoader:Base.extend({load:function(datasJson)
{var collection=new scormplayer.manifest.SharedDataCollection();for(var i=0;i<datasJson.length;++i)
{var dataJson=datasJson[i];var data=this._loadData(dataJson);collection.addSharedData(data);}
return collection;},_loadData:function(dataJson)
{var loader=new scormplayer.manifest.json.SharedDataLoader();return loader.load(dataJson);}})});

var PlaybackSpeedPicker=EventDispatcher.extend({_playbackSpeed:null,_pickerPopupStatus:null,_pickerPopup:null,_playbackSpeedPicker:null,constructor:function(playbackSpeedPickerId){this._playbackSpeed=$('#playbackSpeed');this._playbackSpeedPicker=$('#'+playbackSpeedPickerId+' li');this._pickerPopupStatus=$('#'+playbackSpeedPickerId+'PopupStatus');this._pickerPopup=$('#'+playbackSpeedPickerId+'Popup');this._playbackSpeed.on('click',this._onPlaybackSpeedClick.bind(this));this._playbackSpeedPicker.on('click',this._onPlaybackSpeedPickerClick.bind(this));},isVisible:function(){return this._pickerPopupStatus.hasClass(PlaybackSpeedPicker.selector.OPEN_PICKER_POPUP);},hidePlaybackSpeedPopup:function(){if(this.isVisible()){this._togglePickerPopup();}},_updatePlaybackSpeedPlayerText:function(clickedPlaybackSpeedItem){var playbackSpeed=clickedPlaybackSpeedItem.attr(PlaybackSpeedPicker.attr.PLAYBACK_SPEED_VALUE);var playbackSpeedPlayerText=this._playbackSpeed.find(PlaybackSpeedPicker.selector.CURRENT_PLAYBACK_SPEED);playbackSpeedPlayerText.text(PlaybackSpeedPicker._prepareCurrentSpeedControlText(playbackSpeed));this._pickerPopup.find('.'+PlaybackSpeedPicker.selector.SELECTED).removeClass(PlaybackSpeedPicker.selector.SELECTED);clickedPlaybackSpeedItem.addClass(PlaybackSpeedPicker.selector.SELECTED);},_onPlaybackSpeedClick:function(event){this._togglePickerPopup();event.preventDefault();event.stopPropagation();},_togglePickerPopup:function(){this._pickerPopupStatus.toggleClass(PlaybackSpeedPicker.selector.OPEN_PICKER_POPUP);this._pickerPopup.toggle();},_onPlaybackSpeedPickerClick:function(event){var clickedPlaybackSpeedItem=$(event.currentTarget);var playbackSpeedValue=clickedPlaybackSpeedItem.attr(PlaybackSpeedPicker.attr.PLAYBACK_SPEED_VALUE);this._togglePickerPopup();this._updatePlaybackSpeedPlayerText(clickedPlaybackSpeedItem);this._dispatchPlaybackSpeedChange(playbackSpeedValue);},_dispatchPlaybackSpeedChange:function(playbackSpeed){this.dispatchEvent(PlaybackSpeedPicker.event.PLAYBACK_SPEED_CHANGE,playbackSpeed);}},{event:{PLAYBACK_SPEED_CHANGE:'playback_speed_change'},attr:{PLAYBACK_SPEED_VALUE:'data-playback-speed-value'},selector:{OPEN_PICKER_POPUP:'open',SELECTED:'selected',CURRENT_PLAYBACK_SPEED:'.current_playback_speed'},DEFAULT_PLAYBACK_SPEED:'1.0',PLAYBACK_SPEEDS:["0.5","0.75","1.0","1.25","1.5","1.75","2.0"],_prepareCurrentSpeedControlText:function(value){return value+'x';},tryToGetPopupCode:function(){if(!PlaybackSpeedPicker.needShowVideoPlaybackSpeedPicker()){return'';}
var playbackSpeedListItems=PlaybackSpeedPicker.PLAYBACK_SPEEDS.map(function(playbackSpeed){var isDefaultSpeed=(playbackSpeed===PlaybackSpeedPicker.DEFAULT_PLAYBACK_SPEED);var itemClass=isDefaultSpeed?'selected':'';var speedItemText=isDefaultSpeed?Messages.PlaybackSpeedPopup.MSG_DEFAULT_SPEED:playbackSpeed;return'<li data-playback-speed-value="'+playbackSpeed+'" class="'+itemClass+'">'+speedItemText+'</li>';}).join('');return'<div id="playbackSpeedPickerPopup" class="playback_speed_picker_popup hidden">'+'<div class="title_block"><span>'+Messages.PlaybackSpeedPopup.MSG_TITLE+'</span></div>'+'<div class="line"></div>'+'<ul id="playbackSpeedPicker" class="playback_speed_list">'+
playbackSpeedListItems+'</ul>'+'</div>';},tryToGetPickerCode:function(){if(!PlaybackSpeedPicker.needShowVideoPlaybackSpeedPicker()){return'';}
return'<div class="playback_speed_picker_container">'+'<div id="playbackSpeed">'+'<div class="current_playback_speed">'+PlaybackSpeedPicker._prepareCurrentSpeedControlText(PlaybackSpeedPicker.DEFAULT_PLAYBACK_SPEED)+'</div>'+'<div id="playbackSpeedPickerPopupStatus" class="picker_popup_status_block"></div>'+'<div class="clearfix"></div>'+'</div>'+'</div>';},needShowVideoPlaybackSpeedPicker:function(){return $('#showVideoPlaybackSpeedPicker').val()==1;}});

var UiPage=UiComponent.extend({constructor:function(element){this.base(element);},_createSignal:function(){return UiLib.createSignal();},_createCommonPageOptions:function(){return{topPanel:UserPortalTopPanelPropsBuilder.build(this.props.topPanel),needShowMobileStub:(document.getElementById('mobileStub'))?Number(document.getElementById('mobileStub').value):false,}}});

Namespace("scormplayer.manifest",{Manifest:Base.extend({_id:null,_metadata:null,_courses:null,_resources:null,id:function(manifestId)
{if(manifestId!==undefined)this._id=manifestId;return this._id;},metadata:function(metadata)
{if(metadata!==undefined)this._metadata=metadata;return this._metadata;},resources:function(resources)
{if(resources!==undefined)this._resources=resources;return this._resources;},courses:function(courses)
{if(courses!==undefined)this._courses=courses;return this._courses;}})});

Namespace("scormplayer.manifest.json",{CourseLeafItemLoader:scormplayer.manifest.json.CourseItemLoader.extend({load:function(itemJson)
{var item=new scormplayer.manifest.CourseLeafItem();this._initCourseItem(item,itemJson);return item;},_initCourseItem:function(item,itemJson)
{this.base(item,itemJson);if("presentation"in itemJson)
{item.presentation(this._loadPresentation(itemJson.presentation));}
if("sharedData"in itemJson)
{item.sharedData(this._loadSharedData(itemJson.sharedData));}},_loadPresentation:function(presentationJson)
{var loader=new scormplayer.manifest.json.CourseItemPresentationLoader();return loader.load(presentationJson);},_loadSharedData:function(dataJson)
{var loader=new scormplayer.manifest.json.SharedDataCollectionLoader();return loader.load(dataJson);}})});

Namespace.use(["scormplayer.player.sequence.request.NavigationRequest","scormplayer.player.sequence.rule.sequencing.RulesEvaluater","scormplayer.lms.ui.*"],function(){Namespace("scormplayer.player",{PlayerUIConnector:IPlayerUIListener.extend({_ui:null,_course:null,_resources:null,_listener:null,_controlsVisibilityListener:null,_trackingData:null,_sequencingRulesEvaluater:null,_activityStatusEvaluater:null,constructor:function(activityStatusEvaluater){this._activityStatusEvaluater=activityStatusEvaluater;this._sequencingRulesEvaluater=new RulesEvaluater();this._sequencingRulesEvaluater.activityStatusEvaluater(activityStatusEvaluater);},listener:function(listener){if(listener!==undefined)
{this._listener=listener;}
return this._listener;},setControlsVisibilityListener:function(listener){if(listener!==undefined){this._controlsVisibilityListener=listener;}
return this._controlsVisibilityListener;},course:function(course){if(course!==undefined)
{this._course=course;this._sequencingRulesEvaluater.course(course);}
return this._course;},resources:function(resources){if(resources!==undefined)
{this._resources=resources;}
return this._resources;},ui:function(ui){if(ui!==undefined)
{if(this._ui)
{this._ui.setListener(null);}
this._ui=ui;ui.setListener(this);}
return this._ui;},trackingData:function(data){if(data!==undefined)
{this._trackingData=data;}
return this._trackingData;},updateUI:function(){this._updateUIControls();this._ui.update();},_updateUIControls:function(){this._updateUIMenu();var previousControl=this._ui.control('previous');if(previousControl)
{var previousRequest=new NavigationRequest(NavigationRequest.PREVIOUS);previousControl.enabled(this._listener.isRequestValid(previousRequest));}
var nextControl=this._ui.control('continue');if(nextControl)
{var continueRequest=new NavigationRequest(NavigationRequest.CONTINUE);nextControl.enabled(this._listener.isRequestValid(continueRequest));}
this._updateUIControlsVisibility();},_updateUIControlsVisibility:function(){var uiControlsVisibility={previous:true,"continue":true,exit:true,exitAll:true,abandon:true,abandonAll:true,suspendAll:this._ui.getSuspendAllMayBeVisible()};var currentActivity=this._trackingData.currentActivity();if(currentActivity&&currentActivity.active())
{var courseItem=this._course.getItemById(currentActivity.itemId());if(courseItem instanceof scormplayer.manifest.CourseLeafItem&&courseItem.presentation())
{var hiddenUIControls=courseItem.presentation().hiddenElements();if(hiddenUIControls)
{for(var i in hiddenUIControls)
{var hiddenControl=hiddenUIControls[i];uiControlsVisibility[hiddenControl]=false;}}}}
for(var controlName in uiControlsVisibility)
{var control=this._ui.control(controlName);if(control)
{control.visible(uiControlsVisibility[controlName]);}}},_updateUIMenu:function(){var menuControl=this._ui.control('menu');if(menuControl&&menuControl instanceof MenuControlState)
{var rootActivity=this._trackingData.activities().rootActivity();var rootItem=this._createMenuItemForActivity(rootActivity);var childs=rootActivity.availableChilds();if(childs)
{for(var i in childs)
{var child=childs[i];this._appendActivityToMenu(rootItem,child);}}
menuControl.items([rootItem]);}
menuControl.visible(!this._isCourseHasSingleLeafItem());},_isCourseHasSingleLeafItem:function(){return this._trackingData.activities().countLeafActivities()==1;},_appendActivityToMenu:function(parentMenuItem,activity){var isActivityHidden=this._sequencingRulesEvaluater.isPreActionApplied(activity,RulesEvaluater.PRE_ACTION.hiddenFromChoice);if(isActivityHidden)
{return;}
var courseItem=this._course.getItemById(activity.itemId());if(courseItem.visible())
{var menuItem=this._createMenuItemForActivity(activity);parentMenuItem.addItem(menuItem);parentMenuItem=menuItem;}
var childsActivities=activity.availableChilds();if(childsActivities)
{for(var i in childsActivities)
{var childActivity=childsActivities[i];this._appendActivityToMenu(parentMenuItem,childActivity);}}},_createMenuItemForActivity:function(activity){var courseItemId=activity.itemId();var courseItem=this._course.getItemById(courseItemId);var menuItem=new MenuItem();menuItem.id(courseItem.id());menuItem.label(courseItem.title());menuItem.selected(activity===this._trackingData.currentActivity());menuItem.completed(this._activityStatusEvaluater.isActivityCompleted(activity,courseItem));menuItem.passed(this._activityStatusEvaluater.isActivitySatisfied(activity,courseItem));var request=new NavigationRequest(NavigationRequest.CHOICE,courseItem.id());menuItem.enabled(this._listener.isRequestValid(request));return menuItem;},_handleNavigationRequest:function(request){if(this._listener)
{this._listener.handleRequest(request);}},previousLinkClicked:function(){this._handleNavigationRequest(new NavigationRequest(NavigationRequest.PREVIOUS));},nextLinkClicked:function(){this._handleNavigationRequest(new NavigationRequest(NavigationRequest.CONTINUE));},menuItemClicked:function(itemId){this._handleNavigationRequest(new NavigationRequest(NavigationRequest.CHOICE,itemId));},exitLinkClicked:function(){this._handleNavigationRequest(new NavigationRequest(NavigationRequest.EXIT_ALL));},suspendLinkClicked:function(){this._handleNavigationRequest(new NavigationRequest(NavigationRequest.SUSPEND_ALL));},allControlsHidden:function(hidden){if(hidden){this._controlsVisibilityListener.onAllToolbarControlsHidden();}
else{this._controlsVisibilityListener.onSomeToolbarControlsVisible();}},showCourseItem:function(itemId){var item=this._course.getItemById(itemId);if(!item)
{throw"item with id '"+itemId+"' doesn't exists";}
var itemResource=this._resources.getResourceById(item.resourceId());if(!itemResource)
{throw"resource with id '"+item.resourceId()+"' doesn't exists";}
var resourceUrl=this._buildResourceUrl(itemResource.href(),item.parameters());this._ui.loadResource(resourceUrl);},unloadCourseItem:function(callback){this._ui.unloadResource(callback);},_buildResourceUrl:function(resourceHref,itemParameters){if(!itemParameters)
{return resourceHref;}
if(itemParameters[0]=='?'||itemParameters[1]=='&')
{itemParameters=itemParameters.substr(1);}
if(itemParameters[0]=='#')
{if(resourceHref.indexOf("#")!=-1)
{return resourceHref;}
return resourceHref+itemParameters;}
var hrefHasParameters=(resourceHref.indexOf("?")>-1);resourceHref+=(hrefHasParameters?"&":"?")+itemParameters;return resourceHref;}})})});

Namespace("scormplayer.lms",{ILMSConnector:EventDispatcher.extend({registerApi:function(apiName,api){},unregisterApi:function(apiName){},getPlayerUI:function(){},getUserInfo:function(){},saveContentState:function(contentState){},saveGlobalObjectives:function(objectives){},saveGlobalSharedData:function(data){},saveLessonStatus:function(lessonStatus){},commit:function(){},exit:function(){}})});

Namespace("scormplayer.player",{ISequenceControllerListener:Base.extend({handleSequenceAction:function(action){},onNavigationRequestHandled:function(){}})});

Namespace.use(["scormplayer.player.api.*","scormplayer.player.sequence.request.NavigationRequest"],function(){Namespace("scormplayer.player.api",{Api:IApi.extend({_api:null,_runTimeData:null,_runTimeDataWrapper:null,_courseItem:null,_initialized:false,_terminated:false,_lastError:ErrorType.NO_ERROR,_errors:null,_requestListener:null,_apiListener:null,_logger:null,constructor:function()
{this._api=this._createApiAdapter();this._errors=this._createErrors();this._runTimeDataWrapper=this._createRunTimeDataWrapper();this._logger=new scormplayer.log.NullLogger();},logger:function(logger)
{if(logger!==undefined)
{this._logger=logger;logger.register(this,"Api");}
return this._logger;},runTimeData:function(data)
{if(data!==undefined)this._runTimeData=data;return this._runTimeData;},courseItem:function(courseItem)
{if(courseItem!==undefined)this._courseItem=courseItem;return this._courseItem;},setRequestListener:function(listener)
{this._requestListener=listener;},setApiListener:function(listener)
{this._apiListener=listener;},api:function()
{return this._api;},_createApiAdapter:function(){},_createErrors:function(){},_createRunTimeDataWrapper:function(){},_initRunTimeData:function()
{this._runTimeDataWrapper.runTimeData(this._runTimeData);this._runTimeDataWrapper.courseItem(this._courseItem);this._runTimeData.resetChanges();},reset:function()
{this._logger.log(this,"reset()");this._initialized=false;this._terminated=false;this._resetLastError();},_resetLastError:function()
{this._lastError=ErrorType.NO_ERROR;},initialize:function(param)
{var initialized=false;this._resetLastError();if(param!=="")
{this._lastError=ErrorType.GENERAL_ARGUMENT_ERROR;}
else if(this._initialized)
{this._lastError=ErrorType.ALREADY_INIT;}
else if(this._terminated)
{this._lastError=ErrorType.CONTENT_INSTANCE_TERMINATED;}
else
{this._initRunTimeData();this._initialized=true;initialized=true;}
this._logger.log(this,"initialize() -> "+initialized+"; error = "+this._lastError);return initialized;},terminate:function(param)
{var terminated=false;this._resetLastError();if(param!=="")
{this._lastError=ErrorType.GENERAL_ARGUMENT_ERROR;}
else if(!this._initialized)
{this._lastError=ErrorType.TERMINATION_BEFORE_INIT;}
else if(this._terminated)
{this._lastError=ErrorType.ALREADY_TERMINATED;}
else
{terminated=true;this._terminated=true;if(this._apiListener)
{this._apiListener.onApiTerminated();}}
this._logger.log(this,"terminate() -> "+terminated+"; error = "+this._lastError);return terminated;},getValue:function(varName)
{var value=null;this._resetLastError();if(!this._initialized)
{this._lastError=ErrorType.GET_VALUE_BEFORE_INIT;}
else if(this._terminated)
{this._lastError=ErrorType.GET_VALUE_AFTER_TERMINATION;}
else if(!varName||varName=="")
{this._lastError=ErrorType.GENERAL_GET_ERROR;}
else
{try
{value=this._runTimeDataWrapper.getValue(varName);}
catch(errorType)
{this._lastError=errorType;}}
this._logger.log(this,"getValue("+varName+") -> '"+value+"'; error = "+this._lastError);return value;},setValue:function(varName,varValue)
{var valueSetted=false;this._resetLastError();if(!this._initialized)
{this._lastError=ErrorType.SET_VALUE_BEFORE_INIT;}
else if(this._terminated)
{this._lastError=ErrorType.SET_VALUE_AFTER_TERMINATION;}
else if(!varName||varName=="")
{this._lastError=ErrorType.GENERAL_SET_ERROR;}
else
{try
{this._runTimeDataWrapper.setValue(varName,varValue);valueSetted=true;}
catch(errorType)
{this._lastError=errorType;}}
this._logger.log(this,"setValue("+varName+", "+varValue+") -> "+valueSetted+"; error = "+this._lastError);return valueSetted;},commit:function(param)
{var commited=false;this._resetLastError();if(param!=="")
{this._lastError=ErrorType.GENERAL_ARGUMENT_ERROR;}
else if(!this._initialized)
{this._lastError=ErrorType.COMMIT_BEFORE_INIT;}
else if(this._terminated)
{this._lastError=ErrorType.COMMIT_AFTER_TERMINATION;}
else
{if(this._apiListener)
{this._apiListener.onApiCommited();}
commited=true;}
this._logger.log(this,"commit() -> "+commited+"; error = "+this._lastError);return commited;},getLastError:function()
{return this._errors.getErrorCode(this._lastError);},getErrorString:function(errorCode)
{if(!errorCode)
{return"";}
return this._errors.getErrorMessage(errorCode);},getDiagnostic:function(errorCode)
{if(!errorCode)
{return this._errors.getDiagnosticByErrorType(this._lastError);}
return this._errors.getDiagnosticByErrorCode(errorCode);},terminated:function()
{return this._terminated;},initialized:function()
{return this._initialized;}})});});

Namespace.use(["scormplayer.player.api.ErrorType","scormplayer.player.api.scorm2004.type.interaction.SetValue","scormplayer.player.api.scorm2004.type.LangStringValue","scormplayer.player.api.scorm2004.DelimitersParser"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{FillInValue:SetValue.extend({constructor:function()
{this.base(new LangStringValue());},validateValue:function(value)
{value=DelimitersParser.parse(value,{case_matters:["true","false"],order_matters:["true","false"]});if(value===null)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
this.base(value);}})});});

Namespace.use(["scormplayer.player.api.ErrorType","scormplayer.player.api.scorm2004.type.LangStringValue","scormplayer.player.api.scorm2004.DelimitersParser"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{LongFillInValue:LangStringValue.extend({validateValue:function(value)
{value=DelimitersParser.parse(value,{case_matters:["true","false"]});if(value===null)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
this.base(value);}})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.LongIdValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{LikertValue:LongIdValue.extend({})});});

Namespace.use(["scormplayer.player.api.ErrorType","scormplayer.player.api.scorm2004.type.interaction.SetValue","scormplayer.player.api.scorm2004.type.interaction.PairValue","scormplayer.player.api.scorm2004.type.LongIdValue","scormplayer.player.api.scorm2004.DelimitersParser"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{PerformanceValue:SetValue.extend({constructor:function()
{this.base(new PairValue(new LongIdValue(),null,PairValue.RESTRICTIONS.allowEmpty));},validateValue:function(value)
{value=DelimitersParser.parse(value,{order_matters:["true","false"]});if(value===null)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
this.base(value);}})});});

Namespace.use(["scormplayer.player.api.ErrorType","scormplayer.player.api.scorm2004.type.interaction.PairValue","scormplayer.player.api.type.NumberValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.correct_response",{NumericValue:PairValue.extend({constructor:function()
{this.base(new NumberValue(),new NumberValue(),PairValue.RESTRICTIONS.allowEmpty,"[:]");},validateValue:function(value)
{if(value.indexOf(this._delimiter)<-1)
{this._firstItemType.validateValue(value);}
else
{this.base(value);var pair=value.split(this._delimiter);if(pair[0]!=""&&pair[1]!="")
{var lowerBounder=parseFloat(pair[0]);var topBounder=parseFloat(pair[1]);if(lowerBounder>topBounder)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}}}})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.interaction.correct_response.TrueFalseValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{TrueFalseValue:TrueFalseValue.extend({})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.interaction.correct_response.MultipleChoiceValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{MultipleChoiceValue:MultipleChoiceValue.extend({})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.interaction.SetValue","scormplayer.player.api.scorm2004.type.LangStringValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{FillInValue:SetValue.extend({constructor:function()
{this.base(new LangStringValue());}})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.LangStringValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{LongFillInValue:LangStringValue.extend({})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.LongIdValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{LikertValue:LongIdValue.extend({})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.interaction.correct_response.MatchingValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{MatchingValue:MatchingValue.extend({validateValue:function(value)
{if(value=="")
{return;}
this.base(value);}})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.interaction.SetValue","scormplayer.player.api.scorm2004.type.interaction.PairValue","scormplayer.player.api.scorm2004.type.LongIdValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{PerformanceValue:SetValue.extend({constructor:function()
{this.base(new PairValue(new LongIdValue(),null,PairValue.RESTRICTIONS.allowEmpty));}})});});

Namespace.use(["scormplayer.player.api.scorm2004.type.interaction.correct_response.SequencingValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{SequencingValue:SequencingValue.extend({})});});

Namespace.use(["scormplayer.player.api.type.NumberValue"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction.learner_response",{NumericValue:NumberValue.extend({})});});

Namespace("scormplayer.player",{TrackingRunTimeDataMapper:scormplayer.player.ITrackingRunTimeDataMapper.extend({_course:null,_logger:null,_userInfo:null,_activityStatusEvaluater:null,constructor:function(activityStatusEvaluater)
{this._activityStatusEvaluater=activityStatusEvaluater;},course:function(course)
{if(course!==undefined)this._course=course;return this._course;},logger:function(logger)
{if(logger!==undefined)
{this._logger=logger;logger.register(this,"TrackingRunTimeDataMapper");}
return this._logger;},userInfo:function(user)
{if(user!==undefined)this._userInfo=user;return this._userInfo;},activityToRunTimeData:function(activity,runTimeData)
{this._loadRunTimeData(runTimeData,activity);if(this._userInfo)
{this._userInfoToRunTimeData(this._userInfo,runTimeData);}},runTimeDataToActivity:function(runTimeData,activity)
{var currentAttempt=activity.currentAttempt();activity.primaryObjective().useObjectives(currentAttempt.objectives());this._saveRunTimeData(runTimeData,activity);},finalRunTimeDataToActivity:function(runTimeData,activity,playerReady)
{this.runTimeDataToActivity(runTimeData,activity);this._setFailStatusesIfPlayerNotReady(playerReady);},_setFailStatusesIfPlayerNotReady:function(playerReady)
{if(!playerReady)
{var primaryObjective=activity.primaryObjective();primaryObjective.completed(false);primaryObjective.satisfied(false);}},_saveRunTimeData:function(runTimeData,activity)
{var activityRunTimeData=new scormplayer.player.api.RunTimeData();runTimeData.copy(activityRunTimeData,this._getStoredRunTimeDataFields());activity.currentAttempt().runTimeData(activityRunTimeData);},_loadRunTimeData:function(runTimeData,activity)
{var attempt=activity.currentAttempt();if(attempt.runTimeData())
{attempt.runTimeData().copy(runTimeData,this._getStoredRunTimeDataFields());}},_getActivityCourseItem:function(activity)
{return this._course.getItemById(activity.itemId());},_scoreToRunTimeData:function(score,runTimeData)
{var fields={raw:score.raw(),scaled:score.scaled(),min:score.min(),max:score.max()};for(var i in fields)
{if(fields[i]!==null)
{runTimeData.set("score."+i,fields[i]);}}},_scoreFromRunTimeData:function(score,runTimeData)
{var scoreData=runTimeData.get("score");if(scoreData)
{scoreData=scoreData.toPlainObject();if("scaled"in scoreData)
{score.scaled(parseFloat(scoreData["scaled"]));}
if("raw"in scoreData)
{score.raw(parseFloat(scoreData["raw"]));}
if("min"in scoreData)
{score.min(parseFloat(scoreData["min"]));}
if("max"in scoreData)
{score.max(parseFloat(scoreData["max"]));}}},_getStoredRunTimeDataFields:function(){},_userInfoToRunTimeData:function(userInfo,runTimeData){}})});

Namespace.use(["scormplayer.player.storage.ActivitiesCollectionExporter","scormplayer.player.storage.ObjectivesCollectionExporter"],function(){Namespace("scormplayer.player.storage",{TrackingDataExporter:{exportTrackingData:function(data,course,activityStatusEvaluater)
{var dataJson={};var suspendedActivity=data.suspendedActivity();if(suspendedActivity)
{dataJson.suspendedActivity=suspendedActivity.itemId();}
var activities=data.activities();if(activities)
{dataJson.activities=ActivitiesCollectionExporter.exportActivities(activities,course,activityStatusEvaluater);}
var globalObjectives=data.globalObjectives();if(globalObjectives)
{dataJson.globalObjectives=ObjectivesCollectionExporter.exportObjectives(globalObjectives);}
return dataJson;}}});});

Namespace("scormplayer.player.storage",{SharedDataExporter:{exportSharedData:function(sharedData)
{return sharedData.toPlainObject();}}});

Namespace.use("scormplayer.player.*",function(){Namespace("scormplayer.player.storage",{TrackingDataImporter:{importTrackingData:function(dataJson)
{var trackingData=new tracking.TrackingData();if("activities"in dataJson)
{var actitivies=storage.ActivitiesCollectionImporter.importActivities(dataJson.activities);trackingData.activities(actitivies);if("suspendedActivity"in dataJson)
{var suspendedActivity=actitivies.getActivityByItemId(dataJson.suspendedActivity);trackingData.suspendedActivity(suspendedActivity);}}
if("globalObjectives"in dataJson)
{var objectives=storage.ObjectivesCollectionImporter.importObjectives(dataJson.globalObjectives);trackingData.globalObjectives(objectives);}
return trackingData;}}});});

Namespace("scormplayer.player.storage",{SharedDataImporter:{importSharedData:function(sharedDataJson)
{var sharedData=new scormplayer.player.SharedData();for(var i in sharedDataJson)
{sharedData.set(i,sharedDataJson[i]);}
return sharedData;}}});

Namespace("utils",{TasksQueue:Base.extend({_tasks:null,_processing:false,_currentTaskIndex:0,_completeHandler:null,constructor:function()
{this._tasks=[];},completeHandler:function(handler)
{if(handler!==undefined)this._completeHandler=handler;return this._completeHandler;},processing:function()
{return this._processing;},add:function(task)
{this._tasks.push(task);},run:function()
{if(this.processing())
{return;}
this._processing=true;this._currentTaskIndex=-1;this.next.apply(this,arguments);},next:function()
{if(!this.processing())
{return;}
var nextTaskIndex=this._currentTaskIndex+1;if(nextTaskIndex>=this._tasks.length)
{this._onProcessingComplete();return;}
var taskArguments=[handler(this,"next")].concat(Array.prototype.slice.call(arguments));this._currentTaskIndex=nextTaskIndex;this._tasks[nextTaskIndex].apply(null,taskArguments);},skip:function(countSkippedTasks)
{countSkippedTasks=(countSkippedTasks===undefined?1:countSkippedTasks);if(this.processing())
{this._currentTaskIndex+=countSkippedTasks;}},end:function()
{this._onProcessingComplete();},_onProcessingComplete:function()
{this._processing=false;if(this._completeHandler)
{this._completeHandler();}}})});

Namespace.use("scormplayer.player.sequence.request.*",function(){Namespace("scormplayer.player.sequence",{NavigationRequestHandler:Base.extend({_course:null,_trackingData:null,_requestHandlers:null,constructor:function()
{var requestHandlers={START:"_handleStartRequest",RESUME_ALL:"_handleResumeAllRequest",CHOICE:"_handleChoiceRequest",PREVIOUS:"_handlePreviousRequest",CONTINUE:"_handleContinueRequest",EXIT:"_handleExitRequest",EXIT_ALL:"_handleExitAllRequest",SUSPEND_ALL:"_handleSuspendAllRequest",ABANDON:"_handleAbandonRequest",ABANDON_ALL:"_handleAbandonAllRequest",JUMP:"_handleJumpRequest"};this._requestHandlers={};for(var requestName in requestHandlers)
{var requestType=NavigationRequest[requestName];this._requestHandlers[requestType]=requestHandlers[requestName];}},trackingData:function(data)
{if(data!==undefined)this._trackingData=data;return this._trackingData;},course:function(course)
{if(course!==undefined)this._course=course;return this._course;},handle:function(next,request)
{if(arguments.length==1)
{request=next;next=null;}
var result=null;if(request.type()in this._requestHandlers)
{var handler=this._requestHandlers[request.type()];result=this[handler].apply(this,[request]);}
if(next)
{next(result);}
return result;},_handleStartRequest:function()
{return this._createHandleResult(null,new SequenceRequest(SequenceRequest.START));},_handleResumeAllRequest:function()
{if(!this._trackingData.currentActivity()&&this._trackingData.suspendedActivity())
{return this._createHandleResult(null,new SequenceRequest(SequenceRequest.RESUME_ALL));}
return null;},_handleChoiceRequest:function(request)
{var targetActivity=this._trackingData.activities().getActivityByItemId(request.itemId());if(!targetActivity)
{return null;}
var currentActivityActive=this._trackingData.currentActivity()?this._trackingData.currentActivity().active():false;if(currentActivityActive)
{var currentActivity=this._trackingData.currentActivity();if(targetActivity.parent()===currentActivity.parent())
{var controlMode=this._getActivitySequencingData(currentActivity).controlMode();if(!controlMode.choiceExitEnabled())
{return null;}}}
var terminationRequest=null;if(currentActivityActive)
{terminationRequest=new TerminationRequest(TerminationRequest.EXIT);}
var sequenceRequest=new SequenceRequest(SequenceRequest.CHOICE,request.itemId());return this._createHandleResult(terminationRequest,sequenceRequest);},_handleContinueRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity)
{return null;}
if(!currentActivity.parent())
{return null;}
var parentSequencingData=this._getActivitySequencingData(currentActivity.parent());if(!parentSequencingData.controlMode().flowControlEnabled())
{return null;}
return this._createHandleResult(currentActivity.active()?new TerminationRequest(TerminationRequest.EXIT):null,new SequenceRequest(SequenceRequest.CONTINUE));},_handlePreviousRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity)
{return null;}
if(!currentActivity.parent())
{return null;}
var parentSequencingData=this._getActivitySequencingData(currentActivity.parent());var parentControlMode=parentSequencingData.controlMode();if(!parentControlMode.flowControlEnabled()||parentControlMode.isForwardOnly())
{return null;}
return this._createHandleResult(currentActivity.active()?new TerminationRequest(TerminationRequest.EXIT):null,new SequenceRequest(SequenceRequest.PREVIOUS));},_handleExitRequest:function()
{var currentActivityActive=this._trackingData.currentActivity()?this._trackingData.currentActivity().active():false;if(!currentActivityActive)
{return null;}
return this._createHandleResult(new TerminationRequest(TerminationRequest.EXIT),new SequenceRequest(SequenceRequest.EXIT));},_handleExitAllRequest:function()
{if(!this._trackingData.currentActivity())
{return null;}
return this._createHandleResult(new TerminationRequest(TerminationRequest.EXIT_ALL),new SequenceRequest(SequenceRequest.EXIT));},_handleSuspendAllRequest:function()
{if(!this._trackingData.currentActivity())
{return null;}
return this._createHandleResult(new TerminationRequest(TerminationRequest.SUSPEND_ALL),new SequenceRequest(SequenceRequest.EXIT));},_handleAbandonRequest:function()
{var currentActivityActive=this._trackingData.currentActivity()?this._trackingData.currentActivity().active():false;if(!currentActivityActive)
{return null;}
return this._createHandleResult(new TerminationRequest(TerminationRequest.ABANDON),new SequenceRequest(SequenceRequest.EXIT));},_handleAbandonAllRequest:function()
{if(!this._trackingData.currentActivity())
{return null;}
return this._createHandleResult(new TerminationRequest(TerminationRequest.ABANDON_ALL),new SequenceRequest(SequenceRequest.EXIT));},_handleJumpRequest:function(request)
{var currentActivityActive=this._trackingData.currentActivity()?this._trackingData.currentActivity().active():false;var terminationRequest=null;if(currentActivityActive)
{terminationRequest=new TerminationRequest(TerminationRequest.EXIT);}
var sequenceRequest=new SequenceRequest(SequenceRequest.JUMP,request.itemId());return this._createHandleResult(terminationRequest,sequenceRequest);},_getActivitySequencingData:function(activity)
{var courseItem=this._course.getItemById(activity.itemId());return courseItem.sequencingData();},_createHandleResult:function(terminationRequest,sequenceRequest)
{return new this.constructor.Result(terminationRequest,sequenceRequest);}},{Result:Base.extend({_terminationRequest:null,_sequenceRequest:null,constructor:function(terminationRequest,sequenceRequest)
{this._terminationRequest=terminationRequest;this._sequenceRequest=sequenceRequest;},terminationRequest:function()
{return this._terminationRequest;},sequenceRequest:function()
{return this._sequenceRequest;}})})});});

Namespace.use(["scormplayer.player.sequence.request.*","scormplayer.player.sequence.rule.sequencing.RulesEvaluater"],function(){Namespace("scormplayer.player.sequence",{TerminationRequestHandler:Base.extend({_contentState:null,_trackingData:null,_course:null,_courseItemLoader:null,_activityAttemptsManager:null,_sequenceRulesEvaluater:null,_requestHandlers:null,constructor:function(activityStatusEvaluater)
{var requestHandlers={EXIT:"_handleExitRequest",EXIT_ALL:"_handleExitAllRequest",ABANDON:"_handleAbandonRequest",ABANDON_ALL:"_handleAbandonAllRequest",SUSPEND_ALL:"_handleSuspendAllRequest"};this._requestHandlers={};for(var requestName in requestHandlers)
{var requestType=TerminationRequest[requestName];this._requestHandlers[requestType]=requestHandlers[requestName];}
this._sequenceRulesEvaluater=new RulesEvaluater();this._sequenceRulesEvaluater.activityStatusEvaluater(activityStatusEvaluater);},course:function(course)
{if(course!==undefined)
{this._course=course;this._sequenceRulesEvaluater.course(course);}
return this._course;},contentState:function(state)
{if(state!==undefined)
{this._contentState=state;this._trackingData=state.trackingData();}
return this._contentState;},courseItemLoader:function(loader)
{if(loader!==undefined)this._courseItemLoader=loader;return this._courseItemLoader;},activityAttemptsManager:function(manager)
{if(manager!==undefined)this._activityAttemptsManager=manager;return this._activityAttemptsManager;},handle:function(next,request)
{var currentActivity=this._trackingData.currentActivity();if(currentActivity&&request.type()in this._requestHandlers)
{if(currentActivity.active()&&this._activityItemHasResource(currentActivity))
{var thisPtr=this;this._courseItemLoader.unloadCourseItem(function(){thisPtr._handleRequest(next,request);});}
else
{this._handleRequest(next,request);}}
else
{next();}},_handleRequest:function(next,request)
{var handler=this._requestHandlers[request.type()];var result=this[handler].apply(this,[request]);next(result);},_handleExitRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity.active())
{return null;}
this._contentState.commitState();this._activityAttemptsManager.stopActivityAttempt(currentActivity);this._applySequencingExitConditionRules();currentActivity=this._trackingData.currentActivity();while(true)
{var postAction=this._applySequencingPostConditionRules(currentActivity);if(postAction.terminationRequest())
{switch(postAction.terminationRequest().type())
{case TerminationRequest.EXIT_PARENT:if(!currentActivity.parent())
{return null;}
currentActivity=currentActivity.parent();this._trackingData.currentActivity(currentActivity);this._activityAttemptsManager.stopActivityAttempt(currentActivity);continue;case TerminationRequest.EXIT_ALL:return this._handleExitAllRequest(postAction.sequenceRequest());}}
if(!currentActivity.parent()&&!(postAction.sequenceRequest()&&postAction.sequenceRequest().type()==SequenceRequest.RETRY))
{return this._createHandleResult(new SequenceRequest(SequenceRequest.EXIT));}
return this._createHandleResult(postAction.sequenceRequest());}},_applySequencingExitConditionRules:function()
{var activityPath=this._trackingData.activities().getActivityPath(this._trackingData.currentActivity());for(var i=0;i<activityPath.length-1;++i)
{var activity=activityPath[i];var activityExited=this._sequenceRulesEvaluater.isExitActionApplied(activity,RulesEvaluater.EXIT_ACTION.exit);if(activityExited)
{this._activityAttemptsManager.stopDescendentAttempts(activity);this._activityAttemptsManager.stopActivityAttempt(activity);this._trackingData.currentActivity(activity);break;}}},_applySequencingPostConditionRules:function(activity)
{if(activity.suspended())
{return new this.constructor.PostConditionAction();}
var postAction=this._sequenceRulesEvaluater.getAppliedPostAction(activity);var terminationRequest=null;var sequenceRequest=null;switch(postAction)
{case RulesEvaluater.POST_ACTION.retry:case RulesEvaluater.POST_ACTION["continue"]:case RulesEvaluater.POST_ACTION.previous:sequenceRequest=new SequenceRequest(postAction);break;case RulesEvaluater.POST_ACTION.exitParent:case RulesEvaluater.POST_ACTION.exitAll:terminationRequest=new TerminationRequest(postAction);break;case RulesEvaluater.POST_ACTION.retryAll:terminationRequest=new TerminationRequest(TerminationRequest.EXIT_ALL);sequenceRequest=new SequenceRequest(SequenceRequest.RETRY);break;}
return new this.constructor.PostConditionAction(terminationRequest,sequenceRequest);},_handleExitAllRequest:function(request)
{var currentActivity=this._trackingData.currentActivity();if(currentActivity.active())
{this._activityAttemptsManager.stopActivityAttempt(currentActivity);}
var rootActivity=this._trackingData.activities().rootActivity();this._activityAttemptsManager.stopDescendentAttempts(rootActivity);this._activityAttemptsManager.stopActivityAttempt(rootActivity);this._trackingData.currentActivity(rootActivity);var nextRequest=request;if(!(request instanceof SequenceRequest))
{nextRequest=new SequenceRequest(SequenceRequest.EXIT);}
return this._createHandleResult(nextRequest);},_handleAbandonRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity.active())
{return null;}
this._abandonActivity(currentActivity);return this._createHandleResult(null);},_handleAbandonAllRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(currentActivity.active())
{this._abandonActivity(currentActivity);}
var rootActivity=this._trackingData.activities().rootActivity();this._activityAttemptsManager.stopDescendentAttempts(rootActivity);this._activityAttemptsManager.stopActivityAttempt(rootActivity);this._trackingData.currentActivity(rootActivity);return this._createHandleResult(new SequenceRequest(SequenceRequest.EXIT));},_abandonActivity:function(activity)
{this._contentState.rollbackState();this._activityAttemptsManager.stopActivityAttempt(activity);},_handleSuspendAllRequest:function()
{var currentActivity=this._trackingData.currentActivity();var suspendedActivity=null;if(currentActivity.active()||currentActivity.suspended())
{suspendedActivity=currentActivity;}
else if(currentActivity.parent())
{suspendedActivity=currentActivity.parent();}
else
{return null;}
var activityPath=this._trackingData.activities().getActivityPath(suspendedActivity);for(var i=0;i<activityPath.length;++i)
{var activityAttempt=activityPath[i].currentAttempt();if(activityAttempt)
{activityAttempt.active(false);activityAttempt.suspended(true);}}
this._trackingData.suspendedActivity(suspendedActivity);var rootActivity=this._trackingData.activities().rootActivity();this._trackingData.currentActivity(rootActivity);return this._createHandleResult(new SequenceRequest(SequenceRequest.EXIT));},_createHandleResult:function(sequenceRequest)
{return new this.constructor.Result(sequenceRequest);},_activityItemHasResource:function(activity)
{var courseItem=this._course.getItemById(activity.itemId());return courseItem.hasResource();}},{Result:Base.extend({_sequenceRequest:null,constructor:function(sequenceRequest)
{this._sequenceRequest=sequenceRequest;},sequenceRequest:function()
{return this._sequenceRequest;}}),PostConditionAction:Base.extend({_terminationRequest:null,_sequenceRequest:null,constructor:function(terminationRequest,sequenceRequest)
{this._terminationRequest=terminationRequest;this._sequenceRequest=sequenceRequest;},terminationRequest:function()
{return this._terminationRequest;},sequenceRequest:function()
{return this._sequenceRequest;}})})})});

Namespace.use(["scormplayer.player.sequence.request.*","scormplayer.player.sequence.*"],function(){Namespace("scormplayer.player.sequence",{SequenceRequestHandler:Base.extend({_trackingData:null,_course:null,_activityManager:null,_attemptsManager:null,_flowProcessor:null,_choiceFlowProcessor:null,_requestHandlers:null,constructor:function(activityStatusEvaluater)
{this._flowProcessor=new FlowProcessor(activityStatusEvaluater);this._choiceFlowProcessor=new ChoiceFlowProcessor(activityStatusEvaluater);var requestHandlers={START:"_handleStartRequest",CHOICE:"_handleChoiceRequest",PREVIOUS:"_handlePreviousRequest",CONTINUE:"_handleContinueRequest",EXIT:"_handleExitRequest",RETRY:"_handleRetryRequest",RESUME_ALL:"_handleResumeAllRequest",JUMP:"_handleJumpRequest"};this._requestHandlers={};for(var requestName in requestHandlers)
{var requestType=SequenceRequest[requestName];this._requestHandlers[requestType]=requestHandlers[requestName];}},trackingData:function(data)
{if(data!==undefined)
{this._trackingData=data;this._flowProcessor.trackingData(data);this._choiceFlowProcessor.trackingData(data);}
return this._trackingData;},course:function(course)
{if(course!==undefined)
{this._course=course;this._flowProcessor.course(course);this._choiceFlowProcessor.course(course);}
return this._course;},activityManager:function(manager)
{if(manager!==undefined)
{this._activityManager=manager;this._flowProcessor.activityManager(manager);this._choiceFlowProcessor.activityManager(manager);}
return this._activityManager;},activityAttemptsManager:function(manager)
{if(manager!==undefined)this._attemptsManager=manager;return this._attemptsManager;},handle:function(next,request)
{if(arguments.length==1)
{request=next;next=null;}
var result=null;if(request.type()in this._requestHandlers)
{var handler=this._requestHandlers[request.type()];result=this[handler].apply(this,[request]);}
if(next)
{next(result);}
return result;},_handleStartRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(currentActivity)
{return null;}
var activities=this._trackingData.activities();if(activities.countLeafActivities()==1)
{var leafActivity=activities.getLeafActivityByIndex(0);return this._createHandleResult(new DeliveryRequest(DeliveryRequest.DELIVER,leafActivity.itemId()));}
var rootActivity=activities.rootActivity();var flowResult=this._flowProcessor.flow(rootActivity,FlowProcessor.DIRECTION.forward,true);if(flowResult)
{return this._flowResultToHandleResult(flowResult);}
return null;},_handleChoiceRequest:function(request)
{var targetItemId=request.itemId();var targetActivity=this._trackingData.activities().getActivityByItemId(targetItemId);if(targetActivity)
{var deliveryRequest=this._choiceFlowProcessor.process(targetActivity);if(deliveryRequest)
{return this._createHandleResult(deliveryRequest);}}
return null;},_handlePreviousRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity)
{return null;}
var flowResult=this._flowProcessor.flow(currentActivity,FlowProcessor.DIRECTION.backward,false);if(flowResult)
{return this._flowResultToHandleResult(flowResult);}
return null;},_handleContinueRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity)
{return null;}
var flowToChilds=false;var courseItem=this._course.getItemById(currentActivity.itemId());if(courseItem.hasResource()&&!currentActivity.isLeaf())
{flowToChilds=true;}
var flowResult=this._flowProcessor.flow(currentActivity,FlowProcessor.DIRECTION.forward,flowToChilds);if(flowResult)
{return this._flowResultToHandleResult(flowResult);}
return null;},_handleRetryRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity||(currentActivity.active()||currentActivity.suspended()))
{return null;}
if(currentActivity.isLeaf())
{return this._createHandleResult(new DeliveryRequest(DeliveryRequest.DELIVER,currentActivity.itemId()));}
else
{var rootActivity=this._trackingData.activities().rootActivity();if(currentActivity==rootActivity)
{this._attemptsManager.startActivityAttempt(rootActivity);}}
var flowResult=this._flowProcessor.flow(currentActivity,FlowProcessor.DIRECTION.forward,true);if(flowResult)
{return this._flowResultToHandleResult(flowResult);}
return null;},_handleResumeAllRequest:function()
{if(!this._trackingData.currentActivity()&&this._trackingData.suspendedActivity())
{var activity=this._trackingData.suspendedActivity();this._trackingData.suspendedActivity(null);var deliveryRequest=this._choiceFlowProcessor.process(activity,false);if(deliveryRequest)
{return this._createHandleResult(deliveryRequest);}}
return null;},_flowResultToHandleResult:function(flowResult)
{var deliveryRequest=null;if(flowResult.itemId())
{deliveryRequest=new DeliveryRequest(DeliveryRequest.DELIVER,flowResult.itemId());}
return this._createHandleResult(deliveryRequest,flowResult.endSession());},_handleExitRequest:function()
{var currentActivity=this._trackingData.currentActivity();if(!currentActivity||currentActivity.active())
{return null;}
return this._createHandleResult(null,this._trackingData.activities().rootActivity()==currentActivity);},_handleJumpRequest:function(request)
{var targetActivity=this._trackingData.activities().getActivityByItemId(request.itemId());if(!targetActivity||!this._trackingData.activities().isActivityAvailable(targetActivity)||!this._activityManager.canDeliverActivity(targetActivity))
{return null;}
return this._createHandleResult(new DeliveryRequest(DeliveryRequest.DELIVER,targetActivity.itemId()));},_createHandleResult:function(deliveryRequest,endSession)
{endSession=(endSession===undefined?false:endSession);return new this.constructor.Result(deliveryRequest,endSession);}},{Result:Base.extend({_deliveryRequest:null,_endSession:false,constructor:function(deliveryRequest,endSession)
{this._deliveryRequest=deliveryRequest;this._endSession=endSession;},deliveryRequest:function()
{return this._deliveryRequest;},endSession:function()
{return this._endSession;}})})});});

Namespace.use("scormplayer.player.sequence.request.*",function(){Namespace("scormplayer.player.sequence",{DeliveryRequestHandler:Base.extend({_contentState:null,_trackingData:null,_course:null,_attemptsManager:null,_requestHandlers:null,constructor:function()
{this._requestHandlers={};this._requestHandlers[DeliveryRequest.DELIVER]="_handleDeliverRequest";},contentState:function(state)
{if(state!==undefined)
{this._contentState=state;this._trackingData=state.trackingData();}
return this._contentState;},activityAttemptsManager:function(manager)
{if(manager!==undefined)this._attemptsManager=manager;return this._attemptsManager;},course:function(course)
{if(course!==undefined)this._course=course;return this._course;},handle:function(next,request)
{var result=null;if(request.type()in this._requestHandlers)
{var handler=this._requestHandlers[request.type()];result=this[handler].apply(this,[request]);}
next(result);},_isDeliveryRequestValid:function(request)
{return true;},_activityItemHasResource:function(activity)
{var courseItem=this._course.getItemById(activity.itemId());return courseItem.hasResource();},_handleDeliverRequest:function(request)
{if(!this._isDeliveryRequestValid(request))
{return null;}
var targetActivity=this._trackingData.activities().getActivityByItemId(request.itemId());var currentActivity=this._trackingData.currentActivity();if(currentActivity)
{this._attemptsManager.stopDescendentAttempts(targetActivity);}
this._attemptsManager.startActivityAttempt(targetActivity);this._trackingData.currentActivity(targetActivity);this._contentState.pushState();return this._createHandleResult(targetActivity.itemId(),this._activityItemHasResource(targetActivity));},_createHandleResult:function(itemId,deliverable)
{return new this.constructor.Result(itemId,deliverable);}},{Result:Base.extend({_itemId:null,_deliverable:false,constructor:function(itemId,deliverable)
{this._itemId=itemId;this._deliverable=deliverable;},itemId:function()
{return this._itemId;},deliverable:function()
{return this._deliverable;}})})});});

Namespace.use(["utils.ArrayUtils","scormplayer.player.tracking.*","scormplayer.player.sequence.rule.rollup.*"],function(){Namespace("scormplayer.player",{RollupProcessor:Base.extend({ROLLUP_ACTION:RulesEvaluater.ACTION,_activities:null,_activitiesStates:null,_course:null,_logger:null,_rulesEvaluater:null,_activityStatusEvaluater:null,_attemptsManager:null,_activitiesInitialized:false,_activitiesWithReadSatisfactionStatus:null,_activitiesWithReadSatisfactionMeasure:null,_activitiesWithReadCompletionStatus:null,_activitiesWithReadCompletionMeasure:null,_measureRollupActivities:null,_rulesRollupActivities:null,_isFirstRollupedActivity:false,constructor:function(activityStatusEvaluater)
{this._activityStatusEvaluater=activityStatusEvaluater;this._rulesEvaluater=new RulesEvaluater();this._rulesEvaluater.activityStatusEvaluater(activityStatusEvaluater);},logger:function(logger)
{if(logger!==undefined)
{this._logger=logger;logger.register(this,"RollupProcessor");}
return this._logger;},activities:function(activities)
{if(activities!==undefined)this._activities=activities;return this._activities;},course:function(course)
{if(course!==undefined)
{this._course=course;this._rulesEvaluater.course(course);}
return this._course;},activityAttemptsManager:function(manager)
{if(manager!==undefined)this._attemptsManager=manager;return this._attemptsManager;},_initActivities:function()
{this._activitiesWithReadSatisfactionStatus=this._initActivitiesWithGlobalObjectives("readSatisfiedStatus");this._activitiesWithReadSatisfactionMeasure=this._initActivitiesWithGlobalObjectives("readNormalizedMeasure");this._activitiesWithReadCompletionStatus=this._initActivitiesWithGlobalObjectives("readCompletionStatus");this._activitiesWithReadCompletionMeasure=this._initActivitiesWithGlobalObjectives("readProgressMeasure");},_initActivitiesWithGlobalObjectives:function(objectiveMapAttribute)
{var objectives={};this._activities.forEach(handler(this,"_findActivitiesWithGlobalObjectives"),objectives,objectiveMapAttribute);return objectives;},_findActivitiesWithGlobalObjectives:function(activity,objectives,objectiveMapAttribute)
{var activityObjectives=(activity.objectives()||[]);activityObjectives=activityObjectives.concat([activity.primaryObjective()]);for(var i in activityObjectives)
{var objective=activityObjectives[i];var objectiveMaps=objective.mapInfos();if(objectiveMaps)
{for(var j in objectiveMaps)
{var objectiveMap=objectiveMaps[j];if(objectiveMap.mappedAttribute(objectiveMapAttribute))
{var globalObjectiveId=objectiveMap.targetObjectiveId();if(!(globalObjectiveId in objectives))
{objectives[globalObjectiveId]=[];}
objectives[globalObjectiveId].push(activity);break;}}}}},_getDependedActivities:function(activity,activityObjectiveAttribute,activitiesWithSharedAttribute)
{var dependedActivities=[];var activityObjectives=(activity.objectives()||[]);activityObjectives=activityObjectives.concat([activity.primaryObjective()]);for(var i in activityObjectives)
{var objective=activityObjectives[i];var objectiveMaps=objective.mapInfos();if(objectiveMaps)
{for(var j in objectiveMaps)
{var objectiveMap=objectiveMaps[j];if(objectiveMap.mappedAttribute(activityObjectiveAttribute))
{var globalObjectiveId=objectiveMap.targetObjectiveId();if(globalObjectiveId in activitiesWithSharedAttribute)
{dependedActivities=dependedActivities.concat(activitiesWithSharedAttribute[globalObjectiveId]);}}}}}
return ArrayUtils.unique(dependedActivities,function(activity1,activity2){return activity1.itemId().localeCompare(activity2.itemId());});},_addDependedActivities:function(activity,dependedActivities,activityObjectiveAttribute,activitiesWithSharedAttribute)
{var newDependedActivities=this._getDependedActivities(activity,activityObjectiveAttribute,activitiesWithSharedAttribute);if(!newDependedActivities.length)
{return;}
var dependedActivitiesMap={};for(var i in dependedActivities)
{var activityId=dependedActivities[i].itemId();dependedActivitiesMap[activityId]=true;}
for(i in newDependedActivities)
{var dependedActivity=newDependedActivities[i];var dependedActivityId=dependedActivity.itemId();if(!(dependedActivityId in dependedActivitiesMap))
{dependedActivitiesMap[dependedActivityId]=true;dependedActivities.push(dependedActivity)}}},saveActivitiesStates:function()
{this._activitiesStates={};this._activities.forAvailable(handler(this,"_saveActivityState"));},_saveActivityState:function(activity)
{var primaryObjective=activity.primaryObjective();var attempt=(activity.currentAttempt()||activity.previousAttempt());if(attempt)
{primaryObjective.useObjectives(attempt.objectives());}
var activityState={satisfied:primaryObjective.satisfied(),completed:primaryObjective.completed()};this._activitiesStates[activity.itemId()]=activityState;},rollupActivity:function(activity,allowRollback)
{if(!this._activitiesInitialized)
{this._initActivities();this._activitiesInitialized=true;}
this._measureRollupActivities=[activity];this._rulesRollupActivities=[activity];this._isFirstRollupedActivity=true;for(var i=0;i<this._measureRollupActivities.length;++i)
{this._applyMeasureRollup(this._measureRollupActivities[i]);this._isFirstRollupedActivity=false;}
this._isFirstRollupedActivity=true;for(i=0;i<this._rulesRollupActivities.length;++i)
{this._applyRollupByRules(this._rulesRollupActivities[i],allowRollback);this._isFirstRollupedActivity=false;}},_prepareActivityForRollup:function(activity)
{if(!activity.currentAttempt()&&!activity.previousAttempt())
{this._createZeroAttempt(activity);}
var activeAttempt=(activity.currentAttempt()||activity.previousAttempt());activity.primaryObjective().useObjectives(activeAttempt.objectives());},_applyMeasureRollup:function(activity)
{this._addDependedActivities(activity,this._measureRollupActivities,'writeNormalizedMeasure',this._activitiesWithReadSatisfactionMeasure);this._addDependedActivities(activity,this._measureRollupActivities,'writeProgressMeasure',this._activitiesWithReadCompletionMeasure);var activityPath=this._activities.getActivityPath(activity);for(var i=activityPath.length-1;i>=0;--i)
{activity=activityPath[i];var firstActivity=(i==activityPath.length-1);var activityChanged=false;this._prepareActivityForRollup(activity);if(!firstActivity&&activity.isTracked())
{activityChanged=this._applyObjectiveMeasureRollup(activity)||activityChanged;activityChanged=this._applyCompletionMeasureRollup(activity)||activityChanged;}
this._applyObjectiveRollupUsingMeasure(activity);this._applyCompletionRollupUsingMeasure(activity);if(!activityChanged&&!firstActivity)
{break;}}},_applyObjectiveMeasureRollup:function(activity)
{var satisfactionMeasure=this._getRollupedSatisfactionMeasure(activity);var primaryObjective=activity.primaryObjective();var measureChanged=false;if(primaryObjective.scaledScore()!==satisfactionMeasure)
{primaryObjective.scaledScore(satisfactionMeasure);measureChanged=true;this._addDependedActivities(activity,this._measureRollupActivities,'writeNormalizedMeasure',this._activitiesWithReadSatisfactionMeasure);}
return measureChanged;},_applyCompletionMeasureRollup:function(activity)
{var completionMeasure=this._getRollupedCompletionMeasure(activity);var primaryObjective=activity.primaryObjective();var measureChanged=false;if(primaryObjective.completionMeasure()!==completionMeasure)
{primaryObjective.completionMeasure(completionMeasure);measureChanged=true;this._addDependedActivities(activity,this._measureRollupActivities,'writeProgressMeasure',this._activitiesWithReadCompletionMeasure);}
return measureChanged;},_applyRollupByRules:function(activity,allowRollback)
{this._addDependedActivities(activity,this._rulesRollupActivities,'writeSatisfiedStatus',this._activitiesWithReadSatisfactionStatus);this._addDependedActivities(activity,this._rulesRollupActivities,'writeCompletionStatus',this._activitiesWithReadCompletionStatus);var activityPath=this._activities.getActivityPath(activity);for(var i=activityPath.length-2;i>=0;--i)
{activity=activityPath[i];var activityChanged=false;if(activity.isTracked())
{this._prepareActivityForRollup(activity);activityChanged=this._applyObjectiveRollupUsingRules(activity,allowRollback)||activityChanged;activityChanged=this._applyCompletionRollupUsingRules(activity,allowRollback)||activityChanged;}
if(!activityChanged)
{break;}}},_applyObjectiveRollupUsingMeasure:function(activity)
{var localObjectivesChanged=this._updateActivityLocalObjectives(activity);if(localObjectivesChanged)
{this._addDependedActivities(activity,this._rulesRollupActivities,'writeSatisfiedStatus',this._activitiesWithReadSatisfactionStatus);}
var primaryObjectiveInfo=null;var sequencingData=this._getActivityCourseItem(activity).sequencingData();var objectivesInfo=sequencingData.objectives();if(objectivesInfo)
{primaryObjectiveInfo=objectivesInfo.primaryObjective();if(!(primaryObjectiveInfo&&primaryObjectiveInfo.isSatisfiedByMeasure()))
{return false;}}
else
{return false;}
if(activity.prevPrimaryObjective())
{this._updateObjectiveSatisfactionUsingMeasure(activity,activity.prevPrimaryObjective());}
var activityChanged=this._updateObjectiveSatisfactionUsingMeasure(activity,activity.primaryObjective());if(activityChanged)
{this._addDependedActivities(activity,this._rulesRollupActivities,'writeSatisfiedStatus',this._activitiesWithReadSatisfactionStatus);}
return activityChanged;},_updateActivityLocalObjectives:function(activity)
{var objectives=activity.objectives();if(!objectives)
{return false;}
var objectivesChanged=false;var objectivesMap={};for(var i in objectives)
{objectivesMap[objectives[i].id()]=objectives[i];}
var currentAttempt=(activity.currentAttempt()||activity.previousAttempt());var sequencingData=this._getActivityCourseItem(activity).sequencingData();var objectivesInfo=sequencingData.objectives();for(i=0;i<objectivesInfo.countLocalObjectives();++i)
{var objectiveInfo=objectivesInfo.getLocalObjectiveByIndex(i);if(objectiveInfo.isSatisfiedByMeasure())
{var objective=objectivesMap[objectiveInfo.id()];if(currentAttempt)
{objective.useObjectives(currentAttempt.objectives());}
objectivesChanged=this._updateObjectiveSatisfactionUsingMeasure(activity,objective)||objectivesChanged;}}
return objectivesChanged;},_updateObjectiveSatisfactionUsingMeasure:function(activity,objective)
{var courseItem=this._getActivityCourseItem(activity);var objectiveSatisfied=this._activityStatusEvaluater.isObjectiveSatisfied(activity,courseItem,objective);if(objective.satisfied()!==objectiveSatisfied)
{objective.satisfied(objectiveSatisfied);return true;}
return false;},_applyObjectiveRollupUsingRules:function(activity,allowRollback)
{var sequencingData=this._getActivityCourseItem(activity).sequencingData();var objectivesInfo=sequencingData.objectives();if(objectivesInfo)
{var primaryObjectiveInfo=objectivesInfo.primaryObjective();if(primaryObjectiveInfo&&primaryObjectiveInfo.isSatisfiedByMeasure())
{return false;}}
var activitySatisfied=null;if(this._rulesEvaluater.isActionApplied(activity,this.ROLLUP_ACTION.satisfied))
{activitySatisfied=true;}
else if(this._rulesEvaluater.isActionApplied(activity,this.ROLLUP_ACTION.notSatisfied))
{activitySatisfied=false;}
var primaryObjective=activity.primaryObjective();var currentStatus=primaryObjective.satisfied();var activityChanged=false;if(activitySatisfied!==null)
{if(currentStatus!==activitySatisfied)
{primaryObjective.satisfied(activitySatisfied);activityChanged=true;}}
else if(allowRollback&&this._activitiesStates&&activity.itemId()in this._activitiesStates)
{var prevStatus=this._activitiesStates[activity.itemId()].satisfied;if(currentStatus!==prevStatus)
{primaryObjective.satisfied(prevStatus);activityChanged=true;}}
if(activityChanged)
{this._addDependedActivities(activity,this._rulesRollupActivities,'writeSatisfiedStatus',this._activitiesWithReadSatisfactionStatus);}
return activityChanged;},_applyCompletionRollupUsingMeasure:function(activity)
{if(!this._isFirstRollupedActivity)
{return false;}
var courseItem=this._getActivityCourseItem(activity);var completionThreshold=courseItem.completionThreshold();if(!completionThreshold.completedByMeasure())
{return false;}
if(activity.prevPrimaryObjective())
{this._updateObjectiveCompletionUsingMeasure(activity,activity.prevPrimaryObjective());}
var activityChanged=this._updateObjectiveCompletionUsingMeasure(activity,activity.primaryObjective());if(activityChanged)
{this._addDependedActivities(activity,this._rulesRollupActivities,'writeCompletionStatus',this._activitiesWithReadCompletionStatus);}
return activityChanged;},_updateObjectiveCompletionUsingMeasure:function(activity,objective)
{var courseItem=this._getActivityCourseItem(activity);var objectiveCompleted=this._activityStatusEvaluater.isObjectiveCompleted(activity,courseItem,objective);if(objective.completed()!==objectiveCompleted)
{objective.completed(objectiveCompleted);return true;}
return false;},_applyCompletionRollupUsingRules:function(activity,allowRollback)
{var courseItem=this._getActivityCourseItem(activity);var completionThreshold=courseItem.completionThreshold();if(completionThreshold.completedByMeasure())
{return false;}
var activityCompleted=null;if(this._rulesEvaluater.isActionApplied(activity,this.ROLLUP_ACTION.completed))
{activityCompleted=true;}
else if(this._rulesEvaluater.isActionApplied(activity,this.ROLLUP_ACTION.incomplete))
{activityCompleted=false;}
var primaryObjective=activity.primaryObjective();var currentStatus=primaryObjective.completed();var activityChanged=false;if(activityCompleted!==null)
{if(currentStatus!==activityCompleted)
{primaryObjective.completed(activityCompleted);activityChanged=true;}}
else if(allowRollback&&this._activitiesStates&&activity.itemId()in this._activitiesStates)
{var prevStatus=this._activitiesStates[activity.itemId()].completed;if(prevStatus!==currentStatus)
{primaryObjective.completed(prevStatus);activityChanged=true;}}
if(activityChanged)
{this._addDependedActivities(activity,this._rulesRollupActivities,'writeCompletionStatus',this._activitiesWithReadCompletionStatus);}
return activityChanged;},_getRollupedSatisfactionMeasure:function(activity)
{var thisPtr=this;var getActivityMeasure=function(activity)
{return activity.primaryObjective().scaledScore();};var getActivityMeasureWeight=function(activity)
{var courseItem=thisPtr._getActivityCourseItem(activity);var sequencingData=courseItem.sequencingData();return sequencingData.rollupRules().objectiveMeasureWeight();};return this._getRollupedMeasure(activity,getActivityMeasure,getActivityMeasureWeight);},_getRollupedCompletionMeasure:function(activity)
{var thisPtr=this;var getActivityMeasure=function(activity)
{return activity.primaryObjective().completionMeasure();};var getActivityMeasureWeight=function(activity)
{var courseItem=thisPtr._getActivityCourseItem(activity);return courseItem.completionThreshold().progressWeight();};return this._getRollupedMeasure(activity,getActivityMeasure,getActivityMeasureWeight);},_getRollupedMeasure:function(activity,getActivityMeasure,getActivityMeasureWeight)
{var maxMeasureWeight=0;var measureWeight=null;var childs=activity.availableChilds();for(var i in childs)
{var childActivity=childs[i];if(childActivity.isTracked())
{var childMeasureWeight=getActivityMeasureWeight(childActivity);maxMeasureWeight+=childMeasureWeight;var childMeasure=getActivityMeasure(childActivity);if(childMeasure!==null)
{if(measureWeight===null)
{measureWeight=0;}
measureWeight+=childMeasureWeight*childMeasure;}}}
return(maxMeasureWeight>0&&measureWeight!==null?measureWeight/maxMeasureWeight:null);},_createZeroAttempt:function(activity)
{var attempt=this._attemptsManager.createActivityAttempt(activity);activity.previousAttempt(attempt);},_getActivityCourseItem:function(activity)
{return this._course.getItemById(activity.itemId());}})});});

var ControlPanel=IControlPanel.extend({_panel:null,_playPauseBtn:null,_timeline:null,_timeInfo:null,_volumePicker:null,_playing:null,_duration:null,_progress:null,_seeking:null,constructor:function(){this._panel=$('#controlPanel');this._playPauseBtn=$('#playPause');this._timeInfo=$('#timeInformation');this._timeline=new Slider('timeline','timeline');this._volumePicker=new VolumePicker('volumePicker');this._playing=false;this._duration=0;this._progress=0;this._initialize();},setPlaying:function(playing){if(this._playing!=playing){this._playing=playing;this._invalidatePlayPauseBtn();}},isSeeking:function(){return this._seeking;},playing:function(){return this._playing;},setDuration:function(duration){if(this._duration!=duration){this._duration=duration;this._timeline.setOption('max',duration);this._invalidateProgressControls();}},duration:function(){return this._duration;},setProgress:function(progress){if(this._progress!=progress){this._progress=progress;this._invalidateProgressControls();}},progress:function(){return this._progress;},setLoadProgress:function(progress){this._timeline.setLoadProgress(progress);},width:function(){return this._panel.width();},height:function(){return this._panel.height();},setVolume:function(volume){this._volumePicker.seek(volume);},_initialize:function(){var thisPtr=this;this._playPauseBtn.bind('click',function(){thisPtr._onPlayPauseBtnClick();});this._timeline.addListener(Slider.SEEK,this,this._onSeekStarted);this._timeline.addListener(Slider.SEEK_END,this,this._onSeekEnded);this._volumePicker.addListener(VolumePicker.event.VOLUME_CHANGE,this,this._onVolumeChange);},_invalidatePlayPauseBtn:function(){if(this.playing()){this._playPauseBtn.addClass('playing');}
else{this._playPauseBtn.removeClass('playing');}},_invalidateProgressControls:function(){if(!this._timeline.seeking()){this._timeline.setValue(this.progress());}
var timeStr=this._secsToTimeStr(this._timeline.value())+' / '+this._secsToTimeStr(this.duration());this._timeInfo.html(timeStr);},_onVolumeChange:function(volumeValue){this.dispatchEvent(ControlPanel.event.VOLUME_CHANGE,volumeValue);},_onSeekStarted:function(){this._updateProgressFromTimeline();this.dispatchEvent(ControlPanel.event.SEEK);},_onSeekEnded:function(){this._updateProgressFromTimeline();this.dispatchEvent(ControlPanel.event.SEEK_END);},_updateProgressFromTimeline:function(){this._progress=this._timeline.value();this._invalidateProgressControls();},_onPlayPauseBtnClick:function(){this.dispatchEvent(ControlPanel.event.PLAY_PAUSE_TOGGLE);},_secsToTimeStr:function(secs){function normalizeTimeStr(timeStr){if(timeStr.length==1){timeStr='0'+timeStr;}
return timeStr;}
var hours=Math.floor(secs/60/60).toString();var min=Math.floor(secs/60%60).toString();var sec=Math.floor(secs%60).toString();return(!isNaN(min)&&!isNaN(sec)&&!isNaN(hours))?normalizeTimeStr(hours)+':'+normalizeTimeStr(min)+':'+normalizeTimeStr(sec):'00:00:00';}},{event:{VOLUME_CHANGE:'volume_change',PLAY_PAUSE_TOGGLE:'onPlayPauseBtnClicked',SEEK:'onSeek',SEEK_END:'onSeekEnded'},getPanelCode:function(){return'<div id="controlPanel" class="control_panel">'+'<div id="playPause" class="play_pause"></div>'+'<div class="timeline_container">'+Slider.getSliderCode('timeline','timeline slider')+'</div>'+'<div id="timeInformation" class="time_info">00:00 / 00:00</div>'+
VolumePicker.getPickerCode()+'</div>';},fixSpriteOnTouchEnd:function(element){element.on('touchend',function(){element.css('background-position','0 0');});}});

var HashNavigation=Navigation.extend({constructor:function()
{this.base();$(window).on('hashchange',handler(this,'_onHashChange'));setTimeout(handler(this,'_onHashChange'),HashNavigation.INITIAL_HASH_CHECK_TIMEOUT);},pushUrl:function(url,params)
{var relativeUrl=UrlUtils.getRelativeUrl(url);if(relativeUrl!==this.currentRelativeUrl)
{window.location.hash=this._buildHash(relativeUrl,params);}},replaceUrl:function(url,params)
{var relativeUrl=UrlUtils.getRelativeUrl(url);window.location.replace(HashNavigation.HASH_DELIMITER+this._buildHash(relativeUrl,params));},_onHashChange:function()
{var relativeUrl=this._getRelativeUrlFromHref();var params=this._getParamsFromHash();this.tryToChangeState(relativeUrl,params);},_getRelativeUrlFromHref:function()
{var relativeUrlFromHash=this._getRelativeUrlFromHash();return(relativeUrlFromHash.length)?relativeUrlFromHash:this.getPathAndQueryAsRelativeUrl();},_getRelativeUrlFromHash:function()
{var relativeUrl=this._getHashData()[0];if(relativeUrl===undefined)
{relativeUrl='';}
return relativeUrl;},_buildHash:function(relativeUrl,params)
{var hash=HashNavigation.HASH_DATA_SEPARATOR+relativeUrl;if(params)
{params.forEach(function(param){hash+=HashNavigation.HASH_DATA_DELIMITER+param;});}
return hash;},_getParamsFromHash:function()
{var params=this._getHashData();params.shift();return params;},_getHashData:function()
{var hash=window.location.hash;var params=[];var delimiter=HashNavigation.HASH_DELIMITER+HashNavigation.HASH_DATA_SEPARATOR;var delimiterPosition=hash.indexOf(delimiter);if(delimiterPosition!==-1)
{var paramsStr=hash.substring(delimiterPosition+delimiter.length);params=paramsStr.split(HashNavigation.HASH_DATA_DELIMITER);}
return params;}},{HASH_DELIMITER:'#',HASH_DATA_SEPARATOR:'!',HASH_DATA_DELIMITER:'&',INITIAL_HASH_CHECK_TIMEOUT:300});

var Html5Navigation=Navigation.extend({constructor:function()
{this.base();$(window).on('popstate',handler(this,'_onPopState'));},pushUrl:function(url,params)
{var relativeUrl=UrlUtils.getRelativeUrl(url);if(relativeUrl!==this.currentRelativeUrl)
{window.history.pushState(params,null,relativeUrl);this.tryToChangeState(relativeUrl,params);}},replaceUrl:function(url,params)
{var relativeUrl=UrlUtils.getRelativeUrl(url);if(relativeUrl!==this.currentRelativeUrl)
{window.history.replaceState(params,null,relativeUrl);this.tryToChangeState(relativeUrl,params);}},_onPopState:function(event)
{var params=event.originalEvent.state;this.tryToChangeState(this.getPathAndQueryAsRelativeUrl(),params);}});

Namespace("scormplayer.manifest.json",{CourseAggregationItemLoader:scormplayer.manifest.json.CourseItemLoader.extend({load:function(itemJson)
{var item=new scormplayer.manifest.CourseAggregationItem();this._initCourseItem(item,itemJson);var childItemsJson=itemJson.items;for(var i in childItemsJson)
{var childItemJson=childItemsJson[i];item.addItem(this._loadChildItem(childItemJson));}
return item;},_loadChildItem:function(itemJson)
{var loader;if("items"in itemJson)
{loader=new scormplayer.manifest.json.CourseAggregationItemLoader();}
else
{loader=new scormplayer.manifest.json.CourseLeafItemLoader();}
return loader.load(itemJson);}})});

Namespace("scormplayer.player",{IControlsVisibilityListener:Base.extend({onAllToolbarControlsHidden:function(){},onSomeToolbarControlsVisible:function(){}})});

Namespace.use("scormplayer.player.*",function(){Namespace("scormplayer.player",{SequenceController:Base.extend({_listener:null,_logger:null,_attemptsManager:null,_trackingData:null,_courseItemLoader:null,_navigationRequestHandler:null,_terminationRequestHandler:null,_sequenceRequestHandler:null,_deliveryRequestHandler:null,_handlersQueue:null,_pendingSequenceRequest:null,constructor:function(activityStatusEvaluater)
{this._logger=new scormplayer.log.NullLogger();this._navigationRequestHandler=new sequence.NavigationRequestHandler();this._terminationRequestHandler=new sequence.TerminationRequestHandler(activityStatusEvaluater);this._sequenceRequestHandler=new sequence.SequenceRequestHandler(activityStatusEvaluater);this._deliveryRequestHandler=new sequence.DeliveryRequestHandler();this._handlersQueue=new utils.TasksQueue();this._handlersQueue.add(handler(this._navigationRequestHandler,'handle'));this._handlersQueue.add(handler(this,'_onNavigationRequestHandled'));this._handlersQueue.add(handler(this._terminationRequestHandler,'handle'));this._handlersQueue.add(handler(this,'_onTerminationRequestHandled'));this._handlersQueue.add(handler(this._sequenceRequestHandler,'handle'));this._handlersQueue.add(handler(this,'_onSequenceRequestHandled'));this._handlersQueue.add(handler(this._deliveryRequestHandler,'handle'));this._handlersQueue.add(handler(this,'_onDeliveryRequestHandled'));this._handlersQueue.completeHandler(handler(this,"_onProcessingComplete"));},listener:function(listener)
{if(listener!==undefined)this._listener=listener;return this._listener;},course:function(course)
{this._terminationRequestHandler.course(course);this._deliveryRequestHandler.course(course);this._navigationRequestHandler.course(course);return this._sequenceRequestHandler.course(course);},contentState:function(state)
{if(state!==undefined)
{var trackingData=state.trackingData();this._trackingData=trackingData;this._sequenceRequestHandler.trackingData(trackingData);this._navigationRequestHandler.trackingData(trackingData);}
this._terminationRequestHandler.contentState(state);return this._deliveryRequestHandler.contentState(state);},courseItemLoader:function(loader)
{if(loader!==undefined)
{this._courseItemLoader=loader;this._terminationRequestHandler.courseItemLoader(loader)}
return this._courseItemLoader;},activityManager:function(manager)
{return this._sequenceRequestHandler.activityManager(manager);},activityAttemptsManager:function(manager)
{if(manager!==undefined)
{this._attemptsManager=manager;this._deliveryRequestHandler.activityAttemptsManager(manager);this._terminationRequestHandler.activityAttemptsManager(manager);this._sequenceRequestHandler.activityAttemptsManager(manager);}
return this._attemptsManager;},logger:function(logger)
{if(logger!==undefined)
{this._logger=logger;this._logger.register(this,"SequenceController");}
return this._logger;},processRequest:function(request)
{if(this._handlersQueue.processing())
{return;}
this._handlersQueue.run(request);},isRequestValid:function(request)
{var navigationHandlerResult=this._navigationRequestHandler.handle(request);if(navigationHandlerResult)
{var sequenceRequest=navigationHandlerResult.sequenceRequest();if(sequenceRequest)
{var sequenceHandlerResult=this._sequenceRequestHandler.handle(sequenceRequest);return(sequenceHandlerResult!==null);}
return true;}
return false;},_onNavigationRequestHandled:function(next,result)
{if(!result)
{this._handlersQueue.end();return;}
if(result.terminationRequest())
{this._pendingSequenceRequest=result.sequenceRequest();next(result.terminationRequest());}
else
{this._handlersQueue.skip(2);next(result.sequenceRequest());}},_onTerminationRequestHandled:function(next,result)
{if(!result)
{this._handlersQueue.end();return;}
var sequenceRequest=(result.sequenceRequest()||this._pendingSequenceRequest);if(sequenceRequest)
{next(sequenceRequest);}
else
{this._handlersQueue.end();}},_onSequenceRequestHandled:function(next,result)
{if(!result)
{this._handlersQueue.end();return;}
if(result.endSession())
{this._handlersQueue.end();this._onEndSession();return;}
if(result.deliveryRequest())
{next(result.deliveryRequest());}
else
{this._handlersQueue.end();}},_onDeliveryRequestHandled:function(next,result)
{if(result)
{this._listener.handleSequenceAction(new SequenceAction(SequenceAction.DELIVER_ACTIVITY,result.itemId()));if(result.deliverable())
{this._courseItemLoader.loadCourseItem(result.itemId());}}
next();},_onEndSession:function()
{var rootActivity=this._trackingData.activities().rootActivity();if(rootActivity.active())
{this._attemptsManager.stopDescendentAttempts(rootActivity);this._attemptsManager.stopActivityAttempt(rootActivity);}
this._listener.handleSequenceAction(new SequenceAction(SequenceAction.EXIT));},_onProcessingComplete:function()
{this._listener.onNavigationRequestHandled();}})})});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.scorm2004.type",{TimeValue:scormplayer.player.api.type.ValueType.extend({_regexp:/^(\d{4})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2})(?::(\d{2})(?::(\d{2})(?:\.(\d{1,2})(?:(?:(?:\+|-)(\d{2})(?::(\d{2}))?|Z)?)?)?)?)?)?)?)?$/,validateValue:function(value)
{var matches=value.match(this._regexp);if(matches==null)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
matches.shift();var restrictions=[[1970,2038],[1,12],[1,31],[0,23],[0,59],[0,59],[0,99],[0,23],[0,59]];for(var i=0;i<matches.length;++i)
{var testValue=matches[i];if(testValue===undefined||testValue==="")
{break;}
testValue=parseInt(testValue);var valueRestrictions=restrictions[i];var minValue=valueRestrictions[0];var maxValue=valueRestrictions[1];if(!(testValue>=minValue&&testValue<=maxValue))
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}
if(matches[3]!==undefined&&matches[3].length>0)
{var testDate=matches[0]+"-"+matches[1]+"-"+matches[2];if(Date.parse(testDate)==null)
{alert("error parsing "+testDate);throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}}})});});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.scorm2004.type",{TimeIntervalValue:scormplayer.player.api.type.ValueType.extend({_regexp:/^P(?=.)(?:0*(\d+)Y)?(?:0*(\d+)M)?(?:0*(\d+)D)?(?:T(?=.)(?:0*(\d+)H)?(?:0*(\d+)M)?(?:0*(\d+(?:\.\d{1,2})?)S)?)?$/,validateValue:function(value)
{if(!this._regexp.test(value))
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}},store:function(value)
{this.base(value);var matches=value.match(this._regexp);matches.shift();var modifiers=[3600*24*365,2628029,3600*24,3600,60,1];var seconds=0;for(var i=0;i<modifiers.length;++i)
{var modifierValue=parseFloat(matches[i]);if(!isNaN(modifierValue))
{seconds+=modifiers[i]*modifierValue;}}
return seconds;},restore:function(seconds)
{seconds=Math.round(seconds*100)/100;return"PT"+seconds+"S";}})});});

Namespace.use(["scormplayer.player.api.type.*","scormplayer.player.api.ErrorType"],function(){Namespace("scormplayer.player.api.scorm2004.type.interaction",{ResultValue:ValueType.extend({_states:null,init:function(typeInfo)
{if("states"in typeInfo)
{this._states=typeInfo.states;}},states:function(states)
{if(states!==undefined)this._states=states;return this._states;},validateValue:function(value)
{var valid=false;if(this._states)
{var stateType=new StateValue();stateType.states(this._states);try
{stateType.validateValue(value);valid=true;}
catch(e){}}
if(!valid)
{var numberType=new NumberValue();try
{numberType.validateValue(value);valid=true;}
catch(e){}}
if(!valid)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}})});});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.scorm12.type",{TimeValue:scormplayer.player.api.type.ValueType.extend({validateValue:function(value)
{var matches=value.match(/^(\d{2}:\d{2}:\d{2})(?:\.\d{1,2})?$/);if(matches==null)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
var date=matches[1];if(Date.parse(date)==null)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}},store:function(value)
{this.base(value);var milliseconds=0;var matches=value.match(/\.(\d{1,2})$/);if(matches!=null)
{milliseconds=matches[1];if(milliseconds.length<2)
{milliseconds+="0";}
milliseconds=parseInt(milliseconds);value=value.replace(matches[0],"");}
var date=Date.parse(value);var seconds=date.getTime()+milliseconds/100;return seconds;},restore:function(storedValue)
{var seconds=Math.floor(storedValue);var milliseconds=Math.round((storedValue-seconds)*100);var date=new Date(seconds).toString("HH:mm:ss");if(milliseconds>0)
{date+="."+milliseconds;}
return date;}})});});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.scorm12.type",{TimeIntervalValue:scormplayer.player.api.type.ValueType.extend({_regexp:/^(\d{2,4}):(\d{2}):(\d{2}\.?\d{0,2})$/,validateValue:function(value)
{if(!this._regexp.test(value))
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}},store:function(value)
{this.base(value);var matches=value.match(this._regexp);if(matches==null)
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
matches.shift();var modifiers=[3600,60,1];var seconds=0;for(var i=0;i<modifiers.length;++i)
{var modifierValue=matches[i];modifierValue=modifierValue.replace(/^0*/,"");if(!modifierValue)
{continue;}
seconds+=modifiers[i]*parseFloat(modifierValue);}
return seconds;},restore:function(storedValue)
{var seconds=Math.floor(storedValue);var milliseconds=Math.round((storedValue-seconds)*100);var hours=Math.floor(seconds/3600);var minutes=Math.floor((seconds%3600)/60);seconds=seconds%60;return(hours<10?"0"+hours:hours)+":"+
(minutes<10?"0"+minutes:minutes)+":"+
(seconds<10?"0"+seconds:seconds)+
(milliseconds>0?"."+milliseconds:"");}})});});

Namespace.use("scormplayer.player.api.ErrorType",function(){Namespace("scormplayer.player.api.scorm12.type",{LongIdValue:scormplayer.player.api.type.ValueType.extend({validateValue:function(value)
{if(!/^\S{1,255}$/i.test(value))
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}}})});});

Namespace.use(["scormplayer.player.api.ErrorType","scormplayer.player.api.scorm2004.type.interaction.*"],function(){Namespace("scormplayer.player.api.scorm2004",{InteractionResponseValidator:{validateCorrectResponse:function(response,responseData)
{var interactionType=responseData.get("^.^.type");if(interactionType===null)
{throw ErrorType.DATA_MODEL_DEPENDENCY_NOT_ESTABLISHED;}
var validationMethods={"true-false":"_validateTrueFalseCorrectResponse",choice:"_validateChoiceCorrectResponse","fill-in":"_validateFillInCorrectResponse","long-fill-in":"_validateLongFillInCorrectResponse",likert:"_validateLikertCorrectResponse",matching:"_validateMatchingCorrectResponse",performance:"_validatePerformanceCorrectResponse",sequencing:"_validateSequencingCorrectResponse",numeric:"_validateNumericCorrectResponse",other:"_validateOtherCorrectResponse"};var validationMethod=validationMethods[interactionType];this[validationMethod].apply(this,[response,responseData]);},_checkCorrectResponseIsAlone:function(responseData)
{var correctResponses=responseData.get("^");if(correctResponses.count()>1)
{throw ErrorType.GENERAL_SET_ERROR;}},_validateTrueFalseCorrectResponse:function(response,responseData)
{this._checkCorrectResponseIsAlone(responseData);(new correct_response.TrueFalseValue()).validateValue(response);},_validateChoiceCorrectResponse:function(response,responseData)
{(new correct_response.MultipleChoiceValue()).validateValue(response);var correctResponses=responseData.get("^");for(var i=0;i<correctResponses.count();++i)
{var correctResponseData=correctResponses.get(""+i);if(correctResponseData!==responseData&&correctResponseData.get("pattern")==response)
{throw ErrorType.GENERAL_SET_ERROR;}}},_validateFillInCorrectResponse:function(response)
{(new correct_response.FillInValue()).validateValue(response);},_validateLongFillInCorrectResponse:function(response)
{(new correct_response.LongFillInValue()).validateValue(response);},_validateLikertCorrectResponse:function(response,responseData)
{this._checkCorrectResponseIsAlone(responseData);(new correct_response.LikertValue()).validateValue(response);},_validateMatchingCorrectResponse:function(response)
{(new correct_response.MatchingValue()).validateValue(response);},_validatePerformanceCorrectResponse:function(response)
{(new correct_response.PerformanceValue()).validateValue(response);},_validateSequencingCorrectResponse:function(response,responseData)
{(new correct_response.SequencingValue()).validateValue(response);},_validateNumericCorrectResponse:function(response,responseData)
{this._checkCorrectResponseIsAlone(responseData);(new correct_response.NumericValue()).validateValue(response);},_validateOtherCorrectResponse:function(response,responseData)
{this._checkCorrectResponseIsAlone(responseData);},validateLearnerResponse:function(response,responseData)
{var interactionType=responseData.get("type");if(interactionType===null)
{throw ErrorType.DATA_MODEL_DEPENDENCY_NOT_ESTABLISHED;}
var validators={"true-false":learner_response.TrueFalseValue,choice:learner_response.MultipleChoiceValue,"fill-in":learner_response.FillInValue,"long-fill-in":learner_response.LongFillInValue,likert:learner_response.LikertValue,matching:learner_response.MatchingValue,performance:learner_response.PerformanceValue,sequencing:learner_response.SequencingValue,numeric:learner_response.NumericValue};if(interactionType in validators)
{var responseValidator=new validators[interactionType]();responseValidator.validateValue(response);}}}});});

Namespace.use(["scormplayer.player.storage.TrackingDataExporter","scormplayer.player.storage.SharedDataExporter"],function(){Namespace("scormplayer.player.storage",{ContentStateExporter:{exportContentState:function(state,course,activityStatusEvaluater)
{var stateJson={trackingData:TrackingDataExporter.exportTrackingData(state.trackingData(),course,activityStatusEvaluater),sharedData:SharedDataExporter.exportSharedData(state.sharedData())};return stateJson;}}});});

Namespace.use(["scormplayer.player.ContentState","scormplayer.player.storage.TrackingDataImporter","scormplayer.player.storage.SharedDataImporter"],function(){Namespace("scormplayer.player.storage",{ContentStateImporter:{importContentState:function(stateJson)
{var state=new ContentState();if("trackingData"in stateJson)
{var trackingData=TrackingDataImporter.importTrackingData(stateJson.trackingData);state.trackingData(trackingData);}
if("sharedData"in stateJson)
{var sharedData=SharedDataImporter.importSharedData(stateJson.sharedData);state.sharedData(sharedData);}
return state;}}});});

Namespace("scormplayer.log",{LoggerProxy:scormplayer.log.ILogger.extend({_logger:null,_callers:null,constructor:function()
{this._callers={};},logger:function(logger)
{if(logger!==undefined)
{this._logger=logger;for(var callerName in this._callers)
{logger.register(this._callers[callerName],callerName);}}
return this._logger;},register:function(caller,callerName)
{this._callers[callerName]=caller;if(this._logger!=null)
{this._logger.register(caller,callerName);}},log:function()
{if(this._logger!=null)
{this._logger.log.apply(this._logger,arguments);}}})});

Namespace("scormplayer.log",{DebugLogger:scormplayer.log.ILogger.extend({_debugWindow:null,constructor:function(){this.base();this._initialize();},register:function(caller,callerName){},log:function(caller,msg){var logEntry="["+this._getEntryTime()+"] "+msg;if(this._debugWindow&&!this._debugWindow.closed){this._debugWindow.document.body.appendChild(this._debugWindow.document.createTextNode(logEntry));this._debugWindow.document.body.appendChild(this._debugWindow.document.createElement("br"));}},_getEntryTime:function(){var time=new Date();var parts=[time.getHours(),time.getMinutes(),time.getSeconds()];return parts.map(function(part){part=String(part);return(part.length===2)?part:('0'+part);}).join(':');},_initialize:function(){if(this._debugWindow&&!this._debugWindow.closed){this._debugWindow.close();}
this._debugWindow=window.open("","Scorm Debug","width=600,height=300,resizable,scrollbars");if(this._debugWindow===null){alert("Debug window could not be opened, popup blocker in place?");}
else{this._debugWindow.focus();}}})});

var NullControlPanel=IControlPanel.extend({setPlaying:function(playing){},isSeeking:function(){},playing:function(){return false;},setDuration:function(duration){},duration:function(){return 0;},setProgress:function(progress){},progress:function(){return 0;},setLoadProgress:function(progress){},width:function(){return 0;},height:function(){return 0;},setVolume:function(volume){}});

var FlashExternalInterface=EventDispatcher.extend({flashObjectId:null,flashObject:null,intervalId:null,preListeners:null,preFuncs:null,constructor:function(flashObjectId)
{this.base();this.flashObjectId=flashObjectId;this.flashObject=Flash.getFlashApp(flashObjectId);this.preListeners=[];this.preFuncs=[];this.intervalId=setInterval(handler(this,'tryToInitFlash'),100);},tryToInitFlash:function()
{if(this.isFlashInitialized())
{clearInterval(this.intervalId);this.onFlashInitialized();this.dispatchEvent(FlashExternalInterface.FLASH_INITIALIZED);}},onFlashInitialized:function()
{this.initPreListeners();this.callPreFuncs();},initPreListeners:function()
{for(var i in this.preListeners)
{this.addFlashListener.apply(this,this.preListeners[i]);}},callPreFuncs:function()
{for(var i in this.preFuncs)
{this.callFlashFunc.apply(this,this.preFuncs[i]);}},isFlashInitialized:function()
{return this.flashObject&&(this.flashObject.flashInitialized!=undefined&&this.flashObject.flashInitialized());},addFlashListener:function(eventName,listener,handlerFunc)
{if(!this.isFlashInitialized())
{this.preListeners.push([eventName,listener,handlerFunc]);return;}
this.addListener('flash_'+eventName,listener,handlerFunc);this.flashObject.addListener(eventName,"function(){ "+"var interface = FlashExternalInterface.getInterface('"+this.flashObjectId+"'); "+"var eventArguments = ['"+eventName+"'].concat( Array.prototype.slice.call(arguments) );"+"interface.handleFlashEvent.apply(interface, eventArguments); "+"}");},removeFlashListener:function(eventName,listener)
{if(this.isFlashInitialized())
{this.removeListener('flash_'+eventName,listener);this.flashObject.removeListener(eventName);}},handleFlashEvent:function(eventName)
{var eventArguments=this.removeFirstArgument(arguments);eventArguments=['flash_'+eventName].concat(eventArguments);this.dispatchEvent.apply(this,eventArguments);},callFlashFunc:function(funcName)
{if(this.flashObject[funcName]!=undefined)
{switch(arguments.length)
{case 1:return this.flashObject[funcName]();case 2:return this.flashObject[funcName](arguments[1]);case 3:return this.flashObject[funcName](arguments[1],arguments[2]);case 4:return this.flashObject[funcName](arguments[1],arguments[2],arguments[3]);default:throw UIMessages.FlashExternalInterfaceMessages.MSG_UNSUPPORTED_ARGUMENTS_COUNT;}}
return undefined;},safeCallFlashFunc:function(funcName)
{var args=this.argsToArray(arguments);if(!this.isFlashInitialized())
{this.preFuncs.push(args);}
else
{this.callFlashFunc.apply(this,args);}},removeFirstArgument:function(args)
{args=this.argsToArray(args);args.splice(0,1);return args;},argsToArray:function(args)
{return Array.prototype.slice.call(args);}},{FLASH_INITIALIZED:'flashObjectIsInitialized',interfaces:{},initInterface:function(flashObjectId,interfaceClass)
{if(!interfaceClass)
{interfaceClass=this;}
var instance=new interfaceClass(flashObjectId);this.interfaces[flashObjectId]=instance;return instance;},getInterface:function(flashObjectId)
{return this.interfaces[flashObjectId];}});

var NavigationHistory=EventDispatcher.extend({_html5Navigation:null,_hashNavigation:null,constructor:function()
{this._hashNavigation=new HashNavigation();this._hashNavigation.addListener(Navigation.event.STATE_CHANGE,this,this._onHashNavigationStateChange);if(BrowserUtils.hasHistorySupport())
{this._html5Navigation=new Html5Navigation();this._html5Navigation.addListener(Navigation.event.STATE_CHANGE,this,this._dispatchStateChangeEvent);}
this._replaceCurrentUrlIfNecessary();},getCurrentRelativeUrl:function()
{return(this._html5Navigation)?this._html5Navigation.getCurrentRelativeUrl():this._hashNavigation.getCurrentRelativeUrl();},pushUrl:function(url,params)
{if(this._html5Navigation)
{this._html5Navigation.pushUrl(url,params);}
else
{this._hashNavigation.pushUrl(url,params);}},replaceUrl:function(url,params)
{if(this._html5Navigation)
{this._html5Navigation.replaceUrl(url,params);}
else
{this._hashNavigation.replaceUrl(url,params);}},_onHashNavigationStateChange:function(url,params)
{this._replaceCurrentUrlIfNecessary(params);this._dispatchStateChangeEvent(url,params);},_dispatchStateChangeEvent:function(url,params)
{this.dispatchEvent(NavigationHistory.event.STATE_CHANGE,this.getCurrentRelativeUrl(),params);},_replaceCurrentUrlIfNecessary:function(params)
{if(this._html5Navigation)
{var urlFromHashNavigation=this._hashNavigation.getCurrentRelativeUrl();var urlFromHtml5Navigation=this._html5Navigation.getCurrentRelativeUrl();if(urlFromHashNavigation!==urlFromHtml5Navigation)
{this._html5Navigation.replaceUrl(urlFromHashNavigation,params);}}}},{event:{STATE_CHANGE:'stateChange'},_instance:null,getInstance:function()
{if(NavigationHistory._instance===null)
{NavigationHistory._instance=new NavigationHistory();}
return NavigationHistory._instance;}});

var AccountNavigationType=Base.extend({},{VIEW_CONTENT_NAVIGATION:'view_content_navigation',PRIVATE_FOLDER_NAVIGATION:'private_folder_navigation',ROOT_FOLDER_NAVIGATION:'root_folder_navigation',DEFAULT:'default'});

var AccountNavigationEvent=Base.extend({_type:null,_url:null,_parameters:null,constructor:function(type,url,parameters)
{this._type=type;this._url=url;this._parameters=parameters;},getParameters:function()
{return this._parameters;},getNavigationType:function()
{return this._type;},getUrl:function()
{return this._url;}});
"undefined"!=typeof window&&function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Hls=t():e.Hls=t()}(this,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=13)}([function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var i=r(5);function a(){}var n={trace:a,debug:a,log:a,warn:a,info:a,error:a},s=n;function o(e,t){return t="["+e+"] > "+t}var l=Object(i.a)();function d(e){var t=l.console[e];return t?function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];i[0]&&(i[0]=o(e,i[0])),t.apply(l.console,i)}:a}var u=function(e){if(l.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach((function(t){s[t]=e[t]?e[t].bind(e):d(t)}))}(e,"debug","log","info","warn","error");try{s.log()}catch(e){s=n}}else s=n},c=s},function(e,t,r){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},function(e,t,r){"use strict";var i,a;r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return a})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(i||(i={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(a||(a={}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var i,a=r(5),n=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var i=r,a=0;e.isHeader(t,r);){a+=10,a+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(a+=10),r+=a}if(a>0)return t.subarray(i,i+a)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),i=0;i<r.length;i++){var a=r[i];if(e.isTimeStampFrame(a))return e._readTimeStamp(a)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:r,size:i,data:t.subarray(10,10+i)}},e.getID3Frames=function(t){for(var r=0,i=[];e.isHeader(t,r);){for(var a=e._readSize(t,r+6),n=(r+=10)+a;r+8<n;){var s=e._getFrameData(t.subarray(r)),o=e._decodeFrame(s);o&&i.push(o),r+=s.size+10}e.isFooter(t,r)&&(r+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),i=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,i=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=i.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:i,data:a}}var n=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:n}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,i=e._utf8ArrayToStr(t.data.subarray(r));r+=i.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:i,data:a}}var n=e._utf8ArrayToStr(t.data);return{key:t.type,data:n}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=s();if(r){var i=r.decode(e);if(t){var a=i.indexOf("\0");return-1!==a?i.substring(0,a):i}return i.replace(/\0/g,"")}for(var n,o,l,d=e.length,u="",c=0;c<d;){if(0===(n=e[c++])&&t)return u;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(n);break;case 12:case 13:o=e[c++],u+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=e[c++],l=e[c++],u+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&l)<<0)}}return u},e}();function s(){var e=Object(a.a)();return i||void 0===e.TextDecoder||(i=new e.TextDecoder("utf-8")),i}var o=n._utf8ArrayToStr;t.a=n},function(e,t,r){"use strict";function i(){return"undefined"==typeof window?self:window}r.d(t,"a",(function(){return i}))},function(e,t,r){var i,a,n,s,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var n=o.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=o.normalizePath(n.path),o.buildURLFromParts(n)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=a.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var d={scheme:s.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(d.netLoc=s.netLoc,"/"!==n.path[0]))if(n.path){var u=s.path,c=u.substring(0,u.lastIndexOf("/")+1)+n.path;d.path=o.normalizePath(c)}else d.path=s.path,n.params||(d.params=s.params,n.query||(d.query=s.query));return null===d.path&&(d.path=r.alwaysNormalize?o.normalizePath(n.path):n.path),o.buildURLFromParts(d)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},function(e,t,r){"use strict";var i=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),a=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();var n=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],a=r[1],n=r[2],s=r[3],o=this.invSubMix,l=o[0],d=o[1],u=o[2],c=o[3],h=new Uint32Array(256),f=0,g=0,p=0;for(p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var v=g^g<<1^g<<2^g<<3^g<<4;v=v>>>8^255&v^99,e[f]=v,t[v]=f;var m=h[f],y=h[m],b=h[y],T=257*h[v]^16843008*v;i[f]=T<<24|T>>>8,a[f]=T<<16|T>>>16,n[f]=T<<8|T>>>24,s[f]=T,T=16843009*b^65537*y^257*m^16843008*f,l[v]=T<<24|T>>>8,d[v]=T<<16|T>>>16,u[v]=T<<8|T>>>24,c[v]=T,f?(f=m^h[h[h[b^m]]],g^=h[h[g]]):f=g=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var a=this.keySize=t.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var n,s,o,l,d=this.ksRows=4*(a+6+1),u=this.keySchedule=new Uint32Array(d),c=this.invKeySchedule=new Uint32Array(d),h=this.sBox,f=this.rcon,g=this.invSubMix,p=g[0],v=g[1],m=g[2],y=g[3];for(n=0;n<d;n++)n<a?o=u[n]=t[n]:(l=o,n%a==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[n/a|0]<<24):a>6&&n%a==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),u[n]=o=(u[n-a]^l)>>>0);for(s=0;s<d;s++)n=d-s,l=3&s?u[n]:u[n-4],c[s]=s<4||n<=4?l:p[h[l>>>24]]^v[h[l>>>16&255]]^m[h[l>>>8&255]]^y[h[255&l]],c[s]=c[s]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,i){for(var a,n,s,o,l,d,u,c,h,f,g,p,v,m,y,b,T,E=this.keySize+6,S=this.invKeySchedule,_=this.invSBox,A=this.invSubMix,R=A[0],w=A[1],L=A[2],k=A[3],D=this.uint8ArrayToUint32Array_(r),C=D[0],O=D[1],I=D[2],P=D[3],x=new Int32Array(e),M=new Int32Array(x.length),F=this.networkToHostOrderSwap;t<x.length;){for(h=F(x[t]),f=F(x[t+1]),g=F(x[t+2]),p=F(x[t+3]),l=h^S[0],d=p^S[1],u=g^S[2],c=f^S[3],v=4,m=1;m<E;m++)a=R[l>>>24]^w[d>>16&255]^L[u>>8&255]^k[255&c]^S[v],n=R[d>>>24]^w[u>>16&255]^L[c>>8&255]^k[255&l]^S[v+1],s=R[u>>>24]^w[c>>16&255]^L[l>>8&255]^k[255&d]^S[v+2],o=R[c>>>24]^w[l>>16&255]^L[d>>8&255]^k[255&u]^S[v+3],l=a,d=n,u=s,c=o,v+=4;a=_[l>>>24]<<24^_[d>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^S[v],n=_[d>>>24]<<24^_[u>>16&255]<<16^_[c>>8&255]<<8^_[255&l]^S[v+1],s=_[u>>>24]<<24^_[c>>16&255]<<16^_[l>>8&255]<<8^_[255&d]^S[v+2],o=_[c>>>24]<<24^_[l>>16&255]<<16^_[d>>8&255]<<8^_[255&u]^S[v+3],v+=3,M[t]=F(a^C),M[t+1]=F(o^O),M[t+2]=F(s^I),M[t+3]=F(n^P),C=h,O=f,I=g,P=p,t+=4}return i?(y=M.buffer,b=y.byteLength,(T=b&&new DataView(y).getUint8(b-1))?y.slice(0,b-T):y):M.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),s=r(2),o=r(0),l=r(1),d=r(5),u=Object(d.a)(),c=function(){function e(e,t,r){var i=(void 0===r?{}:r).removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var n=u.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,s){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.b.log("JS AES decrypt"),this.logEnabled=!1);var d=this.decryptor;d||(this.decryptor=d=new n),d.expandKey(t),s(d.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(o.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new a(u,t)),this.fastAesKey.expandKey().then((function(a){new i(u,r).decrypt(e,a).catch((function(i){l.onWebCryptoError(i,e,t,r,s)})).then((function(e){s(e)}))})).catch((function(i){l.onWebCryptoError(i,e,t,r,s)}))}},t.onWebCryptoError=function(e,t,r,i,a){this.config.enableSoftwareAES?(o.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,i,a)):(o.b.error("decrypting error : "+e.message),this.observer.trigger(l.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.a=c},function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty,a="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,r,i,n){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,i||e,n),l=a?a+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function d(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),d.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)i.call(e,t)&&r.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},d.prototype.listeners=function(e){var t=a?a+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,n=r.length,s=new Array(n);i<n;i++)s[i]=r[i].fn;return s},d.prototype.listenerCount=function(e){var t=a?a+e:e,r=this._events[t];return r?r.fn?1:r.length:0},d.prototype.emit=function(e,t,r,i,n,s){var o=a?a+e:e;if(!this._events[o])return!1;var l,d,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,n),!0;case 6:return u.fn.call(u.context,t,r,i,n,s),!0}for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];u.fn.apply(u.context,l)}else{var h,f=u.length;for(d=0;d<f;d++)switch(u[d].once&&this.removeListener(e,u[d].fn,void 0,!0),c){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,t);break;case 3:u[d].fn.call(u[d].context,t,r);break;case 4:u[d].fn.call(u[d].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u[d].fn.apply(u[d].context,l)}}return!0},d.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},d.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},d.prototype.removeListener=function(e,t,r,i){var n=a?a+e:e;if(!this._events[n])return this;if(!t)return l(this,n),this;var s=this._events[n];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||l(this,n);else{for(var o=0,d=[],u=s.length;o<u;o++)(s[o].fn!==t||i&&!s[o].once||r&&s[o].context!==r)&&d.push(s[o]);d.length?this._events[n]=1===d.length?d[0]:d:l(this,n)}return this},d.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&l(this,t)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=a,d.EventEmitter=d,e.exports=d},function(e,t,r){"use strict";var i=r(1),a=r(2),n=r(7),s=r(3),o=r(0),l=r(5);function d(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function h(e,t){return!!(t+1<e.length&&d(e,t))}function f(e,t){if(h(e,t)){var r=u(e,t);t+5<e.length&&(r=c(e,t));var i=t+r;if(i===e.length||i+1<e.length&&d(e,i))return!0}return!1}function g(e,t,r,n,s){if(!e.samplerate){var l=function(e,t,r,n){var s,l,d,u,c,h=navigator.userAgent.toLowerCase(),f=n,g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[r+2])>>>6),!((l=(60&t[r+2])>>>2)>g.length-1))return u=(1&t[r+2])<<2,u|=(192&t[r+3])>>>6,o.b.log("manifest codec:"+n+",ADTS data:type:"+s+",sampleingIndex:"+l+"["+g[l]+"Hz],channelConfig:"+u),/firefox/i.test(h)?l>=6?(s=5,c=new Array(4),d=l-3):(s=2,c=new Array(2),d=l):-1!==h.indexOf("android")?(s=2,c=new Array(2),d=l):(s=5,c=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&l>=6?d=l-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(l>=6&&1===u||/vivaldi/i.test(h))||!n&&1===u)&&(s=2,c=new Array(2)),d=l)),c[0]=s<<3,c[0]|=(14&l)>>1,c[1]|=(1&l)<<7,c[1]|=u<<3,5===s&&(c[1]|=(14&d)>>1,c[2]=(1&d)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:g[l],channelCount:u,codec:"mp4a.40."+s,manifestCodec:f};e.trigger(i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(t,r,n,s);e.config=l.config,e.samplerate=l.samplerate,e.channelCount=l.channelCount,e.codec=l.codec,e.manifestCodec=l.manifestCodec,o.b.log("parsed codec:"+e.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function p(e){return 9216e4/e}function v(e,t,r,i,a){var n=function(e,t,r,i,a){var n,s,o=e.length;if(n=u(e,t),s=c(e,t),(s-=n)>0&&t+n+s<=o)return{headerLength:n,frameLength:s,stamp:r+i*a}}(t,r,i,a,p(e.samplerate));if(n){var s=n.stamp,o=n.headerLength,l=n.frameLength,d={unit:t.subarray(r+o,r+o+l),pts:s,dts:s};return e.samples.push(d),{sample:d,length:l+o}}}var m=r(4),y=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(m.a.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(f(e,t))return o.b.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,i){for(var a=this._audioTrack,n=m.a.getID3Data(e,0)||[],l=m.a.getTimeStamp(n),d=Object(s.a)(l)?90*l:9e4*t,u=0,c=d,f=e.length,p=n.length,y=[{pts:c,dts:c,data:n}];p<f-1;)if(h(e,p)&&p+5<f){g(a,this.observer,e,p,a.manifestCodec);var b=v(a,e,p,d,u);if(!b){o.b.log("Unable to parse AAC frame");break}p+=b.length,c=b.sample.pts,u++}else m.a.isHeader(e,p)?(n=m.a.getID3Data(e,p),y.push({pts:c,dts:c,data:n}),p+=n.length):p++;this.remuxer.remux(a,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},t,r,i)},t.destroy=function(){},e}(),b=r(10),T={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,i,a){if(!(r+24>t.length)){var n=this.parseHeader(t,r);if(n&&r+n.frameLength<=t.length){var s=i+a*(9e4*n.samplesPerFrame/n.sampleRate),o={unit:t.subarray(r,r+n.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=n.channelCount,e.samplerate=n.sampleRate,e.samples.push(o),{sample:o,length:n.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,a=e[t+2]>>4&15,n=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==n){var o=3===r?3-i:3===i?3:4,l=1e3*T.BitratesMap[14*o+a-1],d=3===r?0:2===r?1:2,u=T.SamplingRateMap[3*d+n],c=e[t+3]>>6==3?1:2,h=T.SamplesCoefficients[r][i],f=T.BytesInSlot[i],g=8*h*f;return{sampleRate:u,channelCount:c,frameLength:parseInt(h*l/u+s,10)*f,samplesPerFrame:g}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),i=4;r&&r.frameLength&&(i=r.frameLength);var a=t+i;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}},E=T,S=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");i.set(e.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&o.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(r+this.readEG()+256)%256),r=0===i?r:i},t.readSPS=function(){var e,t,r,i,a,n,s,o=0,l=0,d=0,u=0,c=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),g=this.readBoolean.bind(this),p=this.skipBits.bind(this),v=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(c(),e=c(),h(5),p(3),c(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=f();if(3===b&&p(1),m(),m(),p(1),g())for(n=3!==b?8:12,s=0;s<n;s++)g()&&y(s<6?16:64)}m();var T=f();if(0===T)f();else if(1===T)for(p(1),v(),v(),t=f(),s=0;s<t;s++)v();m(),p(1),r=f(),i=f(),0===(a=h(1))&&p(1),p(1),g()&&(o=f(),l=f(),d=f(),u=f());var E=[1,1];if(g()&&g())switch(c()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(r+1)-2*o-2*l),height:(2-a)*(i+1)*16-(a?2:4)*(d+u),pixelRatio:E}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),_=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.a(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,i){var a=e[t].unit,n=a.subarray(16,a.length-a.length%16),s=n.buffer.slice(n.byteOffset,n.byteOffset+n.length),o=this;this.decryptBuffer(s,(function(n){n=new Uint8Array(n),a.set(n,16),i||o.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,i),!i)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,a=32;a<=e.length-16;a+=160,i+=16)r.set(e.subarray(a,a+16),i);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,i=32;i<=e.length-16;i+=160,r+=16)e.set(t.subarray(r,r+16),i);return e},t.decryptAvcSample=function(e,t,r,i,a,n){var s=this.discardEPB(a.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,(function(o){a.data=l.getAvcDecryptedUnit(s,o),n||l.decryptAvcSamples(e,t,r+1,i)}))},t.decryptAvcSamples=function(e,t,r,i){for(;;t++,r=0){if(t>=e.length)return void i();for(var a=e[t].units;!(r>=a.length);r++){var n=a[r];if(!(n.length<=48||1!==n.type&&5!==n.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,i,n,s),!s)return}}}},e}(),A={video:1,audio:2,id3:3,text:4},R=function(){function e(e,t,r,i){this.observer=e,this.config=r,this.typeSupported=i,this.remuxer=t,this.sampleAes=null}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new _(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&o.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:A[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,r,i,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",a),this._audioTrack=e.createTrack("audio",a),this._id3Track=e.createTrack("id3",a),this._txtTrack=e.createTrack("text",a),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=i,this._duration=a},t.resetTimeStamp=function(){},t.append=function(t,r,n,s){var l,d,u,c,h,f=t.length,g=!1;this.contiguous=n;var p=this.pmtParsed,v=this._avcTrack,m=this._audioTrack,y=this._id3Track,b=v.pid,T=m.pid,E=y.pid,S=this._pmtId,_=v.pesData,A=m.pesData,R=y.pesData,w=this._parsePAT,L=this._parsePMT,k=this._parsePES,D=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),O=this._parseMPEGPES.bind(this),I=this._parseID3PES.bind(this),P=e._syncOffset(t);for(f-=(f+P)%188,l=P;l<f;l+=188)if(71===t[l]){if(d=!!(64&t[l+1]),u=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((c=l+5+t[l+4])===l+188)continue}else c=l+4;switch(u){case b:d&&(_&&(h=k(_))&&D(h,!1),_={data:[],size:0}),_&&(_.data.push(t.subarray(c,l+188)),_.size+=l+188-c);break;case T:d&&(A&&(h=k(A))&&(m.isAAC?C(h):O(h)),A={data:[],size:0}),A&&(A.data.push(t.subarray(c,l+188)),A.size+=l+188-c);break;case E:d&&(R&&(h=k(R))&&I(h),R={data:[],size:0}),R&&(R.data.push(t.subarray(c,l+188)),R.size+=l+188-c);break;case 0:d&&(c+=t[c]+1),S=this._pmtId=w(t,c);break;case S:d&&(c+=t[c]+1);var x=L(t,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=x.avc)>0&&(v.pid=b),(T=x.audio)>0&&(m.pid=T,m.isAAC=x.isAAC),(E=x.id3)>0&&(y.pid=E),g&&!p&&(o.b.log("reparse from beginning"),g=!1,l=P-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:g=!0}}else this.observer.trigger(i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(h=k(_))?(D(h,!0),v.pesData=null):v.pesData=_,A&&(h=k(A))?(m.isAAC?C(h):O(h),m.pesData=null):(A&&A.size&&o.b.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=A),R&&(h=k(R))?(I(h),y.pesData=null):y.pesData=R,null==this.sampleAes?this.remuxer.remux(m,v,y,this._txtTrack,r,n,s):this.decryptAndRemux(m,v,y,this._txtTrack,r,n,s)},t.decryptAndRemux=function(e,t,r,i,a,n,s){if(e.samples&&e.isAAC){var o=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){o.decryptAndRemuxAvc(e,t,r,i,a,n,s)}))}else this.decryptAndRemuxAvc(e,t,r,i,a,n,s)},t.decryptAndRemuxAvc=function(e,t,r,i,a,n,s){if(t.samples){var o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){o.remuxer.remux(e,t,r,i,a,n,s)}))}else this.remuxer.remux(e,t,r,i,a,n,s)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._parsePMT=function(e,t,r,i){var a,n,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){switch(n=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){o.b.log("unknown stream type:"+e[t]);break}case 15:-1===s.audio&&(s.audio=n);break;case 21:-1===s.id3&&(s.id3=n);break;case 219:if(!i){o.b.log("unknown stream type:"+e[t]);break}case 27:-1===s.avc&&(s.avc=n);break;case 3:case 4:r?-1===s.audio&&(s.audio=n,s.isAAC=!1):o.b.log("MPEG audio found, not supported in this browser for now");break;case 36:o.b.warn("HEVC stream type found, not supported for now");break;default:o.b.log("unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return s},t._parsePES=function(e){var t,r,i,a,n,s,l,d,u=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var h=new Uint8Array(c[0].length+c[1].length);h.set(c[0]),h.set(c[1],c[0].length),c[0]=h,c.splice(1,1)}if(1===((t=c[0])[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;if(192&(r=t[7])&&((s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(s-=8589934592),64&r?((l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(l-=8589934592),s-l>54e5&&(o.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),d=(a=t[8])+9,e.size<=d)return null;e.size-=d,n=new Uint8Array(e.size);for(var f=0,g=c.length;f<g;f++){var p=(t=c[f]).byteLength;if(d){if(d>p){d-=p;continue}t=t.subarray(d),p-=d,d=0}n.set(t,u),u+=p}return i&&(i-=a+3),{data:n,pts:s,dts:l,len:i}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,i=r.length;if(isNaN(e.pts)){if(!i)return void t.dropped++;var a=r[i-1];e.pts=a.pts,e.dts=a.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,r.push(e)):t.dropped++}e.debug.length&&o.b.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var r,i,a,n=this,s=this._avcTrack,o=this._parseAVCNALu(e.data),l=this.avcSample,d=!1,u=this.pushAccesUnit.bind(this),c=function(e,t,r,i){return{key:e,pts:t,dts:r,units:[],debug:i}};e.data=null,l&&o.length&&!s.audFound&&(u(l,s),l=this.avcSample=c(!1,e.pts,e.dts,"")),o.forEach((function(t){switch(t.type){case 1:i=!0,l||(l=n.avcSample=c(!0,e.pts,e.dts,"")),l.frame=!0;var o=t.data;if(d&&o.length>4){var h=new S(o).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:i=!0,l||(l=n.avcSample=c(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:i=!0,(r=new S(n.discardEPB(t.data))).readUByte();for(var f=0,g=0,p=!1,v=0;!p&&r.bytesAvailable>1;){f=0;do{f+=v=r.readUByte()}while(255===v);g=0;do{g+=v=r.readUByte()}while(255===v);if(4===f&&0!==r.bytesAvailable){if(p=!0,181===r.readUByte())if(49===r.readUShort())if(1195456820===r.readUInt())if(3===r.readUByte()){var y=r.readUByte(),b=31&y,T=[y,r.readUByte()];for(a=0;a<b;a++)T.push(r.readUByte()),T.push(r.readUByte()),T.push(r.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{type:3,pts:e.pts,bytes:T})}}else if(5===f&&0!==r.bytesAvailable){if(p=!0,g>16){var E=[];for(a=0;a<16;a++)E.push(r.readUByte().toString(16)),3!==a&&5!==a&&7!==a&&9!==a||E.push("-");var _=g-16,A=new Uint8Array(_);for(a=0;a<_;a++)A[a]=r.readUByte();n._insertSampleInOrder(n._txtTrack.samples,{pts:e.pts,payloadType:f,uuid:E.join(""),userDataBytes:A,userData:Object(m.b)(A.buffer)})}}else if(g<r.bytesAvailable)for(a=0;a<g;a++)r.readUByte()}break;case 7:if(i=!0,d=!0,!s.sps){var R=(r=new S(t.data)).readSPS();s.width=R.width,s.height=R.height,s.pixelRatio=R.pixelRatio,s.sps=[t.data],s.duration=n._duration;var w=t.data.subarray(1,4),L="avc1.";for(a=0;a<3;a++){var k=w[a].toString(16);k.length<2&&(k="0"+k),L+=k}s.codec=L}break;case 8:i=!0,s.pps||(s.pps=[t.data]);break;case 9:i=!1,s.audFound=!0,l&&u(l,s),l=n.avcSample=c(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&i&&l.units.push(t)})),t&&l&&(u(l,s),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var i=r-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t._parseAVCNALu=function(e){var t,r,i,a,n=0,s=e.byteLength,o=this._avcTrack,l=o.naluState||0,d=l,u=[],c=-1;for(-1===l&&(c=0,a=31&e[0],l=0,n=1);n<s;)if(t=e[n++],l)if(1!==l)if(t)if(1===t){if(c>=0)i={data:e.subarray(c,n-l-1),type:a},u.push(i);else{var h=this._getLastNalUnit();if(h&&(d&&n<=4-d&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-d)),(r=n-l-1)>0)){var f=new Uint8Array(h.data.byteLength+r);f.set(h.data,0),f.set(e.subarray(0,r),h.data.byteLength),h.data=f}}n<s?(c=n,a=31&e[n],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(c>=0&&l>=0&&(i={data:e.subarray(c,s),type:a,state:l},u.push(i)),0===u.length){var g=this._getLastNalUnit();if(g){var p=new Uint8Array(g.data.byteLength+e.byteLength);p.set(g.data,0),p.set(e,g.data.byteLength),g.data=p}}return o.naluState=l,u},t.discardEPB=function(e){for(var t,r,i=e.byteLength,a=[],n=1;n<i-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;t=i-a.length,r=new Uint8Array(t);var s=0;for(n=0;n<t;s++,n++)s===a[0]&&(s++,a.shift()),r[n]=e[s];return r},t._parseAACPES=function(e){var t,r,n,s,l,d,u,c=this._audioTrack,f=e.data,m=e.pts,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var T=new Uint8Array(y.byteLength+f.byteLength);T.set(y,0),T.set(f,y.byteLength),f=T}for(n=0,l=f.length;n<l-1&&!h(f,n);n++);if(n&&(n<l-1?(d="AAC PES did not start with ADTS header,offset:"+n,u=!1):(d="no ADTS header found in AAC PES",u=!0),o.b.warn("parsing error:"+d),this.observer.trigger(i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:u,reason:d}),u))return;if(g(c,this.observer,f,n,this.audioCodec),r=0,t=p(c.samplerate),y&&b){var E=b+t;Math.abs(E-m)>1&&(o.b.log("AAC: align PTS for overlapping frames by "+Math.round((E-m)/90)),m=E)}for(;n<l;){if(h(f,n)){if(n+5<l){var S=v(c,f,n,m,r);if(S){n+=S.length,s=S.sample.pts,r++;continue}}break}n++}y=n<l?f.subarray(n,l):null,this.aacOverFlow=y,this.aacLastPTS=s},t._parseMPEGPES=function(e){for(var t=e.data,r=t.length,i=0,a=0,n=e.pts;a<r;)if(E.isHeader(t,a)){var s=E.appendFrame(this._audioTrack,t,a,n,i);if(!s)break;a+=s.length,i++}else a++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),w=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,i=m.a.getID3Data(e,0);if(i&&void 0!==m.a.getTimeStamp(i))for(t=i.length,r=Math.min(e.length-1,t+100);t<r;t++)if(E.probe(e,t))return o.b.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,i){for(var a=m.a.getID3Data(e,0),n=m.a.getTimeStamp(a),s=n?90*n:9e4*t,o=a.length,l=e.length,d=0,u=0,c=this._audioTrack,h=[{pts:s,dts:s,data:a}];o<l;)if(E.isHeader(e,o)){var f=E.appendFrame(c,e,o,s,d);if(!f)break;o+=f.length,u=f.sample.pts,d++}else m.a.isHeader(e,o)?(a=m.a.getID3Data(e,o),h.push({pts:u,dts:u,data:a}),o+=a.length):o++;this.remuxer.remux(c,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,i)},t.destroy=function(){},e}(),L=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),k=Math.pow(2,32)-1,D=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:i};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=n,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,l,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),i=8,a=r.length,n=a;a--;)i+=r[a].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),a=0,i=8;a<n;a++)t.set(r[a],i),i+=r[a].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(k+1)),a=Math.floor(r%(k+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},e.moov=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,i=[];r--;)i[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(k+1)),a=Math.floor(r%(k+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,n)},e.sdtp=function(t){var r,i,a=t.samples||[],n=new Uint8Array(4+a.length);for(i=0;i<a.length;i++)r=a[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,n)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,i,a,n=[],s=[];for(r=0;r<t.sps.length;r++)a=(i=t.sps[r]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(i));for(r=0;r<t.pps.length;r++)a=(i=t.pps[r]).byteLength,s.push(a>>>8&255),s.push(255&a),s=s.concat(Array.prototype.slice.call(i));var o=e.box(e.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(s))),l=t.width,d=t.height,u=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,a=t.width,n=t.height,s=Math.floor(i/(k+1)),o=Math.floor(i%(k+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,n>>8&255,255&n,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),a=t.id,n=Math.floor(r/(k+1)),s=Math.floor(r%(k+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var i,a,n,s,o,l,d=t.samples||[],u=d.length,c=12+16*u,h=new Uint8Array(c);for(r+=8+c,h.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<u;i++)n=(a=d[i]).duration,s=a.size,o=a.flags,l=a.cts,h.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var r,i=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),r.set(i,e.FTYP.byteLength),r},e}();function C(e,t,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var a=e*t*r;return i?Math.round(a):a}function O(e,t){return void 0===t&&(t=!1),C(e,1e3,1/9e4,t)}function I(e,t){return void 0===t&&(t=1),C(e,9e4,1/t)}var P,x=I(10),M=I(.2),F=function(){function e(e,t,r,i){this.observer=e,this.config=t,this.typeSupported=r;var a=navigator.userAgent;this.isSafari=i&&i.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,r,a,n,s,l){if(this.ISGenerated||this.generateIS(e,t,n),this.ISGenerated){var d=e.samples.length,u=t.samples.length,c=n,h=n;if(d&&u){var f=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;c+=Math.max(0,f),h+=Math.max(0,-f)}if(d){e.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,n));var g,p=this.remuxAudio(e,c,s,l);if(u)p&&(g=p.endPTS-p.startPTS),t.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,n)),this.remuxVideo(t,h,s,g,l)}else if(u){var v=this.remuxVideo(t,h,s,0,l);v&&e.codec&&this.remuxEmptyAudio(e,c,s,v)}}r.samples.length&&this.remuxID3(r,n),a.samples.length&&this.remuxText(a,n),this.observer.trigger(i.a.FRAG_PARSED)},t.generateIS=function(e,t,r){var n,s,l=this.observer,d=e.samples,u=t.samples,c=this.typeSupported,h="audio/mp4",f={},g={tracks:f},p=void 0===this._initPTS;if(p&&(n=s=1/0),e.config&&d.length&&(e.timescale=e.samplerate,o.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(c.mpeg?(h="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),f.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&c.mpeg?new Uint8Array:D.initSegment([e]),metadata:{channelCount:e.channelCount}},p&&(n=s=d[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&u.length){var v=t.inputTimeScale;t.timescale=v,f.video={container:"video/mp4",codec:t.codec,initSegment:D.initSegment([t]),metadata:{width:t.width,height:t.height}},p&&(n=Math.min(n,u[0].pts-v*r),s=Math.min(s,u[0].dts-v*r),this.observer.trigger(i.a.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(f).length?(l.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,p&&(this._initPTS=n,this._initDTS=s)):l.trigger(i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,n,s){var l,d,u,c,h,f,g,p=8,v=e.timescale,m=e.samples,y=[],b=m.length,T=this._PTSNormalize,E=this._initPTS,S=this.nextAvcDts,_=this.isSafari;if(0!==b){_&&(r|=m.length&&S&&(s&&Math.abs(t-S/v)<.1||Math.abs(m[0].pts-S-E)<v/5)),r||(S=t*v),m.forEach((function(e){e.pts=T(e.pts-E,S),e.dts=T(e.dts-E,S)})),m.sort((function(e,t){var r=e.dts-t.dts,i=e.pts-t.pts;return r||i||e.id-t.id}));var A=m.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*M)}),0);if(A<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+O(A,!0)+" ms to overcome this issue");for(var R=0;R<m.length;R++)m[R].dts+=A}var w=m[0];h=Math.max(w.dts,0),c=Math.max(w.pts,0);var L=h-S;r&&L&&(L>1?o.b.log("AVC: "+O(L,!0)+" ms hole between fragments detected,filling it"):L<-1&&o.b.log("AVC: "+O(-L,!0)+" ms overlapping between fragments detected"),h=S,m[0].dts=h,c=Math.max(c-L,S),m[0].pts=c,o.b.log("Video: PTS/DTS adjusted: "+O(c,!0)+"/"+O(h,!0)+", delta: "+O(L,!0)+" ms")),w=m[m.length-1],g=Math.max(w.dts,0),f=Math.max(w.pts,0,g),_&&(l=Math.round((g-h)/(m.length-1)));for(var k=0,C=0,I=0;I<b;I++){for(var P=m[I],x=P.units,F=x.length,U=0,N=0;N<F;N++)U+=x[N].data.length;C+=U,k+=F,P.length=U,P.dts=_?h+I*l:Math.max(P.dts,h),P.pts=Math.max(P.pts,P.dts)}var B=C+4*k+8;try{d=new Uint8Array(B)}catch(e){return void this.observer.trigger(i.a.ERROR,{type:a.b.MUX_ERROR,details:a.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating video mdat "+B})}var G=new DataView(d.buffer);G.setUint32(0,B),d.set(D.types.mdat,4);for(var K=0;K<b;K++){for(var j=m[K],H=j.units,V=0,Y=void 0,W=0,q=H.length;W<q;W++){var z=H[W],X=z.data,Q=z.data.byteLength;G.setUint32(p,Q),p+=4,d.set(X,p),p+=Q,V+=4+Q}if(_)Y=Math.max(0,l*Math.round((j.pts-j.dts)/l));else{if(K<b-1)l=m[K+1].dts-j.dts;else{var $=this.config,J=j.dts-m[K>0?K-1:K].dts;if($.stretchShortVideoTrack){var Z=$.maxBufferHole,ee=Math.floor(Z*v),te=(n?c+n*v:this.nextAudioPts)-j.pts;te>ee?((l=te-J)<0&&(l=J),o.b.log("It is approximately "+O(te,!1)+" ms to the next segment; using duration "+O(l,!1)+" ms for the last video frame.")):l=J}else l=J}Y=Math.round(j.pts-j.dts)}y.push({size:V,duration:l,cts:Y,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=g+l;var re=e.dropped;if(e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ie=y[0].flags;ie.dependsOn=2,ie.isNonSync=0}e.samples=y,u=D.moof(e.sequenceNumber++,h,e),e.samples=[];var ae={data1:u,data2:d,startPTS:c/v,endPTS:(f+l)/v,startDTS:h/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:re};return this.observer.trigger(i.a.FRAG_PARSING_DATA,ae),ae}},t.remuxAudio=function(e,t,r,n){var s,l,d,u,c,h,f=e.inputTimeScale,g=e.timescale,p=f/g,v=(e.isAAC?1024:1152)*p,m=this._PTSNormalize,y=this._initPTS,b=!e.isAAC&&this.typeSupported.mpeg,T=b?0:8,E=e.samples,S=[],_=this.nextAudioPts;if(r|=E.length&&_&&(n&&Math.abs(t-_/f)<.1||Math.abs(E[0].pts-_-y)<20*v),E.forEach((function(e){e.pts=e.dts=m(e.pts-y,t*f)})),0!==(E=E.filter((function(e){return e.pts>=0}))).length){if(r||(_=n?t*f:E[0].pts),e.isAAC)for(var A=this.config.maxAudioFramesDrift,R=0,w=_;R<E.length;){var k,C=E[R];if((k=C.pts-w)<=-A*v)o.b.warn("Dropping 1 audio frame @ "+O(w,!0)+" ms due to "+O(k,!0)+" ms overlap."),E.splice(R,1);else if(k>=A*v&&k<x&&w){var I=Math.round(k/v);o.b.warn("Injecting "+I+" audio frames @ "+O(w,!0)+" ms due to "+O(w,!0)+" ms gap.");for(var P=0;P<I;P++){var M=Math.max(w,0);(l=L.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=C.unit.subarray()),E.splice(R,0,{unit:l,pts:M,dts:M}),w+=v,R++}C.pts=C.dts=w,w+=v,R++}else Math.abs(k),C.pts=C.dts=w,w+=v,R++}for(var F=E.length,U=0;F--;)U+=E[F].unit.byteLength;for(var N=0,B=E.length;N<B;N++){var G=E[N],K=G.unit,j=G.pts;if(void 0!==h)s.duration=Math.round((j-h)/p);else{var H=j-_,V=0;if(r&&e.isAAC&&H){if(H>0&&H<x)V=Math.round((j-_)/v),o.b.log(O(H,!0)+" ms hole between AAC samples detected,filling it"),V>0&&((l=L.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(l=K.subarray()),U+=V*l.length);else if(H<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta: "+O(_,!0)+" ms / "+O(j,!0)+" ms / "+O(-H,!0)+" ms"),U-=K.byteLength;continue}j=_}if(c=j,!(U>0))return;U+=T;try{d=new Uint8Array(U)}catch(e){return void this.observer.trigger(i.a.ERROR,{type:a.b.MUX_ERROR,details:a.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}b||(new DataView(d.buffer).setUint32(0,U),d.set(D.types.mdat,4));for(var Y=0;Y<V;Y++)(l=L.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=K.subarray()),d.set(l,T),T+=l.byteLength,s={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(s)}d.set(K,T);var W=K.byteLength;T+=W,s={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(s),h=j}var q=0;if((F=S.length)>=2&&(q=S[F-2].duration,s.duration=q),F){this.nextAudioPts=_=h+p*q,e.samples=S,u=b?new Uint8Array:D.moof(e.sequenceNumber++,c/p,e),e.samples=[];var z=c/f,X=_/f,Q={data1:u,data2:d,startPTS:z,endPTS:X,startDTS:z,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.observer.trigger(i.a.FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,r,i){var a=e.inputTimeScale,n=a/(e.samplerate?e.samplerate:a),s=this.nextAudioPts,l=(void 0!==s?s:i.startDTS*a)+this._initDTS,d=i.endDTS*a+this._initDTS,u=1024*n,c=Math.ceil((d-l)/u),h=L.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(o.b.warn("remux empty Audio"),h){for(var f=[],g=0;g<c;g++){var p=l+g*u;f.push({unit:h,pts:p,dts:p})}e.samples=f,this.remuxAudio(e,t,r)}else o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e){var t,r=e.samples.length,a=e.inputTimeScale,n=this._initPTS,s=this._initDTS;if(r){for(var o=0;o<r;o++)(t=e.samples[o]).pts=(t.pts-n)/a,t.dts=(t.dts-s)/a;this.observer.trigger(i.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},t.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,r=e.samples.length,a=e.inputTimeScale,n=this._initPTS;if(r){for(var s=0;s<r;s++)(t=e.samples[s]).pts=(t.pts-n)/a;this.observer.trigger(i.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}(),U=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,a,n,s,o,l){var d=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),d.trigger(i.a.FRAG_PARSING_DATA,{data1:l,startPTS:n,startDTS:n,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),d.trigger(i.a.FRAG_PARSED)},e}(),N=Object(l.a)();try{P=N.performance.now.bind(N.performance)}catch(e){o.b.debug("Unable to use Performance API on this environment"),P=N.Date.now}var B=function(){function e(e,t,r,i){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=i}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,a,s,o,l,d,u,c,h,f){var g=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new n.a(this.observer,this.config));var v=P();p.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var n=P();g.observer.trigger(i.a.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:n}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,s,o,l,d,u,c,h,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,s,o,l,d,u,c,h,f)},t.pushDecrypted=function(e,t,r,n,s,o,l,d,u,c,h,f){var g=this.demuxer;if(!g||(l||d)&&!this.probe(e)){for(var p=this.observer,v=this.typeSupported,m=this.config,T=[{demux:R,remux:F},{demux:b.a,remux:U},{demux:y,remux:F},{demux:w,remux:F}],E=0,S=T.length;E<S;E++){var _=T[E],A=_.demux.probe;if(A(e)){var L=this.remuxer=new _.remux(p,m,v,this.vendor);g=new _.demux(p,L,m,v),this.probe=A;break}}if(!g)return void p.trigger(i.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=g}var k=this.remuxer;(l||d)&&(g.resetInitSegment(r,n,s,c),k.resetInitSegment()),l&&(g.resetTimeStamp(f),k.resetTimeStamp(f)),"function"==typeof g.setDecryptData&&g.setDecryptData(t),g.append(e,o,u,h)},e}();t.a=B},function(e,t,r){"use strict";var i=r(0),a=r(1),n=Math.pow(2,32)-1,s=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,i,n){if(t&&t.byteLength){var s=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==i&&(i="avc1.42e01e");var o={};s.audio&&s.video?o.audiovideo={container:"video/mp4",codec:r+","+i,initSegment:n?t:null}:(s.audio&&(o.audio={container:"audio/mp4",codec:r,initSegment:n?t:null}),s.video&&(o.video={container:"video/mp4",codec:i,initSegment:n?t:null})),this.observer.trigger(a.a.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else r&&(this.audioCodec=r),i&&(this.videoCodec=i)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var i,a,n,s,o,l,d=[];if(t.data?(o=t.start,n=t.end,t=t.data):(o=0,n=t.byteLength),!r.length)return null;for(i=o;i<n;)l=(a=e.readUint32(t,i))>1?i+a:n,e.bin2str(t.subarray(i+4,i+8))===r[0]&&(1===r.length?d.push({data:t,start:i+8,end:l}):(s=e.findBox({data:t,start:i+8,end:l},r.slice(1))).length&&(d=d.concat(s))),i=l;return d},e.parseSegmentIndex=function(t){var r,i=e.findBox(t,["moov"])[0],a=i?i.end:null,n=0,s=e.findBox(t,["sidx"]);if(!s||!s[0])return null;r=[];var o=(s=s[0]).data[0];n=0===o?8:16;var l=e.readUint32(s,n);n+=4;n+=0===o?8:16,n+=2;var d=s.end+0,u=e.readUint16(s,n);n+=2;for(var c=0;c<u;c++){var h=n,f=e.readUint32(s,h);h+=4;var g=2147483647&f;if(1===(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var p=e.readUint32(s,h);h+=4,r.push({referenceSize:g,subsegmentDuration:p,info:{duration:p/l,start:d,end:d+g-1}}),d+=g,n=h+=4}return{earliestPresentationTime:0,timescale:l,version:o,referencesCount:u,references:r,moovEndOffset:a}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var a=e.findBox(t,["tkhd"])[0];if(a){var n=a.data[a.start],s=0===n?12:20,o=e.readUint32(a,s),l=e.findBox(t,["mdia","mdhd"])[0];if(l){s=0===(n=l.data[l.start])?12:20;var d=e.readUint32(l,s),u=e.findBox(t,["mdia","hdlr"])[0];if(u){var c={soun:"audio",vide:"video"}[e.bin2str(u.data.subarray(u.start+8,u.start+12))];if(c){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=e.bin2str(h.data.subarray(h.start+12,h.start+16));i.b.log("MP4Demuxer:"+c+":"+f+" found")}r[o]={timescale:d,type:c},r[c]={timescale:d,id:o}}}}}})),r},e.getStartDTS=function(t,r){var i,a,n;return i=e.findBox(r,["moof","traf"]),a=[].concat.apply([],i.map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var a,n;return a=e.readUint32(i,4),n=t[a].timescale||9e4,e.findBox(r,["tfdt"]).map((function(t){var r,i;return r=t.data[t.start],i=e.readUint32(t,4),1===r&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i}))[0]/n}))}))),n=Math.min.apply(null,a),isFinite(n)?n:0},e.offsetStartDTS=function(t,r,i){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(a){var s=e.readUint32(a,4),o=t[s].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],a=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,a-i*o);else{a*=Math.pow(2,32),a+=e.readUint32(t,8),a-=i*o,a=Math.max(a,0);var s=Math.floor(a/(n+1)),l=Math.floor(a%(n+1));e.writeUint32(t,4,s),e.writeUint32(t,8,l)}}))}))}))},t.append=function(t,r,i,n){var s=this.initData;s||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),s=this.initData);var o,l=this.initPTS;if(void 0===l){var d=e.getStartDTS(s,t);this.initPTS=l=d-r,this.observer.trigger(a.a.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(s,t,l),o=e.getStartDTS(s,t),this.remuxer.remux(s.audio,s.video,null,null,o,i,n,t)},t.destroy=function(){},e}();t.a=s},function(e,t,r){function i(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var i=r(r.s=ENTRY_MODULE);return i.default||i}var a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function n(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,i){var s={};s[i]=[];var o=t.toString(),l=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var d,u=l[1],c=new RegExp("(\\\\n|\\W)"+n(u)+a,"g");d=c.exec(o);)"dll-reference"!==d[3]&&s[i].push(d[3]);for(c=new RegExp("\\("+n(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+a,"g");d=c.exec(o);)e[d[2]]||(s[i].push(d[1]),e[d[2]]=r(d[1]).m),s[d[2]]=s[d[2]]||[],s[d[2]].push(d[4]);for(var h,f=Object.keys(s),g=0;g<f.length;g++)for(var p=0;p<s[f[g]].length;p++)h=s[f[g]][p],isNaN(1*h)||(s[f[g]][p]=1*s[f[g]][p]);return s}function o(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var a={main:r.m},n=t.all?{main:Object.keys(a.main)}:function(e,t){for(var r={main:[t]},i={main:[]},a={main:{}};o(r);)for(var n=Object.keys(r),l=0;l<n.length;l++){var d=n[l],u=r[d].pop();if(a[d]=a[d]||{},!a[d][u]&&e[d][u]){a[d][u]=!0,i[d]=i[d]||[],i[d].push(u);for(var c=s(e,e[d][u],d),h=Object.keys(c),f=0;f<h.length;f++)r[h[f]]=r[h[f]]||[],r[h[f]]=r[h[f]].concat(c[h[f]])}}return i}(a,e),l="";Object.keys(n).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;n[e][t];)t++;n[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+n[e].map((function(t){return JSON.stringify(t)+": "+a[e][t].toString()})).join(",")+"});\n"})),l=l+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n.main.map((function(e){return JSON.stringify(e)+": "+a.main[e].toString()})).join(",")+"}))(self);";var d=new window.Blob([l],{type:"text/javascript"});if(t.bare)return d;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(d),c=new window.Worker(u);return c.objectURL=u,c}},function(e,t,r){"use strict";r.r(t);var i=r(9),a=r(1),n=r(0),s=r(8);t.default=function(e){var t=new s.EventEmitter;t.trigger=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.removeListener.apply(t,[e].concat(i))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(a){var s=a.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);e.demuxer=new i.a(t,s.typeSupported,o,s.vendor),Object(n.a)(o.debug),r("init",null);break;case"demux":e.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}})),t.on(a.a.FRAG_DECRYPTED,r),t.on(a.a.FRAG_PARSING_INIT_SEGMENT,r),t.on(a.a.FRAG_PARSED,r),t.on(a.a.ERROR,r),t.on(a.a.FRAG_PARSING_METADATA,r),t.on(a.a.FRAG_PARSING_USERDATA,r),t.on(a.a.INIT_PTS_FOUND,r),t.on(a.a.FRAG_PARSING_DATA,(function(t,r){var i=[],a={event:t,data:r};r.data1&&(a.data1=r.data1.buffer,i.push(r.data1.buffer),delete r.data1),r.data2&&(a.data2=r.data2.buffer,i.push(r.data2.buffer),delete r.data2),e.postMessage(a,i)}))}},function(e,t,r){"use strict";r.r(t);var i={};r.r(i),r.d(i,"newCue",(function(){return vt}));var a,n,s=r(6),o=r(2),l=r(3),d=r(1),u=r(0),c={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(c[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){u.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(d.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(a||(a={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(n||(n={}));var f=r(10);function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p,v=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,r,i;return t=e,(r=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(s.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&g(t.prototype,r),i&&g(t,i),e}();function m(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(p||(p={}));var y=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[p.AUDIO]=!1,e[p.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,r,i,a=e.prototype;return a.setByteRange=function(e,t){var r=e.split("@",2),i=[];1===r.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(r[1]),i[1]=parseInt(r[0])+i[0],this._byteRange=i},a.addElementaryStream=function(e){this._elementaryStreams[e]=!0},a.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},a.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},a.setDecryptDataFromLevelKey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new v(e.baseuri,e.reluri)).method=e.method,r.iv=this.createInitializationVector(t)),r},t=e,(r=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(s.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&u.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.a)(this.programDateTime))return null;var e=Object(l.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&m(t.prototype,r),i&&m(t,i),e}();function b(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,r,i;return t=e,(r=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.a)(this.fragments[0].programDateTime))}}])&&b(t.prototype,r),i&&b(t,i),e}(),E=/^(\d+)x(\d+)$/,S=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,_=function(){function e(t){for(var r in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=E.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(S.lastIndex=0;null!==(t=S.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},e}(),A={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function R(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var w=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,L=/#EXT-X-MEDIA:(.*)/g,k=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),D=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,C=/\.(mp4|m4s|m4v|m4a)$/i,O=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(i.id===t)return i}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return s.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var i,a=[];function n(e,t){["video","audio"].forEach((function(r){var i=e.filter((function(e){return function(e,t){var r=A[t];return!!r&&!0===r[e.slice(0,4)]}(e,r)}));if(i.length){var a=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=a.length>0?a[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}for(w.lastIndex=0;null!=(i=w.exec(t));){var s={},o=s.attrs=new _(i[1]);s.url=e.resolve(i[2],r);var l=o.decimalResolution("RESOLUTION");l&&(s.width=l.width,s.height=l.height),s.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),s.name=o.NAME,n([].concat((o.CODECS||"").split(/[ ,]+/)),s),s.videoCodec&&-1!==s.videoCodec.indexOf("avc1")&&(s.videoCodec=e.convertAVC1ToAVCOTI(s.videoCodec)),a.push(s)}return a},e.parseMasterPlaylistMedia=function(t,r,i,a){var n;void 0===a&&(a=[]);var s=[],o=0;for(L.lastIndex=0;null!==(n=L.exec(t));){var l=new _(n[1]);if(l.TYPE===i){var d={id:o++,groupId:l["GROUP-ID"],name:l.NAME||l.LANGUAGE,type:i,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(d.url=e.resolve(l.URI,r)),a.length){var u=e.findGroup(a,d.groupId);d.audioCodec=u?u.codec:a[0].codec}s.push(d)}}return s},e.parseLevelPlaylist=function(e,t,r,i,a){var n,s,o,d=0,c=0,h=new T(t),f=0,g=null,p=new y,m=null;for(k.lastIndex=0;null!==(n=k.exec(e));){var b=n[1];if(b){p.duration=parseFloat(b);var E=(" "+n[2]).slice(1);p.title=E||null,p.tagList.push(E?["INF",b,E]:["INF",b])}else if(n[3]){if(Object(l.a)(p.duration)){var S=d++;p.type=i,p.start=c,o&&(p.levelkey=o),p.sn=S,p.level=r,p.cc=f,p.urlId=a,p.baseurl=t,p.relurl=(" "+n[3]).slice(1),I(p,g),h.fragments.push(p),g=p,c+=p.duration,p=new y}}else if(n[4]){var A=(" "+n[4]).slice(1);g?p.setByteRange(A,g):p.setByteRange(A)}else if(n[5])p.rawProgramDateTime=(" "+n[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),null===m&&(m=h.fragments.length);else{if(!(n=n[0].match(D))){u.b.warn("No matches on slow regex match for level playlist!");continue}for(s=1;s<n.length&&void 0===n[s];s++);var R=(" "+n[s+1]).slice(1),w=(" "+n[s+2]).slice(1);switch(n[s]){case"#":p.tagList.push(w?[R,w]:[R]);break;case"PLAYLIST-TYPE":h.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":d=h.startSN=parseInt(R);break;case"TARGETDURATION":h.targetduration=parseFloat(R);break;case"VERSION":h.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(R);break;case"KEY":var L=new _(R),O=L.enumeratedString("METHOD"),P=L.URI,x=L.hexadecimalInteger("IV");O&&(o=new v(t,P),P&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(O)>=0&&(o.method=O,o.key=null,o.iv=x));break;case"START":var M=new _(R).decimalFloatingPoint("TIME-OFFSET");Object(l.a)(M)&&(h.startTimeOffset=M);break;case"MAP":var F=new _(R);p.relurl=F.URI,F.BYTERANGE&&p.setByteRange(F.BYTERANGE),p.baseurl=t,p.level=r,p.type=i,p.sn="initSegment",h.initSegment=p,(p=new y).rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:u.b.warn("line parsed but not handled: "+n)}}}return(p=g)&&!p.relurl&&(h.fragments.pop(),c-=p.duration),h.totalduration=c,h.averagetargetduration=c/h.fragments.length,h.endSN=d-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every((function(e){return C.test(e.relurl)}))&&(u.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(p=new y).relurl=h.fragments[0].relurl,p.baseurl=t,p.level=r,p.type=i,p.sn="initSegment",h.initSegment=p,h.needSidxRanges=!0),m&&function(e,t){for(var r=e[t],i=t-1;i>=0;i--){var a=e[i];a.programDateTime=r.programDateTime-1e3*a.duration,r=a}}(h.fragments,m),h},e}();function I(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(l.a)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var P=window.performance,x=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.MANIFEST_LOADING,d.a.LEVEL_LOADING,d.a.AUDIO_TRACK_LOADING,d.a.SUBTITLE_TRACK_LOADING)||this).loaders={},r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i.canHaveQualityLevels=function(e){return e!==a.AUDIO_TRACK&&e!==a.SUBTITLE_TRACK},i.mapContextToLevelType=function(e){switch(e.type){case a.AUDIO_TRACK:return n.AUDIO;case a.SUBTITLE_TRACK:return n.SUBTITLE;default:return n.MAIN}},i.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r};var s=i.prototype;return s.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,i=t.loader,a=new(r||i)(t);return e.loader=a,this.loaders[e.type]=a,a},s.getInternalLoader=function(e){return this.loaders[e.type]},s.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},s.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},s.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},s.onManifestLoading=function(e){this.load({url:e.url,type:a.MANIFEST,level:0,id:null,responseType:"text"})},s.onLevelLoading=function(e){this.load({url:e.url,type:a.LEVEL,level:e.level,id:e.id,responseType:"text"})},s.onAudioTrackLoading=function(e){this.load({url:e.url,type:a.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},s.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:a.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},s.load=function(e){var t=this.hls.config;u.b.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var r,i,n,s,o=this.getInternalLoader(e);if(o){var l=o.context;if(l&&l.url===e.url)return u.b.trace("playlist request ongoing"),!1;u.b.warn("aborting previous loader for type: "+e.type),o.abort()}switch(e.type){case a.MANIFEST:r=t.manifestLoadingMaxRetry,i=t.manifestLoadingTimeOut,n=t.manifestLoadingRetryDelay,s=t.manifestLoadingMaxRetryTimeout;break;case a.LEVEL:r=0,s=0,n=0,i=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,i=t.levelLoadingTimeOut,n=t.levelLoadingRetryDelay,s=t.levelLoadingMaxRetryTimeout}o=this.createInternalLoader(e);var d={timeout:i,maxRetry:r,retryDelay:n,maxRetryDelay:s},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return u.b.debug("Calling internal loader delegate for URL: "+e.url),o.load(e,d,c),!0},s.loadsuccess=function(e,t,r,i){if(void 0===i&&(i=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,i);if(this.resetInternalLoader(r.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var a=e.data;t.tload=P.now(),0===a.indexOf("#EXTM3U")?a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,i):this._handleMasterPlaylist(e,t,r,i):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",i)},s.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},s.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},s._handleMasterPlaylist=function(e,t,r,a){var n=this.hls,s=e.data,o=i.getResponseUrl(e,r),l=O.parseMasterPlaylist(s,o);if(l.length){var c=l.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),h=O.parseMasterPlaylistMedia(s,o,"AUDIO",c),f=O.parseMasterPlaylistMedia(s,o,"SUBTITLES");if(h.length){var g=!1;h.forEach((function(e){e.url||(g=!0)})),!1===g&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(u.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}n.trigger(d.a.MANIFEST_LOADED,{levels:l,audioTracks:h,subtitles:f,url:o,stats:t,networkDetails:a})}else this._handleManifestParsingError(e,r,"no level found in manifest",a)},s._handleTrackOrLevelPlaylist=function(e,t,r,n){var s=this.hls,o=r.id,u=r.level,c=r.type,h=i.getResponseUrl(e,r),f=Object(l.a)(o)?o:0,g=Object(l.a)(u)?u:f,p=i.mapContextToLevelType(r),v=O.parseLevelPlaylist(e.data,h,g,p,f);if(v.tload=t.tload,c===a.MANIFEST){var m={url:h,details:v};s.trigger(d.a.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:h,stats:t,networkDetails:n})}if(t.tparsed=P.now(),v.needSidxRanges){var y=v.initSegment.url;this.load({url:y,isSidxRequest:!0,type:c,level:u,levelDetails:v,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=v,this._handlePlaylistLoaded(e,t,r,n)},s._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r=f.a.parseSegmentIndex(new Uint8Array(e.data));if(r){var i=r.references,a=t.levelDetails;i.forEach((function(e,t){var r=e.info;if(a){var i=a.fragments[t];0===i.byteRange.length&&i.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}})),a&&a.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},s._handleManifestParsingError=function(e,t,r,i){this.hls.trigger(d.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:i})},s._handleNetworkError=function(e,t,r,i){var n,s;void 0===r&&(r=!1),void 0===i&&(i=null),u.b.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case a.MANIFEST:n=r?o.a.MANIFEST_LOAD_TIMEOUT:o.a.MANIFEST_LOAD_ERROR,s=!0;break;case a.LEVEL:n=r?o.a.LEVEL_LOAD_TIMEOUT:o.a.LEVEL_LOAD_ERROR,s=!1;break;case a.AUDIO_TRACK:n=r?o.a.AUDIO_TRACK_LOAD_TIMEOUT:o.a.AUDIO_TRACK_LOAD_ERROR,s=!1;break;default:s=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var c={type:o.b.NETWORK_ERROR,details:n,fatal:s,url:e.url,loader:l,context:e,networkDetails:t};i&&(c.response=i),this.hls.trigger(d.a.ERROR,c)},s._handlePlaylistLoaded=function(e,t,r,n){var s=r.type,o=r.level,l=r.id,u=r.levelDetails;if(u&&u.targetduration)if(i.canHaveQualityLevels(r.type))this.hls.trigger(d.a.LEVEL_LOADED,{details:u,level:o||0,id:l||0,stats:t,networkDetails:n});else switch(s){case a.AUDIO_TRACK:this.hls.trigger(d.a.AUDIO_TRACK_LOADED,{details:u,id:l,stats:t,networkDetails:n});break;case a.SUBTITLE_TRACK:this.hls.trigger(d.a.SUBTITLE_TRACK_LOADED,{details:u,id:l,stats:t,networkDetails:n})}else this._handleManifestParsingError(e,r,"invalid target duration",n)},i}(h);var M=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.FRAG_LOADING)||this).loaders={},r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.destroy=function(){var t=this.loaders;for(var r in t){var i=t[r];i&&i.destroy()}this.loaders={},e.prototype.destroy.call(this)},a.onFragLoading=function(e){var t=e.frag,r=t.type,i=this.loaders,a=this.hls.config,n=a.fLoader,s=a.loader;t.loaded=0;var o,d,c,h=i[r];h&&(u.b.warn("abort previous fragment loader for type: "+r),h.abort()),h=i[r]=t.loader=a.fLoader?new n(a):new s(a),o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var f=t.byteRangeStartOffset,g=t.byteRangeEndOffset;Object(l.a)(f)&&Object(l.a)(g)&&(o.rangeStart=f,o.rangeEnd=g),d={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(o,d,c)},a.loadsuccess=function(e,t,r,i){void 0===i&&(i=null);var a=e.data,n=r.frag;n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(d.a.FRAG_LOADED,{payload:a,frag:n,stats:t,networkDetails:i})},a.loaderror=function(e,t,r){void 0===r&&(r=null);var i=t.frag,a=i.loader;a&&a.abort(),this.loaders[i.type]=void 0,this.hls.trigger(d.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},a.loadtimeout=function(e,t,r){void 0===r&&(r=null);var i=t.frag,a=i.loader;a&&a.abort(),this.loaders[i.type]=void 0,this.hls.trigger(d.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},a.loadprogress=function(e,t,r,i){void 0===i&&(i=null);var a=t.frag;a.loaded=e.loaded,this.hls.trigger(d.a.FRAG_LOAD_PROGRESS,{frag:a,stats:e,networkDetails:i})},i}(h);var F=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.KEY_LOADING)||this).loaders={},r.decryptkey=null,r.decrypturl=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},a.onKeyLoading=function(e){var t=e.frag,r=t.type,i=this.loaders[r];if(t.decryptdata){var a=t.decryptdata.uri;if(a!==this.decrypturl||null===this.decryptkey){var n=this.hls.config;if(i&&(u.b.warn("abort previous key loader for type:"+r),i.abort()),!a)return void u.b.warn("key uri is falsy");t.loader=this.loaders[r]=new n.loader(n),this.decrypturl=a,this.decryptkey=null;var s={url:a,frag:t,responseType:"arraybuffer"},o={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:n.fragLoadingRetryDelay,maxRetryDelay:n.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(s,o,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(d.a.KEY_LOADED,{frag:t}))}else u.b.warn("Missing decryption data on fragment in onKeyLoading")},a.loadsuccess=function(e,t,r){var i=r.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,delete this.loaders[i.type],this.hls.trigger(d.a.KEY_LOADED,{frag:i})):u.b.error("after key load, decryptdata unset")},a.loaderror=function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),delete this.loaders[r.type],this.hls.trigger(d.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},a.loadtimeout=function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),delete this.loaders[r.type],this.hls.trigger(d.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},i}(h);var U="NOT_LOADED",N="APPENDING",B="PARTIAL",G="OK",K=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.BUFFER_APPENDED,d.a.FRAG_BUFFERED,d.a.FRAG_LOADED)||this).bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,h.prototype.destroy.call(this),e.prototype.destroy.call(this)},a.getBufferedFrag=function(e,t){var r=this.fragments,i=Object.keys(r).filter((function(i){var a=r[i];if(a.body.type!==t)return!1;if(!a.buffered)return!1;var n=a.body;return n.startPTS<=e&&e<=n.endPTS}));if(0===i.length)return null;var a=i.pop();return r[a].body},a.detectEvictedFragments=function(e,t){var r,i,a=this;Object.keys(this.fragments).forEach((function(n){var s=a.fragments[n];if(!0===s.buffered){var o=s.range[e];if(o){r=o.time;for(var l=0;l<r.length;l++)if(i=r[l],!1===a.isTimeBuffered(i.startPTS,i.endPTS,t)){a.removeFragment(s.body);break}}}}))},a.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),i=this.fragments[r];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var a=t.timeRanges[r];i.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,a)}})))},a.getBufferedTimes=function(e,t,r){for(var i,a,n=[],s=!1,o=0;o<r.length;o++){if(i=r.start(o)-this.bufferPadding,a=r.end(o)+this.bufferPadding,e>=i&&t<=a){n.push({startPTS:Math.max(e,r.start(o)),endPTS:Math.min(t,r.end(o))});break}if(e<a&&t>i)n.push({startPTS:Math.max(e,r.start(o)),endPTS:Math.min(t,r.end(o))}),s=!0;else if(t<=i)break}return{time:n,partial:s}},a.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},a.getPartialFragment=function(e){var t,r,i,a=this,n=null,s=0;return Object.keys(this.fragments).forEach((function(o){var l=a.fragments[o];a.isPartial(l)&&(r=l.body.startPTS-a.bufferPadding,i=l.body.endPTS+a.bufferPadding,e>=r&&e<=i&&(t=Math.min(e-r,i-e),s<=t&&(n=l.body,s=t)))})),n},a.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],i=U;return void 0!==r&&(i=r.buffered?!0===this.isPartial(r)?B:G:N),i},a.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},a.isTimeBuffered=function(e,t,r){for(var i,a,n=0;n<r.length;n++){if(i=r.start(n)-this.bufferPadding,a=r.end(n)+this.bufferPadding,e>=i&&t<=a)return!0;if(t<=i)return!1}return!1},a.onFragLoaded=function(e){var t=e.frag;Object(l.a)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},a.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},a.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},a.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},a.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},a.removeAllFragments=function(){this.fragments=Object.create(null)},i}(h),j={search:function(e,t){for(var r=0,i=e.length-1,a=null,n=null;r<=i;){var s=t(n=e[a=(r+i)/2|0]);if(s>0)r=a+1;else{if(!(s<0))return n;i=a-1}}return null}},H=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,i=0;i<r.length;i++)if(t>=r.start(i)&&t<=r.end(i))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var i,a=e.buffered,n=[];for(i=0;i<a.length;i++)n.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(n,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end}));var i=[];if(r)for(var a=0;a<e.length;a++){var n=i.length;if(n){var s=i[n-1].end;e[a].start-s<r?e[a].end>s&&(i[n-1].end=e[a].end):i.push(e[a])}else i.push(e[a])}else i=e;for(var o,l=0,d=t,u=t,c=0;c<i.length;c++){var h=i[c].start,f=i[c].end;if(t+r>=h&&t<f)d=h,l=(u=f)-t;else if(t+r<h){o=h;break}}return{len:l,start:d,end:u,nextStart:o}},e}(),V=r(8),Y=r(11),W=r(9);function q(){return window.MediaSource||window.WebKitMediaSource}var z=r(5);var X=function(e){var t,r;function i(){return e.apply(this,arguments)||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i.prototype.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.emit.apply(this,[e,e].concat(r))},i}(V.EventEmitter),Q=Object(z.a)(),$=q()||{isTypeSupported:function(){return!1}},J=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var i=this.observer=new X,a=e.config,n=function(t,i){(i=i||{}).frag=r.frag,i.id=r.id,e.trigger(t,i)};i.on(d.a.FRAG_DECRYPTED,n),i.on(d.a.FRAG_PARSING_INIT_SEGMENT,n),i.on(d.a.FRAG_PARSING_DATA,n),i.on(d.a.FRAG_PARSED,n),i.on(d.a.ERROR,n),i.on(d.a.FRAG_PARSING_METADATA,n),i.on(d.a.FRAG_PARSING_USERDATA,n),i.on(d.a.INIT_PTS_FOUND,n);var s={mp4:$.isTypeSupported("video/mp4"),mpeg:$.isTypeSupported("audio/mpeg"),mp3:$.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){var c;u.b.log("demuxing in webworker");try{c=this.w=Y(12),this.onwmsg=this.onWorkerMessage.bind(this),c.addEventListener("message",this.onwmsg),c.onerror=function(t){e.trigger(d.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},c.postMessage({cmd:"init",typeSupported:s,vendor:l,id:t,config:JSON.stringify(a)})}catch(e){u.b.warn("Error in worker:",e),u.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),c&&Q.URL.revokeObjectURL(c.objectURL),this.demuxer=new W.a(i,s,a,l),this.w=void 0}}else this.demuxer=new W.a(i,s,a,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,i,a,n,s,o){var d=this.w,c=Object(l.a)(a.startPTS)?a.startPTS:a.start,h=a.decryptdata,f=this.frag,g=!(f&&a.cc===f.cc),p=!(f&&a.level===f.level),v=f&&a.sn===f.sn+1,m=!p&&v;if(g&&u.b.log(this.id+":discontinuity detected"),p&&u.b.log(this.id+":switch detected"),this.frag=a,d)d.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:t,audioCodec:r,videoCodec:i,timeOffset:c,discontinuity:g,trackSwitch:p,contiguous:m,duration:n,accurateTimeOffset:s,defaultInitPTS:o},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,h,t,r,i,c,g,p,m,n,s,o)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":Q.URL.revokeObjectURL(this.w.objectURL);break;case d.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}();function Z(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function ee(e,t,r){var i=e[t],a=e[r],n=a.startPTS;Object(l.a)(n)?r>t?(i.duration=n-i.start,i.duration<0&&u.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-n,a.duration<0&&u.b.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=r>t?i.start+i.duration:Math.max(i.start-a.duration,0)}function te(e,t,r,i,a,n){var s=r;if(Object(l.a)(t.startPTS)){var o=Math.abs(t.startPTS-r);Object(l.a)(t.deltaPTS)?t.deltaPTS=Math.max(o,t.deltaPTS):t.deltaPTS=o,s=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),i=Math.max(i,t.endPTS),a=Math.min(a,t.startDTS),n=Math.max(n,t.endDTS)}var d=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=s,t.endPTS=i,t.startDTS=a,t.endDTS=n,t.duration=i-r;var u,c,h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;for(u=f-e.startSN,(c=e.fragments)[u]=t,h=u;h>0;h--)ee(c,h,h-1);for(h=u;h<c.length-1;h++)ee(c,h,h+1);return e.PTSKnown=!0,d}function re(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,i=0;if(ie(e,t,(function(e,a){i=e.cc-a.cc,Object(l.a)(e.startPTS)&&(a.start=a.startPTS=e.startPTS,a.endPTS=e.endPTS,a.duration=e.duration,a.backtracked=e.backtracked,a.dropped=e.dropped,r=a),t.PTSKnown=!0})),t.PTSKnown){if(i){u.b.log("discontinuity sliding from playlist, take drift into account");for(var a=t.fragments,n=0;n<a.length;n++)a[n].cc+=i}r?te(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):function(e,t){var r=t.startSN-e.startSN,i=e.fragments,a=t.fragments;if(r<0||r>i.length)return;for(var n=0;n<a.length;n++)a[n].start+=i[r].start}(e,t),t.PTSKnown=e.PTSKnown}}function ie(e,t,r){if(e&&t)for(var i=Math.max(e.startSN,t.startSN)-t.startSN,a=Math.min(e.endSN,t.endSN)-t.startSN,n=t.startSN-e.startSN,s=i;s<=a;s++){var o=e.fragments[n+s],l=t.fragments[s];if(!o||!l)break;r(o,l,s)}}function ae(e,t,r){var i=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),a=i/2;return e&&t.endSN===e.endSN&&(i=a),r&&(i=Math.max(a,i-(window.performance.now()-r))),Math.round(i)}var ne={toString:function(e){for(var t="",r=e.length,i=0;i<r;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}};function se(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function oe(e,t,r){!function(e,t,r){if(function(e,t,r){var i=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(i=!0),i}(e,r,t)){var i=function(e,t){var r=e.fragments,i=t.fragments;if(i.length&&r.length){var a=function(e,t){for(var r=null,i=0;i<e.length;i+=1){var a=e[i];if(a&&a.cc===t){r=a;break}}return r}(r,i[0].cc);if(a&&(!a||a.startPTS))return a;u.b.log("No frag in previous level to align on")}else u.b.log("No fragments to align")}(r.details,t);i&&(u.b.log("Adjusting PTS using last level due to CC increase within current level"),se(i.start,t))}}(e,r,t),!r.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,i=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start;Object(l.a)(i)&&(u.b.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),se(i,e))}}(r,t.details)}function le(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(l.a)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<e.length;++i){var a=e[i];if(ce(t,r,a))return a}return null}function de(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var a=e?t[e.sn-t[0].sn+1]:null;return a&&!ue(r,i,a)?a:j.search(t,ue.bind(null,r,i))}function ue(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var i=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=e?1:r.start-i>e&&r.start?-1:0}function ce(e,t,r){var i=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>e}var he=function(){function e(e,t,r,i){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=i,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,i=this.stalled,a=r.currentTime,n=r.seeking,s=this.seeking&&!n,o=!this.seeking&&n;if(this.seeking=n,a===e){if((o||s)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var l=H.bufferInfo(r,a,0),d=l.len>0,c=l.nextStart||0;if(d||c){if(n){if(l.len>2||(!c||c-a>2))return;this.moved=!1}if(!this.moved&&this.stalled){var h=Math.max(c,l.start||0)-a;if(h>0&&h<=2)return void this._trySkipBufferHole(null)}var f=self.performance.now();if(null!==i){var g=f-i;!n&&g>=250&&this._reportStall(l.len);var p=H.bufferInfo(r,a,t.maxBufferHole);this._tryFixBufferStall(p,g)}else this.stalled=f}}}else if(this.moved=!0,null!==i){if(this.stallReported){var v=self.performance.now()-i;u.b.warn("playback not stuck anymore @"+a+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,i=this.fragmentTracker,a=this.media.currentTime,n=i.getPartialFragment(a);if(n&&this._trySkipBufferHole(n))return;e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(u.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,u.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,i=this.media,a=i.currentTime,n=0,s=0;s<i.buffered.length;s++){var l=i.buffered.start(s);if(a+t.maxBufferHole>=n&&a<l){var c=Math.max(l+.05,i.currentTime+.1);return u.b.warn("skipping hole, adjusting currentTime from "+a+" to "+c),this.moved=!0,this.stalled=null,i.currentTime=c,e&&r.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+c,frag:e}),c}n=i.buffered.end(s)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,i=r.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<e.nudgeMaxRetry){var n=i+a*e.nudgeOffset;u.b.warn("Nudging 'currentTime' from "+i+" to "+n),r.currentTime=n,t.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else u.b.error("Playhead still not moving while enough data buffered @"+i+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!0})},e}();function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ge=function(e){var t,r;function i(t){for(var r,i=arguments.length,a=new Array(i>1?i-1:0),n=1;n<i;n++)a[n-1]=arguments[n];return(r=e.call.apply(e,[this,t].concat(a))||this)._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(fe(r)),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},a.hasInterval=function(){return!!this._tickInterval},a.hasNextTick=function(){return!!this._tickTimer},a.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},a.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},a.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},a.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},a.doTick=function(){},i}(h);var pe="STOPPED",ve="STARTING",me="IDLE",ye="PAUSED",be="KEY_LOADING",Te="FRAG_LOADING",Ee="FRAG_LOADING_WAITING_RETRY",Se="WAITING_TRACK",_e="PARSING",Ae="PARSED",Re="BUFFER_FLUSHING",we="ENDED",Le="ERROR",ke="WAITING_INIT_PTS",De="WAITING_LEVEL",Ce=function(e){var t,r;function i(){return e.apply(this,arguments)||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.doTick=function(){},a.startLoad=function(){},a.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=pe},a._streamEnded=function(e,t){var r=this.fragCurrent,i=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var a=i.getState(r);return a===B||a===G}return!1},a.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,i=this.state,a=t?t.currentTime:null,n=H.bufferInfo(r||t,a,this.config.maxBufferHole);if(Object(l.a)(a)&&u.b.log("media seeking to "+a.toFixed(3)),i===Te){var s=this.fragCurrent;if(0===n.len&&s){var o=e.maxFragLookUpTolerance,d=s.start-o,c=s.start+s.duration+o;a<d||a>c?(s.loader&&(u.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=me):u.b.log("seeking outside of buffer but within currently loaded fragment range")}}else i===we&&(0===n.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=me);t&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},a.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},a.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},a.onHandlerDestroyed=function(){this.state=pe,this.fragmentTracker=null},a.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},i}(ge);function Oe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ie=function(e){var t,r;function i(t,r){var i;return(i=e.call(this,t,d.a.MEDIA_ATTACHED,d.a.MEDIA_DETACHING,d.a.MANIFEST_LOADING,d.a.MANIFEST_PARSED,d.a.LEVEL_LOADED,d.a.KEY_LOADED,d.a.FRAG_LOADED,d.a.FRAG_LOAD_EMERGENCY_ABORTED,d.a.FRAG_PARSING_INIT_SEGMENT,d.a.FRAG_PARSING_DATA,d.a.FRAG_PARSED,d.a.ERROR,d.a.AUDIO_TRACK_SWITCHING,d.a.AUDIO_TRACK_SWITCHED,d.a.BUFFER_CREATED,d.a.BUFFER_APPENDED,d.a.BUFFER_FLUSHED)||this).fragmentTracker=r,i.config=t.config,i.audioCodecSwap=!1,i._state=pe,i.stallReported=!1,i.gapController=null,i.altAudio=!1,i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,s,c,h=i.prototype;return h.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=r.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(u.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=me,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=pe},h.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},h.doTick=function(){switch(this.state){case Re:this.fragLoadError=0;break;case me:this._doTickIdle();break;case De:var e=this.levels[this.level];e&&e.details&&(this.state=me);break;case Ee:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(u.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=me)}this._checkBuffer(),this._checkFragmentChanged()},h._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var i;i=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=e.nextLoadLevel,n=this.levels[a];if(n){var s,o=n.bitrate;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var l=H.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,t.maxBufferHole),c=l.len;if(!(c>=s)){u.b.trace("buffer length of "+c.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=a;var h=n.details;if(!h||h.live&&this.levelLastLoaded!==a)this.state=De;else{if(this._streamEnded(l,h)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(d.a.BUFFER_EOS,f),void(this.state=we)}this._fetchPayloadOrEos(i,l,h)}}}}},h._fetchPayloadOrEos=function(e,t,r){var i=this.fragPrevious,a=this.level,n=r.fragments,s=n.length;if(0!==s){var o,l=n[0].start,d=n[s-1].start+n[s-1].duration,c=t.end;if(r.initSegment&&!r.initSegment.data)o=r.initSegment;else if(r.live){var h=this.config.initialLiveManifestSize;if(s<h)return void u.b.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+h);if(null===(o=this._ensureFragmentAtLivePoint(r,c,l,d,i,n,s)))return}else c<l&&(o=n[0]);o||(o=this._findFragment(l,i,s,n,c,d,r)),o&&(o.encrypted?(u.b.log("Loading key for "+o.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+a),this._loadKey(o)):(u.b.log("Loading "+o.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+a+", currentTime:"+e.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(o)))}},h._ensureFragmentAtLivePoint=function(e,t,r,i,a,n,s){var o,l=this.hls.config,d=this.media,c=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-l.maxFragLookUpTolerance,i-c)){var h=this.liveSyncPosition=this.computeLivePosition(r,e);t=h,d&&!d.paused&&d.readyState&&d.duration>h&&h>d.currentTime&&(u.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),d.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>i&&d&&d.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(a)if(e.hasProgramDateTime)u.b.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),o=le(n,a.endProgramDateTime,l.maxFragLookUpTolerance);else{var f=a.sn+1;if(f>=e.startSN&&f<=e.endSN){var g=n[f-e.startSN];a.cc===g.cc&&(o=g,u.b.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=j.search(n,(function(e){return a.cc-e.cc})))&&u.b.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}o||(o=n[Math.min(s-1,Math.round(s/2))],u.b.log("live playlist, switching playlist, unknown, load middle frag : "+o.sn))}return o},h._findFragment=function(e,t,r,i,a,n,s){var o,l=this.hls.config;a<n?!(o=de(t,i,a,a>n-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance))&&i.length>=r&&r>=2&&i[r-1].duration<l.maxFragLookUpTolerance&&a>=i[r-2].start&&a<i[r-2].start+i[r-2].duration&&(o=i[r-1]):o=i[r-1];if(o){var d=o.sn-s.startSN,c=t&&o.level===t.level,h=i[d-1],f=i[d+1];if(t&&o.sn===t.sn)if(c&&!o.backtracked)if(o.sn<s.endSN){var g=t.deltaPTS;g&&g>l.maxBufferHole&&t.dropped&&d?(o=h,u.b.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(o=f,u.b.log("Re-loading fragment with SN: "+o.sn))}else o=null;else o.backtracked&&(f&&f.backtracked?(u.b.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+o.sn+". Loading fragment "+f.sn),o=f):(u.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),o.dropped=0,h?(o=h).backtracked=!0:d&&(o=null)))}return o},h._loadKey=function(e){this.state=be,this.hls.trigger(d.a.KEY_LOADING,{frag:e})},h._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l.a)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===U||t===B?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(d.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new J(this.hls,"main")),this.state=Te):t===N&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},h.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,n.MAIN)},h.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},h._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),H.isBuffered(r,t)?e=this.getBufferedFrag(t):H.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(d.a.FRAG_CHANGED,{frag:i});var a=i.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(d.a.LEVEL_SWITCHED,{level:a}),this.fragPlaying=i}}},h.immediateLevelSwitch=function(){if(u.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},h.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,H.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},h.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,r,i;if((r=this.getBufferedFrag(e.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var a=this.hls.nextLoadLevel,n=this.levels[a],s=this.fragLastKbps;t=s&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(e.currentTime+t))&&(i=this.followingBufferedFrag(i))){var o=this.fragCurrent;o&&o.loader&&o.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},h.flushMainBuffer=function(e,t){this.state=Re;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(d.a.BUFFER_FLUSHING,r)},h.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new he(r,t,this.fragmentTracker,this.hls)},h.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(u.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},h.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l.a)(t)&&u.b.log("media seeked to "+t.toFixed(3)),this.tick()},h.onManifestLoading=function(){u.b.log("trigger BUFFER_RESET"),this.hls.trigger(d.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},h.onManifestParsed=function(e){var t,r=!1,i=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&u.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)},h.onLevelLoaded=function(e){var t=e.details,r=e.level,i=this.levels[this.levelLastLoaded],a=this.levels[r],n=t.totalduration,s=0;if(u.b.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),t.live){var o=a.details;o&&t.fragments.length>0?(re(o,t),s=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,o),t.PTSKnown&&Object(l.a)(s)?u.b.log("live playlist sliding:"+s.toFixed(3)):(u.b.log("live playlist - outdated PTS, unknown sliding"),oe(this.fragPrevious,i,t))):(u.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,oe(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(a.details=t,this.levelLastLoaded=r,this.hls.trigger(d.a.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=t.startTimeOffset;Object(l.a)(c)?(c<0&&(u.b.log("negative start time offset "+c+", count from end of last fragment"),c=s+n+c),u.b.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):t.live?(this.startPosition=this.computeLivePosition(s,t),u.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===De&&(this.state=me),this.tick()},h.onKeyLoaded=function(){this.state===be&&(this.state=me,this.tick())},h.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,i=this.levels,a=this.media,n=e.frag;if(this.state===Te&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var s=e.stats,o=i[t.level],l=o.details;if(this.bitrateTest=!1,this.stats=s,u.b.log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),n.bitrateTest&&r.nextLoadLevel)this.state=me,this.startFragRequested=!1,s.tparsed=s.tbuffered=window.performance.now(),r.trigger(d.a.FRAG_BUFFERED,{stats:s,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=me,s.tparsed=s.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(d.a.FRAG_BUFFERED,{stats:s,frag:t,id:"main"}),this.tick();else{u.b.log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=_e,this.pendingBuffering=!0,this.appended=!1,n.bitrateTest&&(n.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:n}));var c=!(a&&a.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(o);(this.demuxer=this.demuxer||new J(this.hls,"main")).push(e.payload,h,f,o.videoCodec,t,l.totalduration,c)}}this.fragLoadError=0},h.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===_e){var i,a,n=e.tracks;if(n.audio&&this.altAudio&&delete n.audio,a=n.audio){var s=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(u.b.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===o.indexOf("firefox")&&(s="mp4a.40.5"),-1!==o.indexOf("android")&&"audio/mpeg"!==a.container&&(s="mp4a.40.2",u.b.log("Android: force audio codec to "+s)),a.levelCodec=s,a.id=e.id}for(i in(a=n.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(d.a.BUFFER_CODECS,n),n){a=n[i],u.b.log("main track:"+i+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(d.a.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},h.onFragParsingData=function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"main"===e.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===_e){var a=this.levels[this.level],n=r;if(Object(l.a)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&n.addElementaryStream(p.AUDIO),!0===e.hasVideo&&n.addElementaryStream(p.VIDEO),u.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(n.dropped=e.dropped,n.dropped)if(n.backtracked)u.b.warn("Already backtracked on this fragment, appending with the gap",n.sn);else{var s=a.details;if(!s||n.sn!==s.startSN)return u.b.warn("missing video frame(s), backtracking fragment",n.sn),this.fragmentTracker.removeFragment(n),n.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=me,this.fragPrevious=n,void this.tick();u.b.warn("missing video frame(s) on first frag, appending with gap",n.sn)}else n.backtracked=!1;var o=te(a.details,n,e.startPTS,e.endPTS,e.startDTS,e.endDTS),c=this.hls;c.trigger(d.a.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:o,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===_e&&(t.appended=!0,t.pendingBuffering=!0,c.trigger(d.a.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}},h.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===_e&&(this.stats.tparsed=window.performance.now(),this.state=Ae,this._checkAppendedParsed())},h.onAudioTrackSwitching=function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){u.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(u.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=me}var a=this.hls;a.trigger(d.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(d.a.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},h.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(u.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},h.onBufferCreated=function(e){var t,r,i=e.tracks,a=!1;for(var n in i){var s=i[n];"main"===s.id?(r=n,t=s,"video"===n&&(this.videoBuffer=i[n].buffer)):a=!0}a&&t?(u.b.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},h.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==_e&&t!==Ae||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},h._checkAppendedParsed=function(){if(!(this.state!==Ae||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;u.b.log("main buffered : "+ne.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(d.a.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=me}this.tick()}},h.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&H.isBuffered(this.media,this.media.currentTime)&&H.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);u.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Ee}else u.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Le;break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:this.state!==Le&&(e.fatal?(this.state=Le,u.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==De||(this.state=me));break;case o.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==_e&&this.state!==Ae||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=me):(u.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},h._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,u.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},h._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},h.onFragLoadEmergencyAborted=function(){this.state=me,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},h.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(p.VIDEO,e.buffered),this.state=me,this.fragPrevious=null},h.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},h._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&r>=0&&(u.b.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},h._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(u.b.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},a=i,(s=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,u.b.log("main stream-controller: "+t+"->"+e),this.hls.trigger(d.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&Oe(a.prototype,s),c&&Oe(a,c),i}(Ce);function Pe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}window.performance;var xe,Me=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.MANIFEST_LOADED,d.a.LEVEL_LOADED,d.a.AUDIO_TRACK_SWITCHED,d.a.FRAG_LOADED,d.a.ERROR)||this).canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,xe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,n,s,l=i.prototype;return l.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},l.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},l.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},l.stopLoad=function(){this.canload=!1},l.onManifestLoaded=function(e){var t,r=[],i=[],a={},n=null,s=!1,l=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,s=s||!!e.videoCodec,l=l||!!e.audioCodec,xe&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(n=a[e.bitrate])?n.url.push(e.url):(e.url=[e.url],e.urlId=0,a[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(l=!0,Z(n||e,"audio",t.AUDIO)),t.SUBTITLES&&Z(n||e,"text",t.SUBTITLES))})),s&&l&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||R(t,"audio"))&&(!r||R(r,"video"))})),e.audioTracks&&(i=e.audioTracks.filter((function(e){return!e.audioCodec||R(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var c=0;c<r.length;c++)if(r[c].bitrate===t){this._firstLevel=c,u.b.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(d.a.MANIFEST_PARSED,{levels:r,audioTracks:i,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:s,altAudio:i.some((function(e){return!!e.url}))})}else this.hls.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},l.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){u.b.log("switching to level "+e),this.currentLevelIndex=e;var i=t[e];i.level=e,r.trigger(d.a.LEVEL_SWITCHING,i)}var a=t[e],n=a.details;if(!n||n.live){var s=a.urlId;r.trigger(d.a.LEVEL_LOADING,{url:a.url[s],level:e,id:s})}}else r.trigger(d.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},l.onError=function(e){if(e.fatal)e.type===o.b.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,i=!1;switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:t=e.frag.level,i=!0;break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case o.a.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,i)}},l.recoverLevel=function(e,t,r,i){var a,n,s,o=this,l=this.hls.config,d=e.details,c=this._levels[t];if(c.loadError++,c.fragmentError=i,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return u.b.error("level controller, cannot recover from "+d+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);n=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return o.loadLevel()}),n),e.levelRetry=!0,this.levelRetryCount++,u.b.warn("level controller, "+d+", retry in "+n+" ms, current retry count is "+this.levelRetryCount)}(r||i)&&((a=c.url.length)>1&&c.loadError<a?(c.urlId=(c.urlId+1)%a,c.details=void 0,u.b.warn("level controller, "+d+" for level "+t+": switching to redundant URL-id "+c.urlId)):-1===this.manualLevelIndex?(s=0===t?this._levels.length-1:t-1,u.b.warn("level controller, "+d+": switch to "+s),this.hls.nextAutoLevel=this.currentLevelIndex=s):i&&(u.b.warn("level controller, "+d+": reload a fragment"),this.currentLevelIndex=null))},l.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},l.onLevelLoaded=function(e){var t=this,r=e.level,i=e.details;if(r===this.currentLevelIndex){var a=this._levels[r];if(a.fragmentError||(a.loadError=0,this.levelRetryCount=0),i.live){var n=ae(a.details,i,e.stats.trequest);u.b.log("live playlist, reload in "+Math.round(n)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),n)}else this.clearTimer()}},l.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var i=-1,a=0;a<r.audioGroupIds.length;a++)if(r.audioGroupIds[a]===t){i=a;break}i!==r.urlId&&(r.urlId=i,this.startLoad())}},l.loadLevel=function(){if(u.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,i=e.url[r];u.b.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(d.a.LEVEL_LOADING,{url:i,level:t,id:r})}}},a=i,(n=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Pe(a.prototype,n),s&&Pe(a,s),i}(h),Fe=r(4);function Ue(e,t){var r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function Ne(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Be=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.MEDIA_ATTACHED,d.a.MEDIA_DETACHING,d.a.FRAG_PARSING_METADATA,d.a.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,r.media=void 0,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.destroy=function(){h.prototype.destroy.call(this)},a.onMediaAttached=function(e){this.media=e.media,this.media},a.onMediaDetaching=function(){Ne(this.id3Track),this.id3Track=void 0,this.media=void 0},a.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Ue(r,this.media),r}return this.media.addTextTrack("metadata","id3")},a.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var n=Fe.a.getID3Frames(r[a].data);if(n){var s=r[a].pts,o=a<r.length-1?r[a+1].pts:t.endPTS;s===o?o+=1e-4:s>o&&(u.b.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),o=s+.25);for(var l=0;l<n.length;l++){var d=n[l];if(!Fe.a.isTimeStampFrame(d)){var c=new i(s,o,"");c.value=d,this.id3Track.addCue(c)}}}}},a.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var i=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var r=0,i=e.length-1;r<=i;){var a=Math.floor((i+r)/2);if(t<e[a].endTime)i=a-1;else{if(!(t>e[a].endTime))return e[a];r=a+1}}return e[r].endTime-t<t-e[i].endTime?e[r]:e[i]}(r.cues,t);if(i)for(;r.cues[0]!==i;)r.removeCue(r.cues[0])}},i}(h);var Ge=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),Ke=function(){function e(e,t,r,i){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ge(t),this.fast_=new Ge(r)}var t=e.prototype;return t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/r;this.fast_.sample(r,i),this.slow_.sample(r,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function je(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var He=window.performance,Ve=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.FRAG_LOADING,d.a.FRAG_LOADED,d.a.FRAG_BUFFERED,d.a.ERROR)||this).lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,n,s,c=i.prototype;return c.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},c.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,i,a=this.hls,n=a.config,s=t.level;a.levels[s].details.live?(r=n.abrEwmaFastLive,i=n.abrEwmaSlowLive):(r=n.abrEwmaFastVoD,i=n.abrEwmaSlowVoD),this._bwEstimator=new Ke(a,i,r,n.abrEwmaDefaultEstimate)}},c._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var i=r.loader,a=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return u.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=i.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var s=He.now()-n.trequest,o=Math.abs(t.playbackRate);if(s>500*r.duration/o){var l=e.levels,c=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/s),h=l[r.level],f=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,g=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*f/8)),p=t.currentTime,v=(g-n.loaded)/c,m=(H.bufferInfo(t,p,e.config.maxBufferHole).end-p)/o;if(m<2*r.duration/o&&v>m){var y;for(y=r.level-1;y>a;y--){var b=l[y].realBitrate?Math.max(l[y].realBitrate,l[y].bitrate):l[y].bitrate;if(r.duration*b/(6.4*c)<m)break}void 0<v&&(u.b.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+v.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(s,n.loaded),i.abort(),this.clearTimer(),e.trigger(d.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}},c.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l.a)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],i=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,a=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:i,duration:a},r.realBitrate=Math.round(8*i/a)}if(e.frag.bitrateTest){var n=e.stats;n.tparsed=n.tbuffered=n.tload,this.onFragBuffered(e)}}},c.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Object(l.a)(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var i=t.tparsed-t.trequest;u.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},c.onError=function(e){switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},c.clearTimer=function(){clearInterval(this.timer),this.timer=null},c._findBestLevel=function(e,t,r,i,a,n,s,o,l){for(var d=a;d>=i;d--){var c=l[d];if(c){var h=c.details,f=h?h.totalduration/h.fragments.length:t,g=!!h&&h.live,p=void 0;p=d<=e?s*r:o*r;var v=l[d].realBitrate?Math.max(l[d].realBitrate,l[d].bitrate):l[d].bitrate,m=v*f/p;if(u.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+d+"/"+Math.round(p)+"/"+v+"/"+f+"/"+n+"/"+m),p>v&&(!m||g&&!this.bitrateTestDelay||m<n))return d}}return-1},a=i,(n=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,i=e.config,a=e.minAutoLevel,n=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,d=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(H.bufferInfo(n,l,i.maxBufferHole).end-l)/d,f=this._findBestLevel(s,o,c,a,t,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(f>=0)return f;u.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,v=i.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;m&&(g=(o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay)-m,u.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),p=v=1)}return f=this._findBestLevel(s,o,c,a,t,h+g,p,v,r),Math.max(f,0)}}])&&je(a.prototype,n),s&&je(a,s),i}(h);var Ye=q(),We=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.MEDIA_ATTACHING,d.a.MEDIA_DETACHING,d.a.MANIFEST_PARSED,d.a.BUFFER_RESET,d.a.BUFFER_APPENDING,d.a.BUFFER_CODECS,d.a.BUFFER_EOS,d.a.BUFFER_FLUSHING,d.a.LEVEL_PTS_UPDATED,d.a.LEVEL_UPDATED)||this)._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){u.b.log("media source opened"),r.hls.trigger(d.a.MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){u.b.log("media source closed")},r._onMediaSourceEnded=function(){u.b.log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var e=r.sourceBuffer.audio;u.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,i=r.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),a={},n=r.sourceBuffer;for(var s in n){var o=n[s];if(!o)throw Error("handling source buffer update end error: source buffer for "+s+" uninitilized and unable to update buffered TimeRanges.");a[s]=o.buffered}r.hls.trigger(d.a.BUFFER_APPENDED,{parent:t,pending:i,timeRanges:a}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===i&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){u.b.error("sourceBuffer error:",e),r.hls.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.destroy=function(){h.prototype.destroy.call(this)},a.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var i=this.sourceBuffer.audio;if(!i)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(i.timestampOffset-e.start)>.1){var a=i.updating;try{i.abort()}catch(e){u.b.warn("can not abort audio buffer: "+e)}a?this.audioTimestampOffset=e.start:(u.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},a.onManifestParsed=function(e){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e.altAudio?2:1,u.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},a.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&Ye){var r=this.mediaSource=new Ye;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},a.onMediaDetaching=function(){u.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){u.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):u.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(d.a.MEDIA_DETACHED)},a.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},a.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},a.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},a.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var i in e)if(!t[i]){var a=e[i];if(!a)throw Error("source buffer exists for track "+i+", however track does not");var n=a.levelCodec||a.codec,s=a.container+";codecs="+n;u.b.log("creating sourceBuffer("+s+")");try{var l=t[i]=r.addSourceBuffer(s);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[i]={buffer:l,codec:n,id:a.id,container:a.container,levelCodec:a.levelCodec}}catch(e){u.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:s})}}this.hls.trigger(d.a.BUFFER_CREATED,{tracks:this.tracks})},a.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},a.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&&!r.ended&&(r.ended=!0,u.b.log(t+" sourceBuffer now EOS"))}this.checkEos()},a.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var i=e[r];if(i){if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}}u.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){u.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},a.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},a.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,i=Object.keys(r),a=t-Math.max(e,this._levelTargetDuration),n=i.length-1;n>=0;n--){var s=i[n],o=r[s];if(o){var l=o.buffered;l.length>0&&a>l.start(0)&&this.removeBufferRange(s,o,0,a)&&this.hls.trigger(d.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:a})}}else u.b.error("flushLiveBackBuffer called without attaching media")}},a.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},a.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var i=this.sourceBuffer[r];if(i&&!0===i.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(u.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l.a)(e))&&(u.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},a.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var i in r){var a=r[i];a&&(t+=a.buffered.length)}}catch(e){u.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(d.a.BUFFER_FLUSHED)}},a.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,i=this.sourceBuffer;if(Object.keys(i).length){if(!this.media||this.media.error)return this.segments=[],void u.b.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var a=r.shift();if(a)try{var n=i[a.type];if(!n)return void this._onSBUpdateEnd();if(n.updating)return void r.unshift(a);n.ended=!1,this.parent=a.parent,n.appendBuffer(a.data),this.appendError=0,this.appended++,this.appending=!0}catch(i){u.b.error("error while trying to append buffer:"+i.message),r.unshift(a);var s={type:o.b.MEDIA_ERROR,parent:a.parent,details:"",fatal:!1};22===i.code?(this.segments=[],s.details=o.a.BUFFER_FULL_ERROR):(this.appendError++,s.details=o.a.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(u.b.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],s.fatal=!0)),t.trigger(d.a.ERROR,s)}}}},a.flushBuffer=function(e,t,r){var i=this.sourceBuffer;if(!Object.keys(i).length)return!0;var a="null";if(this.media&&(a=this.media.currentTime.toFixed(3)),u.b.log("flushBuffer,pos/start/end: "+a+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return u.b.warn("abort flushing too many retries"),!0;var n=i[r];if(n){if(n.ended=!1,n.updating)return u.b.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,n,e,t))return this.flushBufferCounter++,!1}return u.b.log("buffer flushed"),!0},a.removeBufferRange=function(e,t,r,i){try{for(var a=0;a<t.buffered.length;a++){var n=t.buffered.start(a),s=t.buffered.end(a),o=Math.max(n,r),l=Math.min(s,i);if(Math.min(l,s)-o>.5){var d="null";return this.media&&(d=this.media.currentTime.toString()),u.b.log("sb remove "+e+" ["+o+","+l+"], of ["+n+","+s+"], pos:"+d),t.remove(o,l),!0}}}catch(e){u.b.warn("removeBufferRange failed",e)}return!1},i}(h);function qe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ze=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.FPS_DROP_LEVEL_CAPPING,d.a.MEDIA_ATTACHING,d.a.MANIFEST_PARSED,d.a.BUFFER_CODECS,d.a.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,n,s,o=i.prototype;return o.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},o.onFpsDropLevelCapping=function(e){i.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},o.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},o.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},o.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},o.onLevelsUpdated=function(e){this.levels=e.levels},o.onMediaDetaching=function(){this.stopCapping()},o.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},o.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter((function(r,a){return i.isLevelAllowed(a,t.restrictedLevels)&&a<=e}));return i.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},o.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},o.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},i.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},i.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var i,a,n=e.length-1,s=0;s<e.length;s+=1){var o=e[s];if((o.width>=t||o.height>=r)&&(i=o,!(a=e[s+1])||i.width!==a.width||i.height!==a.height)){n=s;break}}return n},a=i,s=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(n=[{key:"mediaWidth",get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=i.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=i.contentScaleFactor),e}}])&&qe(a.prototype,n),s&&qe(a,s),i}(h);var Xe=window.performance,Qe=function(e){var t,r;function i(t){return e.call(this,t,d.a.MEDIA_ATTACHING)||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},a.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},a.checkFPS=function(e,t,r){var i=Xe.now();if(t){if(this.lastTime){var a=i-this.lastTime,n=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,o=1e3*n/a,l=this.hls;if(l.trigger(d.a.FPS_DROP,{currentDropped:n,currentDecoded:s,totalDroppedFrames:r}),o>0&&n>l.config.fpsDroppedMonitoringThreshold*s){var c=l.currentLevel;u.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=c)&&(c-=1,l.trigger(d.a.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},a.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},i}(h),$e=window,Je=$e.performance,Ze=$e.XMLHttpRequest,et=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:Je.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new Ze;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(r){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,i=this.stats,a=this.context,n=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(Je.now(),i.trequest)),4===r){var s=t.status;if(s>=200&&s<300){var o,l;i.tload=Math.max(i.tfirst,Je.now()),l="arraybuffer"===a.responseType?(o=t.response).byteLength:(o=t.responseText).length,i.loaded=i.total=l;var d={url:t.responseURL,data:o};this.callbacks.onSuccess(d,i,a,t)}else i.retry>=n.maxRetry||s>=400&&s<499?(u.b.error(s+" while loading "+a.url),this.callbacks.onError({code:s,text:t.statusText},a,t)):(u.b.warn(s+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),n.timeout)},t.loadtimeout=function(){u.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var i=this.callbacks.onProgress;i&&i(r,this.context,null,t)},e}();function tt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var rt=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.MANIFEST_LOADING,d.a.MANIFEST_PARSED,d.a.AUDIO_TRACK_LOADED,d.a.AUDIO_TRACK_SWITCHED,d.a.LEVEL_LOADED,d.a.ERROR)||this)._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,n,s,l=i.prototype;return l.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},l.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(d.a.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},l.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)u.b.warn("Invalid audio track id:",e.id);else{if(u.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},l.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},l.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},l.onError=function(e){e.type===o.b.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===o.a.AUDIO_TRACK_LOAD_ERROR&&(u.b.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},l._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)u.b.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)u.b.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];u.b.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,i=t.type,a=t.id;this.hls.trigger(d.a.AUDIO_TRACK_SWITCHING,{id:a,type:i,url:r}),this._loadTrackDetailsIfNeeded(t)}},l.doTick=function(){this._updateTrack(this._trackId)},l._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},l._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],i=null;if(r&&(i=r.name),this._selectDefaultTrack){var a=t.filter((function(e){return e.default}));a.length?t=a:u.b.warn("No default audio tracks defined")}var n=!1,s=function(){t.forEach((function(t){n||e.audioGroupId&&t.groupId!==e.audioGroupId||i&&i!==t.name||(e._setAudioTrack(t.id),n=!0)}))};s(),n||(i=null,s()),n||(u.b.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},l._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},l._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;u.b.log("loading audio-track playlist for id: "+r),this.hls.trigger(d.a.AUDIO_TRACK_LOADING,{url:t,id:r})}},l._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,u.b.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},l._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,i=t.language,a=t.groupId;u.b.warn("Loading failed on audio track id: "+e+", group-id: "+a+', name/language: "'+r+'" / "'+i+'"');for(var n=e,s=0;s<this.tracks.length;s++){if(!this.trackIdBlacklist[s])if(this.tracks[s].name===r){n=s;break}}n!==e?(u.b.log("Attempting audio-track fallback id:",n,"group-id:",this.tracks[n].groupId),this._setAudioTrack(n)):u.b.warn('No fallback audio-track found for name/language: "'+r+'" / "'+i+'"')},a=i,(n=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&tt(a.prototype,n),s&&tt(a,s),i}(ge);function it(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var at=window.performance,nt=function(e){var t,r;function i(t,r){var i;return(i=e.call(this,t,d.a.MEDIA_ATTACHED,d.a.MEDIA_DETACHING,d.a.AUDIO_TRACKS_UPDATED,d.a.AUDIO_TRACK_SWITCHING,d.a.AUDIO_TRACK_LOADED,d.a.KEY_LOADED,d.a.FRAG_LOADED,d.a.FRAG_PARSING_INIT_SEGMENT,d.a.FRAG_PARSING_DATA,d.a.FRAG_PARSED,d.a.ERROR,d.a.BUFFER_RESET,d.a.BUFFER_CREATED,d.a.BUFFER_APPENDED,d.a.BUFFER_FLUSHED,d.a.INIT_PTS_FOUND)||this).fragmentTracker=r,i.config=t.config,i.audioCodecSwap=!1,i._state=pe,i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,n,s,c=i.prototype;return c.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[r]=i,this.videoTrackCC=r,u.b.log("InitPTS for cc: "+r+" found from video track: "+i),this.state===ke&&this.tick())},c.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(u.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=me):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ve),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=pe},c.doTick=function(){var e,t,r,i=this.hls,a=i.config;switch(this.state){case Le:case ye:case Re:break;case ve:this.state=Se,this.loadedmetadata=!1;break;case me:var n=this.tracks;if(!n)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=this.videoBuffer?this.videoBuffer:this.media,c=H.bufferInfo(s,e,a.maxBufferHole),h=H.bufferInfo(o,e,a.maxBufferHole),f=c.len,g=c.end,p=this.fragPrevious,v=Math.min(a.maxBufferLength,a.maxMaxBufferLength),m=Math.max(v,h.len),y=this.audioSwitch,b=this.trackId;if((f<m||y)&&b<n.length){if(void 0===(r=n[b].details)){this.state=Se;break}if(!y&&this._streamEnded(c,r))return this.hls.trigger(d.a.BUFFER_EOS,{type:"audio"}),void(this.state=we);var T,E=r.fragments,S=E.length,_=E[0].start,A=E[S-1].start+E[S-1].duration;if(y)if(r.live&&!r.PTSKnown)u.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=e,r.PTSKnown&&e<_){if(!(c.end>_||c.nextStart))return;u.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05}if(r.initSegment&&!r.initSegment.data)T=r.initSegment;else if(g<=_){if(T=E[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=function(e,t){return j.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(E,this.videoTrackCC)),r.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var R=c.nextStart?c.nextStart:_;return u.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(R+.05)),void(this.media.currentTime=R+.05)}}else{var w,L=a.maxFragLookUpTolerance,k=p?E[p.sn-E[0].sn+1]:void 0,D=function(e){var t=Math.min(L,e.duration);return e.start+e.duration-t<=g?1:e.start-t>g&&e.start?-1:0};g<A?(g>A-L&&(L=0),w=k&&!D(k)?k:j.search(E,D)):w=E[S-1],w&&(T=w,_=w.start,p&&T.level===p.level&&T.sn===p.sn&&(T.sn<r.endSN?(T=E[T.sn+1-r.startSN],u.b.log("SN just loaded, load next one: "+T.sn)):T=null))}T&&(T.encrypted?(u.b.log("Loading key for "+T.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+b),this.state=be,i.trigger(d.a.KEY_LOADING,{frag:T})):(u.b.log("Loading "+T.sn+", cc: "+T.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+b+", currentTime:"+e+",bufferEnd:"+g.toFixed(3)),this.fragCurrent=T,(y||this.fragmentTracker.getState(T)===U)&&("initSegment"!==T.sn&&(this.startFragRequested=!0),Object(l.a)(T.sn)&&(this.nextLoadPosition=T.start+T.duration),i.trigger(d.a.FRAG_LOADING,{frag:T}),this.state=Te)))}break;case Se:(t=this.tracks[this.trackId])&&t.details&&(this.state=me);break;case Ee:var C=at.now(),O=this.retryDate,I=(s=this.media)&&s.seeking;(!O||C>=O||I)&&(u.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=me);break;case ke:var P=this.videoTrackCC;if(void 0===this.initPTS[P])break;var x=this.waitingFragment;if(x){var M=x.frag.cc;P!==M?(t=this.tracks[this.trackId]).details&&t.details.live&&(u.b.warn("Waiting fragment CC ("+M+") does not match video track CC ("+P+")"),this.waitingFragment=null,this.state=me):(this.state=Te,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=me}},c.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},c.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(u.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},c.onAudioTracksUpdated=function(e){u.b.log("audio tracks updated"),this.tracks=e.audioTracks},c.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=ye,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=me),this.tick()},c.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,i=this.tracks[r],a=t.totalduration,n=0;if(u.b.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=i.details;s&&t.fragments.length>0?(re(s,t),n=t.fragments[0].start,t.PTSKnown?u.b.log("live audio playlist sliding:"+n.toFixed(3)):u.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,u.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var o=t.startTimeOffset;Object(l.a)(o)?(u.b.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o):t.live?(this.startPosition=this.computeLivePosition(n,t),u.b.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Se&&(this.state=me),this.tick()},c.onKeyLoaded=function(){this.state===be&&(this.state=me,this.tick())},c.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===Te&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var i=this.tracks[this.trackId],a=i.details,n=a.totalduration,s=t.level,o=t.sn,l=t.cc,c=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===o)this.state=me,h.tparsed=h.tbuffered=at.now(),a.initSegment.data=e.payload,this.hls.trigger(d.a.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=_e,this.appended=!1,this.demuxer||(this.demuxer=new J(this.hls,"audio"));var f=this.initPTS[l],g=a.initSegment?a.initSegment.data:[];if(a.initSegment||void 0!==f){this.pendingBuffering=!0,u.b.log("Demuxing "+o+" of ["+a.startSN+" ,"+a.endSN+"],track "+s);this.demuxer.push(e.payload,g,c,null,t,n,!1,f)}else u.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+o+" of ["+a.startSN+" ,"+a.endSN+"],track "+s),this.waitingFragment=e,this.state=ke}}this.fragLoadError=0},c.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===_e){var i,a=e.tracks;if(a.video&&delete a.video,i=a.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(d.a.BUFFER_CODECS,a),u.b.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var n=i.initSegment;if(n){var s={type:"audio",data:n,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(d.a.BUFFER_APPENDING,s))}this.tick()}}},c.onFragParsingData=function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&i.sn===r.sn&&i.level===r.level&&this.state===_e){var a=this.trackId,n=this.tracks[a],s=this.hls;Object(l.a)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(p.AUDIO),u.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(n.details,r,e.startPTS,e.endPTS);var c=this.audioSwitch,h=this.media,f=!1;if(c)if(h&&h.readyState){var g=h.currentTime;u.b.log("switching audio track : currentTime:"+g),g>=e.startPTS&&(u.b.log("switching audio track : flushing all audio"),this.state=Re,s.trigger(d.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),f=!0,this.audioSwitch=!1,s.trigger(d.a.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,s.trigger(d.a.AUDIO_TRACK_SWITCHED,{id:a});var v=this.pendingData;if(!v)return u.b.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void s.trigger(d.a.ERROR,{type:o.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&v.push({type:e.type,data:t,parent:"audio",content:"data"})})),!f&&v.length&&(v.forEach((function(e){t.state===_e&&(t.pendingBuffering=!0,t.hls.trigger(d.a.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},c.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===_e&&(this.stats.tparsed=at.now(),this.state=Ae,this._checkAppendedParsed())},c.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},c.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},c.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==_e&&t!==Ae||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},c._checkAppendedParsed=function(){if(!(this.state!==Ae||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=at.now(),r.trigger(d.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;i&&u.b.log("audio buffered : "+ne.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(d.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=me}this.tick()}},c.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry){this.fragLoadError=i;var n=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);u.b.warn("AudioStreamController: frag loading failed, retry in "+n+" ms"),this.retryDate=at.now()+n,this.state=Ee}else u.b.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Le}break;case o.a.AUDIO_TRACK_LOAD_ERROR:case o.a.AUDIO_TRACK_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:this.state!==Le&&(this.state=e.fatal?Le:me,u.b.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case o.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===_e||this.state===Ae)){var s=this.mediaBuffer,l=this.media.currentTime;if(s&&H.isBuffered(s,l)&&H.isBuffered(s,l+.5)){var c=this.config;c.maxMaxBufferLength>=c.maxBufferLength&&(c.maxMaxBufferLength/=2,u.b.warn("AudioStreamController: reduce max buffer length to "+c.maxMaxBufferLength+"s")),this.state=me}else u.b.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Re,this.hls.trigger(d.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},c.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(u.b.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(d.a.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=Ae):(this.state=me,this.fragPrevious=null,this.tick())},a=i,(n=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,u.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&it(a.prototype,n),s&&it(a,s),i}(Ce),st=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}function a(t,a,n){var s=this,o={enumerable:!0};s.hasBeenReset=!1;var l="",d=!1,u=t,c=a,h=n,f=null,g="",p=!0,v="auto",m="start",y=50,b="middle",T=50,E="middle";Object.defineProperty(s,"id",i({},o,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},o,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",i({},o,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},o,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},o,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},o,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},o,{get:function(){return g},set:function(t){var r=function(t){return"string"==typeof t&&(!!e[t.toLowerCase()]&&t.toLowerCase())}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},o,{get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},o,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},o,{get:function(){return m},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},o,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},o,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},o,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},o,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),ot=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function lt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new ot,this.regionList=[]}function dt(){this.values=Object.create(null)}function ut(e,t,r,i){var a=i?e.split(i):[e];for(var n in a)if("string"==typeof a[n]){var s=a[n].split(r);if(2===s.length)t(s[0],s[1])}}dt.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var ct=new st(0,0,0),ht="middle"===ct.align?"middle":"center";function ft(e,t,r){var i=e;function a(){var t=function(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function n(){e=e.replace(/^\s+/,"")}if(n(),t.startTime=a(),n(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),n(),t.endTime=a(),n(),function(e,t){var i=new dt;ut(e,(function(e,t){switch(e){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===t){i.set(e,r[a].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),s=n[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",ht,"end"]);break;case"position":n=t.split(","),i.percent(e,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",ht,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",ht,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var a=i.get("line","auto");"auto"===a&&-1===ct.line&&(a=-1),t.line=a,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",ht);var n=i.get("position","auto");"auto"===n&&50===ct.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}(e,t)}function gt(e){return e.replace(/<br(?: \/)?>/gi,"\n")}lt.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=gt(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var i=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var n=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(n?n=!1:i=r(),t.state){case"HEADER":/:/.test(i)?ut(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new st(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{ft(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(n=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var pt=lt;function vt(e,t,r,i){for(var a,n,s,o,l,d=window.VTTCue||TextTrackCue,u=0;u<i.rows.length;u++)if(s=!0,o=0,l="",!(a=i.rows[u]).isEmpty()){for(var c=0;c<a.chars.length;c++)a.chars[c].uchar.match(/\s/)&&s?o++:(l+=a.chars[c].uchar,s=!1);a.cueStartTime=t,t===r&&(r+=1e-4),n=new d(t,r,gt(l.trim())),o>=16?o--:o++,navigator.userAgent.match(/Firefox\//)?n.line=u+1:n.line=u>7?u-2:u+1,n.align="left",n.position=Math.max(0,Math.min(100,o/32*100)),e.addCue(n)}}var mt,yt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},bt=function(e){var t=e;return yt.hasOwnProperty(e)&&(t=yt[e]),String.fromCharCode(t)},Tt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Et={17:2,18:4,21:6,22:8,23:10,19:13,20:15},St={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},_t={25:2,26:4,29:6,30:8,31:10,27:13,28:15},At=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(mt||(mt={}));var Rt={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},wt=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},Lt=function(){function e(e,t,r,i,a){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=i||"black",this.flash=a||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),kt=function(){function e(e,t,r,i,a,n){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Lt(t,r,i,a,n)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Dt=function(){function e(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new kt);this.pos=0,this.currPenState=new Lt}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(Rt.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(Rt.log("ERROR","Too large cursor position "+this.pos),this.pos=100)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=bt(e);this.pos>=100?Rt.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<100;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<100;r++){var i=this.chars[r].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Ct=function(){function e(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new Dt);this.currRow=14,this.nrRollUpRows=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){Rt.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){Rt.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var n=a.rows[i].cueStartTime;if(n&&Rt.time&&n<Rt.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(a.rows[i+s])}}this.currRow=t;var o=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,d=Math.max(l-1,0);o.setCursor(e.indent),e.color=o.chars[d].penState.foreground}var u={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(u)},t.setBkgData=function(e){Rt.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){Rt.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Rt.log("INFO","Rolling up")}else Rt.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=-1,a=0;a<15;a++){var n=this.rows[a].getTextString();n&&(i=a+1,e?t.push("Row "+i+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Ot=function(){function e(e,t){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Ct,this.nonDisplayedMemory=new Ct,this.lastOutputScreen=new Ct,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,Rt.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Rt.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Rt.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){Rt.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){Rt.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){Rt.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){Rt.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){Rt.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){Rt.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){Rt.log("INFO","TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){Rt.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){Rt.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){Rt.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){Rt.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(Rt.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Rt.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){Rt.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}Rt.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=Rt.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),It=function(){function e(e,t,r){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=e||1,this.outputs=[t,r],this.channels=[new Ot(1,t),new Ot(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,i,a,n=!1;this.lastTime=e,Rt.setTime(e);for(var s=0;s<t.length;s+=2)if(i=127&t[s],a=127&t[s+1],0!==i||0!==a){if(Rt.log("DATA","["+wt([t[s],t[s+1]])+"] -> ("+wt([i,a])+")"),(r=this.parseCmd(i,a))||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r)if(n=this.parseChars(i,a))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(n);else Rt.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,Rt.log("WARNING","Couldn't parse cleaned data "+wt([i,a])+" orig: "+wt([t[s],t[s+1]])))}else this.dataCounters.padding+=2},t.parseCmd=function(e,t){var r=null;if(!((20===e||28===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Rt.log("DEBUG","Repeated command ("+wt([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var i=this.channels[r-1];return 20===e||28===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},t.parseMidrow=function(e,t){var r=null;return(17===e||25===e)&&t>=32&&t<=47&&((r=17===e?1:2)!==this.currChNr?(Rt.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),Rt.log("DEBUG","MIDROW ("+wt([e,t])+")"),!0))},t.parsePAC=function(e,t){var r,i=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,i=t>=64&&t<=95?1===r?Tt[e]:St[e]:1===r?Et[e]:_t[e];var a=this.interpretPAC(i,t);return this.channels[r-1].setPAC(a),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},t.interpretPAC=function(e,t){var r=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},t.parseChars=function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){var n=t;n=17===a?t+80:18===a?t+112:t+144,Rt.log("INFO","Special char '"+bt(n)+"' in channel "+r),i=[n]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var s=wt(i);Rt.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},t.parseBackgroundAttributes=function(e,t){var r,i,a;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(r={},16===e||24===e?(i=Math.floor((t-32)/2),r.background=At[i],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),a=e<24?1:2,this.channels[a-1].setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},t.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),Pt=function(){function e(e,t){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}(),xt=function(e,t,r){return e.substr(r||0,t.length)===t},Mt=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},Ft={parse:function(e,t,r,i,a,n){var s,o=Object(Fe.b)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),d="00:00.000",u=0,c=0,h=0,f=[],g=!0,p=!1,v=new pt;v.oncue=function(e){var t=r[i],a=r.ccOffset;t&&t.new&&(void 0!==c?a=r.ccOffset=t.start:function(e,t,r){var i=e[t],a=e[i.prevCC];if(!a||!a.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;a&&a.new;)e.ccOffset+=i.start-a.start,i.new=!1,a=e[(i=a).prevCC];e.presentationOffset=r}(r,i,h)),h&&(a=h-r.presentationOffset),p&&(e.startTime+=a-c,e.endTime+=a-c),e.id=Mt(e.startTime.toString())+Mt(e.endTime.toString())+Mt(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&f.push(e)},v.onparsingerror=function(e){s=e},v.onflush=function(){s&&n?n(s):a(f)},o.forEach((function(e){if(g){if(xt(e,"X-TIMESTAMP-MAP=")){g=!1,p=!0,e.substr(16).split(",").forEach((function(e){xt(e,"LOCAL:")?d=e.substr(6):xt(e,"MPEGTS:")&&(u=parseInt(e.substr(7)))}));try{t+(9e4*r[i].start||0)<0&&(t+=8589934592),u-=t,c=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),a=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(l.a)(t)&&Object(l.a)(r)&&Object(l.a)(i)&&Object(l.a)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,t+=6e4*i,t+=36e5*a}(d)/1e3,h=u/9e4}catch(e){p=!1,s=e}return}""===e&&(g=!1)}v.parse(e+"\n")})),v.flush()}};function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var Bt=function(e){var t,r;function i(t){var r;if((r=e.call(this,t,d.a.MEDIA_ATTACHING,d.a.MEDIA_DETACHING,d.a.FRAG_PARSING_USERDATA,d.a.FRAG_DECRYPTED,d.a.MANIFEST_LOADING,d.a.MANIFEST_LOADED,d.a.FRAG_LOADED,d.a.INIT_PTS_FOUND)||this).media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties=void 0,r.cea608Parser=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs=null,r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var i=new Pt(Ut(r),"textTrack1"),a=new Pt(Ut(r),"textTrack2");r.cea608Parser=new It(0,i,a)}return r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.addCues=function(e,t,r,i){for(var a,n,s,o,l=this.cueRanges,d=!1,u=l.length;u--;){var c=l[u],h=(a=c[0],n=c[1],s=t,o=r,Math.min(n,o)-Math.max(a,s));if(h>=0&&(c[0]=Math.min(c[0],t),c[1]=Math.max(c[1],r),d=!0,h/(r-t)>.5))return}d||l.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,i)},a.onInitPtsFound=function(e){var t=this,r=e.frag,i=e.id,a=e.initPTS,n=this.unparsedVttFrags;"main"===i&&(this.initPTS[r.cc]=a),n.length&&(this.unparsedVttFrags=[],n.forEach((function(e){t.onFragLoaded(e)})))},a.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var i=t.textTracks[r];if(i[e])return i}return null},a.createCaptionsTrack=function(e){var t=this.captionsProperties,r=this.captionsTracks,i=this.media,a=t[e],n=a.label,s=a.languageCode;if(!r[e]){var o=this.getExistingTrack(e);if(o)r[e]=o,Ne(r[e]),Ue(r[e],i);else{var l=this.createTextTrack("captions",n,s);l&&(l[e]=!0,r[e]=l)}}},a.createTextTrack=function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)},a.destroy=function(){e.prototype.destroy.call(this)},a.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},a.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Ne(e[t]),delete e[t]}))},a.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},a._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Ne(t[r])}},a.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,i){var a;if(i<r.length){for(var n=null,s=0;s<r.length;s++)if(Nt(r[s],e)){n=r[s];break}n&&(a=n)}a||(a=t.createTextTrack("subtitles",e.name,e.lang)),e.default?a.mode=t.hls.subtitleDisplay?"showing":"hidden":a.mode="disabled",t.textTracks.push(a)}))}},a.onFragLoaded=function(e){var t=e.frag,r=e.payload,i=this.cea608Parser,a=this.initPTS,n=this.lastSn,s=this.unparsedVttFrags;if("main"===t.type){var o=t.sn;t.sn!==n+1&&i&&i.reset(),this.lastSn=o}else if("subtitle"===t.type)if(r.byteLength){if(!Object(l.a)(a[t.cc]))return s.push(e),void(a.length&&this.hls.trigger(d.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var u=t.decryptdata;null!=u&&null!=u.key&&"AES-128"===u.method||this._parseVTTs(t,r)}else this.hls.trigger(d.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},a._parseVTTs=function(e,t){var r=this.hls,i=this.prevCC,a=this.textTracks,n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:i,new:!0},this.prevCC=e.cc),Ft.parse(t,this.initPTS[e.cc],n,e.cc,(function(t){var i=a[e.level];"disabled"!==i.mode?(t.forEach((function(e){if(!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){u.b.debug("Failed occurred on adding cues: "+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,i.addCue(t)}})),r.trigger(d.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):r.trigger(d.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}),(function(t){u.b.log("Failed to parse VTT cue: "+t),r.trigger(d.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},a.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if("subtitle"===t.type){if(!Object(l.a)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},a.onFragParsingUserdata=function(e){if(this.enabled&&this.cea608Parser)for(var t=0;t<e.samples.length;t++){var r=e.samples[t].bytes;if(r){var i=this.extractCea608Data(r);this.cea608Parser.addData(e.samples[t].pts,i)}}},a.extractCea608Data=function(e){for(var t,r,i,a=31&e[0],n=2,s=[],o=0;o<a;o++)t=e[n++],r=127&e[n++],i=127&e[n++],0===r&&0===i||0!=(4&t)&&0===(3&t)&&(s.push(r),s.push(i));return s},i}(h);function Gt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kt(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"subtitles"===i.kind&&i.label&&t.push(e[r])}return t}var jt=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.MEDIA_ATTACHED,d.a.MEDIA_DETACHING,d.a.MANIFEST_LOADED,d.a.SUBTITLE_TRACK_LOADED)||this).tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,n,s,o=i.prototype;return o.destroy=function(){h.prototype.destroy.call(this)},o.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l.a)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},o.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.a)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Kt(this.media.textTracks).forEach((function(e){Ne(e)})),this.subtitleTrack=-1,this.media=null)},o.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(d.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},o.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,i=e.details,a=this.trackId,n=this.tracks,s=n[a];if(r>=n.length||r!==a||!s||this.stopped)this._clearReloadTimer();else if(u.b.log("subtitle track "+r+" loaded"),i.live){var o=ae(s.details,i,e.stats.trequest);u.b.log("Reloading live subtitle playlist in "+o+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),o)}else this._clearReloadTimer()},o.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},o.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},o._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},o._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,i=t[e];e<0||!i||i.details&&!i.details.live||(u.b.log("Loading subtitle track "+e),r.trigger(d.a.SUBTITLE_TRACK_LOADING,{url:i.url,id:e}))},o._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,i=this.trackId;if(t){var a=Kt(t.textTracks);if(-1===e)[].slice.call(a).forEach((function(e){e.mode="disabled"}));else{var n=a[i];n&&(n.mode="disabled")}var s=a[e];s&&(s.mode=r?"showing":"hidden")}},o._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(l.a)(e)||e<-1||e>=r.length||(this.trackId=e,u.b.log("Switching to subtitle track "+e),t.trigger(d.a.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},o._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=Kt(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},a=i,(n=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Gt(a.prototype,n),s&&Gt(a,s),i}(h),Ht=r(7);var Vt,Yt=window.performance,Wt=function(e){var t,r;function i(t,r){var i;return(i=e.call(this,t,d.a.MEDIA_ATTACHED,d.a.MEDIA_DETACHING,d.a.ERROR,d.a.KEY_LOADED,d.a.FRAG_LOADED,d.a.SUBTITLE_TRACKS_UPDATED,d.a.SUBTITLE_TRACK_SWITCH,d.a.SUBTITLE_TRACK_LOADED,d.a.SUBTITLE_FRAG_PROCESSED,d.a.LEVEL_UPDATED)||this).fragmentTracker=r,i.config=t.config,i.state=pe,i.tracks=[],i.tracksBuffered=[],i.currentTrackId=-1,i.decrypter=new Ht.a(t,t.config),i.lastAVStart=0,i._onMediaSeeking=i.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)),i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=me,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,n=t.start,s=0;s<i.length;s++)if(n>=i[s].start&&n<=i[s].end){a=i[s];break}var o=t.start+t.duration;a?a.end=o:(a={start:n,end:o},i.push(a))}}},a.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=me},a.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=pe)},a.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=me)},a.onSubtitleTracksUpdated=function(e){var t=this;u.b.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},a.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},a.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,i=this.currentTrackId,a=this.tracks,n=a[i];t>=a.length||t!==i||!n||(r.live&&function(e,t,r){void 0===r&&(r=0);var i=-1;ie(e,t,(function(e,t,r){t.start=e.start,i=r}));var a=t.fragments;if(i<0)a.forEach((function(e){e.start+=r}));else for(var n=i+1;n<a.length;n++)a[n].start=a[n-1].start+a[n-1].duration}(n.details,r,this.lastAVStart),n.details=r,this.setInterval(500))},a.onKeyLoaded=function(){this.state===be&&(this.state=me)},a.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,i=e.frag,a=this.hls;if(this.state===Te&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var n=Yt.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=Yt.now();a.trigger(d.a.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:n,tdecrypt:t}})}))}},a.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},a.doTick=function(){if(this.media)switch(this.state){case me:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,i=this.media,a=this.tracks;if(!a||!a[t]||!a[t].details)break;var n,s=e.maxBufferHole,o=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),c=H.bufferedInfo(this._getBuffered(),i.currentTime,s),h=c.end,f=c.len,g=a[t].details,p=g.fragments,v=p.length,m=p[v-1].start+p[v-1].duration;if(f>l)return;var y=this.fragPrevious;h<m?(y&&g.hasProgramDateTime&&(n=le(p,y.endProgramDateTime,o)),n||(n=de(y,p,h,o))):n=p[v-1],n&&n.encrypted?(u.b.log("Loading key for "+n.sn),this.state=be,this.hls.trigger(d.a.KEY_LOADING,{frag:n})):n&&r.getState(n)===U&&(this.fragCurrent=n,this.state=Te,this.hls.trigger(d.a.FRAG_LOADING,{frag:n}))}else this.state=me},a.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},a._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},a.onMediaSeeking=function(){this.fragPrevious=null},i}(Ce);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(Vt||(Vt={}));var qt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function zt(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Xt=function(e){var t,r;function i(t){var r;return(r=e.call(this,t,d.a.MEDIA_ATTACHED,d.a.MEDIA_DETACHED,d.a.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r._onMediaEncrypted=function(e){u.b.log('Media is encrypted using "'+e.initDataType+'" init data type'),r._attemptSetMediaKeys(),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,n,s,l=i.prototype;return l.getLicenseServerUrl=function(e){switch(e){case Vt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},l._attemptKeySystemAccess=function(e,t,r){var i=this,a=function(e,t,r){switch(e){case Vt.WIDEVINE:return function(e,t){var r={videoCapabilities:[]};return t.forEach((function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})})),[r]}(0,r);default:throw new Error("Unknown key-system: "+e)}}(e,0,r);u.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,a).then((function(t){i._onMediaKeySystemAccessObtained(e,t)})).catch((function(t){u.b.error('Failed to obtain key-system "'+e+'" access:',t)}))},l._onMediaKeySystemAccessObtained=function(e,t){var r=this;u.b.log('Access for key-system "'+e+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i),t.createMediaKeys().then((function(t){i.mediaKeys=t,u.b.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()})).catch((function(e){u.b.error("Failed to create media-keys:",e)}))},l._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},l._onNewMediaKeySession=function(e){var t=this;u.b.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},l._onKeySessionMessage=function(e,t){u.b.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){u.b.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},l._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(d.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_KEYS,fatal:!0});u.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(e,t){var r=this,i=this._mediaKeysList[0];if(!i)return u.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(d.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(i.mediaKeysSessionInitialized)u.b.warn("Key-Session already initialized but requested again");else{var a=i.mediaKeysSession;if(!a)return u.b.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(d.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return u.b.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(d.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});u.b.log('Generating key-session request for "'+e+'" init data type'),i.mediaKeysSessionInitialized=!0,a.generateRequest(e,t).then((function(){u.b.debug("Key-session generation succeeded")})).catch((function(e){u.b.error("Error generating key-session request:",e),r.hls.trigger(d.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},l._createLicenseXhr=function(e,t,r){var i=new XMLHttpRequest,a=this._licenseXhrSetup;try{if(a)try{a(i,e)}catch(t){i.open("POST",e,!0),a(i,e)}i.readyState||i.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,r),i},l._onLicenseRequestReadyStageChange=function(e,t,r,i){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,u.b.log("License request succeeded"),"arraybuffer"!==e.responseType&&u.b.warn("xhr response type was not set to the expected arraybuffer for license request"),i(e.response);else{if(u.b.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(d.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var a=3-this._requestLicenseFailureCount+1;u.b.warn("Retrying license request, "+a+" attempts left"),this._requestLicense(r,i)}}},l._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case Vt.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},l._requestLicense=function(e,t){u.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return u.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(d.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(r.mediaKeySystemDomain),a=this._createLicenseXhr(i,e,t);u.b.log("Sending license request to URL: "+i);var n=this._generateLicenseRequestChallenge(r,e);a.send(n)}catch(e){u.b.error("Failure requesting DRM license: "+e),this.hls.trigger(d.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},l.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(Vt.WIDEVINE,t,r)}},a=i,(n=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&zt(a.prototype,n),s&&zt(a,s),i}(h);function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){Qt(e,t,r[t])}))}return e}({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:et,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Ve,bufferController:We,capLevelController:ze,fpsController:Qe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:qt},function(){0;return{cueHandler:i,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es"}}(),{subtitleStreamController:Wt,subtitleTrackController:jt,timelineController:Bt,audioStreamController:nt,audioTrackController:rt,emeController:Xt});function Jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tr(e,t,r){return t&&er(e.prototype,t),r&&er(e,r),e}r.d(t,"default",(function(){return rr}));var rr=function(e){var t,r;function i(t){var r;void 0===t&&(t={}),(r=e.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var a=i.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){Jt(e,t,r[t])}))}return e}({},a,t);var n=Zt(r).config;if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(void 0===n.liveSyncDuration||n.liveMaxLatencyDuration<=n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(u.a)(n.debug),r._autoLevelCapping=-1;var s=r.abrController=new n.abrController(Zt(r)),o=new n.bufferController(Zt(r)),l=r.capLevelController=new n.capLevelController(Zt(r)),d=new n.fpsController(Zt(r)),c=new x(Zt(r)),h=new M(Zt(r)),f=new F(Zt(r)),g=new Be(Zt(r)),p=r.levelController=new Me(Zt(r)),v=new K(Zt(r)),m=[p,r.streamController=new Ie(Zt(r),v)],y=n.audioStreamController;y&&m.push(new y(Zt(r),v)),r.networkControllers=m;var b=[c,h,f,s,o,l,d,g,v];if(y=n.audioTrackController){var T=new y(Zt(r));r.audioTrackController=T,b.push(T)}if(y=n.subtitleTrackController){var E=new y(Zt(r));r.subtitleTrackController=E,m.push(E)}if(y=n.emeController){var S=new y(Zt(r));r.emeController=S,b.push(S)}return(y=n.subtitleStreamController)&&m.push(new y(Zt(r),v)),(y=n.timelineController)&&b.push(new y(Zt(r))),r.coreComponents=b,r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i.isSupported=function(){return function(){var e=q();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}()},tr(i,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return d.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return i.defaultConfig?i.defaultConfig:$t},set:function(e){i.defaultConfig=e}}]);var a=i.prototype;return a.destroy=function(){u.b.log("destroy"),this.trigger(d.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},a.attachMedia=function(e){u.b.log("attachMedia"),this.media=e,this.trigger(d.a.MEDIA_ATTACHING,{media:e})},a.detachMedia=function(){u.b.log("detachMedia"),this.trigger(d.a.MEDIA_DETACHING),this.media=null},a.loadSource=function(e){e=s.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),u.b.log("loadSource:"+e),this.url=e,this.trigger(d.a.MANIFEST_LOADING,{url:e})},a.startLoad=function(e){void 0===e&&(e=-1),u.b.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},a.stopLoad=function(){u.b.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},a.swapAudioCodec=function(){u.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},a.recoverMediaError=function(){u.b.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},tr(i,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){u.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){u.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){u.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){u.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){u.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){u.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,i=0;i<r;i++){if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),i}(X);rr.defaultConfig=void 0}]).default}));

Namespace("scormplayer.manifest.json",{ResourceLoader:Base.extend({load:function(resourceJson)
{var resource=new scormplayer.manifest.Resource();resource.id(resourceJson.id);resource.href(resourceJson.href);resource.type(resourceJson.type);return resource;}})});

Namespace("scormplayer.manifest.json",{CourseLoader:Base.extend({load:function(courseJson)
{var course=new scormplayer.manifest.Course();course.id(courseJson.id);course.title(courseJson.title);course.objectivesGlobalToSystem(courseJson.objectivesGlobalToSystem);course.sharedDataGlobalToSystem(courseJson.sharedDataGlobalToSystem);course.rootItem(this._loadRootItem(courseJson.item));return course;},_loadRootItem:function(itemJson)
{var loader=new scormplayer.manifest.json.CourseAggregationItemLoader();return loader.load(itemJson);}})});

Namespace.use(["scormplayer.player.*","scormplayer.manifest.Resource","scormplayer.player.sequence.request.NavigationRequest"],function(){var PlayerInterfaces=Base.extend({}).implement(INavigationRequestListener,ISequenceControllerListener,api.IApiListener,ICourseItemLoader,IActivityAttemptListener,IControlsVisibilityListener);Namespace("scormplayer.player",{Player:PlayerInterfaces.extend({_manifest:null,_course:null,_lms:null,_uiConnector:null,_contentState:null,_globalObjectives:null,_globalSharedData:null,_sequenceController:null,_api:null,_dataMapper:null,_activityManager:null,_activityAttemptsManager:null,_rollupProcessor:null,_activityStatusEvaluater:null,_logger:null,_currentItemId:null,_isReady:null,_controlsVisibilityListener:null,constructor:function()
{this._logger=new scormplayer.log.LoggerProxy();this._logger.register(this,"Player");this._activityStatusEvaluater=this._createActivityStatusEvaluater();this._activityManager=new ActivityManager(this._activityStatusEvaluater);this._activityAttemptsManager=new ActivityAttemptsManager();this._activityAttemptsManager.logger(this._logger);this._activityAttemptsManager.listener(this);this._uiConnector=this._createPlayerUIConnector(this._activityStatusEvaluater);this._uiConnector.listener(this);this._uiConnector.setControlsVisibilityListener(this);this._api=this._createApi();this._api.setRequestListener(this);this._api.setApiListener(this);this._api.logger(this._logger);this._dataMapper=this._createDataMapper(this._activityStatusEvaluater);this._dataMapper.logger(this._logger);this._rollupProcessor=this._createRollupProcessor(this._activityStatusEvaluater);this._rollupProcessor.logger(this._logger);this._rollupProcessor.activityAttemptsManager(this._activityAttemptsManager);this._isReady=false;},logger:function(logger)
{if(logger!==undefined)this._logger.logger(logger);return this._logger;},setIsReady:function()
{this._isReady=true;},_initialize:function()
{var newContentState=false;if(!this._contentState)
{newContentState=true;this._initContentState();}
this._loadGlobalDataToContentState();this._initSequenceController();this._uiConnector.trackingData(this._contentState.trackingData());this._activityAttemptsManager.trackingData(this._contentState.trackingData());this._activityAttemptsManager.course(this._course);this._activityManager.course(this._course);this._activityManager.trackingData(this._contentState.trackingData());this._activityManager.initActivities(this._contentState.trackingData().activities(),newContentState);this._rollupProcessor.course(this._course);this._rollupProcessor.activities(this._contentState.trackingData().activities());this._dataMapper.course(this._course);this._dataMapper.userInfo(this._lms.getUserInfo());},setControlsVisibilityListener:function(listener)
{if(listener!==undefined)
{this._controlsVisibilityListener=listener;}
return this._controlsVisibilityListener;},_initContentState:function()
{var activities=tracking.ActivitiesCollection.createCourseActivities(this._course);var trackingData=new tracking.TrackingData();trackingData.activities(activities);this._contentState=new ContentState();this._contentState.trackingData(trackingData);},_loadGlobalDataToContentState:function()
{if(this._course.objectivesGlobalToSystem()&&this._globalObjectives)
{this._contentState.trackingData().globalObjectives(this._globalObjectives);}
if(this._course.sharedDataGlobalToSystem()&&this._globalSharedData)
{this._contentState.sharedData(this._globalSharedData);}},start:function()
{this._logger.log(this,"start()");this._initialize();var requestType;if(this._contentState.trackingData().suspendedActivity())
{requestType=NavigationRequest.RESUME_ALL;}
else
{requestType=NavigationRequest.START;}
this.handleRequest(new NavigationRequest(requestType));},stop:function()
{this._uiConnector.exitLinkClicked();},manifest:function(manifest)
{if(manifest!==undefined){this._manifest=manifest;this._uiConnector.resources(manifest.resources());}
return this._manifest;},courseId:function(courseId)
{if(courseId!==undefined&&this._manifest)
{this._course=this._manifest.courses().getCourseById(courseId);if(!this._course)
{throw"unknown course "+courseId;}
this._uiConnector.course(this._course);}
return(this._course?this._course.id():null);},lms:function(lms)
{if(lms!==undefined){this._lms=lms;this._uiConnector.ui(lms.getPlayerUI());}
return this._lms;},loadContentState:function(stateJson)
{this._contentState=storage.ContentStateImporter.importContentState(stateJson);},loadGlobalObjectives:function(objectivesJson)
{this._globalObjectives=storage.ObjectivesCollectionImporter.importObjectives(objectivesJson);},loadGlobalSharedData:function(dataJson)
{this._globalSharedData=storage.SharedDataImporter.importSharedData(dataJson);},_initSequenceController:function()
{this._sequenceController=this._createSequenceController(this._activityStatusEvaluater);this._sequenceController.listener(this);this._sequenceController.courseItemLoader(this);this._sequenceController.course(this._course);this._sequenceController.contentState(this._contentState);this._sequenceController.logger(this._logger);this._sequenceController.activityManager(this._activityManager);this._sequenceController.activityAttemptsManager(this._activityAttemptsManager);},_createSequenceController:function(activityStatusEvaluater)
{return new SequenceController(activityStatusEvaluater);},_createActivityStatusEvaluater:function()
{return new ActivityStatusEvaluater();},_createPlayerUIConnector:function(activityStatusEvaluater)
{return new PlayerUIConnector(activityStatusEvaluater);},_createApi:function(){},_createDataMapper:function(activityStatusEvaluater){},_createRollupProcessor:function(activityStatusEvaluater)
{return new RollupProcessor(activityStatusEvaluater);},handleRequest:function(request)
{this._logger.log(this,"handleRequest("+request.type()+", "+request.itemId()+")");this._sequenceController.processRequest(request);},onNavigationRequestHandled:function()
{this._uiConnector.updateUI();},isRequestValid:function(request)
{return this._sequenceController.isRequestValid(request);},handleSequenceAction:function(action)
{this._logger.log(this,"handleSequenceAction("+action.code()+")");switch(action.code())
{case SequenceAction.EXIT:this._exit();break;case SequenceAction.DELIVER_ACTIVITY:this._onChangeCurrentActivity(action.itemId());break;}},_exit:function()
{this._saveContentState();this._lms.exit();},_onChangeCurrentActivity:function(itemId)
{this._rollupProcessor.saveActivitiesStates();},loadCourseItem:function(courseItemId)
{this._logger.log(this,"loadCourseItem("+courseItemId+")");this._currentItemId=courseItemId;this._updateContentApi(courseItemId);this._uiConnector.showCourseItem(courseItemId);},unloadCourseItem:function(callback)
{this._logger.log(this,"unloadCourseItem");this._saveLessonStatus();var thisPtr=this;this._uiConnector.unloadCourseItem(function(){if(!thisPtr._api.terminated())
{thisPtr.onApiTerminated();}
if(callback)
{callback();}});},getState:function()
{this._saveLessonStatus();return this._lms.getDataToSave();},_updateContentApi:function(courseItemId)
{var courseItem=this._course.getItemById(courseItemId);var apiName=this._getApiName();this._api.reset();this._lms.registerApi(apiName,this._api.api());var runTimeData=this._getRunTimeDataForItem(courseItem);this._api.runTimeData(runTimeData);this._api.courseItem(courseItem);},_getRunTimeDataForItem:function(courseItem)
{var runTimeData=new api.RunTimeData();var itemActivity=this._contentState.trackingData().activities().getActivityByItemId(courseItem.id());this._dataMapper.activityToRunTimeData(itemActivity,runTimeData);return runTimeData;},_updateCurrentItemActivity:function(runTimeData,apiTerminated)
{var activities=this._contentState.trackingData().activities();var itemActivity=activities.getActivityByItemId(this._currentItemId);if(itemActivity)
{if(apiTerminated)
{this._dataMapper.finalRunTimeDataToActivity(runTimeData,itemActivity,this._isReady);}
else
{this._dataMapper.runTimeDataToActivity(runTimeData,itemActivity);}
this._rollupProcessor.rollupActivity(itemActivity,true);this._uiConnector.updateUI();}},_saveContentState:function()
{var contentStateJson=storage.ContentStateExporter.exportContentState(this._contentState,this._course,this._activityStatusEvaluater);this._lms.saveContentState(contentStateJson);if(this._course.objectivesGlobalToSystem())
{var objectivesJson=contentStateJson.trackingData.globalObjectives;this._lms.saveGlobalObjectives(objectivesJson);}
if(this._course.sharedDataGlobalToSystem())
{var sharedDataJson=contentStateJson.sharedData;this._lms.saveGlobalSharedData(sharedDataJson);}},_saveLessonStatus:function(){},onApiTerminated:function()
{this._updateCurrentItemActivity(this._api.runTimeData(),true);},onApiCommited:function()
{this._saveContentState();this._lms.commit();this._updateCurrentItemActivity(this._api.runTimeData());},onStartActivityAttempt:function(activity)
{this._activityManager.onStartActivityAttempt(activity);var rootActivity=this._contentState.trackingData().activities().rootActivity();var isRootActivity=(activity==rootActivity);if(isRootActivity)
{this._resetGlobalData();}},_resetGlobalData:function()
{var resetObjectives=!this._course.objectivesGlobalToSystem();if(resetObjectives)
{var objectives=this._contentState.trackingData().globalObjectives();for(var i=0;i<objectives.countObjectives();++i)
{var objective=objectives.getObjectiveByIndex(i);objective.reset();}}
var resetSharedData=!this._course.sharedDataGlobalToSystem();if(resetSharedData)
{this._contentState.sharedData().clear();}},onStopActivityAttempt:function(activity)
{this._activityManager.onStopActivityAttempt(activity);this._rollupProcessor.rollupActivity(activity,false);},onAllToolbarControlsHidden:function(){this._controlsVisibilityListener.onAllToolbarControlsHidden();},onSomeToolbarControlsVisible:function(){this._controlsVisibilityListener.onSomeToolbarControlsVisible();},_getApiName:function(){}},{PLAYERS:{"1.2":"scormplayer.player.scorm12.Player","CAM 1.3":"scormplayer.player.scorm2004.Player","2004 3rd Edition":"scormplayer.player.scorm2004.Player","2004 4th Edition":"scormplayer.player.scorm2004.Player"},createPlayer:function(manifest)
{var playerClass="scorm12.Player";var manifestVersion=manifest.metadata().schemaVersion();if(manifestVersion in this.PLAYERS)
{playerClass=this.PLAYERS[manifestVersion];}
var player=eval("new "+playerClass+"()");player.manifest(manifest);return player;}})})});

Namespace("scormplayer.player.api.scorm12",{ApiAdapter:Base.extend({TRUE:"true",FALSE:"false",_api:null,api:function(api)
{if(api!==undefined)this._api=api;return this._api;},LMSInitialize:function(param)
{return this._convertBool(this._api.initialize(param));},LMSFinish:function(param)
{return this._convertBool(this._api.terminate(param));},LMSGetValue:function(varName)
{var varValue=this._api.getValue(varName);if(varValue==null)
{return"";}
return varValue;},LMSSetValue:function(varName,varValue)
{return this._convertBool(this._api.setValue(varName,varValue));},LMSCommit:function(param)
{return this._convertBool(this._api.commit(param));},LMSGetLastError:function()
{return this._api.getLastError()+"";},LMSGetErrorString:function(errorCode)
{return this._api.getErrorString(errorCode);},LMSGetDiagnostic:function(errorCode)
{return this._api.getDiagnostic(errorCode);},_convertBool:function(value)
{return value?this.TRUE:this.FALSE;}})});

Namespace.use(["scormplayer.player.api.*","scormplayer.player.api.scorm12.*"],function(){Namespace("scormplayer.player.api.scorm12",{RunTimeDataWrapper:RunTimeDataWrapper.extend({constructor:function()
{this.base();this._types[ValueType.TIME]=type.TimeValue;this._types[ValueType.TIMEINTERVAL]=type.TimeIntervalValue;this._types[ValueType.LONG_ID]=type.LongIdValue;},_getProperties:function()
{return scormplayer.player.api.scorm12.RunTimeDataWrapper.data;},_setComments:function(propName,propInfo,data,value)
{var prevComments=data.isset(propName)?data.get(propName):"";value=prevComments+value;var validator=new scormplayer.player.api.type.StringValue();validator.init(propInfo);validator.validateValue(value);data.set(propName,value);return true;},_setInteractionResult:function(propName,propInfo,data,value)
{var availableResults=propInfo.states;if($.inArray(value,availableResults)<0)
{(new scormplayer.player.api.type.NumberValue()).validateValue(value);}
data.set(propName,value);return true;}},{data:{cmi:{show_childs:false,childs:{core:{childs:{student_id:{},student_name:{},lesson_location:{write:true,max_length:255},credit:{type:ValueType.STATE,states:["credit","no-credit"],"default":"credit"},lesson_status:{write:true,type:ValueType.STATE,states:["passed","completed","failed","incomplete","browsed"],"default":"not attempted"},entry:{type:ValueType.STATE,states:["ab-initio","resume",""],"default":"ab-initio"},score:{childs:{raw:{write:true,type:ValueType.NUMBER,min:0,max:100},max:{write:true,type:ValueType.NUMBER,min:0,max:100},min:{write:true,type:ValueType.NUMBER,min:0,max:100}}},total_time:{type:ValueType.TIMEINTERVAL},lesson_mode:{type:ValueType.STATE,states:["browse","normal","review"],"default":"normal"},exit:{read:false,write:true,type:ValueType.STATE,states:["time-out","suspend","logout",""]},session_time:{read:false,write:true,type:ValueType.TIMEINTERVAL}}},suspend_data:{write:true,max_length:4096},launch_data:{},comments:{write:true,leaf_set:"_setComments",max_length:4096},comments_from_lms:{},objectives:{type:ValueType.ARRAY,insert_keys:["id"],childs:{id:{type:ValueType.LONG_ID,write:true},score:{childs:{raw:{write:true,type:ValueType.NUMBER,min:0,max:100},max:{write:true,type:ValueType.NUMBER,min:0,max:100},min:{write:true,type:ValueType.NUMBER,min:0,max:100}}},status:{write:true,type:ValueType.STATE,states:["passed","completed","failed","incomplete","browsed","not attempted"]}}},student_data:{childs:{mastery_score:{type:ValueType.NUMBER},max_time_allowed:{type:ValueType.TIMEINTERVAL},time_limit_action:{type:ValueType.STATE,states:["exit,message","continue,message","exit,no message","continue,no message"],"default":"continue,no message"}}},student_preference:{childs:{audio:{write:true,type:ValueType.NUMBER,min:-1,max:100},language:{write:true,max_length:255},speed:{write:true,type:ValueType.NUMBER,min:-100,max:100},text:{write:true,type:ValueType.STATE,states:["-1","0","1"]}}},interactions:{type:ValueType.ARRAY,insert_keys:["id"],childs:{id:{type:ValueType.LONG_ID,read:false,write:true},objectives:{type:ValueType.ARRAY,insert_keys:["id"],show_childs:false,childs:{id:{type:ValueType.LONG_ID,read:false,write:true}}},time:{read:false,write:true,type:ValueType.TIME},type:{read:false,write:true,type:ValueType.STATE,states:["true-false","choice","fill-in","matching","performance","sequencing","likert","numeric"]},correct_responses:{type:ValueType.ARRAY,insert_keys:["pattern"],show_childs:false,childs:{pattern:{read:false,write:true}}},weighting:{read:false,write:true,type:ValueType.NUMBER},student_response:{read:false,write:true},result:{read:false,write:true,states:["correct","wrong","unanticipated","neutral"],leaf_set:"_setInteractionResult"},latency:{read:false,write:true,type:ValueType.TIMEINTERVAL}}}}}}})});});

Namespace("scormplayer.player.api.scorm2004",{ApiAdapter:Base.extend({TRUE:"true",FALSE:"false",_api:null,api:function(api)
{if(api!==undefined)this._api=api;return this._api;},version:"1.0",Initialize:function(param)
{return this._convertBool(this._api.initialize(param));},Terminate:function(param)
{return this._convertBool(this._api.terminate(param));},GetValue:function(varName)
{var varValue=this._api.getValue(varName);if(varValue==null)
{return"";}
return varValue;},SetValue:function(varName,varValue)
{return this._convertBool(this._api.setValue(varName,varValue));},Commit:function(param)
{return this._convertBool(this._api.commit(param));},GetLastError:function()
{return this._api.getLastError()+"";},GetErrorString:function(errorCode)
{return this._api.getErrorString(errorCode);},GetDiagnostic:function(errorCode)
{return this._api.getDiagnostic(errorCode);},_convertBool:function(value)
{return value?this.TRUE:this.FALSE;}})});

Namespace.use(["scormplayer.player.api.*","scormplayer.player.api.scorm2004.*","scormplayer.player.sequence.request.NavigationRequest"],function(){Namespace("scormplayer.player.api.scorm2004",{RunTimeDataWrapper:RunTimeDataWrapper.extend({_sharedData:null,_requestAfterTermination:null,_requestListener:null,constructor:function()
{this.base();this._types[ValueType.TIME]=type.TimeValue;this._types[ValueType.TIMEINTERVAL]=type.TimeIntervalValue;this._types[ValueType.LONG_ID]=type.LongIdValue;this._types[ValueType.INTERACTION_RESULT]=type.interaction.ResultValue;this._types[ValueType.LANG_STRING]=type.LangStringValue;this._types[ValueType.LANG_TYPE]=type.LangTypeValue;},setRequestListener:function(listener)
{this._requestListener=listener;},sharedData:function(data)
{if(data!==undefined)this._sharedData=data;return this._sharedData;},requestAfterTermination:function(request)
{if(request!==undefined)this._requestAfterTermination=request;if(this._runTimeData)
{var cmiExitValue=this._runTimeData.get("cmi.exit");if(cmiExitValue=="suspend"&&this._requestAfterTermination==null)
{return new NavigationRequest(NavigationRequest.SUSPEND_ALL);}
var terminatedValues=["time-out","logout"];if($.inArray(cmiExitValue,terminatedValues)>=0||this._requestAfterTermination==null)
{return new NavigationRequest(NavigationRequest.EXIT_ALL);}}
return this._requestAfterTermination;},_setTerminationRequest:function(propNames,propInfo,data,request)
{if(propNames.length>0)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
var requestDelimiters={};request=DelimitersParser.parse(request,{target:null},requestDelimiters);var availableRequests=propInfo.requests;if(!(request in availableRequests))
{throw ErrorType.DATA_MODEL_TYPE_MISMATCH;}
var requestCode=availableRequests[request];if(requestCode==null)
{this._requestAfterTermination=null;}
else
{var target=("target"in requestDelimiters?requestDelimiters.target:null);this._requestAfterTermination=new NavigationRequest(requestCode,target);}
return true;},_getTerminationRequest:function(propNames,propInfo)
{if(propNames.legth>0)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
var request=this._requestAfterTermination;if(request==null)
{return"_none_";}
var requestStr="";if(request.itemId())
{requestStr+="{target="+request.itemId()+"}";}
var availableRequests=utils.ObjectUtils.swap(propInfo.requests);requestStr+=availableRequests[request.type()];return requestStr;},_isNavigationRequestValid:function(request)
{return this._requestListener.isRequestValid(request)?"true":"false";},_isContinueRequestValid:function(propNames)
{if(propNames.length>0)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
return this._isNavigationRequestValid(new NavigationRequest(NavigationRequest.CONTINUE));},_isPreviousRequestValid:function(propNames)
{if(propNames.length>0)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
return this._isNavigationRequestValid(new NavigationRequest(NavigationRequest.PREVIOUS));},_isChoiceRequestValid:function(propNames)
{if(propNames.length!=1)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
var delimiters={};if(DelimitersParser.parse(propNames[0],{target:null},delimiters)!=="")
{throw ErrorType.UNDEFINED_DATA_MODEL;}
return this._isNavigationRequestValid(new NavigationRequest(NavigationRequest.CHOICE,delimiters.target));},_isJumpRequestValid:function(propNames)
{if(propNames.length!=1)
{throw ErrorType.UNDEFINED_DATA_MODEL;}
var delimiters={};if(DelimitersParser.parse(propNames[0],{target:null},delimiters)!=="")
{throw ErrorType.UNDEFINED_DATA_MODEL;}
return this._isNavigationRequestValid(new NavigationRequest(NavigationRequest.JUMP,delimiters.target));},_getProperties:function()
{return scormplayer.player.api.scorm2004.RunTimeDataWrapper.data;},_getSharedData:function(propName,propInfo,data)
{var sharedDataId=data.get("id");var sharedDataInfo=this._getSharedDataInfo(sharedDataId);if(!sharedDataInfo)
{throw ErrorType.GENERAL_GET_ERROR;}
if(!sharedDataInfo.canRead())
{throw ErrorType.DATA_MODEL_WRITE_ONLY;}
var sharedData=this._sharedData.get(sharedDataId);if(!sharedData)
{throw ErrorType.DATA_MODEL_NOT_INIT;}
return sharedData;},_setSharedData:function(propName,propInfo,data,value)
{var sharedDataId=data.get("id");var sharedDataInfo=this._getSharedDataInfo(sharedDataId);if(!sharedDataInfo)
{throw ErrorType.GENERAL_SET_ERROR;}
if(!sharedDataInfo.canWrite())
{throw ErrorType.DATA_MODEL_READ_ONLY;}
this._sharedData.set(sharedDataId,value);return true;},_getSharedDataInfo:function(dataId)
{var dataCollection=this._courseItem.sharedData();if(dataCollection)
{return dataCollection.getSharedDataById(dataId);}
return null;},_getCompletionStatus:function(propName,propInfo,data)
{var passingMeasure=data.get("completion_threshold");if(passingMeasure!==null)
{var measure=data.get("progress_measure");if(measure!==null)
{return measure>=passingMeasure?"completed":"incomplete";}
return"unknown";}
var status=data.get("completion_status")
return status===null?propInfo["default"]:status;},_getSuccessStatus:function(propName,propInfo,data)
{var passingMeasure=data.get("scaled_passing_score");if(passingMeasure!==null)
{var measure=data.get("score.scaled");if(measure!==null)
{return measure>=passingMeasure?"passed":"failed";}
return"unknown";}
var status=data.get("success_status");return status===null?propInfo["default"]:status;},_setInteractionCorrectResponse:function(propName,propInfo,data,value)
{InteractionResponseValidator.validateCorrectResponse(value,data);data.set(propName,value);return true;},_setInteractionLearnerResponse:function(propName,propInfo,data,value)
{InteractionResponseValidator.validateLearnerResponse(value,data);data.set(propName,value);return true;}},{data:{cmi:{show_childs:false,childs:{_version:{"default":"1.0"},comments_from_learner:{type:ValueType.ARRAY,insert_keys:["comment","location","timestamp"],childs:{comment:{write:true,type:ValueType.LANG_STRING},location:{write:true},timestamp:{write:true,type:ValueType.TIME}}},comments_from_lms:{type:ValueType.ARRAY,write:false,childs:{comment:{type:ValueType.LANG_STRING},location:{},timestamp:{type:ValueType.TIME}}},completion_status:{write:true,leaf_get:"_getCompletionStatus",type:ValueType.STATE,states:["completed","incomplete","not attempted","unknown"],"default":"unknown"},completion_threshold:{type:ValueType.NUMBER,min:0,max:1},credit:{type:ValueType.STATE,states:["credit","no-credit"],"default":"credit"},entry:{type:ValueType.STATE,states:["ab-initio","resume",""],"default":"ab-initio"},exit:{type:ValueType.STATE,read:false,write:true,states:["time-out","suspend","logout","normal",""]},interactions:{type:ValueType.ARRAY,insert_keys:["id"],childs:{id:{type:ValueType.LONG_ID,write:true},type:{write:true,type:ValueType.STATE,states:["true-false","choice","fill-in","long-fill-in","likert","matching","performance","sequencing","numeric","other"]},objectives:{type:ValueType.ARRAY,show_childs:false,insert_keys:["id"],childs:{id:{type:ValueType.LONG_ID,write:true,unique:true}}},timestamp:{write:true,type:ValueType.TIME},correct_responses:{type:ValueType.ARRAY,show_childs:false,insert_keys:["pattern"],childs:{pattern:{write:true,leaf_set:"_setInteractionCorrectResponse"}}},weighting:{type:ValueType.NUMBER,write:true},learner_response:{write:true,leaf_set:"_setInteractionLearnerResponse"},result:{type:ValueType.INTERACTION_RESULT,write:true,states:["correct","incorrect","neutral","unanticipated","neutral"]},latency:{type:ValueType.TIMEINTERVAL,write:true},description:{type:ValueType.LANG_STRING,write:true}}},launch_data:{},learner_id:{},learner_name:{type:ValueType.LANG_STRING},learner_preference:{childs:{audio_level:{write:true,type:ValueType.NUMBER,"default":1,min:0},language:{type:ValueType.LANG_TYPE,write:true,"default":""},delivery_speed:{write:true,"default":1,type:ValueType.NUMBER,min:0},audio_captioning:{write:true,type:ValueType.STATE,states:["-1","0","1"],"default":"0"}}},location:{write:true},max_time_allowed:{type:ValueType.TIMEINTERVAL},mode:{type:ValueType.STATE,states:["browse","normal","review"],"default":"normal"},objectives:{type:ValueType.ARRAY,insert_keys:["id"],childs:{id:{type:ValueType.LONG_ID,write:true,changeable:false,unique:true},score:{childs:{scaled:{write:true,type:ValueType.NUMBER,min:-1,max:1},raw:{write:true,type:ValueType.NUMBER},min:{write:true,type:ValueType.NUMBER},max:{write:true,type:ValueType.NUMBER}}},success_status:{write:true,type:ValueType.STATE,states:["passed","failed","unknown"],"default":"unknown"},completion_status:{write:true,type:ValueType.STATE,states:["completed","incomplete","not attempted","unknown"],"default":"unknown"},progress_measure:{write:true,type:ValueType.NUMBER,min:0,max:1},description:{type:ValueType.LANG_STRING,write:true}}},progress_measure:{write:true,type:ValueType.NUMBER,min:0,max:1},scaled_passing_score:{type:ValueType.NUMBER,min:-1,max:1},score:{childs:{scaled:{write:true,type:ValueType.NUMBER,min:-1,max:1},raw:{write:true,type:ValueType.NUMBER},min:{write:true,type:ValueType.NUMBER},max:{write:true,type:ValueType.NUMBER}}},session_time:{read:false,write:true,type:ValueType.TIMEINTERVAL},success_status:{write:true,leaf_get:"_getSuccessStatus",type:ValueType.STATE,states:["passed","failed","unknown"],"default":"unknown"},suspend_data:{write:true},time_limit_action:{type:ValueType.STATE,states:["exit,message","continue,message","exit,no message","continue,no message"],"default":"continue,no message"},total_time:{type:ValueType.TIMEINTERVAL,"default":0}}},adl:{show_childs:false,childs:{nav:{show_childs:false,childs:{request:{set:"_setTerminationRequest",get:"_getTerminationRequest",requests:{"continue":NavigationRequest.CONTINUE,previous:NavigationRequest.PREVIOUS,choice:NavigationRequest.CHOICE,jump:NavigationRequest.JUMP,exit:NavigationRequest.EXIT,exitAll:NavigationRequest.EXIT_ALL,abandon:NavigationRequest.ABANDON,abandonAll:NavigationRequest.ABANDON_ALL,suspendAll:NavigationRequest.SUSPEND_ALL,_none_:null}},request_valid:{show_childs:false,childs:{"continue":{get:"_isContinueRequestValid"},previous:{get:"_isPreviousRequestValid"},choice:{get:"_isChoiceRequestValid"},jump:{get:"_isJumpRequestValid"}}}}},data:{type:ValueType.ARRAY,childs:{id:{},store:{write:true,leaf_set:"_setSharedData",leaf_get:"_getSharedData"}}}}}}})});});

Namespace.use("scormplayer.player.api.*",function(){Namespace("scormplayer.player.api.scorm12",{ErrorsCollection:ErrorsCollection.extend({_errors:null,constructor:function()
{this.base();this._initErrors();this.setErrorsDiagnostics(ErrorsDiagnostics);},_initErrors:function()
{this._errors={};var errorsInfos=scormplayer.player.api.scorm12.ErrorsCollection.errors;for(var errorName in errorsInfos)
{var errorType=ErrorType[errorName];this._errors[errorType]=errorsInfos[errorName];}},_getErrors:function()
{return this._errors;}},{errors:{NO_ERROR:{code:0,message:"No Error"},GENERAL_ERROR:{code:101,message:"General Exception"},GENERAL_INIT_ERROR:{code:101},ALREADY_INIT:{code:101},CONTENT_INSTANCE_TERMINATED:{code:101},GENERAL_TERMINATION_ERROR:{code:101},TERMINATION_BEFORE_INIT:{code:301,message:"Not initialized"},ALREADY_TERMINATED:{code:101},GET_VALUE_BEFORE_INIT:{code:301},GET_VALUE_AFTER_TERMINATION:{code:101},SET_VALUE_BEFORE_INIT:{code:301},SET_VALUE_AFTER_TERMINATION:{code:101},COMMIT_BEFORE_INIT:{code:301},COMMIT_AFTER_TERMINATION:{code:101},GENERAL_ARGUMENT_ERROR:{code:201,message:"Invalid argument error"},GENERAL_GET_ERROR:{code:201},GENERAL_SET_ERROR:{code:201},GENERAL_COMMIT_ERROR:{code:101},UNDEFINED_DATA_MODEL:{code:201},UNIMPLEMENTED_DATA_MODEL:{code:401,message:"Not implemented error"},DATA_MODEL_NOT_INIT:{code:0},DATA_MODEL_READ_ONLY:{code:403,message:"Element is read only"},DATA_MODEL_WRITE_ONLY:{code:404,message:"Element is write only"},DATA_MODEL_TYPE_MISMATCH:{code:405,message:"Incorrect Data Type"},DATA_MODEL_OUT_OF_RANGE:{code:405},DATA_MODEL_DEPENDENCY_NOT_ESTABLISHED:{code:201},DATA_MODEL_DOESNOT_HAVE_CHILDREN:{code:202,message:"Element cannot have children"},ARRAY_INDEX_REQUEST_OUT_OF_RANGE:{code:201},ARRAY_INDEX_SET_OUT_OF_RANGE:{code:201},DATA_MODEL_CAN_BE_SET_ONCE:{code:201},DUPLICATED_UNIQUE:{code:201},VALUE_TOO_LONG:{code:405},DATA_MODEL_IS_KEYWORD:{code:402,message:"Invalid set value, element is a keyword"},DATA_MODEL_CANT_HAVE_COUNT:{code:203,message:"Element not an array - Cannot have count"}}})});});

Namespace.use("scormplayer.player.api.*",function(){Namespace("scormplayer.player.api.scorm2004",{ErrorsCollection:ErrorsCollection.extend({_errors:null,constructor:function()
{this.base();this._initErrors();this.setErrorsDiagnostics(ErrorsDiagnostics);},_initErrors:function()
{this._errors={};var errorsInfos=scormplayer.player.api.scorm2004.ErrorsCollection.errors;for(var errorName in errorsInfos)
{var errorType=ErrorType[errorName];this._errors[errorType]=errorsInfos[errorName];}},_getErrors:function()
{return this._errors;}},{errors:{NO_ERROR:{code:0,message:"No Error"},GENERAL_ERROR:{code:101,message:"General Exception"},GENERAL_INIT_ERROR:{code:102,message:"General Initialization Failure"},ALREADY_INIT:{code:103,message:"Already Initialized"},CONTENT_INSTANCE_TERMINATED:{code:104,message:"Content Instance Terminated"},GENERAL_TERMINATION_ERROR:{code:111,message:"General Termination Failure"},TERMINATION_BEFORE_INIT:{code:112,message:"Termination Before Initialization"},ALREADY_TERMINATED:{code:113,message:"Termination After Termination"},GET_VALUE_BEFORE_INIT:{code:122,message:"Retrieve Data Before Initialization"},GET_VALUE_AFTER_TERMINATION:{code:123,message:"Retrieve Data After Termination"},SET_VALUE_BEFORE_INIT:{code:132,message:"Store Data Before Initialization"},SET_VALUE_AFTER_TERMINATION:{code:133,message:"Store Data After Termination"},COMMIT_BEFORE_INIT:{code:142,message:"Commit Before Initialization"},COMMIT_AFTER_TERMINATION:{code:143,message:"Commit After Termination"},GENERAL_ARGUMENT_ERROR:{code:201,message:"General Argument Error"},GENERAL_GET_ERROR:{code:301,message:"General Get Failure"},GENERAL_SET_ERROR:{code:351,message:"General Set Failure"},GENERAL_COMMIT_ERROR:{code:391,message:"General Commit Failure"},UNDEFINED_DATA_MODEL:{code:401,message:"Undefined Data Model Element "},UNIMPLEMENTED_DATA_MODEL:{code:402,message:"Unimplemented Data Model Element"},DATA_MODEL_NOT_INIT:{code:403,message:"Data Model Element Value Not Initialized"},DATA_MODEL_READ_ONLY:{code:404,message:"Data Model Element Is Read Only"},DATA_MODEL_WRITE_ONLY:{code:405,message:"Data Model Element Is Write Only"},DATA_MODEL_TYPE_MISMATCH:{code:406,message:"Data Model Element Type Mismatch"},DATA_MODEL_OUT_OF_RANGE:{code:407,message:"Data Model Element Value Out Of Range"},DATA_MODEL_DEPENDENCY_NOT_ESTABLISHED:{code:408,message:"Data Model Dependency Not Established"},DATA_MODEL_DOESNOT_HAVE_CHILDREN:{code:301},ARRAY_INDEX_REQUEST_OUT_OF_RANGE:{code:301},ARRAY_INDEX_SET_OUT_OF_RANGE:{code:351},DATA_MODEL_CAN_BE_SET_ONCE:{code:351},DUPLICATED_UNIQUE:{code:351},VALUE_TOO_LONG:{code:351},DATA_MODEL_IS_KEYWORD:{code:404},DATA_MODEL_CANT_HAVE_COUNT:{code:401}}})});});

var ScenarioStatCollector=ISpringContentStatCollector.extend({listenToPlayerEvents:function()
{this.base();this.contentPlayer.addListener(PlayerEvent.SCENARIO_COMPLETE,this,this._onScenarioComplete);},_onScenarioComplete:function(scenarioCompletionData)
{this.statNotifier.sendScenarioReport($.toJSON(scenarioCompletionData.summary),ISpringContentStatCollector.DEFAULT_SLIDE_INDEX,iSpringPlayerStateToJsonConverter.convert(scenarioCompletionData.state));}});

var QuizStatCollector=ISpringContentStatCollector.extend({listenToPlayerEvents:function()
{this.base();this.contentPlayer.addListener(PlayerEvent.QUIZ_COMPLETE,this,this._onQuizComplete);this.contentPlayer.addListener(PlayerEvent.QUIZ_STATE_CHANGED,this,this._onQuizStateChanged);},_onQuizComplete:function(quizCompletionData)
{this._sendLogQuizViewIdRequest();this._sendQuizResults(quizCompletionData);},_onQuizStateChanged:function(quizStateData)
{ContentStatisticsLogger.getInstance().sendLogMessage(StatUrl.QUIZ_STATE_CHANGED,quizStateData);},_sendLogQuizViewIdRequest:function()
{ContentStatisticsLogger.getInstance().sendQuizViewId(StatUrl.BEFORE_GENERATE_QUIZ_REPORT,this.viewContentOptions.getContentItemViewId());},_sendQuizResults:function(quizCompletionData)
{this.statNotifier.sendQuizResults(quizCompletionData.xml,ISpringContentStatCollector.DEFAULT_SLIDE_INDEX,quizCompletionData.quiz_version,iSpringPlayerStateToJsonConverter.convert(quizCompletionData.state));}});

var MediaPlayer=BasePlayer.extend({_media:null,_controlPanel:null,_startPosition:null,_localStorageManager:null,constructor:function(){this.base();this._localStorageManager=LocalStorageManager.getInstance();},getPlayerCode:function(resourceUrl,thumbnailUrl){throw new Error("Method getPlayerCode is abstract and must be overridden in child class.");},initialize:function(){this._media=document.getElementById(MediaPlayer.MEDIA_PLAYER_ID);if(this.shouldUseNativeControlPanel()){this._controlPanel=new NullControlPanel();}
else{this.initializeControlPanel();}
this._addMediaEventListeners();this._fixMobileScreenRotationBug();},setMediaResourceUrl:function(resourceUrl){if(this._media){this._media.src=resourceUrl;}},setStartPosition:function(startPosition){this._startPosition=startPosition;},playing:function(){return!(this._media.paused||this.playbackComplete());},playbackComplete:function(){return this._media.ended||(this._media.currentTime===this._media.duration);},duration:function(){return this._media.duration;},progress:function(){return this.playbackComplete()?this.duration():this._media.currentTime;},play:function(){if(!this.playing()){if(BrowserUtils.isSafariBrowser()&&this.playbackComplete()){this._media.currentTime=0.1;}
this._media.play();}},pause:function(){if(this.playing()){this._media.pause();}},togglePlayPause:function(){if(this.playing()){this.pause();}
else{this.play();}},isPaused:function(){return this._media.paused;},createControlPanel:function(){return new ControlPanel();},getVolumeValueKey:function(){throw new Error('not implemented');},initializeControlPanel:function(){this._controlPanel=this.createControlPanel();this._controlPanel.addListener(ControlPanel.event.PLAY_PAUSE_TOGGLE,this,this.togglePlayPause);this._controlPanel.addListener(ControlPanel.event.SEEK,this,this.onSeekStarted);this._controlPanel.addListener(ControlPanel.event.SEEK_END,this,this._onSeekEnded);this._controlPanel.addListener(ControlPanel.event.VOLUME_CHANGE,this,this._onVolumeChange);if(!BrowserUtils.isMobile()){$(this._media).click(handler(this,'togglePlayPause'));}
this._initializeMediaVolume();},onSeekStarted:function(){this.handlePlaybackActionOccurred();this.dispatchEvent(PlayerEvent.SEEK);},onPlay:function(){this._updateStartPositionLastTime();this._controlPanel.setPlaying(true);this.tryToSetPlaybackStarted();this.handlePlaybackActionOccurred();this.dispatchEvent(PlayerEvent.PLAY);},shouldUseNativeControlPanel:function(){return BrowserUtils.isIosDevice();},getMediaAttributes:function(){var autoPlayAttribute=BrowserUtils.isMobile()?'':'autoplay';var controlAttribute=this.shouldUseNativeControlPanel()?'controls':'';return controlAttribute+' '+autoPlayAttribute;},onPlaybackComplete:function(){if(BrowserUtils.isIe()){this._media.pause();}
this._controlPanel.setPlaying(false);this.handlePlaybackComplete();},_initializeMediaVolume:function(){var volumeValueKey=this.getVolumeValueKey();var volumeObj=this._localStorageManager.get(volumeValueKey);if(volumeObj&&volumeObj.hasOwnProperty('volume')){var volume=parseFloat(volumeObj.volume);this._controlPanel.setVolume(volume);this._setVolume(volume);}},_addMediaEventListeners:function(){this._media.addEventListener('timeupdate',handler(this,'_onTimeUpdated'));this._media.addEventListener('ended',handler(this,'onPlaybackComplete'));this._media.addEventListener('play',handler(this,'onPlay'));this._media.addEventListener('playing',handler(this,'onPlay'));this._media.addEventListener('pause',handler(this,'_onPause'));this._media.addEventListener('progress',handler(this,'_onLoadProgress'));this._media.addEventListener('durationchange',handler(this,'_updateControlPanelDuration'));$(this._media).on("contextmenu",function(){return false;});if(!this._media.readyState){this._media.addEventListener('loadedmetadata',handler(this,'_onMetadataLoaded'));}
else{this._onMetadataLoaded();}},_fixMobileScreenRotationBug:function(){if(BrowserUtils.isMobile()){$('html, body').css('min-width','initial');}},_onPause:function(){this._controlPanel.setPlaying(false);this.handlePlaybackActionOccurred();this.dispatchEvent(PlayerEvent.PAUSE);},_onVolumeChange:function(volumeValue){var volumeValueKey=this.getVolumeValueKey();this._localStorageManager.set(volumeValueKey,{volume:volumeValue});this._setVolume(volumeValue);},_setVolume:function(volume){this._media.volume=volume;},_onLoadProgress:function(){if(this._media.buffered&&this._media.buffered.length){var bufferEnd=Math.round(this._media.buffered.end(0));var loaded=(bufferEnd/this.duration())*100;loaded=Math.min(loaded,100);this._controlPanel.setLoadProgress(loaded);}},_onTimeUpdated:function(){this._controlPanel.setProgress(this.progress());},_onMetadataLoaded:function(){this._updateControlPanelDuration();this._updateStartPosition();},_updateStartPosition:function(){if(this._media.currentTime<this._startPosition){this._media.currentTime=this._startPosition;}},_updateStartPositionLastTime:function(){if(this._startPosition){this._updateStartPosition();this._startPosition=null;}},_updateControlPanelDuration:function(){var duration=this.duration();this._controlPanel.setDuration(duration);},_onSeekEnded:function(){var progress=this._controlPanel.progress();if(progress===this.duration()){progress-=1;}
if(BrowserUtils.isSafariBrowser()){progress=Math.max(0.1,progress);}
this._media.currentTime=progress;this.handlePlaybackActionOccurred();this.dispatchEvent(PlayerEvent.SEEK_END);}},{MEDIA_PLAYER_ID:'mediaPlayer'});

var CharUtils=Base.extend({},{code:{BACKSPACE:8,ENTER:13,SPACE:32,ESC:27}});

var FlashISpringContentPlayer=BasePlayer.extend({_flashInterface:null,start:function(flashObjectId)
{this._flashInterface=FlashExternalInterface.initInterface(flashObjectId);this._flashInterface.addListener(FlashExternalInterface.FLASH_INITIALIZED,this,this._onFlashInitialized);this.listenToFlashEvents();},isPlaybackActionOccurred:function()
{var playbackActionOccurred=this.callFlashFunction(FlashISpringContentPlayer.flash_function_name.IS_PLAYBACK_ACTION_OCCURRED);return(playbackActionOccurred!==undefined)?playbackActionOccurred:this._flashPlaybackStarted();},listenToFlashEvents:function()
{this.addFlashEventListener(FlashISpringContentPlayer.flash_event.PLAYBACK_COMPLETED,this,this.handlePlaybackComplete);this.addFlashEventListener(FlashISpringContentPlayer.flash_event.EXIT,this,this._onExitContentViewing);this.addFlashEventListener(FlashISpringContentPlayer.flash_event.PLAYBACK_ACTION,this,this.handlePlaybackActionOccurred);},addFlashEventListener:function(eventName,listener,eventHandler)
{this._flashInterface.addFlashListener(eventName,listener,eventHandler);},callFlashFunction:function(functionName)
{return this._flashInterface.callFlashFunc(functionName);},_onExitContentViewing:function()
{var thisPtr=this;setTimeout(function(){thisPtr.dispatchEvent(PlayerEvent.EXIT);},FlashISpringContentPlayer.EXIT_EVENT_TIMEOUT);},_onFlashInitialized:function()
{if(this._flashPlaybackStarted())
{this.tryToSetPlaybackStarted();}
else
{this.addFlashEventListener(FlashISpringContentPlayer.flash_event.PLAYBACK_STARTED,this,this.tryToSetPlaybackStarted());}},_flashPlaybackStarted:function()
{var isPlaybackStarted=this.callFlashFunction(FlashISpringContentPlayer.flash_function_name.IS_PLAYBACK_STARTED);return(isPlaybackStarted!==undefined)?isPlaybackStarted:false;}},{flash_event:{PLAYBACK_COMPLETED:'playbackCompleted',EXIT:'exit',PLAYBACK_ACTION:'playbackAction',PLAYBACK_STARTED:'playbackStarted'},flash_function_name:{IS_PLAYBACK_ACTION_OCCURRED:'isPlaybackActionOccurred',IS_PLAYBACK_STARTED:'isPlaybackStarted'},EXIT_EVENT_TIMEOUT:200});

var AccountNavigationController=EventDispatcher.extend({_navigationHistory:null,constructor:function()
{this._navigationHistory=NavigationHistory.getInstance();this._navigationHistory.addListener(NavigationHistory.event.STATE_CHANGE,this,this._onNavigationStateChange);},navigateToUrl:function(url,folderId)
{var relativeUrl=UrlUtils.getRelativeUrl(url);var params=[folderId];this._navigationHistory.pushUrl(relativeUrl,params);},getCurrentRelativeUrl:function()
{return this._navigationHistory.getCurrentRelativeUrl();},_onNavigationStateChange:function(relativeUrl,params)
{var navigationType=AccountNavigationType.DEFAULT;var urlParameters={};var needDispatch=true;if(this._isViewContentUrl(relativeUrl))
{navigationType=AccountNavigationType.VIEW_CONTENT_NAVIGATION;urlParameters=this._getViewContentUrlParameters(relativeUrl);}
else if(this._isPrivateFolderUrl(relativeUrl))
{var folderId=params[0];if(folderId)
{navigationType=AccountNavigationType.PRIVATE_FOLDER_NAVIGATION;urlParameters=this._getPrivateFolderUrlParameters(relativeUrl,folderId);}
else
{needDispatch=false;}}
else if(this._isRootFolderUrl(relativeUrl)){navigationType=AccountNavigationType.ROOT_FOLDER_NAVIGATION;}
if(needDispatch)
{var accountNavigationEvent=new AccountNavigationEvent(navigationType,relativeUrl,urlParameters);this.dispatchEvent(AccountNavigationController.event.ACCOUNT_NAVIGATION,accountNavigationEvent);}},_isPrivateFolderUrl:function(url)
{return AccountNavigationController.urlMatchingPattern.PRIVATE_FOLDER.test(url);},_isRootFolderUrl:function(url)
{return AccountNavigationController.urlMatchingPattern.ROOT_FOLDER.test(url);},_isViewContentUrl:function(url)
{return AccountNavigationController.urlMatchingPattern.VIEW_CONTENT.test(url);},_getViewContentUrlParameters:function(url)
{var parameters={};var matches=url.match(AccountNavigationController.urlMatchingPattern.VIEW_CONTENT);if((matches!==null)&&(matches[AccountNavigationController.regexMatchingIndex.VIEW_CONTENT_KEY]!==undefined))
{parameters['content_item_key']=matches[AccountNavigationController.regexMatchingIndex.VIEW_CONTENT_KEY];}
return parameters;},_getPrivateFolderUrlParameters:function(url,folderId)
{var parameters={};if(!folderId)
{var matches=url.match(AccountNavigationController.urlMatchingPattern.PRIVATE_FOLDER);if(matches!==null)
{if(matches[AccountNavigationController.regexMatchingIndex.PRIVATE_FOLDER_ID_BROWSE]!==undefined)
{folderId=matches[AccountNavigationController.regexMatchingIndex.PRIVATE_FOLDER_ID_BROWSE];}
else if(matches[AccountNavigationController.regexMatchingIndex.PRIVATE_FOLDER_ID_CONTENT]!==undefined)
{folderId=matches[AccountNavigationController.regexMatchingIndex.PRIVATE_FOLDER_ID_CONTENT];}}}
if(folderId)
{parameters['folder_id']=parseInt(folderId);}
return parameters;},},{regexMatchingIndex:{PRIVATE_FOLDER_ID_BROWSE:2,PRIVATE_FOLDER_ID_CONTENT:4,VIEW_CONTENT_KEY:1},urlMatchingPattern:{PRIVATE_FOLDER:/(\/browse\/([\d-\w]+)\/([^\/]+)|\/content\/folder\/(\d+))/,ROOT_FOLDER:/(\/content$|\/content\?.*|\/content#.*|\/content\/completed|\/content\/to_do)/,VIEW_CONTENT:/vc_cik=([\d-\w]+)/},event:{ACCOUNT_NAVIGATION:'account_navigation'},_instance:null,getInstance:function()
{if(AccountNavigationController._instance===null)
{AccountNavigationController._instance=new AccountNavigationController();}
return AccountNavigationController._instance;}});

var CustomHlsAdapter=EventDispatcher.extend({_hls:null,_playlistUrl:null,_mediaPlayer:null,constructor:function(mediaPlayer,playlistUrl)
{this._mediaPlayer=mediaPlayer;this._playlistUrl=playlistUrl;},adapt:function(startPos)
{var options=this._getOptions(startPos);this._hls=new Hls(options);this._bindHlsEvents();this._hls.attachMedia(this._mediaPlayer);},_getOptions:function(startPos)
{var options=CustomHlsAdapter.hlsAdapterOptions;startPos=+startPos;if(startPos>0)
{options=$.extend({startPosition:startPos},options);}
return options;},_bindHlsEvents:function()
{this._hls.on(Hls.Events.MEDIA_ATTACHED,handler(this,'_onMediaAttached'));this._hls.on(Hls.Events.MANIFEST_PARSED,handler(this,'_onManifestParsed'));this._hls.on(Hls.Events.ERROR,handler(this,'_onErrorOccurred'));},_onErrorOccurred:function(event,data)
{if(data.fatal)
{switch(data.type)
{case Hls.ErrorTypes.MEDIA_ERROR:this._hls.recoverMediaError();break;default:this._hls.destroy();this.dispatchEvent(CustomHlsAdapter.event.ERROR,data);break;}}},_onMediaAttached:function()
{this._hls.loadSource(this._playlistUrl);},_onManifestParsed:function(event,data)
{this.dispatchEvent(CustomHlsAdapter.event.READY,data);}},{event:{READY:'READY',ERROR:'ERROR'},hlsAdapterOptions:{maxSeekHole:0.5},canAdapt:function(contentItemType)
{return window['Hls']&&Hls.isSupported&&Hls.isSupported()&&!BrowserUtils.isSafariBrowser()&&!(BrowserUtils.isIe()&&(ContentItemType.FLV==contentItemType||ContentItemType.MP3==contentItemType));}});

Namespace("scormplayer.manifest.json",{ManifestMetadataLoader:Base.extend({load:function(metadataJson)
{var metadata=new scormplayer.manifest.ManifestMetadata();metadata.schema(metadataJson.schema);metadata.schemaVersion(metadataJson.version);return metadata;}})});

Namespace("scormplayer.manifest.json",{ResourcesLoader:Base.extend({load:function(resourcesJson)
{var resources=new scormplayer.manifest.ResourcesCollection();for(var i in resourcesJson)
{var resourceJson=resourcesJson[i];resources.addResource(this._loadResource(resourceJson));}
return resources;},_loadResource:function(resourceJson)
{var loader=new scormplayer.manifest.json.ResourceLoader();return loader.load(resourceJson);}})});

Namespace("scormplayer.manifest.json",{CoursesLoader:Base.extend({load:function(coursesJson)
{var courses=new scormplayer.manifest.CoursesCollection();for(var i in coursesJson)
{var courseJson=coursesJson[i];courses.addCourse(this._loadCourse(courseJson));}
return courses;},_loadCourse:function(courseJson)
{var loader=new scormplayer.manifest.json.CourseLoader();return loader.load(courseJson);}})});

Namespace.use("scormplayer.player.sequence.request.NavigationRequest",function(){Namespace("scormplayer.player.scorm12",{PlayerUIConnector:scormplayer.player.PlayerUIConnector.extend({constructor:function(activityStatusEvaluater)
{this.base(activityStatusEvaluater);},_updateUIControlsVisibility:function()
{this.base();var suspendAllControler=this._ui.control("suspendAll");if(suspendAllControler)
{suspendAllControler.visible(false);}},exitLinkClicked:function()
{this._handleNavigationRequest(new NavigationRequest(NavigationRequest.SUSPEND_ALL));}})});});

Namespace.use(["scormplayer.player.api.*","scormplayer.player.sequence.request.NavigationRequest"],function(){Namespace("scormplayer.player.api.scorm12",{Api:Api.extend({_createApiAdapter:function()
{var apiAdapter=new scorm12.ApiAdapter();apiAdapter.api(this);return apiAdapter;},_createErrors:function()
{return new scorm12.ErrorsCollection();},_createRunTimeDataWrapper:function()
{return new scorm12.RunTimeDataWrapper();},terminate:function(param)
{var terminated=this.base(param);if(terminated)
{this._requestListener.handleRequest(new NavigationRequest(NavigationRequest.CONTINUE));}
return terminated;}})});});

Namespace.use("scormplayer.player.api.*",function(){Namespace("scormplayer.player.api.scorm2004",{Api:Api.extend({_sharedData:null,sharedData:function(data)
{if(data!==undefined)this._sharedData=data;return this._sharedData;},_createApiAdapter:function()
{var apiAdapter=new scorm2004.ApiAdapter();apiAdapter.api(this);return apiAdapter;},_createErrors:function()
{return new scorm2004.ErrorsCollection();},_createRunTimeDataWrapper:function()
{return new scorm2004.RunTimeDataWrapper();},setRequestListener:function(listener)
{this.base(listener);this._runTimeDataWrapper.setRequestListener(listener);},_initRunTimeData:function()
{this.base();this._runTimeDataWrapper.sharedData(this._sharedData);},reset:function()
{this.base();this._runTimeDataWrapper.requestAfterTermination(null);},terminate:function(param)
{var terminated=this.base(param);if(terminated&&this._runTimeDataWrapper.requestAfterTermination())
{this._requestListener.handleRequest(this._runTimeDataWrapper.requestAfterTermination());}
return terminated;}})});});

Namespace.use(["scormplayer.player.tracking.*","scormplayer.player.api.RunTimeData"],function(){Namespace("scormplayer.player.scorm12",{TrackingRunTimeDataMapper:scormplayer.player.TrackingRunTimeDataMapper.extend({LESSON_STATUS:{passed:"passed",failed:"failed",completed:"completed",incomplete:"incomplete"},constructor:function(activityStatusEvaluater)
{this.base(activityStatusEvaluater);},runTimeDataToActivity:function(runTimeData,activity)
{this.base(runTimeData,activity);this._activityStatusFromRunTimeData(activity,runTimeData);},finalRunTimeDataToActivity:function(runTimeData,activity,playerReady)
{this.base(runTimeData,activity,playerReady);var exitType=runTimeData.get("cmi.core.exit");activity.currentAttempt().runTimeData().set("cmi.core.exit",exitType);var activitySuspended=(exitType=="suspend");activity.currentAttempt().suspended(activitySuspended);if(!activitySuspended&&playerReady)
{var courseItem=this._getActivityCourseItem(activity);var activityHasKnownStatus=this._activityStatusEvaluater.isActivitySatisfied(activity,courseItem)!==null||this._activityStatusEvaluater.isActivityCompleted(activity,courseItem)!==null;if(!activityHasKnownStatus&&!runTimeData.isset("cmi.core.lesson_status"))
{activity.primaryObjective().completed(true);}}
this._attemptDurationFromRunTimeData(activity.currentAttempt(),runTimeData);},activityToRunTimeData:function(activity,runTimeData)
{this.base(activity,runTimeData);var attempt=activity.currentAttempt();this._activityStatusToRunTimeData(activity,runTimeData);this._attemptDurationToRunTimeData(attempt,runTimeData);if(attempt.countAttempts()>1)
{var exitType=(attempt.runTimeData()?attempt.runTimeData().get("cmi.core.exit"):"");runTimeData.set("cmi.core.entry",exitType=="suspend"?"resume":"");}
var courseItem=this._getActivityCourseItem(activity);this._courseItemToRunTimeData(courseItem,runTimeData);},_activityStatusFromRunTimeData:function(activity,runTimeData)
{var objective=activity.primaryObjective();objective.useObjectives(activity.currentAttempt().objectives());var completionStatus=null;var satisfactionStatus=null;var lessonStatus=runTimeData.get("cmi.core.lesson_status");if(lessonStatus!=null)
{if(lessonStatus==this.LESSON_STATUS.passed||lessonStatus==this.LESSON_STATUS.failed)
{satisfactionStatus=(lessonStatus==this.LESSON_STATUS.passed);}
else if(lessonStatus==this.LESSON_STATUS.completed||lessonStatus==this.LESSON_STATUS.incomplete)
{completionStatus=(lessonStatus==this.LESSON_STATUS.completed);}}
objective.completed(completionStatus);objective.satisfied(satisfactionStatus);var coreData=runTimeData.get("cmi.core");if(coreData)
{var score=new Score();this._scoreFromRunTimeData(score,coreData);if(score.raw()!==null&&score.raw()>=0)
{var minScore=score.min()||0;var maxScore=score.max()||100;var scaledScore=(score.raw()-minScore)/(maxScore-minScore);scaledScore=Math.min(1,Math.max(0,scaledScore));score.scaled(scaledScore);}
objective.score(score);}},_activityStatusToRunTimeData:function(activity,runTimeData)
{var courseItem=this._getActivityCourseItem(activity);var completionStatus=this._activityStatusEvaluater.isActivityCompleted(activity,courseItem);var satisfactionStatus=this._activityStatusEvaluater.isActivitySatisfied(activity,courseItem);if(completionStatus!=null)
{runTimeData.set("cmi.core.lesson_status",completionStatus?this.LESSON_STATUS.completed:this.LESSON_STATUS.incomplete);}
else if(satisfactionStatus!=null)
{runTimeData.set("cmi.core.lesson_status",satisfactionStatus?this.LESSON_STATUS.passed:this.LESSON_STATUS.failed);}
if(!runTimeData.get("cmi.core"))
{runTimeData.set("cmi.core",new RunTimeData());}
var objective=activity.primaryObjective();this._scoreToRunTimeData(objective.score(),runTimeData.get("cmi.core"));},_courseItemToRunTimeData:function(courseItem,runTimeData)
{var sequencingData=courseItem.sequencingData();if(courseItem.dataFromLMS())
{runTimeData.set("cmi.launch_data",courseItem.dataFromLMS());}
if(sequencingData.limitConditions().durationLimit())
{runTimeData.set("cmi.student_data.max_time_allowed",sequencingData.limitConditions().durationLimit());}
var objectives=sequencingData.objectives();if(objectives&&objectives.primaryObjective().isSatisfiedByMeasure())
{runTimeData.set("cmi.student_data.mastery_score",""+objectives.primaryObjective().minNormalizedMeasure());}
runTimeData.set("cmi.student_data.time_limit_action",courseItem.timeLimitAction());},_attemptDurationToRunTimeData:function(attempt,runTimeData)
{runTimeData.set("cmi.core.total_time",attempt.experiencedDuration());},_attemptDurationFromRunTimeData:function(attempt,runTimeData)
{var duration=runTimeData.get("cmi.core.session_time");if(duration)
{attempt.experiencedDuration(attempt.experiencedDuration()+duration);}},_userInfoToRunTimeData:function(userInfo,runTimeData)
{runTimeData.set("cmi.core.student_id",userInfo.getId());runTimeData.set("cmi.core.student_name",userInfo.getName());},_getStoredRunTimeDataFields:function()
{return["cmi.core.lesson_location","cmi.suspend_data","cmi.objectives","cmi.student_preference","cmi.interactions","cmi.comments"];}})});});

Namespace.use(["scormplayer.player.api.RunTimeData","scormplayer.player.tracking.*"],function(){Namespace("scormplayer.player.scorm2004",{TrackingRunTimeDataMapper:scormplayer.player.TrackingRunTimeDataMapper.extend({SATISFIED_STATUS:{passed:"passed",failed:"failed",unknown:"unknown"},COMPLETION_STATUS:{completed:"completed",incomplete:"incomplete",notAttempted:"not attempted",unknown:"unknown"},constructor:function(activityStatusEvaluater)
{this.base(activityStatusEvaluater);},runTimeDataToActivity:function(runTimeData,activity)
{this.base(runTimeData,activity);this._objectivesFromRunTimeData(activity,runTimeData);var defaultObjective=activity.defaultObjective();this._objectiveFromRunTimeData(activity,defaultObjective,runTimeData.get("cmi"));this._mapDefaultObjectiveToPrimary(activity,runTimeData);},finalRunTimeDataToActivity:function(runTimeData,activity,playerReady)
{this.base(runTimeData,activity,playerReady);var activitySuspended=(runTimeData.get("cmi.exit")=="suspend");activity.currentAttempt().suspended(activitySuspended);if(!activitySuspended&&activity.isTracked()&&playerReady)
{this._updateNoncommunicatedActivityStatus(activity,runTimeData);}
this._attemptDurationFromRunTimeData(activity.currentAttempt(),runTimeData);},_updateNoncommunicatedActivityStatus:function(activity,runTimeData)
{var courseItem=this._getActivityCourseItem(activity);var deliveryControls=courseItem.sequencingData().deliveryControls();var primaryObjective=activity.primaryObjective();var primaryObjectiveData=(primaryObjective.id()?runTimeData.get("cmi.objectives.0"):new RunTimeData());if(primaryObjective.satisfied()===null&&!deliveryControls.isObjectiveSetByContent()&&!runTimeData.isset("cmi.success_status")&&!primaryObjectiveData.isset("success_status"))
{primaryObjective.satisfied(true);}
if(primaryObjective.completed()==null&&!deliveryControls.isCompletionSetByContent()&&!runTimeData.isset("cmi.completion_status")&&!primaryObjectiveData.isset("completion_status"))
{primaryObjective.completed(true);}},activityToRunTimeData:function(activity,runTimeData)
{this.base(activity,runTimeData);var attempt=activity.currentAttempt();this._objectivesToRunTimeData(activity,runTimeData);var defaultObjective=activity.defaultObjective();this._objectiveToRunTimeData(activity,defaultObjective,runTimeData.get("cmi"));this._attemptDurationToRunTimeData(attempt,runTimeData);if(attempt.countAttempts()>1)
{runTimeData.set("cmi.entry","resume");}
var courseItem=this._getActivityCourseItem(activity);this._courseItemToRunTimeData(courseItem,runTimeData);},_courseItemToRunTimeData:function(courseItem,runTimeData)
{var sequencingData=courseItem.sequencingData();if(courseItem.completionThreshold().completedByMeasure())
{runTimeData.set("cmi.completion_threshold",""+courseItem.completionThreshold().minProgressMeasure());}
if(courseItem.dataFromLMS())
{runTimeData.set("cmi.launch_data",courseItem.dataFromLMS());}
if(sequencingData.limitConditions().durationLimit())
{runTimeData.set("cmi.max_time_allowed",sequencingData.limitConditions().durationLimit());}
var objectives=sequencingData.objectives();if(objectives&&objectives.primaryObjective().isSatisfiedByMeasure())
{runTimeData.set("cmi.scaled_passing_score",""+objectives.primaryObjective().minNormalizedMeasure());}
if(courseItem.sharedData())
{this._storeSharedDataInfo(courseItem.sharedData(),runTimeData);}
runTimeData.set("cmi.time_limit_action",courseItem.timeLimitAction());},_storeSharedDataInfo:function(dataCollection,runTimeData)
{var sharedRunTimeData=new RunTimeData();for(var i=0;i<dataCollection.countSharedData();++i)
{var data=dataCollection.getSharedDataByIndex(i);sharedRunTimeData.set(i+".id",data.id());}
runTimeData.set("adl.data",sharedRunTimeData);},_objectivesFromRunTimeData:function(activity,runTimeData)
{var objectivesData=runTimeData.get("cmi.objectives");if(!objectivesData)
{return;}
var objectives=[activity.primaryObjective()];if(activity.objectives())
{objectives=objectives.concat(activity.objectives());}
var objectivesMap={};for(var i=0;i<objectives.length;++i)
{var objective=objectives[i];objectivesMap[objective.id()]=objective;}
var countObjectivesData=objectivesData.count();for(i=0;i<countObjectivesData;++i)
{var objectiveData=objectivesData.get(""+i);var objectiveId=objectiveData.get("id");if(objectiveId in objectivesMap)
{this._objectiveFromRunTimeData(activity,objectivesMap[objectiveId],objectiveData);}}},_objectiveFromRunTimeData:function(activity,objective,objectiveData)
{if(objective instanceof MappedObjective)
{objective.useObjectives(activity.currentAttempt().objectives());}
var satisfiedStatus=objectiveData.get("success_status");if(satisfiedStatus!==null)
{objective.satisfied(this._satisfiedStatusFromString(satisfiedStatus));}
var completionStatus=objectiveData.get("completion_status");if(completionStatus!==null)
{objective.completed(this._completionStatusFromString(completionStatus));}
var completionMeasure=objectiveData.get("progress_measure");if(completionMeasure!==null)
{objective.completionMeasure(parseFloat(completionMeasure));}
var score=new Score();this._scoreFromRunTimeData(score,objectiveData);objective.score(score);},_objectivesToRunTimeData:function(activity,runTimeData)
{var objectives=[activity.primaryObjective()];if(activity.objectives())
{objectives=objectives.concat(activity.objectives());}
var objectivesData=(runTimeData.isset("cmi.objectives")?runTimeData.get("cmi.objectives"):new RunTimeData());var countObjectivesData=objectivesData.count();var objectivesDataMap={};for(var i=0;i<countObjectivesData;++i)
{var data=objectivesData.get(""+i);objectivesDataMap[data.get("id")]=data;}
for(i in objectives)
{var objective=objectives[i];var objectiveId=objective.id();if(objectiveId)
{var objectiveData=null;if(objectiveId in objectivesDataMap)
{objectiveData=objectivesDataMap[objectiveId];}
else
{objectiveData=new RunTimeData();objectiveData.set("id",objectiveId);objectivesData.set(""+countObjectivesData,objectiveData);countObjectivesData++;}
this._objectiveToRunTimeData(activity,objective,objectiveData);}}
runTimeData.set("cmi.objectives",objectivesData);},_objectiveToRunTimeData:function(activity,objective,objectiveData)
{if(objective instanceof MappedObjective)
{objective.useObjectives(activity.currentAttempt().objectives());}
var courseItem=this._getActivityCourseItem(activity);var satisfactionStatus=this._activityStatusEvaluater.isObjectiveSatisfied(activity,courseItem,objective);if(satisfactionStatus!==null)
{objectiveData.set("success_status",this._satisfiedStatusToString(satisfactionStatus));}
var completionStatus=objective.completed();if(completionStatus!==null)
{objectiveData.set("completion_status",this._completionStatusToString(completionStatus));}
var completionMeasure=objective.completionMeasure();if(completionMeasure!==null)
{objectiveData.set("progress_measure",completionMeasure);}
this._scoreToRunTimeData(objective.score(),objectiveData);},_mapDefaultObjectiveToPrimary:function(activity,runTimeData)
{var defaultObjective=activity.defaultObjective();var primaryObjective=activity.primaryObjective();var mappedAttributes={satisfied:"cmi.success_status",completed:"cmi.completion_status",completionMeasure:"cmi.progress_measure",scaledScore:"cmi.score.scaled",minScore:"cmi.score.min",maxScore:"cmi.score.max",rawScore:"cmi.score.raw"};for(var mappedAttribute in mappedAttributes)
{var attributeName=mappedAttributes[mappedAttribute];if(runTimeData.isChanged(attributeName))
{primaryObjective[mappedAttribute](defaultObjective[mappedAttribute]());}}},_attemptDurationToRunTimeData:function(attempt,runTimeData)
{runTimeData.set("cmi.total_time",attempt.experiencedDuration());},_attemptDurationFromRunTimeData:function(attempt,runTimeData)
{var duration=runTimeData.get("cmi.session_time");if(duration)
{attempt.experiencedDuration(attempt.experiencedDuration()+duration);}},_satisfiedStatusToString:function(isSatisfied)
{switch(isSatisfied)
{case true:return this.SATISFIED_STATUS.passed;case false:return this.SATISFIED_STATUS.failed;default:return this.SATISFIED_STATUS.unknown;}},_satisfiedStatusFromString:function(satisfiedStatus)
{switch(satisfiedStatus)
{case this.SATISFIED_STATUS.passed:return true;case this.SATISFIED_STATUS.failed:return false;default:return null;}},_completionStatusToString:function(isCompleted)
{switch(isCompleted)
{case true:return this.COMPLETION_STATUS.completed;case false:return this.COMPLETION_STATUS.incomplete;default:return this.COMPLETION_STATUS.unknown;}},_completionStatusFromString:function(completionStatus)
{switch(completionStatus)
{case this.COMPLETION_STATUS.completed:return true;case this.COMPLETION_STATUS.incomplete:case this.COMPLETION_STATUS.notAttempted:return false;default:return null;}},_userInfoToRunTimeData:function(userInfo,runTimeData)
{runTimeData.set("cmi.learner_id",userInfo.getId());runTimeData.set("cmi.learner_name",userInfo.getName());},_getStoredRunTimeDataFields:function()
{return["cmi.location","cmi.suspend_data","cmi.objectives","cmi.interactions","cmi.learner_preference","cmi.comments_from_learner"];}})});});

Namespace("scormplayer.player.scorm12",{RollupProcessor:scormplayer.player.RollupProcessor.extend({constructor:function(activityStatusEvaluater)
{this.base(activityStatusEvaluater);},_applyObjectiveMeasureRollup:function(activity)
{if(this._activityItemHasResource(activity))
{return false;}
return this.base(activity);},_applyCompletionMeasureRollup:function(activity)
{if(this._activityItemHasResource(activity))
{return false;}
return this.base(activity);},_applyObjectiveRollupUsingRules:function(activity)
{if(this._activityItemHasResource(activity))
{return false;}
var childActivities=activity.availableChilds();var countChildActivities=childActivities.length;var countPassedActivities=0;var countFailedActivities=0;for(var i=0;i<countChildActivities;++i)
{var childPassed=this._getActivitySatisfactionStatus(childActivities[i]);if(childPassed)
{countPassedActivities++;}
else if(childPassed===false)
{countFailedActivities++;}}
var activityPassed=null;if(countPassedActivities==countChildActivities)
{activityPassed=true;}
else if(countPassedActivities+countFailedActivities==countChildActivities)
{activityPassed=false;}
var primaryObjective=activity.primaryObjective();if(primaryObjective.satisfied()!==activityPassed)
{primaryObjective.satisfied(activityPassed);return true;}
return false;},_applyCompletionRollupUsingRules:function(activity)
{if(this._activityItemHasResource(activity))
{return false;}
var primaryObjective=activity.primaryObjective();if(primaryObjective.satisfied()!==null)
{if(primaryObjective.completed()!==null)
{primaryObjective.completed(null);return true;}
return false;}
var childActivities=activity.availableChilds();var countChildActivities=childActivities.length;var countCompletedActivities=0;var countDefinedActivities=0;for(var i=0;i<countChildActivities;++i)
{var childActivity=childActivities[i];var childPassed=this._getActivitySatisfactionStatus(childActivity);var childCompleted=this._getActivityCompletionStatus(childActivity);if(childPassed!==null||childCompleted!==null)
{countDefinedActivities++;if(childPassed||childCompleted)
{countCompletedActivities++;}}}
var activityCompleted=null;if(countCompletedActivities==countChildActivities)
{activityCompleted=true;}
else if(countDefinedActivities==countChildActivities)
{activityCompleted=false;}
if(primaryObjective.completed()!==activityCompleted)
{primaryObjective.completed(activityCompleted);return true;}
return false;},_getActivitySatisfactionStatus:function(activity)
{var primaryObjective=activity.primaryObjective();return primaryObjective.satisfied();},_getActivityCompletionStatus:function(activity)
{var primaryObjective=activity.primaryObjective();return primaryObjective.completed();},_activityItemHasResource:function(activity)
{return this._getActivityCourseItem(activity).hasResource();},_getRollupedMeasure:function(activity,getActivityMeasure,getActivityMeasureWeight)
{var countOfMeasures=0;var sumOfMeasures=0;var childs=activity.availableChilds();for(var i in childs)
{var childActivity=childs[i];if(childActivity.isTracked())
{var childMeasure=getActivityMeasure(childActivity);if(childMeasure!==null)
{sumOfMeasures+=childMeasure;++countOfMeasures;}}}
return((countOfMeasures>0)?sumOfMeasures/countOfMeasures:null);}})});

Namespace("scormplayer.player.scorm12",{ActivityStatusEvaluater:scormplayer.player.ActivityStatusEvaluater.extend({isObjectiveSatisfied:function(activity,courseItem,objective)
{var objectiveInfo=this._getObjectiveInfo(objective,courseItem);if(objectiveInfo&&objectiveInfo.isSatisfiedByMeasure())
{var measure=objective.rawScore();if(measure!==null)
{return measure>=objectiveInfo.minNormalizedMeasure();}
return null;}
return objective.satisfied();}})});

Namespace.use("scormplayer.lms.ui.*",function(){Namespace("scormplayer.lms",{PlayerUI:scormplayer.lms.ui.IPlayerUI.extend({_listener:null,_resourcesBaseUrl:null,_controls:null,_windowResizeTimer:0,_scormMenu:null,_scormContent:null,_previousButtonContainer:null,_nextButtonContainer:null,_suspendButtonContainer:null,_controlsBarContainer:null,_suspendAllMayBeVisible:true,_loadedContentUrl:null,constructor:function()
{this._controls={'previous':new ControlState(),'continue':new ControlState(),'suspendAll':new ControlState(),'menu':new MenuControlState()};this._previousButtonContainer=$(".js_scormplayer .previous");this._nextButtonContainer=$(".js_scormplayer .next");this._suspendButtonContainer=$(".js_scormplayer .pause");this._previousButtonContainer.off().on('click',handler(this,"_onPreviousLinkClicked"));this._nextButtonContainer.off().on('click',handler(this,"_onNextLinkClicked"));this._suspendButtonContainer.off().on('click',handler(this,"_onSuspendLinkClicked"));this._scormMenu=$("#scormMenu");this._scormContent=$("#scormContent");this._controlsBarContainer=$(".js_scormplayer .controls");},setResourcesBaseUrl:function(url)
{this._resourcesBaseUrl=url;},setSuspendAllMayBeVisible:function(visible)
{this._suspendAllMayBeVisible=visible;},getSuspendAllMayBeVisible:function()
{return this._suspendAllMayBeVisible;},loadResource:function(resourceUrl)
{resourceUrl=this._resourcesBaseUrl+"/"+resourceUrl;this._insertContentFrame(resourceUrl);},unloadResource:function(callback)
{try
{this._scormContent.empty();}
catch(e)
{}
if(callback)
{callback();}},control:function(controlName)
{return this._controls[controlName];},update:function()
{this._updateMenu();var previousLinkState=this.control('previous');this._updateLinkState(this._previousButtonContainer,previousLinkState);var nextLinkState=this.control('continue');this._updateLinkState(this._nextButtonContainer,nextLinkState);var suspendLinkState=this.control('suspendAll');this._updateLinkState(this._suspendButtonContainer,suspendLinkState);this._updateControlsBarVisibility();this._checkButtonDelimiters();},getLoadedContentUrl:function()
{return this._loadedContentUrl;},_insertContentFrame:function(resourceUrl)
{var contentFrame=$("<iframe>");contentFrame.attr("src",resourceUrl);contentFrame.attr("allowfullscreen","allowfullscreen");contentFrame.on('load',handler(this,"_onContentFrameLoaded"));this._loadedContentUrl=resourceUrl;this._scormContent.html(contentFrame);},_onContentFrameLoaded:function()
{this.dispatchEvent(scormplayer.lms.PlayerUI.event.CONTENT_LOADED);},_updateLinkState:function(link,state)
{if(state.visible())
{link.show();if(!state.enabled())
{link.addClass('disabled');}
else
{link.removeClass('disabled');}}
else
{link.removeClass('disabled');link.hide();}},_checkButtonDelimiters:function()
{var visibleCloseButton=$('.js_toolbar_button.close:visible');if(visibleCloseButton.length)
{var doesVisibleButtonsBeforeCloseButtonExist=($('.js_scormplayer .js_toolbar_button:visible').length);$('.js_close_button_delimiter').toggleClassHidden(!doesVisibleButtonsBeforeCloseButtonExist);}
var visiblePauseButton=$('.js_toolbar_button.pause:visible');if(visiblePauseButton.length)
{var previousVisibleButtons=visiblePauseButton.prevAll('.js_toolbar_button:visible');$('.js_pause_button_delimiter').toggleClassHidden(!previousVisibleButtons.length);}},_updateMenu:function()
{var menuState=this._controls.menu;var menuItems=menuState.items();var itemsContainer=$("<ul></ul>");this._addMenuItems(itemsContainer,menuItems);var menuContainer=this._scormMenu.find(".menu_container");menuContainer.empty().append(itemsContainer);if(menuState.visible()&&!this._scormMenu.hasClassHidden())
{this._scormMenu.show();}
else
{this._scormMenu.hide();}},_addMenuItems:function(container,items)
{for(var i in items)
{var item=items[i];container.append(this._createMenuItem(item));var childs=item.items();if(childs)
{var childsContainer=$("<ul></ul>");this._addMenuItems(childsContainer,childs);if(childs.length>0)
{childsContainer=$("<li></li>").append(childsContainer).addClass("childs");container.append(childsContainer);}}}},_createMenuItem:function(item)
{var itemLi=$("<li></li>");itemLi.text(item.label());itemLi.addClass("id_"+item.id());if(item.selected())
{itemLi.addClass("selected");}
if(item.enabled())
{itemLi.addClass("enabled");itemLi.off().on('click',handler(this,"_onMenuItemClicked"));}
if(item.completed()!=null)
{itemLi.addClass(item.completed()?"completed":"incomplete");}
if(item.passed()!=null)
{itemLi.addClass(item.passed()?"passed":"failed");}
itemLi.prepend($("<span></span>").addClass("satisfaction_status").addClass("status_icon"));itemLi.prepend($("<span></span>").addClass("completion_status").addClass("status_icon"));return itemLi;},_topControlsVisible:function()
{var mainControls=["previous","continue","suspendAll"];for(var i in mainControls)
{var controlId=mainControls[i];if(this.control(controlId).visible())
{return true;}}
return false;},_updateControlsBarVisibility:function()
{if(!this._controls.menu.visible()||!this._topControlsVisible())
{this._controlsBarContainer.hide();this._listener.allControlsHidden(true);}
else
{this._controlsBarContainer.show();this._listener.allControlsHidden(false);}},setListener:function(listener)
{this._listener=listener;},_controlEnabled:function(controlName)
{var controlState=this.control(controlName);return controlState?controlState.enabled()&&controlState.visible():false;},_onPreviousLinkClicked:function()
{if(this._controlEnabled('previous'))
{this._listener.previousLinkClicked();}},_onNextLinkClicked:function()
{if(this._controlEnabled('continue'))
{this._listener.nextLinkClicked();}},_onSuspendLinkClicked:function()
{if(this._controlEnabled('suspendAll'))
{this._listener.suspendLinkClicked();}},_onMenuItemClicked:function(e)
{var itemLi=$(e.target);var matches=itemLi.attr("class").match(/\bid_(\S+)/);if(matches!=null)
{var itemId=matches[1];this._listener.menuItemClicked(itemId);}}},{event:{CONTENT_LOADED:'content_loaded'}})});});

Namespace("scormplayer.lms",{UserInfo:scormplayer.lms.IUserInfo.extend({_id:null,_name:null,constructor:function(id,name)
{this._id=id;this._name=name;},getId:function()
{return this._id;},getName:function()
{return this._name;}})});

var FlashISpringContentStatCollector=PlayerStatCollector.extend({isPlaybackActionOccurred:function()
{return this.base()||this.contentPlayer.isPlaybackActionOccurred();}});

var PartViewStatisticsController=EventDispatcher.extend({_isViewing:false,_chunk:null,handleStartView:function(position)
{if(this._isViewing)
{this._dispatchPartViewed();}
this._isViewing=true;this._createNewChunk(position);},handleUpdateView:function(position)
{if(this._isViewing)
{this._updateEndTime(position);if(BrowserUtils.isIosDevice()&&(this._getViewDuration()>=PartViewStatisticsController.IOS_SEND_PERIOD))
{this.handleStopView(position);this.handleStartView(position);}}},handleStopView:function(position,externalData)
{if(this._isViewing)
{this._updateEndTime(position);this._dispatchPartViewed(externalData);this._isViewing=false;}},_getViewDuration:function()
{var duration=0;if(this._isViewing)
{duration=this._chunk.endTime-this._chunk.startTime;}
return duration;},_updateEndTime:function(position)
{if(this._isFar(this._chunk.endTime,position))
{this._dispatchPartViewed();this._createNewChunk(position);}
else
{this._chunk.endTime=position;}},_dispatchPartViewed:function(externalData)
{if(!this._isCurrentChunkEmpty())
{this.dispatchEvent(PartViewStatisticsController.event.PART_VIEWED,this._chunk.startTime,this._chunk.endTime,externalData);}
this._chunk=null;},_createNewChunk:function(position)
{var PartViewChunk=function(pos){this.startTime=pos;this.endTime=pos;};this._chunk=new PartViewChunk(position);},_isCurrentChunkEmpty:function()
{return!this._chunk||(this._chunk.startTime==this._chunk.endTime);},_isFar:function(currentPosition,newPosition)
{return Math.abs(newPosition-currentPosition)>=PartViewStatisticsController.MAXIMUM_DIFF;}},{event:{PART_VIEWED:'partViewed'},MAXIMUM_DIFF:5,IOS_SEND_PERIOD:5});

var SlideAnimation=LegacyAnimation.extend({_element:null,_height:null,_maxHeight:null,_minHeight:null,_isSlidingUp:false,_isSlidingDown:false,_initialSlideUpSpeed:null,_initialSlideDownSpeed:null,constructor:function(element,slideUpDuration,slideDownDuration)
{this.base();this._element=$(element);this._maxHeight=element.height();this._height=this._maxHeight;this._minHeight=0;var slideUpAcceleration=-SlideAnimation.ACCELERATION;this._initialSlideUpSpeed=(this._maxHeight/slideUpDuration)-slideUpAcceleration*slideUpDuration*0.5;this._initialSlideUpSpeed=Math.max(this._initialSlideUpSpeed,0);var slideDownAcceleration=SlideAnimation.ACCELERATION;this._initialSlideDownSpeed=(this._maxHeight/slideDownDuration)-slideDownAcceleration*slideDownDuration*0.5;this._initialSlideDownSpeed=Math.max(this._initialSlideDownSpeed,0);},isVisible:function()
{return(this._height==this._maxHeight)&&!this._isSlidingUp&&!this._isSlidingDown;},slideUp:function()
{this._height=this._element.height();if((this._height<this._maxHeight)&&!this._isSlidingUp&&!this._isSlidingDown)
{this.stopAnimation();this._isSlidingUp=true;this.setAnimatedProperties([new AnimatedProperty(this._height,this._maxHeight,this._initialSlideUpSpeed,-SlideAnimation.ACCELERATION,handler(this,'_onHeightChange'))]);this.animateProperties();}},slideDown:function()
{this._height=this._element.height();if((this._height>this._minHeight)&&!this._isSlidingDown&&!this._isSlidingUp)
{this.stopAnimation();this._isSlidingDown=true;this.setAnimatedProperties([new AnimatedProperty(this._height,this._minHeight,this._initialSlideDownSpeed,SlideAnimation.ACCELERATION,handler(this,'_onHeightChange'))]);this.animateProperties();}},onPropertiesAnimationFinished:function()
{this.base();this._isSlidingUp=false;this._isSlidingDown=false;},_onHeightChange:function(newHeight)
{this._element.height(newHeight);}},{ACCELERATION:0.000002});

var RequestMethod=Base.extend({},{POST:'POST',GET:'GET'});

var PresentationResumeParams=EventDispatcher.extend({_initialSlideIndex:null,_hasInitialResumeState:null,_resumeType:null,init:function(viewContentOptions){this._initialSlideIndex=viewContentOptions.getResumePosition();this._hasInitialResumeState=(viewContentOptions.getResumeState()!==null);this._resumeType=viewContentOptions.getResumeType();this._prepareInitialSlideIndex();},getInitialSlideIndex:function(){return this._initialSlideIndex;},hasInitialResumeState:function(){return this._hasInitialResumeState;},getResumeType:function(){return this._resumeType;},_prepareInitialSlideIndex:function(){if(this._resumeType===ContentItemResumeMode.NEVER_RESUME){this._initialSlideIndex=0;this._dispatchReadyEvent();return;}
var hasNoResume=this._resumeType===ContentItemResumeMode.NO_RESUME;var promptToResumeWithoutInitialState=(this._resumeType===ContentItemResumeMode.PROMPT_TO_RESUME&&!this._hasInitialResumeState);var needToShowResumeConfirm=this._initialSlideIndex>0&&(hasNoResume||promptToResumeWithoutInitialState);if(needToShowResumeConfirm){this._handleResumeConfirm();}
else{this._dispatchReadyEvent();}},_handleResumeConfirm:function(){var that=this;var params={title:Messages.ViewContentMessages.MSG_POPUP_RESUME_TITLE,content:Messages.ViewContentMessages.MSG_POPUP_RESUME_TEXT,confirm_text:Messages.ViewContentMessages.MSG_POPUP_RESUME_CONFIRM,confirm_handler:function(){that.dispatchEvent(PresentationResumeParams.event.READY);},close_handler:function(){that._initialSlideIndex=0;that.dispatchEvent(PresentationResumeParams.event.READY);}};var popup=ConfirmPopup.setup(params);popup.open();},_dispatchReadyEvent:function(){this.dispatchEvent(PresentationResumeParams.event.READY);}},{event:{READY:'ready'}});

var ViewFlashISpringContentController=ViewContentController.extend({_initialSlide:null,startView:function()
{this.base();this._insertPlayerCode();this.contentPlayer.start(ViewFlashISpringContentController.FLASH_OBJECT_ID);},setInitialSlide:function(initialSlide)
{this._initialSlide=initialSlide;},_insertPlayerCode:function()
{var playerCode=Flash.getPlayerEmbed(ViewFlashISpringContentController.FLASH_OBJECT_ID,this.viewContentOptions.getFlashSkinUrl(),this._getPlayerVars(),'100%','100%',this._getFlashParams());this.viewContentOverlay.insertContent(playerCode);},_getPlayerVars:function()
{return{start_position:this._initialSlide,content_item_id:this.viewContentOptions.getContentItemId(),content_item_url:this.viewContentOptions.getViewUrl(),content_item_type:this.viewContentOptions.getContentItemType(),resource_view_id:this.viewContentOptions.getContentItemViewId(),session_view_key:this.viewContentOptions.getSessionViewKey(),resume_state:this.viewContentOptions.getResumeState(),resume_type:this.viewContentOptions.getResumeType(),resource_width:this.viewContentOptions.getContentWidth(),resource_height:this.viewContentOptions.getContentHeight(),pcsu:StatUrl.PERSIST_CONTENT_STATE};},_getFlashParams:function()
{return{bgcolor:ViewContentOverlay.BACKGROUND_COLOR,wmode:null}}},{FLASH_OBJECT_ID:'flashISpringContentPlayer'});

var ViewMediaController=ViewContentController.extend({_customHlsAdapter:null,_viewMode:null,_startPosition:null,startView:function(){this.base();this._viewMode=this._selectViewMode();var resumePosition=this.viewContentOptions.getResumePosition();this._createViewPlayer(resumePosition);},onKeyUp:function(event){switch(EventUtils.getCharCodeFromKeypressEvent(event)){case CharUtils.code.ENTER:case CharUtils.code.SPACE:this.contentPlayer.togglePlayPause();break;}},_createViewPlayer:function(resumePosition){this._startPosition=Math.floor(resumePosition);this.contentPlayer.setStartPosition(this._startPosition);var playerCode=this.contentPlayer.getPlayerCode(this._getResourceUrl(),this.viewContentOptions.getCustomThumbnailUrl());this.viewContentOverlay.insertContent(playerCode);if(this._viewMode===ViewMediaController.viewMode.CUSTOM_HLS){this._customHlsAdapter=new CustomHlsAdapter(document.getElementById(MediaPlayer.MEDIA_PLAYER_ID),this._getHlsPlaylistUrl());this._customHlsAdapter.addListener(CustomHlsAdapter.event.READY,this,this._initPlayer);this._customHlsAdapter.addListener(CustomHlsAdapter.event.ERROR,this,this._prepareOriginalFileView);var startPosition=BrowserUtils.isIe()?0:this._startPosition;this._customHlsAdapter.adapt(startPosition);}
else{this._initPlayer();}},_selectViewMode:function(){var viewMode=ViewMediaController.viewMode.ORIGINAL;if(this.viewContentOptions.getHlsPlaylistUrl()){if(BrowserUtils.hasHlsSupport()){viewMode=ViewMediaController.viewMode.HLS;}
else if(CustomHlsAdapter.canAdapt(this.viewContentOptions.getContentItemType())){viewMode=ViewMediaController.viewMode.CUSTOM_HLS;}}
return viewMode;},_prepareOriginalFileView:function(){this.contentPlayer.setMediaResourceUrl(this._getOriginalResourceUrl());this._initPlayer();},_initPlayer:function(){this.contentPlayer.initialize();},_getResourceUrl:function(){switch(this._viewMode){case ViewMediaController.viewMode.HLS:return this._getHlsPlaylistUrl();case ViewMediaController.viewMode.CUSTOM_HLS:return'';default:return this._getOriginalResourceUrl();}},_getHlsPlaylistUrl:function(){return this.viewContentOptions.getHlsPlaylistUrl()+this._getStartPositionUrlPart();},_getOriginalResourceUrl:function(){return this.viewContentOptions.getViewUrl()+this._getStartPositionUrlPart();},_getStartPositionUrlPart:function(){var urlPart='';if(this._startPosition&&(this._viewMode!==ViewMediaController.viewMode.CUSTOM_HLS)){urlPart='#t='+this._startPosition;}
return urlPart;}},{viewMode:{ORIGINAL:1,HLS:2,CUSTOM_HLS:3}});

var UniversalPresentationPlayer=ISpringContentPlayer.extend({_slides:null,_playbackController:null,_currentSlideIndex:null,_slideViewTime:null,_slideStartViewTime:null,_quizPlayers:null,_scenarioPlayers:null,_runningStateChangeCounter:null,_isAutoStartPresentation:null,_resumeOption:null,_fullStartupComplete:null,_startSlideIndex:null,_hasInitialResumeState:null,constructor:function(resumeType,startSlideIndex,hasInitialResumeState){this.base(resumeType);this._isAutoStartPresentation=false;this._fullStartupComplete=false;this._currentSlideIndex=-1;this._slideViewTime=0;this._runningStateChangeCounter=0;this._quizPlayers={};this._scenarioPlayers={};this._startSlideIndex=startSlideIndex||0;this._hasInitialResumeState=hasInitialResumeState;},start:function(){this._resetSlideStartViewTime();this.iSpringPlayer.startupEvent().addHandler(this._onStartupEvent,this);if(_.isFunction(this.iSpringPlayer.startupCompletedEvent)){this.iSpringPlayer.startupCompletedEvent().addHandler(this._onPresentationStartupCompleted,this);}
if(_.isFunction(this.iSpringPlayer.presentation().settings().playback().resumeMode)){this._resumeOption=this.iSpringPlayer.presentation().settings().playback().resumeMode();}
else{this._resumeOption=ContentItemResumeMode.NO_RESUME;}
if(_.isFunction(this.iSpringPlayer.closeWindowEvent)){this.iSpringPlayer.closeWindowEvent().addHandler(this.handleCloseEvent,this);}
this._initIsAutoStartPresentation(this.iSpringPlayer);this._slides=this.iSpringPlayer.presentation().slides();this._playbackController=this.iSpringPlayer.view().playbackController();this._playbackController.clock().stateChangeEvent().addHandler(this._onClockStateChanged,this);this._playbackController.slideChangeEvent().addHandler(this._onCurrentSlideChanged,this);this._playbackController.playbackCompleteEvent().addHandler(this.handlePlaybackComplete,this);var startSlide=this._slides.getVisibleSlide(this._startSlideIndex);this._startSlideIndex=startSlide.index();if(this._playbackController.clock().running()&&!this.isPlaybackStarted()){this._currentSlideIndex=this._startSlideIndex;this._runningStateChangeCounter=1;this.tryToSetPlaybackStarted();}
var currentSlideWithQuiz=(startSlide.type()===UniversalPresentationPlayer.slideType.QUIZ_SLIDE);if(currentSlideWithQuiz&&(startSlide.duration()<=UniversalPresentationPlayer.EPSILON)){this._runningStateChangeCounter=2;}
if(_.isFunction(this.iSpringPlayer.stateChangedEvent)&&_.isFunction(this.iSpringPlayer.persistState)){this.iSpringPlayer.stateChangedEvent().addHandler(this._onPresentationStateChanged,this);}
this._initCloudSkinFullscreenIfExists();},getCurrentSlideIndex:function(){return(this._currentSlideIndex<0)?0:this._currentSlideIndex;},getSlideViewDuration:function(){return this._getRecalculatedSlideViewTime();},getResumeOption:function(){return this._resumeOption;},setPlaybackStarted:function(){this.base();this._dispatchSlideOpenedEvent(this.getCurrentSlideIndex());},checkIfUserDeclinedResume:function(){var newState=this.getResumeState();if(newState&&!newState.lastViewedSlide){this.dispatchEvent(PlayerEvent.PROMPT_TO_RESUME_DECLINED_BY_USER);}},_initCloudSkinFullscreenIfExists:function(){var cloudSkin=this.iSpringPlayer['cloudSkin'];if(cloudSkin){if(window.screenfull&&screenfull.enabled&&!BrowserUtils.isMobile()){document.addEventListener(screenfull.raw.fullscreenchange,function(){cloudSkin.setFullscreenLayout(screenfull.isFullscreen);});var contentContainer=$('#contentContainer').get(0);var listener={setFullscreen:screenfull.toggle.bind(screenfull,contentContainer)};cloudSkin.setExternalListener(listener);}
else{cloudSkin.hideFullscreenButton();}}},_onPresentationStartupCompleted:function(){this._fullStartupComplete=true;this.checkUserResumeOptionAfterTimeout();if(this._isAutoStartPresentation){this.handlePlaybackActionOccurred();}},_onStartupEvent:function(startup){if(!this._hasInitialResumeState){startup.setSlideIndex(this._startSlideIndex);startup.setAction('gotoSlide');}
this._fullStartupComplete=(this.resumeType===ContentItemResumeMode.PROMPT_TO_RESUME)?this._fullStartupComplete:true;this._isAutoStartPresentation=_.isFunction(startup.autoStart)?startup.autoStart():false;if(this._isAutoStartPresentation&&this._fullStartupComplete){this.handlePlaybackActionOccurred();}},_onPresentationStateChanged:function(preventActionFlag){if(preventActionFlag&&_.isFunction(preventActionFlag.preventAction)){preventActionFlag.preventAction();}
this.dispatchEvent(PlayerEvent.STATE_CHANGED,this.getResumeState());},_onClockStateChanged:function(){var presentationClock=this._playbackController.clock();if(presentationClock.running()){this.tryToSetPlaybackStarted();if(this._needResetStartViewTime()){this._resetSlideStartViewTime();}
++this._runningStateChangeCounter;}
else if(presentationClock.started()){this.handlePlaybackActionOccurred();}
if(this._userHasStartedPresentationPlay()){this.handlePlaybackActionOccurred();}},_needResetStartViewTime:function(){return(this._runningStateChangeCounter<1)||(this._runningStateChangeCounter<=1&&!this._isAutoStartPresentation);},_initIsAutoStartPresentation:function(iSpringPlayer){this._isAutoStartPresentation=false;try{this._isAutoStartPresentation=iSpringPlayer.presentation().settings().playback().autoStart();}
catch(e){}},_slideChangesAutomatically:function(index){var slideChangesAutomatically=false;try{var animationSteps=this._slides.getSlide(index).animationSteps();slideChangesAutomatically=animationSteps.getStep(animationSteps.count()-1).automaticAdvance();}
catch(e){}
return slideChangesAutomatically;},_onCurrentSlideChanged:function(newSlideIndex){var isFirstSlideChange=(this._currentSlideIndex===-1);if(!isFirstSlideChange||this._slideChangesAutomatically(this._currentSlideIndex)){this.handlePlaybackActionOccurred();}
if(this.isPlaybackStarted()){this._updateSlideViewTime();if(!isFirstSlideChange&&(this._userHasStartedPresentationPlay()||this._isAutoStartPresentation)){this._dispatchSlideClosedEvent();}
this._slideViewTime=0;this._resetSlideStartViewTime();if(!isFirstSlideChange){this._dispatchSlideOpenedEvent(newSlideIndex);}}
this._currentSlideIndex=newSlideIndex;this._initPlayerForSlideIfNecessary();},_userHasStartedPresentationPlay:function(){return(this._runningStateChangeCounter>1);},_initPlayerForSlideIfNecessary:function(){var slideType=this._playbackController.currentSlide().type();if(slideType===UniversalPresentationPlayer.slideType.QUIZ_SLIDE){if(this._quizPlayers[this._currentSlideIndex]===undefined){var quizPlayer=new UniversalQuizPlayer(this.resumeType);quizPlayer.setISpringPlayer(this._playbackController.quizPlayer());quizPlayer.setParentPresentationSlideIndex(this._currentSlideIndex);quizPlayer.addListener(PlayerEvent.QUIZ_COMPLETE,this,this._onSubQuizComplete);quizPlayer.addListener(PlayerEvent.QUIZ_STATE_CHANGED,this,this._onSubQuizStateChanged);quizPlayer.start();this._quizPlayers[this._currentSlideIndex]=quizPlayer;}}
else if(slideType===UniversalPresentationPlayer.slideType.SCENARIO_SLIDE){if(this._scenarioPlayers[this._currentSlideIndex]===undefined){var scenarioPlayer=new UniversalScenarioPlayer(this.resumeType);scenarioPlayer.setISpringPlayer(this._playbackController.scenarioPlayer());scenarioPlayer.setParentPresentationSlideIndex(this._currentSlideIndex);scenarioPlayer.addListener(PlayerEvent.SCENARIO_COMPLETE,this,this._onScenarioComplete);scenarioPlayer.start();this._scenarioPlayers[this._currentSlideIndex]=scenarioPlayer;}}},_onSubQuizComplete:function(quizCompletionData){this.dispatchEvent(PlayerEvent.SUB_QUIZ_COMPLETE,quizCompletionData);},_onSubQuizStateChanged:function(quizStateData){this.dispatchEvent(PlayerEvent.SUB_QUIZ_STATE_CHANGED,quizStateData);},_onScenarioComplete:function(scenarioCompletionData){this.dispatchEvent(PlayerEvent.SUB_SCENARIO_COMPLETE,scenarioCompletionData);},_dispatchSlideClosedEvent:function(){this.dispatchEvent(PlayerEvent.SLIDE_CLOSED,this._currentSlideIndex,this._slideViewTime);},_dispatchSlideOpenedEvent:function(openedSlideIndex){this.dispatchEvent(PlayerEvent.SLIDE_OPENED,openedSlideIndex);},_resetSlideStartViewTime:function(){this._slideStartViewTime=_.now();},_updateSlideViewTime:function(){this._slideViewTime=this._getRecalculatedSlideViewTime();},_getRecalculatedSlideViewTime:function(){return this._slideViewTime+(_.now()-this._slideStartViewTime);}},{EPSILON:1e-4,slideType:{PRESENTATION_SLIDE:'slide',QUIZ_SLIDE:'quiz',SCENARIO_SLIDE:'scenario'}});

Namespace.use("scormplayer.manifest.json.*",function(){Namespace("scormplayer.manifest.json",{ManifestLoader:Base.extend({load:function(manifestJson)
{var manifest=new scormplayer.manifest.Manifest();this._initManifest(manifest,manifestJson);return manifest;},_initManifest:function(manifest,manifestJson)
{manifest.id(manifestJson.id);if("metadata"in manifestJson)
{manifest.metadata(this._loadMetadata(manifestJson.metadata));}
if("courses"in manifestJson)
{manifest.courses(this._loadCourses(manifestJson.courses));}
if("resources"in manifestJson)
{manifest.resources(this._loadResources(manifestJson.resources));}},_loadMetadata:function(metadataJson)
{var loader=new ManifestMetadataLoader();return loader.load(metadataJson);},_loadResources:function(resourcesJson)
{var loader=new ResourcesLoader();return loader.load(resourcesJson);},_loadCourses:function(coursesJson)
{var loader=new CoursesLoader();return loader.load(coursesJson);}})});});

Namespace.use("scormplayer.player.*",function(){Namespace("scormplayer.player.scorm12",{Player:Player.extend({_createApi:function()
{return new api.scorm12.Api();},_createActivityStatusEvaluater:function()
{return new scorm12.ActivityStatusEvaluater();},_createDataMapper:function(activityStatusEvaluater)
{return new scorm12.TrackingRunTimeDataMapper(activityStatusEvaluater);},_createRollupProcessor:function(activityStatusEvaluater)
{return new scorm12.RollupProcessor(activityStatusEvaluater);},_createPlayerUIConnector:function(activityStatusEvaluater)
{return new scorm12.PlayerUIConnector(activityStatusEvaluater);},_getApiName:function()
{return scormplayer.player.scorm12.Player.API_NAME;},_saveLessonStatus:function()
{var runTimeData=this._api.runTimeData();var lessonStatus=runTimeData.get('cmi.core.lesson_status');if(lessonStatus)
{this._lms.saveLessonStatus(lessonStatus);}}},{API_NAME:"API"})});});

Namespace.use("scormplayer.player.*",function(){Namespace("scormplayer.player.scorm2004",{Player:Player.extend({_initialize:function()
{this.base();this._api.sharedData(this._contentState.sharedData());},_createApi:function()
{return new api.scorm2004.Api();},_createDataMapper:function(activityStatusEvaluater)
{return new scorm2004.TrackingRunTimeDataMapper(activityStatusEvaluater);},_getApiName:function()
{return scormplayer.player.scorm2004.Player.API_NAME;}},{API_NAME:"API_1484_11"})});});

Namespace("scormplayer.lms",{LMSConnector:scormplayer.lms.ILMSConnector.extend({_contentFrameWindow:null,_playerUI:null,_userInfo:null,_contentState:null,_globalObjectives:null,_globalSharedData:null,_logger:null,_lessonStatus:null,constructor:function(contentFrameWindow)
{this._contentFrameWindow=contentFrameWindow;this._playerUI=new scormplayer.lms.PlayerUI();this._playerUI.addListener(scormplayer.lms.PlayerUI.event.CONTENT_LOADED,this,this._onContentLoaded);},logger:function(logger)
{if(logger!==undefined)this._logger=logger;return this._logger;},registerApi:function(apiName,api)
{this._contentFrameWindow[apiName]=api;},unregisterApi:function(apiName)
{if(apiName in window)
{delete this._contentFrameWindow[apiName];}},getPlayerUI:function()
{return this._playerUI;},setUserInfo:function(user)
{this._userInfo=user;},getUserInfo:function()
{return this._userInfo;},saveContentState:function(contentState)
{this._contentState=contentState;},saveGlobalObjectives:function(objectives)
{this._globalObjectives=objectives;},saveGlobalSharedData:function(sharedData)
{this._globalSharedData=sharedData;},saveLessonStatus:function(lessonStatus)
{this._lessonStatus=lessonStatus;},commit:function()
{this.dispatchEvent(scormplayer.lms.LMSConnector.event.COMMIT);},exit:function()
{this.dispatchEvent(scormplayer.lms.LMSConnector.event.EXIT);},setResourcesBaseUrl:function(url)
{this._playerUI.setResourcesBaseUrl(url);},getDataToSave:function()
{var needToSaveData=false;var dataToSave={};if(this._contentState)
{dataToSave.contentState=$.toJSON(this._contentState);needToSaveData=true;}
if(this._globalObjectives)
{dataToSave.globalObjectives=$.toJSON(this._globalObjectives);needToSaveData=true;}
if(this._globalSharedData)
{dataToSave.globalSharedData=$.toJSON(this._globalSharedData);needToSaveData=true;}
if(this._lessonStatus)
{dataToSave.lessonStatus=this._lessonStatus;}
return(needToSaveData)?dataToSave:null;},_onContentLoaded:function()
{this.dispatchEvent(scormplayer.lms.LMSConnector.event.CONTENT_LOADED,this._playerUI.getLoadedContentUrl());this.dispatchEvent(scormplayer.lms.LMSConnector.event.PLAYBACK_ACTION_OCCURRED);}},{event:{COMMIT:'commit',EXIT:'exit',CONTENT_LOADED:'content_loaded',PLAYBACK_ACTION_OCCURRED:'playback_action_occurred'}})});

var QuizState=Base.extend({},{INITIALIZING:"initializing",REVIEWING:"reviewing",COMPLETED:"completed"});

var PagedContentStatCollector=ISpringContentStatCollector.extend({_pageViewStartTimestamps:null,constructor:function(viewContentOptions,player)
{this._pageViewStartTimestamps={};this.base(viewContentOptions,player);},listenToPlayerEvents:function()
{this.base();this.contentPlayer.addListener(PlayerEvent.PAGES_OPENED,this,this._handlePagesOpen);this.contentPlayer.addListener(PlayerEvent.PAGES_COMPLETED,this,this._handlePagesComplete);this.contentPlayer.addListener(PlayerEvent.PAGES_CLOSED,this,this._handlePagesClose);},getStatisticsVars:function()
{return $.extend({pages_view_info:$.toJSON(this._getPagesViewInfo(this.contentPlayer.getCurrentPageIndices()))},this.base());},_handlePagesOpen:function(openedPageIndices)
{var currentTimestamp=_.now();_.each(openedPageIndices,_.bind(function(pageIndex){this._pageViewStartTimestamps[pageIndex]=currentTimestamp;},this));},_handlePagesComplete:function(completedPageIndices){_.each(completedPageIndices,_.bind(function(pageIndex){this._sendPageViewStatistics(pageIndex);},this));},_handlePagesClose:function(closedPageIndices)
{var pageViewInfo=this._getPagesViewInfo(closedPageIndices);_.each(pageViewInfo,_.bind(function(pageViewInfoItem){this._sendPageViewTimeStatistics(pageViewInfoItem['page_index'],pageViewInfoItem['view_time']);},this));},_getPagesViewInfo:function(pageIndices)
{var pageViewInfo=[];var currentTimestamp=_.now();var closedPagesCount=pageIndices.length;_.each(pageIndices,_.bind(function(pageIndex){var pageViewStartTimestamp=this._pageViewStartTimestamps[pageIndex];if(pageViewStartTimestamp!==undefined)
{var viewDelta=Math.max(0,(currentTimestamp-pageViewStartTimestamp));var viewTime=Math.ceil(viewDelta/closedPagesCount);pageViewInfo.push({'page_index':pageIndex,'view_time':viewTime});}},this));return pageViewInfo;},_sendPageViewStatistics:function(pageIndex)
{this.statNotifier.sendSlideViewStatistics(pageIndex);},_sendPageViewTimeStatistics:function(pageIndex,viewTime)
{this.statNotifier.sendSlideViewTimeStatistics(pageIndex,viewTime);}});

var MediaStatCollector=PlayerStatCollector.extend({_seeking:null,_mediaPosition:null,_partViewController:null,_invalidatePositionIntervalId:null,stop:function(requestType)
{this._invalidatePosition();this._handleStopView(requestType);this.base(requestType);},setStartPosition:function(newPosition)
{this._mediaPosition=newPosition;this.contentPlayer.setStartPosition(newPosition);},listenToPlayerEvents:function()
{this.base();this._initializePartViewStatisticsController();this.contentPlayer.addListener(PlayerEvent.SEEK,this,this._onSeekStart);this.contentPlayer.addListener(PlayerEvent.SEEK_END,this,this._onSeekStop);this.contentPlayer.addListener(PlayerEvent.PLAY,this,this._onPlay);this.contentPlayer.addListener(PlayerEvent.PAUSE,this,this._onPause);this.contentPlayer.addListener(PlayerEvent.PLAYBACK_COMPLETE,this,this._onStop);},_initializePartViewStatisticsController:function()
{this._partViewController=new PartViewStatisticsController();this._partViewController.addListener(PartViewStatisticsController.event.PART_VIEWED,this,this._sendPartViewStatistics);},_sendPartViewStatistics:function(startTime,endTime,requestType)
{requestType=typeof(requestType)=='undefined'?RequestType.ASYNC:requestType;this.getDefaultStatisticHandler().sendPartViewStat({start:startTime*1000,end:endTime*1000,id_resource:this.viewContentOptions.getContentItemId(),id_resource_view:this.viewContentOptions.getContentItemViewId()},requestType);},_onPlay:function()
{if(this.contentPlayer.playing())
{this.setPlaybackActionOccurred();var startPos=this._mediaPosition<this.contentPlayer.progress()?this._mediaPosition:this.contentPlayer.progress();this._handleStartView(startPos);this._startInvalidatePosition();}},_onPause:function()
{if(!this.contentPlayer.playing())
{this._handleStopView(RequestType.ASYNC);this._stopInvalidatePosition();}},_onStop:function()
{this._handleStopView(RequestType.ASYNC);this._stopInvalidatePosition();},_onSeekStart:function()
{if(!this._seeking)
{this._seeking=true;if(this.contentPlayer.playing())
{this._handleStopView(RequestType.ASYNC);}
this._stopInvalidatePosition();}},_onSeekStop:function()
{this._seeking=false;var pos=this._invalidatePosition();if(this.contentPlayer.playing())
{this._handleStartView(pos);}
this._startInvalidatePosition();},_startInvalidatePosition:function()
{if(!this._invalidatePositionIntervalId)
{this._invalidatePositionIntervalId=setInterval(handler(this,'_invalidatePosition'),500);}},_invalidatePosition:function()
{if(this.contentPlayer)
{this._mediaPosition=this.contentPlayer.progress();this._handleUpdateView();}
return this._mediaPosition;},_stopInvalidatePosition:function()
{clearInterval(this._invalidatePositionIntervalId);this._invalidatePositionIntervalId=null;},_handleStartView:function(position)
{this._partViewController.handleStartView(position);},_handleUpdateView:function()
{this._partViewController.handleUpdateView(this._mediaPosition);},_handleStopView:function(requestType)
{this._partViewController.handleStopView(this._mediaPosition,requestType);}});

var PlayPauseAnimation=LegacyAnimation.extend({_maxOpacity:1,_minOpacity:0,_opacity:0,_opacitySpeed:null,_element:null,constructor:function(element,duration)
{duration=duration||500;this.base(element,duration);this._element=element;this._opacitySpeed=(this._maxOpacity-this._minOpacity)/duration;},animatePlay:function()
{this._element.removeClass('pause');this._element.addClass('play');this.animate();},animatePause:function()
{this._element.removeClass('play');this._element.addClass('pause');this.animate();},animate:function()
{this._opacity=this._maxOpacity;this.base();this._element.fadeIn();this._element.fadeOut('slow');},animateScale:function()
{this.base();var marginLeft=-this._element.width()/2;var marginTop=-this._element.height()/2;this._opacity-=this.getTimeSinceLastAnimation()*this._opacitySpeed;this._opacity=Math.max(this._opacity,this._minOpacity);this._element.css({'opacity':this._opacity,'margin-left':marginLeft+'px','margin-top':marginTop+'px'});},stopAnimation:function()
{this.base();this._element.fadeOut();}});

var VideoControlPanel=ControlPanel.extend({_fullScreenSwitcher:null,_playbackSpeedPicker:null,_slideAnimation:null,constructor:function(){this._fullScreenSwitcher=$('#fullScreenSwitcher');this._playbackSpeedPicker=new PlaybackSpeedPicker('playbackSpeedPicker');this.base();this._panel.on('click',this._onControlPanelClick.bind(this));this._slideAnimation=new SlideAnimation(this._panel,VideoControlPanel.SLIDE_UP_ANIMATION_DURATION,VideoControlPanel.SLIDE_DOWN_ANIMATION_DURATION);},isPlaybackSpeedPopupVisible:function(){return this._playbackSpeedPicker.isVisible();},hidePlaybackSpeedPopup:function(){this._playbackSpeedPicker.hidePlaybackSpeedPopup();},isVisible:function(){return this._slideAnimation.isVisible();},slideUp:function(){this._slideAnimation.slideUp();},slideDown:function(){this._slideAnimation.slideDown();},_initialize:function(){this.base();this._fullScreenSwitcher.click(handler(this,'_onFullScreenButtonClick'));this._playbackSpeedPicker.addListener(PlaybackSpeedPicker.event.PLAYBACK_SPEED_CHANGE,this,this._onPlaybackSpeedChange);ControlPanel.fixSpriteOnTouchEnd(this._fullScreenSwitcher);if(screenfull.enabled){document.addEventListener(screenfull.raw.fullscreenchange,handler(this,'_onFullScreenChange'));}},_onControlPanelClick:function(){this.hidePlaybackSpeedPopup();},_onPlaybackSpeedChange:function(playbackSpeed){this.dispatchEvent(VideoControlPanel.event.PLAYBACK_SPEED_CHANGE,playbackSpeed);},_onFullScreenChange:function(){this._fullScreenSwitcher.toggleClass(VideoControlPanel.EXIT_CLASS_NAME,screenfull.isFullscreen);},_onFullScreenButtonClick:function(){this.dispatchEvent(VideoControlPanel.FULL_SCREEN_CLICKED_EVENT);this._fullScreenSwitcher.toggleClass(VideoControlPanel.EXIT_CLASS_NAME);}},{FULL_SCREEN_CLICKED_EVENT:'fullscreen_button_has_been_clicked',EXIT_CLASS_NAME:'exit',SLIDE_UP_ANIMATION_DURATION:250,SLIDE_DOWN_ANIMATION_DURATION:650,event:{PLAYBACK_SPEED_CHANGE:'playback_speed_change',},getPanelCode:function(){return'<div id="controlPanel" class="control_panel">'+'<div id="playPause" class="play_pause"></div>'+'<div class="timeline_container '+(PlaybackSpeedPicker.needShowVideoPlaybackSpeedPicker()?'playback_speed_picker_enabled':'')+'">'+Slider.getSliderCode('timeline','timeline slider')+'</div>'+'<div id="timeInformation" class="time_info">00:00 / 00:00</div>'+
PlaybackSpeedPicker.tryToGetPickerCode()+
VolumePicker.getPickerCode()+'<div id="fullScreenSwitcher" class="fullscreen_button"><div class="fullscreen_icon"></div></div>'+'</div>';}});

(function(){'use strict';var isCommonjs=typeof module!=='undefined'&&module.exports;var keyboardAllowed=typeof Element!=='undefined'&&'ALLOW_KEYBOARD_INPUT'in Element;var fn=(function(){var val;var valLength;var fnMap=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror'],['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror'],['webkitRequestFullScreen','webkitCancelFullScreen','webkitCurrentFullScreenElement','webkitCancelFullScreen','webkitfullscreenchange','webkitfullscreenerror'],['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror'],['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError']];var i=0;var l=fnMap.length;var ret={};for(;i<l;i++){val=fnMap[i];if(val&&val[1]in document){for(i=0,valLength=val.length;i<valLength;i++){ret[fnMap[0][i]]=val[i];}
return ret;}}
return false;})();var screenfull={request:function(elem){var request=fn.requestFullscreen;elem=elem||document.documentElement;if(/5\.1[\.\d]* Safari/.test(navigator.userAgent)){elem[request]();}else{elem[request]({value:keyboardAllowed&&Element.ALLOW_KEYBOARD_INPUT});}},exit:function(){document[fn.exitFullscreen]();},toggle:function(elem){if(this.isFullscreen){this.exit();}else{this.request(elem);}},onchange:function(){},onerror:function(){},raw:fn};if(!fn){if(isCommonjs){module.exports=false;}else{window.screenfull=false;}
return;}
Object.defineProperties(screenfull,{isFullscreen:{get:function(){return!!document[fn.fullscreenElement];}},element:{enumerable:true,get:function(){return document[fn.fullscreenElement];}},enabled:{enumerable:true,get:function(){return!!document[fn.fullscreenEnabled];}}});document.addEventListener(fn.fullscreenchange,function(e){screenfull.onchange.call(screenfull,e);});document.addEventListener(fn.fullscreenerror,function(e){screenfull.onerror.call(screenfull,e);});if(isCommonjs){module.exports=screenfull;}else{window.screenfull=screenfull;}})();

var HtmlUtils=Base.extend({},{replaceNewLinesWithHtmlNewLines:function(str)
{return str.replace(/[\n]+/g,'</br>');},htmlentities:function(str)
{var pre=document.createElement('pre');var text=document.createTextNode(str);pre.appendChild(text);return pre.innerHTML;},htmldecode:function(htmlStr)
{return $('<pre/>').html(htmlStr).text();},});

(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global.ES6Promise=factory());}(this,(function(){'use strict';function objectOrFunction(x)
{var type=typeof x;return x!==null&&(type==='object'||type==='function');}
function isFunction(x)
{return typeof x==='function';}
var _isArray=undefined;if(Array.isArray)
{_isArray=Array.isArray;}
else
{_isArray=function(x){return Object.prototype.toString.call(x)==='[object Array]';};}
var isArray=_isArray;var len=0;var vertxNext=undefined;var customSchedulerFn=undefined;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2)
{if(customSchedulerFn)
{customSchedulerFn(flush);}
else
{scheduleFlush();}}};function setScheduler(scheduleFn)
{customSchedulerFn=scheduleFn;}
function setAsap(asapFn)
{asap=asapFn;}
var browserWindow=typeof window!=='undefined'?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==='undefined'&&typeof process!=='undefined'&&({}).toString.call(process)==='[object process]';var isWorker=typeof Uint8ClampedArray!=='undefined'&&typeof importScripts!=='undefined'&&typeof MessageChannel!=='undefined';function useNextTick()
{return function(){return process.nextTick(flush);};}
function useVertxTimer()
{if(typeof vertxNext!=='undefined')
{return function(){vertxNext(flush);};}
return useSetTimeout();}
function useMutationObserver()
{var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode('');observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2;};}
function useMessageChannel()
{var channel=new MessageChannel();channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0);};}
function useSetTimeout()
{var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1);};}
var queue=new Array(1000);function flush()
{for(var i=0;i<len;i+=2)
{var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined;}
len=0;}
function attemptVertx()
{try
{var r=require;var vertx=r('vertx');vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer();}
catch(e)
{return useSetTimeout();}}
var scheduleFlush=undefined;if(isNode)
{scheduleFlush=useNextTick();}
else if(BrowserMutationObserver)
{scheduleFlush=useMutationObserver();}
else if(isWorker)
{scheduleFlush=useMessageChannel();}
else if(browserWindow===undefined&&typeof require==='function')
{scheduleFlush=attemptVertx();}
else
{scheduleFlush=useSetTimeout();}
function then(onFulfillment,onRejection)
{var _arguments=arguments;var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined)
{makePromise(child);}
var _state=parent._state;if(_state)
{(function(){var callback=_arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result);});})();}
else
{subscribe(parent,child,onFulfillment,onRejection);}
return child;}
function resolve$1(object)
{var Constructor=this;if(object&&typeof object==='object'&&object.constructor===Constructor)
{return object;}
var promise=new Constructor(noop);resolve(promise,object);return promise;}
var PROMISE_ID=Math.random().toString(36).substring(16);function noop()
{}
var PENDING=void 0;var FULFILLED=1;var REJECTED=2;var GET_THEN_ERROR=new ErrorObject();function selfFulfillment()
{return new TypeError("You cannot resolve a promise with itself");}
function cannotReturnOwn()
{return new TypeError('A promises callback cannot return that same promise.');}
function getThen(promise)
{try
{return promise.then;}
catch(error)
{GET_THEN_ERROR.error=error;return GET_THEN_ERROR;}}
function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler)
{try
{then$$1.call(value,fulfillmentHandler,rejectionHandler);}
catch(e)
{return e;}}
function handleForeignThenable(promise,thenable,then$$1)
{asap(function(promise){var sealed=false;var error=tryThen(then$$1,thenable,function(value){if(sealed)
{return;}
sealed=true;if(thenable!==value)
{resolve(promise,value);}
else
{fulfill(promise,value);}},function(reason){if(sealed)
{return;}
sealed=true;reject(promise,reason);},'Settle: '+(promise._label||' unknown promise'));if(!sealed&&error)
{sealed=true;reject(promise,error);}},promise);}
function handleOwnThenable(promise,thenable)
{if(thenable._state===FULFILLED)
{fulfill(promise,thenable._result);}
else if(thenable._state===REJECTED)
{reject(promise,thenable._result);}
else
{subscribe(thenable,undefined,function(value){return resolve(promise,value);},function(reason){return reject(promise,reason);});}}
function handleMaybeThenable(promise,maybeThenable,then$$1)
{if(maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1)
{handleOwnThenable(promise,maybeThenable);}
else
{if(then$$1===GET_THEN_ERROR)
{reject(promise,GET_THEN_ERROR.error);GET_THEN_ERROR.error=null;}
else if(then$$1===undefined)
{fulfill(promise,maybeThenable);}
else if(isFunction(then$$1))
{handleForeignThenable(promise,maybeThenable,then$$1);}
else
{fulfill(promise,maybeThenable);}}}
function resolve(promise,value)
{if(promise===value)
{reject(promise,selfFulfillment());}
else if(objectOrFunction(value))
{handleMaybeThenable(promise,value,getThen(value));}
else
{fulfill(promise,value);}}
function publishRejection(promise)
{if(promise._onerror)
{promise._onerror(promise._result);}
publish(promise);}
function fulfill(promise,value)
{if(promise._state!==PENDING)
{return;}
promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0)
{asap(publish,promise);}}
function reject(promise,reason)
{if(promise._state!==PENDING)
{return;}
promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise);}
function subscribe(parent,child,onFulfillment,onRejection)
{var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state)
{asap(publish,parent);}}
function publish(promise)
{var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0)
{return;}
var child=undefined,callback=undefined,detail=promise._result;for(var i=0;i<subscribers.length;i+=3)
{child=subscribers[i];callback=subscribers[i+settled];if(child)
{invokeCallback(settled,child,callback,detail);}
else
{callback(detail);}}
promise._subscribers.length=0;}
function ErrorObject()
{this.error=null;}
var TRY_CATCH_ERROR=new ErrorObject();function tryCatch(callback,detail)
{try
{return callback(detail);}
catch(e)
{TRY_CATCH_ERROR.error=e;return TRY_CATCH_ERROR;}}
function invokeCallback(settled,promise,callback,detail)
{var hasCallback=isFunction(callback),value=undefined,error=undefined,succeeded=undefined,failed=undefined;if(hasCallback)
{value=tryCatch(callback,detail);if(value===TRY_CATCH_ERROR)
{failed=true;error=value.error;value.error=null;}
else
{succeeded=true;}
if(promise===value)
{reject(promise,cannotReturnOwn());return;}}
else
{value=detail;succeeded=true;}
if(promise._state!==PENDING)
{}
else if(hasCallback&&succeeded)
{resolve(promise,value);}
else if(failed)
{reject(promise,error);}
else if(settled===FULFILLED)
{fulfill(promise,value);}
else if(settled===REJECTED)
{reject(promise,value);}}
function initializePromise(promise,resolver)
{try
{resolver(function resolvePromise(value){resolve(promise,value);},function rejectPromise(reason){reject(promise,reason);});}
catch(e)
{reject(promise,e);}}
var id=0;function nextId()
{return id++;}
function makePromise(promise)
{promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[];}
function Enumerator$1(Constructor,input)
{this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID])
{makePromise(this.promise);}
if(isArray(input))
{this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0)
{fulfill(this.promise,this._result);}
else
{this.length=this.length||0;this._enumerate(input);if(this._remaining===0)
{fulfill(this.promise,this._result);}}}
else
{reject(this.promise,validationError());}}
function validationError()
{return new Error('Array Methods must be provided an Array');}
Enumerator$1.prototype._enumerate=function(input){for(var i=0;this._state===PENDING&&i<input.length;i++)
{this._eachEntry(input[i],i);}};Enumerator$1.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve$$1=c.resolve;if(resolve$$1===resolve$1)
{var _then=getThen(entry);if(_then===then&&entry._state!==PENDING)
{this._settledAt(entry._state,i,entry._result);}
else if(typeof _then!=='function')
{this._remaining--;this._result[i]=entry;}
else if(c===Promise$3)
{var promise=new c(noop);handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i);}
else
{this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry);}),i);}}
else
{this._willSettleAt(resolve$$1(entry),i);}};Enumerator$1.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===PENDING)
{this._remaining--;if(state===REJECTED)
{reject(promise,value);}
else
{this._result[i]=value;}}
if(this._remaining===0)
{fulfill(promise,this._result);}};Enumerator$1.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value);},function(reason){return enumerator._settledAt(REJECTED,i,reason);});};function all$1(entries)
{return new Enumerator$1(this,entries).promise;}
function race$1(entries)
{var Constructor=this;if(!isArray(entries))
{return new Constructor(function(_,reject){return reject(new TypeError('You must pass an array to race.'));});}
else
{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++)
{Constructor.resolve(entries[i]).then(resolve,reject);}});}}
function reject$1(reason)
{var Constructor=this;var promise=new Constructor(noop);reject(promise,reason);return promise;}
function needsResolver()
{throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');}
function needsNew()
{throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}
function Promise$3(resolver)
{this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver)
{typeof resolver!=='function'&&needsResolver();this instanceof Promise$3?initializePromise(this,resolver):needsNew();}}
Promise$3.all=all$1;Promise$3.race=race$1;Promise$3.resolve=resolve$1;Promise$3.reject=reject$1;Promise$3._setScheduler=setScheduler;Promise$3._setAsap=setAsap;Promise$3._asap=asap;Promise$3.prototype={constructor:Promise$3,then:then,'catch':function _catch(onRejection){return this.then(null,onRejection);}};function polyfill$1()
{var local=undefined;if(typeof global!=='undefined')
{local=global;}
else if(typeof self!=='undefined')
{local=self;}
else
{try
{local=Function('return this')();}
catch(e)
{throw new Error('polyfill failed because global object is unavailable in this environment');}}
var P=local.Promise;if(P)
{var promiseToString=null;try
{promiseToString=Object.prototype.toString.call(P.resolve());}
catch(e)
{}
if(promiseToString==='[object Promise]'&&!P.cast)
{return;}}
local.Promise=Promise$3;}
Promise$3.polyfill=polyfill$1;Promise$3.Promise=Promise$3;Promise$3.polyfill();return Promise$3;})));

var FlashPresentationPlayer=FlashISpringContentPlayer.extend({_slideViewsDurations:{},getSlideIndex:function()
{var slideIndex=this.callFlashFunction(FlashPresentationPlayer.flash_function_name.GET_SLIDE_INDEX);return(slideIndex!==undefined)?slideIndex:null;},getSlideViewDuration:function()
{var duration=this.callFlashFunction(FlashPresentationPlayer.flash_function_name.GET_SLIDE_VIEW_DURATION);return(duration!==undefined)?duration:null;},listenToFlashEvents:function()
{this.base();this.addFlashEventListener(FlashPresentationPlayer.flash_event.SLIDE_CHANGED,this,this._onSlidePositionChanged);this.addFlashEventListener(FlashPresentationPlayer.flash_event.SEND_SLIDE_VIEW_TIME_STAT,this,this._onSendSlideViewTimeStatEvent);},_onSlidePositionChanged:function(slideIndex)
{this.dispatchEvent(PlayerEvent.SLIDE_OPENED,slideIndex);},_onSendSlideViewTimeStatEvent:function(slideIndex,viewTime)
{if(slideIndex in this._slideViewsDurations)
{this._slideViewsDurations[slideIndex]+=viewTime;}
else
{this._slideViewsDurations[slideIndex]=viewTime;}
if(this._slideViewsDurations[slideIndex]>FlashPresentationPlayer.ANTIBOUNCING_TIMEOUT)
{this.dispatchEvent(PlayerEvent.SLIDE_CLOSED,slideIndex,this._slideViewsDurations[slideIndex]);this._slideViewsDurations[slideIndex]=0;}}},{flash_event:{SLIDE_CHANGED:'slideChanged',SEND_SLIDE_VIEW_TIME_STAT:'sendSlideViewTimeStat'},flash_function_name:{GET_SLIDE_INDEX:'getSlideIndex',GET_SLIDE_VIEW_DURATION:'getSlideViewDuration'},ANTIBOUNCING_TIMEOUT:1000});

var PdfPlayer=BasePlayer.extend({_frameContentWindow:null,_viewer:null,initFromFrameContentWindow:function(frameContentWindow)
{this._frameContentWindow=frameContentWindow;this._viewer=frameContentWindow.PDFViewerApplication;var frameDocument=$(this._frameContentWindow.document);frameDocument.on(PdfPlayer.pdfViewerEvent.CLOSE,_.bind(this._handleCloseEvent,this));if(this._viewer.isPagesInit)
{this._onPagesInit();}
else
{frameDocument.on(PdfPlayer.pdfViewerEvent.PAGES_INIT,_.bind(this._onPagesInit,this));}
if(this._viewer.isNeedPassword)
{this._onPasswordFormReady();}
else
{frameDocument.on(PdfPlayer.pdfViewerEvent.NEED_PASSWORD,_.bind(this._onPasswordFormReady,this));}},showCloseButton:function()
{this._viewer.showCloseButton();},setDownloadUrl:function(downloadUrl)
{this._viewer.setDownloadUrl(downloadUrl);},print:function()
{this._frameContentWindow.print();},setTitle:function(title)
{this._viewer.setTitle(title);},_handleCloseEvent:function()
{this.dispatchEvent(PlayerEvent.EXIT);},_onPagesInit:function()
{this.tryToSetPlaybackStarted();this.handlePlaybackActionOccurred();},_onPasswordFormReady:function()
{this.dispatchEvent(PlayerEvent.PASSWORD_REQUIRED);}},{pdfViewerEvent:{NEED_PASSWORD:'needpassword',PAGES_INIT:'pagesinit',CLOSE:'close'}});

var FlipBookPlayer=ISpringContentPlayer.extend({_currentPageIndices:null,constructor:function(iSpringPlayer,resumeType){this.base(iSpringPlayer,resumeType);this._currentPageIndices=[];},start:function(){this.handlePlaybackActionOccurred();this.iSpringPlayer.startupCompletedEvent().addHandler(this.tryToSetPlaybackStarted,this);this.iSpringPlayer.pageChangedEvent().addHandler(this._pageChangedHandler,this);this.iSpringPlayer.stateChangedEvent().addHandler(this._stateChangedHandler,this);},getCurrentPageIndices:function(){return this._currentPageIndices;},_stateChangedHandler:function(){this.dispatchEvent(PlayerEvent.STATE_CHANGED,this.getResumeState());},_pageChangedHandler:function(){var newPageIndices=this._getCurrentPageIndicesFromPlayer();var openedPages=_.difference(newPageIndices,this._currentPageIndices);if(openedPages.length){this.dispatchEvent(PlayerEvent.PAGES_OPENED,openedPages);this.dispatchEvent(PlayerEvent.PAGES_COMPLETED,openedPages);}
var closedPages=_.difference(this._currentPageIndices,newPageIndices);if(closedPages.length){this.dispatchEvent(PlayerEvent.PAGES_CLOSED,closedPages);}
this._currentPageIndices=newPageIndices;},_getCurrentPageIndicesFromPlayer:function(){var currentPageIndices=[];if(this.iSpringPlayer&&this.iSpringPlayer.viewPages){currentPageIndices=this.iSpringPlayer.viewPages();}
return currentPageIndices;}});

var LongreadPlayer=ISpringContentPlayer.extend({_currentPageIndex:null,constructor:function(resumeType){this.base(resumeType);},start:function(){this.handlePlaybackActionOccurred();this.tryToSetPlaybackStarted();this._addSelectedSectionChangeHandler();this._addSectionProgressChangeHandler();this._addClosePlayerRequestHandler();},getCurrentPageIndices:function(){return this._currentPageIndex==null?[]:[this._currentPageIndex];},getResumeState:function(){var resumeState=null;try{resumeState={state:this.iSpringPlayer.getSuspendData()};}
catch(e){console.error(e);}
return resumeState;},_addSelectedSectionChangeHandler:function(){try{this.iSpringPlayer.onSelectedSectionChange.add(this._onSelectedSectionChange.bind(this),this);}
catch(e){console.error(e);}
this._onSelectedSectionChange();},_addSectionProgressChangeHandler:function(){try{this.iSpringPlayer.onSectionProgressChange.add(this._onSectionProgressChange.bind(this),this);}
catch(e){console.error(e);}},_addClosePlayerRequestHandler:function(){try{this.iSpringPlayer.onClosePlayerRequest.add(this._onClosePlayerRequest.bind(this),this);}
catch(e){console.error(e);}},_onSelectedSectionChange:function(){var newPageIndex=this._getCurrentSectionIndexFromPlayer();if(newPageIndex===this._currentPageIndex){return;}
if(newPageIndex!=null){this.dispatchEvent(PlayerEvent.PAGES_OPENED,[newPageIndex]);}
if(this._currentPageIndex!=null){this.dispatchEvent(PlayerEvent.PAGES_CLOSED,[this._currentPageIndex]);}
this._currentPageIndex=newPageIndex;},_onSectionProgressChange:function(){this.dispatchEvent(PlayerEvent.STATE_CHANGED,this.getResumeState());var currentSectionIndex=this._getCurrentSectionIndexFromPlayer();var currentSectionProgress=this._getCurrentSectionProgressFromPlayer();if((currentSectionIndex!=null)&&(currentSectionProgress!=null)){if(currentSectionProgress===1){this.dispatchEvent(PlayerEvent.PAGES_COMPLETED,[currentSectionIndex]);}}},_getCurrentSectionIndexFromPlayer:function(){var currentSectionIndex=null;try{currentSectionIndex=this.iSpringPlayer.getCurrentSectionIndex()+1;}
catch(e){console.error(e);}
return currentSectionIndex;},_getCurrentSectionProgressFromPlayer:function(){var currentSectionProgress=null;try{currentSectionProgress=this.iSpringPlayer.getCurrentSectionProgress();}
catch(e){console.error(e);}
return currentSectionProgress;},_onClosePlayerRequest:function()
{this.dispatchEvent(PlayerEvent.EXIT);},});

var OnlineQuizPlayer=ISpringContentPlayer.extend({constructor:function(resumeType){this.base(resumeType);},start:function(){this.handlePlaybackActionOccurred();this.tryToSetPlaybackStarted();this._addQuizStateChangeHandler();this._addQuizStatisticChangeHandler();this._addClosePlayerRequestHandler();},_addQuizStateChangeHandler:function(){try{this.iSpringPlayer.onStateChanged.add(this._onStateChanged.bind(this),this);}
catch(e){console.error(e);}},_addQuizStatisticChangeHandler:function(){try{this.iSpringPlayer.onFinalStatisticChanged.add(this._onFinalStatisticChanged.bind(this),this);}
catch(e){console.error(e);}},_addClosePlayerRequestHandler:function(){try{this.iSpringPlayer.onClose.add(this._onClosePlayerRequest.bind(this),this);}
catch(e){console.error(e);}},_onStateChanged:function(persistedState){const persistedStateObj=persistedState&&JSON.parse(persistedState);this.dispatchEvent(PlayerEvent.STATE_CHANGED,persistedStateObj);},_onFinalStatisticChanged:function(statistic){this.dispatchEvent(PlayerEvent.QUIZ_COMPLETE,statistic.result);},_onClosePlayerRequest:function(){this.dispatchEvent(PlayerEvent.EXIT);},getResumeState:function(){var resumeState=null;try{resumeState=JSON.parse(this.iSpringPlayer.getResumeState());}
catch(e){console.error(e);}
return resumeState;}});

var VisualsContentPlayer=ISpringContentPlayer.extend({_currentItemIndex:null,start:function()
{this.iSpringPlayer.initializationCompleteEvent().addHandler(this.tryToSetPlaybackStarted,this);this.iSpringPlayer.currentSession().itemChangedEvent().addHandler(this._onItemChanged,this);},isCurrentItemIndexValid:function()
{return this._isValidSlideIndex(this._currentItemIndex);},getCurrentItemIndex:function()
{return this._currentItemIndex;},_onItemChanged:function()
{var activeItemIndex=this.iSpringPlayer.currentSession().evaluation().activeItemIndex();if(this._isValidSlideIndex(this._currentItemIndex))
{this._onSlideClosed(this._currentItemIndex);}
this._currentItemIndex=activeItemIndex;if(this._isValidSlideIndex(activeItemIndex))
{this._onSlideOpened(activeItemIndex);}},_onSlideClosed:function(slideIndex)
{this.dispatchEvent(PlayerEvent.SLIDE_CLOSED,slideIndex);},_onSlideOpened:function(slideIndex)
{this.handlePlaybackActionOccurred();this.dispatchEvent(PlayerEvent.SLIDE_OPENED,slideIndex);},_isValidSlideIndex:function(itemIndex)
{return _.isNumber(itemIndex);}});

var ScormMobileStatisticsHandlerWrapper=IContentStatisticsHandler.extend({_externalHandler:null,constructor:function(externalHandler)
{this.base();this._externalHandler=externalHandler;},saveContentViewedPreparedStatistics:function(contentItemId,statisticsVars,userId)
{this._saveContentViewStatistics(contentItemId,statisticsVars,userId);},saveContentViewed:function(contentItemId,statisticsVars,requestType,userId)
{this._saveContentViewStatistics(contentItemId,statisticsVars,userId);},saveISpringPersistedState:function(state,successHandler){},saveBrakeISpringViewChain:function(){},sendPartViewStat:function(params,requestType){},sendISpringContentStats:function(url,statsData,requestMethod){},_saveContentViewStatistics:function(contentItemId,statisticsVars,userId)
{var statistics=this._prepareStatisticsForSave(statisticsVars,contentItemId,userId);if(statistics)
{var arg=JSON.stringify(statistics);this._callExternalMethod(ScormMobileStatisticsHandlerWrapper.SAVE_STATISTICS_METHOD,[arg]);}},_callExternalMethod:function(name,args){if(this._externalHandler&&this._externalHandler[name]!==undefined)
{this._externalHandler[name].apply(this._externalHandler,args);}},_prepareStatisticsForSave:function(statisticsVars,contentItemId,userId){if(!statisticsVars||!$.isNumeric(contentItemId)||!$.isNumeric(userId))
{return null;}
statisticsVars.content_item_id=contentItemId;statisticsVars.user_id=userId;return statisticsVars;}},{SAVE_STATISTICS_METHOD:'saveContentViewStatistics'});

var ContentItemInfoCache=Base.extend({},{_cache:{},save:function(contentItemInfo)
{var id=contentItemInfo.getId();var cachedContentItemInfo=this.getById(id);if((cachedContentItemInfo===null)||(contentItemInfo.getTimestamp()>cachedContentItemInfo.getTimestamp()))
{this._cache[id]=contentItemInfo;}},getById:function(contentItemId)
{var contentItemInfo=null;if(this._cache.hasOwnProperty(contentItemId))
{contentItemInfo=this._cache[contentItemId];}
return contentItemInfo;},getByKey:function(contentItemKey)
{for(var contentItemId in this._cache)
{var cachedContentItemInfo=this._cache[contentItemId];if(cachedContentItemInfo&&(cachedContentItemInfo.getKey()===contentItemKey))
{return cachedContentItemInfo;}}
return null;}});

var ViewISpringOnlineContentController=ViewISpringContentController.extend({setConnectorName:function(connectorName){throw new Error('illegal ViewISpringOnlineContentController.setConnectorName '+connectorName);},_initConnector:function(){window[ViewISpringOnlineContentController.CONNECTOR_NAME]={init:this._handleConnectorRegisterEvent.bind(this),getState:function(){return JSON.stringify(this._getInitialState());}.bind(this),getLocalization:function(){return{locale:EnvironmentInfo.getLocale()};}.bind(this)};}},{CONNECTOR_NAME:'iSpringConnector'});

var UniversalScenarioPlayer=ISpringContentPlayer.extend({_session:null,_parentPresentationSlideIndex:null,setParentPresentationSlideIndex:function(presentationSlideIndex)
{this._parentPresentationSlideIndex=presentationSlideIndex;},start:function()
{if(this._parentPresentationSlideIndex===null){this._startAsStandalone();}
else
{this._start();}},checkIfUserDeclinedResume:function()
{if(!this.iSpringPlayer.isResumed())
{this.dispatchEvent(PlayerEvent.PROMPT_TO_RESUME_DECLINED_BY_USER);}},_startAsStandalone:function(){this.iSpringPlayer.closeWindowEvent().addHandler(this.handleCloseEvent,this);this._start();if(_.isFunction(this.iSpringPlayer.stateChangedEvent)&&_.isFunction(this.iSpringPlayer.persistState)){this.iSpringPlayer.stateChangedEvent().addHandler(this._onInteractionStateChanged,this);}
this.checkUserResumeOptionAfterTimeout();},_start:function(){this.iSpringPlayer.currentSessionChangedEvent().addHandler(this._onSessionChanged,this);this._registerNewSession(this.iSpringPlayer.currentSession());},_onInteractionStateChanged:function()
{var resumeState=this.getResumeState();if(resumeState!==null)
{this.handlePlaybackActionOccurred();this.tryToSetPlaybackStarted();}
this.dispatchEvent(PlayerEvent.STATE_CHANGED,resumeState);},_registerNewSession:function(session)
{if(!session)
{return;}
this._session=session;this.iSpringPlayer.stateChangedEvent().addHandler(this.tryToSetPlaybackStarted,this);this._session.currentSceneChangedEvent().addHandler(this._onCurrentSceneChanged,this);this._session.showTerminalSceneEvent().addHandler(this._onShowTerminalSceneEvent,this);this.tryToSetPlaybackStarted();},_onShowTerminalSceneEvent:function()
{this.handlePlaybackComplete();this.handlePlaybackActionOccurred();this._dispatchScenarioCompletedEvent();},_onSessionChanged:function()
{this._registerNewSession(this.iSpringPlayer.currentSession());},_onCurrentSceneChanged:function()
{this.handlePlaybackActionOccurred();this.tryToSetPlaybackStarted();},_dispatchScenarioCompletedEvent:function()
{var scenarioCompletionData={summary:this._session.summary(),state:this.getResumeState(),parent_presentation_slide_index:this._parentPresentationSlideIndex};this.dispatchEvent(PlayerEvent.SCENARIO_COMPLETE,scenarioCompletionData);}});

var UniversalQuizPlayer=ISpringContentPlayer.extend({_prevState:null,_session:null,_parentPresentationSlideIndex:null,setParentPresentationSlideIndex:function(presentationSlideIndex){this._parentPresentationSlideIndex=presentationSlideIndex;},start:function(){if(this._parentPresentationSlideIndex===null){this._startAsStandalone();}
else{this._start();}},checkIfUserDeclinedResume:function(){var isResumed=_.isFunction(this.iSpringPlayer.isResumed)?this.iSpringPlayer.isResumed():(this.getResumeState()!==null);if(!isResumed){this.dispatchEvent(PlayerEvent.PROMPT_TO_RESUME_DECLINED_BY_USER);}},_startAsStandalone:function(){this.iSpringPlayer.closeWindowEvent().addHandler(this.handleCloseEvent,this);this._start();if(_.isFunction(this.iSpringPlayer.stateChangedEvent)&&_.isFunction(this.iSpringPlayer.persistState)){this.iSpringPlayer.stateChangedEvent().addHandler(this._onInteractionStateChanged,this);}},_start:function(){if(_.isFunction(this.iSpringPlayer.startupCompleted)&&_.isFunction(this.iSpringPlayer.startupCompletedEvent)&&!this.iSpringPlayer.startupCompleted()){this.iSpringPlayer.startupCompletedEvent().addHandler(this.checkUserResumeOptionAfterTimeout,this);}
else{this.checkUserResumeOptionAfterTimeout();}
this.iSpringPlayer.currentSessionChangedEvent().addHandler(safeHandler(this,"_onSessionChanged"),this);this._registerNewSession(this.iSpringPlayer.currentSession());},_getSessionXml:function(){if(_.isFunction(this._session.generateDetailsXml)){return this._session.generateDetailsXml();}
var generator=this.iSpringPlayer.sessionDetailsGenerator();return generator.generateSessionXml(this._session);},_getQuizVersion:function(){var quiz=this._session.quiz();return quiz.version();},_onInteractionStateChanged:function(flag){if(flag&&_.isFunction(flag.preventAction)){flag.preventAction();}
var resumeState=this.getResumeState();if(resumeState!==null){this.handlePlaybackActionOccurred();this.tryToSetPlaybackStarted();}
this.dispatchEvent(PlayerEvent.STATE_CHANGED,resumeState);},_onSessionChanged:function(session){if(!session){session=this.iSpringPlayer.currentSession();}
this._registerNewSession(session);},_registerNewSession:function(session){if(!session)
{return;}
this._session=session;this._session.quizStateChangeEvent().addHandler(safeHandler(this,"_onQuizStateChanged"),this);this._session.currentSlideChangeEvent().addHandler(safeHandler(this,"_onCurrentSlideChanged"),this);if(this._session.quizState()!==QuizState.INITIALIZING){this.tryToSetPlaybackStarted();}
this._onQuizStateChanged();},_onQuizStateChanged:function(prevState){if(prevState&&this._prevState!==prevState){this._prevState=prevState;}
var currentState=this._session.quizState();this.dispatchEvent(PlayerEvent.QUIZ_STATE_CHANGED,{prevState:this._prevState,currentState:currentState,});if(currentState===QuizState.COMPLETED){this.handlePlaybackComplete();this.handlePlaybackActionOccurred();if(this._prevState!==QuizState.REVIEWING){this._onQuizComplete();}}
else if(currentState!==QuizState.INITIALIZING){this.tryToSetPlaybackStarted();}
this._prevState=currentState;},_onQuizComplete:function(){var completionData={xml:this._getSessionXml(),quiz_version:this._getQuizVersion(),state:this.getResumeState(),parent_presentation_slide_index:this._parentPresentationSlideIndex};this.dispatchEvent(PlayerEvent.QUIZ_COMPLETE,completionData);},_onCurrentSlideChanged:function(){this.handlePlaybackActionOccurred();this.tryToSetPlaybackStarted();}});

var ScormPlayer=BasePlayer.extend({_internalPlayer:null,_suspendAllMayBeVisible:true,start:function(viewScormOptions)
{this._internalPlayer=this._createInternalPlayer(viewScormOptions);this._internalPlayer.start();this.tryToSetPlaybackStarted();this._internalPlayer.setIsReady();},stop:function()
{if(this._internalPlayer)
{this._internalPlayer.stop();}},getState:function()
{return this._internalPlayer.getState();},setSuspendAllMayBeVisible:function(visible)
{this._suspendAllMayBeVisible=visible;},onAllToolbarControlsHidden:function()
{this.dispatchEvent(PlayerEvent.ALL_CONTROLS_INVISIBLE);},onSomeToolbarControlsVisible:function()
{this.dispatchEvent(PlayerEvent.ANY_CONTROL_VISIBLE);},_createInternalPlayer:function(viewScormOptions)
{var manifestLoader=new scormplayer.manifest.json.ManifestLoader();var manifest=manifestLoader.load(viewScormOptions.getManifest());var internalPlayer=scormplayer.player.Player.createPlayer(manifest);internalPlayer.setControlsVisibilityListener(this);internalPlayer.courseId(viewScormOptions.getCourseId());internalPlayer.lms(this._createLmsConnector(viewScormOptions));if(this._isDebugMode()){internalPlayer.logger(new scormplayer.log.DebugLogger());}
var contentState=viewScormOptions.getContentState();if(contentState)
{internalPlayer.loadContentState(contentState);}
var globalObjectives=viewScormOptions.getObjectives();if(globalObjectives)
{internalPlayer.loadGlobalObjectives(globalObjectives);}
var globalSharedData=viewScormOptions.getGlobalSharedData();if(globalSharedData)
{internalPlayer.loadGlobalSharedData(globalSharedData);}
return internalPlayer;},_isDebugMode:function(){var debug=UrlUtils.getUrlParameter(UrlUtils.getCurrentUrl(),ScormPlayer.parameters.DEBUG);return(debug==='1');},_createLmsConnector:function(viewScormOptions)
{var lmsConnector=new scormplayer.lms.LMSConnector(window);lmsConnector.addListener(scormplayer.lms.LMSConnector.event.PLAYBACK_ACTION_OCCURRED,this,this.handlePlaybackActionOccurred);lmsConnector.addListener(scormplayer.lms.LMSConnector.event.CONTENT_LOADED,this,this._handleContentLoadedEvent);lmsConnector.addListener(scormplayer.lms.LMSConnector.event.EXIT,this,this._handlePlayerExitEvent);lmsConnector.addListener(scormplayer.lms.LMSConnector.event.COMMIT,this,this._handlePlayerCommitEvent);lmsConnector.setResourcesBaseUrl(viewScormOptions.getPackageDir());lmsConnector.getPlayerUI().setSuspendAllMayBeVisible(this._suspendAllMayBeVisible);var user=new scormplayer.lms.UserInfo(viewScormOptions.getUserId(),viewScormOptions.getUserName());lmsConnector.setUserInfo(user);return lmsConnector;},_handleContentLoadedEvent:function(url)
{this.dispatchEvent(ScormPlayer.event.CONTENT_LOADED,url);},_handlePlayerExitEvent:function()
{this.handlePlaybackComplete();this.dispatchEvent(PlayerEvent.EXIT);},_handlePlayerCommitEvent:function()
{this.dispatchEvent(ScormPlayer.event.COMMIT_SCORM_STATE);}},{event:{CONTENT_LOADED:'content_loaded',COMMIT_SCORM_STATE:'commit_scorm_state'},parameters:{DEBUG:'debug'}});

var FlashPresentationStatCollector=FlashISpringContentStatCollector.extend({listenToPlayerEvents:function()
{this.base();this.contentPlayer.addListener(PlayerEvent.SLIDE_OPENED,this,this._onSlideOpened);this.contentPlayer.addListener(PlayerEvent.SLIDE_CLOSED,this,this._onSlideClosed);},getStatisticsVars:function()
{return $.extend(this.base(),{slide_index:this.contentPlayer.getSlideIndex(),slide_view_duration:this.contentPlayer.getSlideViewDuration()});},_onSlideOpened:function(slideIndex)
{this.statNotifier.sendSlideViewStatistics(slideIndex);},_onSlideClosed:function(slideIndex,slideViewDuration)
{this.statNotifier.sendSlideViewTimeStatistics(slideIndex,slideViewDuration);}});

var ScormStatCollector=PlayerStatCollector.extend({_sendScormStateThrottledFn:null,constructor:function(viewContentOptions,player,customStatisticsHandler){this.base(viewContentOptions,player,customStatisticsHandler);this._sendScormStateThrottledFn=_.throttle(this._sendScormState.bind(this),ScormStatCollector.SAVE_STATE_THROTTLE_INTERVAL_MSEC);},getStatisticsVars:function(){var extraVars={unique_key:StringUtils.getRandomString(ScormStatCollector.UNIQUE_KEY_LENGTH)};var state=this.contentPlayer.getState();if(state){extraVars.state=state;}
return $.extend(extraVars,this.base());},commitScormState:function(){if(!this._canSendScormState()){return;}
var state=this.contentPlayer.getState();if(state){this._sendScormStateThrottledFn(state);}},_canSendScormState:function(){return this.isPlaybackActionOccurred()&&this.viewContentOptions.getContentItemId()&&this.viewContentOptions.getContentItemViewId();},_sendScormState:function(state){var url=StatUrl.PERSIST_SCORM_STATE;var validationKey=StringUtils.getRandomString(ScormStatCollector.UNIQUE_KEY_LENGTH);var statsData={content_item_id:this.viewContentOptions.getContentItemId(),content_item_view_id:this.viewContentOptions.getContentItemViewId(),state:state,validation_key:validationKey};var thisPtr=this;var successHandler=function(response,status,xhr){thisPtr._onSendScormStateSuccess(url,validationKey,response,xhr);};ContentStatistics.getInstance().doSendISpringContentStats(url,statsData,successHandler,undefined,RequestMethod.POST,RequestType.ASYNC);},_onSendScormStateSuccess:function(url,validationKey,response,xhr){if(!response.success){ContentStatisticsLogger.getInstance().sendResponseErrorInfo("save scorm state request failed",url,xhr);}
if(response.validation_key!==validationKey){ContentStatisticsLogger.getInstance().sendResponseErrorInfo("invalid save scorm state response: missing validation key "+validationKey,url,xhr);}}},{UNIQUE_KEY_LENGTH:5,SAVE_STATE_THROTTLE_INTERVAL_MSEC:30*1000});

var PresentationStatCollector=ISpringContentStatCollector.extend({listenToPlayerEvents:function()
{this.base();this.contentPlayer.addListener(PlayerEvent.SUB_SCENARIO_COMPLETE,this,this._onSubScenarioComplete);this.contentPlayer.addListener(PlayerEvent.SUB_QUIZ_COMPLETE,this,this._onSubQuizComplete);this.contentPlayer.addListener(PlayerEvent.SUB_QUIZ_STATE_CHANGED,this,this._onSubQuizStateChanged);this.contentPlayer.addListener(PlayerEvent.SLIDE_OPENED,this,this._onSlideOpened);this.contentPlayer.addListener(PlayerEvent.SLIDE_CLOSED,this,this._onSlideClosed);},getStatisticsVars:function()
{var statistics=this.base();var slideViewDuration=this.contentPlayer.getSlideViewDuration();if(slideViewDuration>0)
{statistics=$.extend({slide_index:this.contentPlayer.getCurrentSlideIndex(),slide_view_duration:slideViewDuration,resume_option:this.contentPlayer.getResumeOption()},statistics);}
return statistics;},_onSubQuizComplete:function(quizCompletionData)
{var playerState=this.contentPlayer.getResumeState();this.sendSaveStateRequest(playerState);this._sendLogQuizViewIdRequest();this._sendQuizResults(quizCompletionData);},_onSubQuizStateChanged:function(quizStateData)
{ContentStatisticsLogger.getInstance().sendLogMessage(StatUrl.QUIZ_STATE_CHANGED,quizStateData);},_sendLogQuizViewIdRequest:function()
{ContentStatisticsLogger.getInstance().sendQuizViewId(StatUrl.BEFORE_GENERATE_QUIZ_REPORT,this.viewContentOptions.getContentItemViewId());},_sendQuizResults:function(quizCompletionData)
{this.statNotifier.sendQuizResults(quizCompletionData.xml,quizCompletionData.parent_presentation_slide_index,quizCompletionData.quiz_version,null);},_onSubScenarioComplete:function(scenarioCompletionData)
{var playerState=this.contentPlayer.getResumeState();this.sendSaveStateRequest(playerState);this._sendScenarioReport(scenarioCompletionData);},_sendScenarioReport:function(scenarioCompletionData)
{this.statNotifier.sendScenarioReport($.toJSON(scenarioCompletionData.summary),scenarioCompletionData.parent_presentation_slide_index,null);},_onSlideOpened:function(openedSlideIndex)
{this.statNotifier.sendSlideViewStatistics(openedSlideIndex);},_onSlideClosed:function(closedSlideIndex,closedSlideViewTime)
{this.statNotifier.sendSlideViewTimeStatistics(closedSlideIndex,closedSlideViewTime);}});

var OnlineQuizStatCollector=ISpringContentStatCollector.extend({constructor:function(viewContentOptions,player){this.base(viewContentOptions,player);},listenToPlayerEvents:function(){this.base();this.contentPlayer.addListener(PlayerEvent.QUIZ_COMPLETE,this,this._handeStatisticChanged);},_handeStatisticChanged:function(statistic){this._sendLogQuizViewIdRequest();this.statNotifier.sendOnlineQuizResults(statistic);},_sendLogQuizViewIdRequest:function(){ContentStatisticsLogger.getInstance().sendQuizViewId(StatUrl.BEFORE_GENERATE_QUIZ_REPORT,this.viewContentOptions.getContentItemViewId());}});

var VisualsContentStatCollector=ISpringContentStatCollector.extend({_currentSlideViewStartTimestamp:null,listenToPlayerEvents:function()
{this.base();this.contentPlayer.addListener(PlayerEvent.SLIDE_OPENED,this,this._onSlideOpened);this.contentPlayer.addListener(PlayerEvent.SLIDE_CLOSED,this,this._onSlideClosed);},getStatisticsVars:function()
{var statisticsVars=this.base();if(this.contentPlayer.isCurrentItemIndexValid())
{statisticsVars=$.extend({slide_index:this.contentPlayer.getCurrentItemIndex(),slide_view_duration:this._getCurrentSlideViewDuration()},statisticsVars);}
return statisticsVars;},_onSlideClosed:function(slideIndex)
{var slideViewDuration=this._getCurrentSlideViewDuration();this.statNotifier.sendSlideViewTimeStatistics(slideIndex,slideViewDuration);},_onSlideOpened:function(slideIndex)
{this._currentSlideViewStartTimestamp=_.now();this.statNotifier.sendSlideViewStatistics(slideIndex);},_getCurrentSlideViewDuration:function()
{if(!_.isNumber(this._currentSlideViewStartTimestamp))
{return 0;}
return Math.max(0,(_.now()-this._currentSlideViewStartTimestamp));}});

var AudioPlayer=MediaPlayer.extend({getPlayerCode:function(resourceUrl,thumbnailUrl)
{var panelCode=this.shouldUseNativeControlPanel()?'':ControlPanel.getPanelCode();if(!thumbnailUrl)
{thumbnailUrl=$('#defaultAudioThumbnailUrl').val();}
return'<div id="audioPlayer" class="media_player audio_player_container">'+'<img src="'+thumbnailUrl+'" alt="" class="content_thumbnail"/>'+'<audio id="'+MediaPlayer.MEDIA_PLAYER_ID+'" src="'+resourceUrl+'" '+this.getMediaAttributes()+'></audio>'+
panelCode+'</div>';},getVolumeValueKey:function()
{return'audio_volume';}});

var VideoPlayer=MediaPlayer.extend({_hideControlsTimer:null,_isMouseAboveVideo:null,_playerContainer:null,_fullScreenWrapper:null,_playPauseAnimation:null,_replayButton:null,getPlayerCode:function(resourceUrl,thumbnailUrl){var containerClass=this._hasPlatformMediaPreloadSupport()?VideoPlayer.css_class.HIDDEN:'';var panelCode=this.shouldUseNativeControlPanel()?'':VideoControlPanel.getPanelCode();return'<div id="fullscreenWrapper" class="fullscreen_wrapper">'+'<img src="/images/preloader/dotted_preloader.gif" alt="" class="video_preloader" />'+'<div id="videoPlayer" class="media_player video_player_container '+containerClass+'">'+'<div id="videoPlayerReplayButton" class="replay_button"></div>'+'<div id="videoPlayerPlayPauseIcon" class="play_pause_icon"></div>'+
PlaybackSpeedPicker.tryToGetPopupCode()+'<video id="'+MediaPlayer.MEDIA_PLAYER_ID+'" src="'+resourceUrl+'" '+this.getMediaAttributes()+'></video>'+
panelCode+'</div>'+'</div>';},initialize:function(){this._playerContainer=$('#videoPlayer');this._fullScreenWrapper=$('#fullscreenWrapper');this.base();},getVolumeValueKey:function(){return'video_volume';},createControlPanel:function(){return new VideoControlPanel();},play:function(){this.base();this._animatePlay();},pause:function(){this.base();if(!this._controlPanel.isSeeking()){this._showControls();this._animatePause();}},initializeControlPanel:function(){this.base();this._replayButton=$('#videoPlayerReplayButton');this._replayButton.on('click',handler(this,'_onReplayButtonClick'));if(BrowserUtils.isAndroidDevice()&&this._controlPanel){$(this._media).click(handler(this,'_clickedOnVideoInAndroidDevice'));}
else{$(this._media).click(handler(this,'_clickedOnVideoInOtherDevice'));}
this._initPlayPauseButtons();this._initializeControlPanelAnimation();this._initializeFullScreenListeners();this._controlPanel.addListener(VideoControlPanel.event.PLAYBACK_SPEED_CHANGE,this,this._onPlaybackSpeedChange);},onPlaybackComplete:function(){this.base();this._showControls();this._showReplayButton();},onSeekStarted:function(){this.base();this._hideReplayButton();},onPlay:function(){this.base();this._showVideoContainer();this._hideReplayButton();},_onPlaybackSpeedChange:function(playbackSpeed){this._media.playbackRate=playbackSpeed;},_clickedOnVideoInAndroidDevice:function(){if(this._isControlsVisible()){this._showControls();}
else{this._tryToHidePlaybackSpeedPopup();this._hideControls();}},_clickedOnVideoInOtherDevice:function(){this._tryToHidePlaybackSpeedPopup();},_tryToHidePlaybackSpeedPopup:function(){if(this._isPlaybackSpeedPopupVisible()){this._controlPanel.hidePlaybackSpeedPopup();}},_onMetadataLoaded:function(){this._showVideoContainer();this.base();},_onReplayButtonClick:function(){this.play();this._tryToHidePlaybackSpeedPopup();},_initPlayPauseButtons:function(){var playPauseIcon=$('#videoPlayerPlayPauseIcon');playPauseIcon.on('click',handler(this,'_togglePlayPause'));this._playPauseAnimation=new PlayPauseAnimation(playPauseIcon);},_initializeFullScreenListeners:function(){if(screenfull.enabled||this._media.webkitEnterFullscreen){this._playerContainer.addClass(VideoPlayer.css_class.WITH_FULLSCREEN);this._controlPanel.addListener(VideoControlPanel.FULL_SCREEN_CLICKED_EVENT,this,this._onFullScreenButtonClick);document.addEventListener(screenfull.raw.fullscreenchange,handler(this,'_onFullScreenChange'));}},_onFullScreenChange:function(){if(this._isFullScreen()){this._fullScreenWrapper.addClass(VideoPlayer.css_class.SCREEN_IS_FULL);}
else{this._fullScreenWrapper.removeClass(VideoPlayer.css_class.SCREEN_IS_FULL);}},_initializeControlPanelAnimation:function(){$('#videoPlayer').on({mouseover:handler(this,'_onViewContentContainerMouseOver'),mouseleave:handler(this,'_onViewContentContainerMouseLeave'),mousemove:handler(this,'_onPlayerContainerMouseMove')});this._showControls();},_onViewContentContainerMouseOver:function(){this._isMouseAboveVideo=true;if(!this._isFullScreen()){this._showControls();}},_onViewContentContainerMouseLeave:function(){this._isMouseAboveVideo=false;if(!this._isFullScreen()){this._hideControls();}},_onPlayerContainerMouseMove:function(){this._showControlsTemporarily();},_onFullScreenButtonClick:function(){if(screenfull.enabled){screenfull.toggle(this._fullScreenWrapper.get(0));}
else if(this._media.webkitEnterFullscreen){this._media.webkitEnterFullscreen();}
this._showControlsTemporarily();},_hideControls:function(){if(this._controlPanel&&this.playing()&&!this._isPlaybackSpeedPopupVisible()){this._controlPanel.slideDown();}},_isPlaybackSpeedPopupVisible:function(){return this._controlPanel&&this._controlPanel.isPlaybackSpeedPopupVisible();},_isControlsVisible:function(){return this._controlPanel&&this._controlPanel.isVisible();},_showControls:function(){if(this._controlPanel){this._controlPanel.slideUp();}},_showControlsTemporarily:function(){if(this._hideControlsTimer!==null){clearTimeout(this._hideControlsTimer);}
this._showControls();this._hideControlsTimer=setTimeout(handler(this,'_hideControls'),VideoPlayer.HIDE_FULLSCREEN_BUTTON_DELAY);},_showReplayButton:function(){if(this._replayButton){this._replayButton.show();}},_hideReplayButton:function(){if(this._replayButton){this._replayButton.hide();}},_isFullScreen:function(){return screenfull.isFullscreen;},_animatePlay:function(){if(this._playPauseAnimation){this._playPauseAnimation.animatePlay();}},_animatePause:function(){if(this._playPauseAnimation){this._playPauseAnimation.animatePause();}},_showVideoContainer:function(){this._playerContainer.removeClass(VideoPlayer.css_class.HIDDEN);},_hasPlatformMediaPreloadSupport:function(){return!BrowserUtils.isIosDevice()&&!BrowserUtils.isAndroidDevice();}},{css_class:{HIDDEN:'hidden',WITH_FULLSCREEN:'with_fullscreen',SCREEN_IS_FULL:'screen_is_full'},HIDE_FULLSCREEN_BUTTON_DELAY:2000});

var UiConfirmPopup=UiPopup.extend({_options:null,_popupApi:null,constructor:function(){this.base(null);this._options={};},open:function(title,description,buttons,subDescription){this._options={};this._options.title=title;this._options.description=description;this._options.subDescription=subDescription;this._options.buttons=buttons;this._popupApi=UiLib.Popup.openConfirmPopup(this._options);},close:function(){this._popupApi[UiPopup.callbacks.CLOSE]();}},{buttonTypes:{SIMPLE:'simple',WARNING:'warning',INFORMATION:'information'}});

$.fn.extend({titlefy:function(){$(this).find('a, span, li').each(function(){var element=$(this);var attr=element.attr('title');if(element.css('display')=='inline'&&!element.children().length&&(typeof attr===typeof undefined||attr===false)){element.attr('title',$.trim(element.text()));}});return this;},modifyTitleByType:function(type){$(this).each(function(){var title=$(this).attr('title');var element=$(this);element.attr('title',getTitleModifiedByType(type));function getTitleModifiedByType(type){if(type){if(type==ListItemType.FOLDER){title=UIMessages.TitlePrefix.OPEN+'"'+title+'"';}
else if(type==ListItemType.DISCUSSION){title=UIMessages.TitlePrefix.GO_TO+'"'+title+'"';}
else if($.inArray(type,[ListItemType.CONTENT,ListItemType.WEBINAR,ListItemType.GROUP])>-1){title=UIMessages.TitlePrefix.EDIT+'"'+title+'"';}}
return title;}});return this;}});$(function(){$('.ellipsis_text:not(.items_list .ellipsis_text)').titlefy();});

var ScrollUtils=Base.extend({},{getScrollTop:function()
{return document.documentElement.scrollTop||document.body.scrollTop;},scrollWindowTo:function(scrollTop)
{document.documentElement.scrollTop=scrollTop;document.body.scrollTop=scrollTop;}});

var ContentItemType=Base.extend({},{LINK:'link',MP3:'mp3',PRESENTATION:'presentation',PRESENTATION_WITH_INTERACTION:'quiz',QUIZ:'standalone_quiz',SURVEY_QUIZ:'survey_quiz',SCENARIO:'scenario',SURVEY_SCENARIO:'survey_scenario',FLV:'flv',MP4:'mp4',LEARNING_PATH:'learning_path',LEARNING_TRACK:'learning_track',FOLDER:'folder',SCORM:'scorm',SWF:'swf',PDF:'pdf',FLIP_BOOK:'flip_book',WAV:'wav',HOMEWORK:'homework',VISUALS_CONTENT:'visuals_content',LONGREAD:'longread',ONLINE_QUIZ:'online_quiz',mustBeViewedInNewTab:function(type)
{return _.contains([ContentItemType.LINK,ContentItemType.FOLDER,ContentItemType.HOMEWORK,ContentItemType.SCORM,ContentItemType.LEARNING_PATH,ContentItemType.LEARNING_TRACK],type);},isIspringContent:function(type){return _.contains([ContentItemType.QUIZ,ContentItemType.SURVEY_QUIZ,ContentItemType.SCENARIO,ContentItemType.SURVEY_SCENARIO,ContentItemType.VISUALS_CONTENT],type);}});

var DateTimeFormatter=Base.extend({_typeToOptions:{},constructor:function(){this._initTypeToOptionsMap();},getOptionsByType:function(type){return this._typeToOptions.hasOwnProperty(type)?this._typeToOptions[type]:null;},_initTypeToOptionsMap:function(){this._typeToOptions[DateTimeFormatter.FORMAT.SHORT_TIME]={hour:'2-digit',minute:'2-digit'};this._typeToOptions[DateTimeFormatter.FORMAT.FULL_UTC_DATETIME]={month:'short',day:'numeric',year:'numeric',hour:'numeric',minute:'numeric',timeZone:'UTC'};this._typeToOptions[DateTimeFormatter.FORMAT.STANDARD_DATE]={day:'numeric',month:'long',year:'numeric'};this._typeToOptions[DateTimeFormatter.FORMAT.MONTH_WITH_WEEKDAY_DATE]={month:'long',day:'numeric',weekday:'long'};this._typeToOptions[DateTimeFormatter.FORMAT.MONTH_DATE_UTC]={month:'long',year:'numeric',timeZone:'UTC'};this._typeToOptions[DateTimeFormatter.FORMAT.MEDIUM_DATE]={day:'numeric',month:'short',year:'numeric'};this._typeToOptions[DateTimeFormatter.FORMAT.MEDIUM_DATE_SHORT_TIME]={day:'numeric',month:'short',year:'numeric',hour:'2-digit',minute:'2-digit'};this._typeToOptions[DateTimeFormatter.FORMAT.SHORT_MONTH_WITH_WEEKDAY_DATE_UTC]={month:'short',day:'numeric',weekday:'short',timeZone:'UTC'};}},{_instance:null,getInstance:function(){if(!this._instance){this._instance=new this();}
return this._instance;},format:function(time,locale,type){var dateTimeFormatter=DateTimeFormatter.getInstance();var options=dateTimeFormatter.getOptionsByType(type);if(options===null){options=dateTimeFormatter.getOptionsByType(DateTimeFormatter.FORMAT.STANDARD_DATE);}
var formatter=new Intl.DateTimeFormat(locale,options);return formatter.format(time);},FORMAT:{SHORT_TIME:0,FULL_UTC_DATETIME:1,STANDARD_DATE:2,MONTH_WITH_WEEKDAY_DATE:3,MONTH_DATE_UTC:4,MEDIUM_DATE:5,MEDIUM_DATE_SHORT_TIME:6,SHORT_MONTH_WITH_WEEKDAY_DATE_UTC:7}});

var ViewContentForbiddenReasonInfo=OptionsCollection.extend({getTitle:function()
{return this.getValueByKey(ViewContentForbiddenReasonInfo.key.TITLE,'');},getDescription:function()
{return this.getValueByKey(ViewContentForbiddenReasonInfo.key.DESCRIPTION,'');}},{key:{TITLE:'title',DESCRIPTION:'description'}});

var ContentItemInfoStorage=Base.extend({},{GET_CONTENT_INFO_URL:'/content/get_info',getPromiseById:function(itemId,learningPathId)
{return ContentItemInfoStorage._createContentItemInfoPromise({item_id:itemId,learning_path_id:learningPathId});},getPromiseByContentItemKey:function(contentItemKey)
{return ContentItemInfoStorage._createContentItemInfoPromise({content_item_key:contentItemKey});},updateCacheUsingDom:function()
{$("[data-content-info-container]").each(function(){var contentInfoArray=$.parseJSON($(this).text());var contentInfo=new ContentItemInfo(contentInfoArray);ContentItemInfoCache.save(contentInfo);});},_createContentItemInfoPromise:function(requestData)
{return new Promise(function(resolve,reject){ContentItemInfoStorage._getContentItemInfo(requestData,resolve,reject);});},_getContentItemInfo:function(requestData,resolve,reject)
{var contentItemInfo=ContentItemInfoStorage._getContentItemInfoFromCache(requestData);if(contentItemInfo!==null)
{resolve(contentItemInfo);}
else
{ContentItemInfoStorage.updateCacheUsingDom();contentItemInfo=ContentItemInfoStorage._getContentItemInfoFromCache(requestData);if(contentItemInfo!=null)
{resolve(contentItemInfo);}
else
{ContentItemInfoStorage._sendRequestForContentItemInfo(requestData,resolve,reject);}}},_getContentItemInfoFromCache:function(requestData)
{var contentItemInfo=null;if(requestData.hasOwnProperty('item_id'))
{contentItemInfo=ContentItemInfoCache.getById(requestData['item_id']);}
else if(requestData.hasOwnProperty('content_item_key'))
{contentItemInfo=ContentItemInfoCache.getByKey(requestData['content_item_key']);}
return contentItemInfo;},_sendRequestForContentItemInfo:function(requestData,resolve,reject)
{$.ajax({type:'POST',url:ContentItemInfoStorage.GET_CONTENT_INFO_URL,dataType:'json',data:requestData,success:function(response){var contentItemInfo=new ContentItemInfo(response);ContentItemInfoCache.save(contentItemInfo);resolve(contentItemInfo);},error:function(response){if(response&&response.status===401)
{UiToast.showCritical(Messages.ViewContentMessages.UNAUTHORIZED_ERROR_DESCRIPTION);}
else
{UiToast.showCritical(Messages.Common.UNEXPECTED_SERVER_ERROR);}
reject("Failed to get content item info");}});}});$(function(){ContentItemInfoStorage.updateCacheUsingDom();});

var ViewSwfController=ViewContentController.extend({startView:function()
{this.base();this._insertPlayerCode();this.statCollector.handlePlaybackStarted();this.statCollector.setPlaybackActionOccurred();},initialize:function()
{this.base();this.setStatCollector(new StatCollector(this.viewContentOptions));this.dispatchReadyEvent();},_insertPlayerCode:function()
{var playerCode=Flash.getPlayerEmbed(ViewSwfController.FLASH_OBJECT_ID,this.viewContentOptions.getViewUrl(),{},'100%','100%',{bgcolor:ViewContentOverlay.BACKGROUND_COLOR,wmode:null});this.viewContentOverlay.insertContent(playerCode);}},{FLASH_OBJECT_ID:'viewSwf'});

var ViewFlashPresentationController=ViewFlashISpringContentController.extend({initialize:function()
{this.base();var presentationResumeParams=new PresentationResumeParams(this.viewContentOptions);this.setInitialSlide(presentationResumeParams.getInitialSlideIndex());var flashPresentationPlayer=new FlashPresentationPlayer();this.setContentPlayer(flashPresentationPlayer);this.setStatCollector(new FlashPresentationStatCollector(this.viewContentOptions,flashPresentationPlayer));this.dispatchReadyEvent();}});

var ViewFlashQuizController=ViewFlashISpringContentController.extend({initialize:function()
{this.base();var flashQuizPlayer=new FlashISpringContentPlayer();this.setContentPlayer(flashQuizPlayer);this.setStatCollector(new FlashISpringContentStatCollector(this.viewContentOptions,flashQuizPlayer));this.dispatchReadyEvent();}});

var ViewScormController=ViewContentController.extend({startView:function()
{this.base();this.viewContentOverlay.setToolbarVisible(true);this.viewContentOverlay.setScormPlayerControlsVisible(true);this.viewContentOverlay.setScormPlayerMenuHidden(ViewContentEnvironment.inMobileApp());var viewScormOptions=this.viewContentOptions.getViewScormOptions();this.contentPlayer.start(viewScormOptions);},stopView:function(requestType)
{this.contentPlayer.stop();this.base(requestType);},initialize:function()
{this.base();var scormPlayer=new ScormPlayer();this.setContentPlayer(scormPlayer);var toolbarSettings=this.getToolbarSettings();scormPlayer.setSuspendAllMayBeVisible(!toolbarSettings.getHideSuspendAllControl());scormPlayer.addListener(ScormPlayer.event.CONTENT_LOADED,this,this._handlePlayerContentLoaded);scormPlayer.addListener(ScormPlayer.event.COMMIT_SCORM_STATE,this,this._handleCommitScormState);this.setStatCollector(this._createStatCollector(scormPlayer));this.dispatchReadyEvent();},onPlayerExit:function()
{var externalEventHandler=ViewScormController._findExternalEventHandler();var methodName=ViewScormController.MAPI_SCORM_EXIT_EVENT_METHOD;if(externalEventHandler&&externalEventHandler[methodName]!==undefined){externalEventHandler[methodName].apply(externalEventHandler);}},_createStatCollector:function(scormPlayer)
{return new ScormStatCollector(this.viewContentOptions,scormPlayer,ViewScormController._findExternalStatisticsHandler());},_handlePlayerContentLoaded:function(url)
{var externalEventHandler=ViewScormController._findExternalEventHandler();var methodName=ViewScormController.MAPI_SCORM_CONTENT_LOADED_EVENT_METHOD;if(externalEventHandler&&externalEventHandler[methodName]!==undefined){externalEventHandler[methodName].apply(externalEventHandler,[url]);}},_handleCommitScormState:function()
{if(!this.isWindowUnloading())
{this.statCollector.commitScormState();}},allowUnloadRestrictionCheck:function(inMobileApp){return!inMobileApp;}},{_findExternalEventHandler:function()
{var scormEventHandlerName=ViewScormController.MAPI_SCORM_EVENT_HANDLER_NAME;if(window[scormEventHandlerName]!==undefined){return window[scormEventHandlerName];}
return null;},_findExternalStatisticsHandler:function()
{var scormStatisticsHandlerName=ViewScormController.MAPI_SCORM_STATISTICS_HANDLER_NAME;if(window[scormStatisticsHandlerName]!==undefined)
{return new ScormMobileStatisticsHandlerWrapper(window[scormStatisticsHandlerName]);}
return null;},MAPI_SCORM_EXIT_EVENT_METHOD:'onExit',MAPI_SCORM_CONTENT_LOADED_EVENT_METHOD:'onContentLoaded',MAPI_SCORM_EVENT_HANDLER_NAME:'mobileApiScormEventHandler',MAPI_SCORM_STATISTICS_HANDLER_NAME:'mobileApiScormStatisticsHandler'});

var ViewPresentationController=ViewISpringContentController.extend({_resumeParams:null,initialize:function()
{this.base();this.setConnectorName(ViewPresentationController.CONNECTOR_NAME);this._resumeParams=new PresentationResumeParams();this._resumeParams.addListener(PresentationResumeParams.event.READY,this,this._onPresentationResumeParamsReady);this._resumeParams.init(this.viewContentOptions);},_onPresentationResumeParamsReady:function(){var presentationPlayer=new UniversalPresentationPlayer(this._resumeParams.getResumeType(),this._resumeParams.getInitialSlideIndex(),this._resumeParams.hasInitialResumeState());this.setContentPlayer(presentationPlayer);this.setStatCollector(new PresentationStatCollector(this.viewContentOptions,presentationPlayer));this.dispatchReadyEvent();}},{CONNECTOR_NAME:'ispringPresentationConnector'});

var ViewQuizController=ViewISpringContentController.extend({initialize:function()
{this.base();this.setConnectorName(ViewQuizController.CONNECTOR_NAME);var quizPlayer=new UniversalQuizPlayer(this.viewContentOptions.getResumeType());this.setContentPlayer(quizPlayer);this.setStatCollector(new QuizStatCollector(this.viewContentOptions,quizPlayer));this.dispatchReadyEvent();}},{CONNECTOR_NAME:'ispringQuizConnector'});

var ViewScenarioController=ViewISpringContentController.extend({initialize:function()
{this.base();var scenarioPlayer=new UniversalScenarioPlayer(this.viewContentOptions.getResumeType());this.setConnectorName(ViewScenarioController.CONNECTOR_NAME);this.setContentPlayer(scenarioPlayer);this.setStatCollector(new ScenarioStatCollector(this.viewContentOptions,scenarioPlayer));this.dispatchReadyEvent();}},{CONNECTOR_NAME:'ispringScenarioConnector'});

var ViewFlipBookController=ViewISpringContentController.extend({isStopViewAllowed:function()
{this.statCollector.tryToSavePlayerState();return true;},initialize:function()
{this.base();this.setConnectorName(ViewFlipBookController.CONNECTOR_NAME);var flipBookPlayer=new FlipBookPlayer(this.viewContentOptions.getResumeType());this.setContentPlayer(flipBookPlayer);this.setStatCollector(new PagedContentStatCollector(this.viewContentOptions,flipBookPlayer));this.dispatchReadyEvent();}},{CONNECTOR_NAME:'ispringFlipConnector'});

var ViewVisualsContentController=ViewISpringContentController.extend({isStopViewAllowed:function()
{return true;},initialize:function()
{this.base();this.setConnectorName(ViewVisualsContentController.CONNECTOR_NAME);var player=new VisualsContentPlayer(this.viewContentOptions.getResumeType());this.setContentPlayer(player);this.setStatCollector(new VisualsContentStatCollector(this.viewContentOptions,player));this.dispatchReadyEvent();}},{CONNECTOR_NAME:'ispringInteractionConnector'});

var ViewLongreadController=ViewISpringContentController.extend({startView:function()
{this.base();this.viewContentOverlay.setToolbarVisible(false);},isStopViewAllowed:function(){this.statCollector.tryToSavePlayerState();return true;},handleContentFrameLoad:function(event){this.base(event);var connector=window[ViewLongreadController.CONNECTOR_NAME];var resumedState=connector.getState();var playerStartFn=this.contentFrame[0].contentWindow.start;var messagesJsonUrl='lng/'+EnvironmentInfo.getLocale()+'/messages.json';playerStartFn(messagesJsonUrl,'styles/bundle.css',resumedState?resumedState.state:null).then(function(playerApi){connector.register(playerApi);});},initialize:function(){this.base();this.setConnectorName(ViewLongreadController.CONNECTOR_NAME);var longreadPlayer=new LongreadPlayer(this.viewContentOptions.getResumeType());this.setContentPlayer(longreadPlayer);this.setStatCollector(new PagedContentStatCollector(this.viewContentOptions,longreadPlayer));this.dispatchReadyEvent();}},{CONNECTOR_NAME:'ispringLongreadConnector'});

var ViewOnlineQuizController=ViewISpringOnlineContentController.extend({startView:function(){this.base();this.viewContentOverlay.setToolbarVisible(false);},isStopViewAllowed:function(){this.statCollector.tryToSavePlayerState();return this._isStopViewAllowed;},initialize:function(){this.base();var onlineQuizPlayer=new OnlineQuizPlayer(this.viewContentOptions.getResumeType());this.setContentPlayer(onlineQuizPlayer);this.setStatCollector(new OnlineQuizStatCollector(this.viewContentOptions,onlineQuizPlayer));this.dispatchReadyEvent();}});

var ViewPdfController=ViewIframeContentController.extend({_checkIfViewerIsLoadedIntervalId:null,startView:function()
{this.base();this.viewContentOverlay.setToolbarVisible(false);this.insertContentFrame();this._startCheckingIfViewerIsLoaded();},stopView:function(requestType)
{this.base(requestType);clearInterval(this._checkIfViewerIsLoadedIntervalId);},initialize:function()
{this.base();var pdfPlayer=new PdfPlayer();this.setContentPlayer(pdfPlayer);this.setStatCollector(new PlayerStatCollector(this.viewContentOptions,pdfPlayer));pdfPlayer.addListener(PlayerEvent.PLAYBACK_STARTED,this,this._playbackStartHandler);this.dispatchReadyEvent();},onKeyDown:function(event)
{if(event.ctrlKey&&event.keyCode===ViewPdfController.P_KEY_CODE)
{this.contentFrame.focus();this.contentPlayer.print();event.stopImmediatePropagation();event.preventDefault();}},_playbackStartHandler:function()
{if(this.viewContentOptions.isDownloadable())
{this._initDownloadButton();}
else
{this._removeDownloadButton();}},_removeDownloadButton:function()
{var frameBody=this.getContentFrameBody();frameBody.find(ViewPdfController.DOWNLOAD_BUTTON_SELECTOR).remove();frameBody.find(ViewPdfController.DELIMITER_CLASS_NAME).remove();},_initDownloadButton:function()
{this._initDownloadButtonText();this.contentPlayer.setDownloadUrl(this.viewContentOptions.getDownloadUrl());},_initDownloadButtonText:function()
{var frameBody=this.getContentFrameBody();var downloadButton=frameBody.find(ViewPdfController.DOWNLOAD_BUTTON_SELECTOR);downloadButton.find('.text').text(Messages.PdfPlayer.MSG_DOWNLOAD_BUTTON_TEXT);},_startCheckingIfViewerIsLoaded:function()
{this._checkIfViewerIsLoadedIntervalId=setInterval(_.bind(this._checkIfViewerIsLoaded,this),ViewPdfController.CHECK_VIEWER_LOADED_INTERVAL);},_checkIfViewerIsLoaded:function()
{var frameContentWindow=this.contentFrame.get(0).contentWindow;if(frameContentWindow.PDFViewerApplication)
{this._onViewerLoaded(frameContentWindow);clearInterval(this._checkIfViewerIsLoadedIntervalId);}},_onViewerLoaded:function(frameContentWindow)
{this.contentPlayer.initFromFrameContentWindow(frameContentWindow);var title=HtmlUtils.htmldecode(this.viewContentOptions.getContentItemTitle());this.contentPlayer.setTitle(title);if(this.viewContentOverlay.isCloseButtonVisible())
{this.contentPlayer.showCloseButton();}}},{CHECK_VIEWER_LOADED_INTERVAL:100,P_KEY_CODE:80,DOWNLOAD_BUTTON_SELECTOR:'#download',DELIMITER_CLASS_NAME:'.delimiter'});

var ViewVideoController=ViewMediaController.extend({initialize:function()
{this.base();var videoPlayer=new VideoPlayer();this.setContentPlayer(videoPlayer);this.setStatCollector(new MediaStatCollector(this.viewContentOptions,videoPlayer));this.dispatchReadyEvent();}});

var ViewAudioController=ViewMediaController.extend({initialize:function()
{this.base();var audioPlayer=new AudioPlayer();this.setContentPlayer(audioPlayer);this.setStatCollector(new MediaStatCollector(this.viewContentOptions,audioPlayer));this.dispatchReadyEvent();}});

var ViewUnsupportedContentController=ViewContentController.extend({startView:function()
{this.base();this.viewContentOverlay.addListener(ViewContentOverlay.event.DOWNLOAD_BUTTON_CLICK,this,this._onDownloadButtonClick);this.viewContentOverlay.resetViewContentInfoBlock(this.viewContentOptions);this.statCollector.handlePlaybackStarted();},stopView:function(requestType)
{this.base(requestType);this.viewContentOverlay.removeListener(ViewContentOverlay.event.DOWNLOAD_BUTTON_CLICK,this);},initialize:function()
{this.base();this.setStatCollector(new StatCollector(this.viewContentOptions));this.dispatchReadyEvent();},_onDownloadButtonClick:function()
{this.statCollector.setPlaybackActionOccurred();}});

var ViewContentInfoBlock=EventDispatcher.extend({_container:null,_iconContainer:null,_initialIconContainerClass:'',_titleContainer:null,_creationDateContainer:null,_contentSizeContainer:null,_downloadButton:null,constructor:function(container)
{this._container=container;this._iconContainer=this._container.find('.js_icon_container');this._initialIconContainerClass=this._iconContainer.attr('class');this._titleContainer=this._container.find('.js_title_container');this._creationDateContainer=this._container.find('.js_creation_date_container');this._contentSizeContainer=this._container.find('.js_content_size');this._downloadButton=new Button(ViewContentInfoBlock.DOWNLOAD_BUTTON_ID);},reset:function(viewContentOptions)
{this._resetIconContainer(viewContentOptions);var fullContentTitle=viewContentOptions.getContentItemTitle()+'.'+viewContentOptions.getContentItemExtension();this._titleContainer.html(fullContentTitle);this._creationDateContainer.text(viewContentOptions.getContentItemCreationDate());this._contentSizeContainer.text(viewContentOptions.getContentItemFormattedFileSize());this._downloadButton.removeListener(Button.event.CLICKED,this);this._downloadButton.addListener(Button.event.CLICKED,this,function(){this.dispatchEvent(ViewContentInfoBlock.event.DOWNLOAD_BUTTON_CLICK);UrlUtils.navigateToUrl(viewContentOptions.getDownloadUrl(),LinkTarget.BLANK,{filename:fullContentTitle});}.bind(this));this._setVisible(true);},_resetIconContainer:function(viewContentOptions)
{this._iconContainer.attr('class',this._initialIconContainerClass);this._iconContainer.empty();var customThumbnailUrl=viewContentOptions.getCustomThumbnailUrl();if(customThumbnailUrl)
{var customThumbnailImage=$('<img>');customThumbnailImage.attr('src',UIUrlUtils.getRefreshUniqueUrl(customThumbnailUrl));this._iconContainer.html(customThumbnailImage);this._iconContainer.addClass(ViewContentInfoBlock.cssClass.CUSTOM_THUMBNAIL);}
else
{this._iconContainer.addClass(viewContentOptions.getContentItemExtension().toLowerCase());}},_setVisible:function(isVisible)
{this._container.toggleClassHidden(!isVisible);}},{DOWNLOAD_BUTTON_ID:'contentInfoBlockDownloadButton',event:{DOWNLOAD_BUTTON_CLICK:'download_button_click'},cssClass:{CUSTOM_THUMBNAIL:'custom_thumbnail'}});

var ViewContentMessageBlock=Base.extend({_container:null,_titleContainer:null,_descriptionContainer:null,constructor:function(container)
{this._container=container;this._titleContainer=this._container.find('.js_title_container');this._descriptionContainer=this._container.find('.js_description_container');},show:function(title,description)
{this._insertText(this._titleContainer,title);this._insertText(this._descriptionContainer,description);this._container.removeClassHidden();},hide:function()
{this._container.addClassHidden();},_insertText:function(container,text)
{container.empty().addClassHidden();if(text&&text.length)
{container.removeClassHidden().html(text);}}});

var ViewContentConfirmBlock=EventDispatcher.extend({_container:null,_titleContainer:null,_descriptionContainer:null,_confirmButton:null,_cancelButton:null,constructor:function(container){this._container=container;this._titleContainer=this._container.find('.js_title_container');this._descriptionContainer=this._container.find('.js_description_container');this._confirmButton=new Button('viewContentConfirmButton');this._confirmButton.addListener(Button.event.CLICKED,this,this._onConfirmButtonClick);this._cancelButton=new Button('viewContentCancelButton');this._cancelButton.addListener(Button.event.CLICKED,this,this._onCancelButtonClick);},show:function(title,description,confirmText,cancelText){this._insertText(this._titleContainer,title);this._insertText(this._descriptionContainer,description);this._insertButtonText(this._confirmButton,confirmText);this._insertButtonText(this._cancelButton,cancelText);this._container.removeClassHidden();},hide:function(){this._container.addClassHidden();},_insertText:function(container,text){container.empty().addClassHidden();if(text&&text.length){container.removeClassHidden().html(text);}},_insertButtonText:function(button,text){button.hide();if(text&&text.length){button.show();button.setText(text);}},_onConfirmButtonClick:function(){this.dispatchEvent(ViewContentConfirmBlock.event.CONFIRM);},_onCancelButtonClick:function(){this.dispatchEvent(ViewContentConfirmBlock.event.CANCEL);}},{event:{CONFIRM:'confirm',CANCEL:'cancel'}});

var ViewContentResponse=OptionsCollection.extend({isNewVersionFirstView:function(){return this.getValueByKey(ViewContentResponse.key.IS_NEW_VERSION_FIRST_VIEW,false);},isViewAllowed:function()
{return this.getValueByKey(ViewContentResponse.key.IS_VIEW_ALLOWED,false);},getRedirectUrl:function()
{return this.getValueByKey(ViewContentResponse.key.REDIRECT_URL);},getViewContentForbiddenReasonInfo:function()
{var infoArray=this.getValueByKey(ViewContentResponse.key.VIEW_CONTENT_FORBIDDEN_REASON_INFO);return(infoArray!==null)?new ViewContentForbiddenReasonInfo(infoArray):null;},getViewContentOptions:function()
{var viewContentOptionsArray=this.getValueByKey(ViewContentResponse.key.VIEW_CONTENT_OPTIONS);return(viewContentOptionsArray!==null)?new ViewContentOptions(viewContentOptionsArray):null;},getContentItemInfo:function()
{var contentItemInfoArray=this.getValueByKey(ViewContentResponse.key.CONTENT_ITEM_INFO);return(contentItemInfoArray!==null)?new ContentItemInfo(contentItemInfoArray):null;}},{key:{CONTENT_ITEM_INFO:'content_item_info',REDIRECT_URL:'redirect_url',IS_VIEW_ALLOWED:'is_view_allowed',VIEW_CONTENT_FORBIDDEN_REASON_INFO:'view_content_forbidden_reason_info',VIEW_CONTENT_OPTIONS:'view_content_options',IS_NEW_VERSION_FIRST_VIEW:'is_new_version_first_view'}});

var ViewContentOverlay=EventDispatcher.extend({_initialDocumentTitle:'',_isPossibleToHide:null,_scrollPosition:null,_bodyContainer:null,_overlayContainer:null,_contentContainerWrapper:null,_contentContainer:null,_closeButton:null,_contentTitleContainer:null,_viewContentInfoBlock:null,_messageBlock:null,_confirmBlock:null,_confirmViewCallback:null,_cancelViewCallback:null,_isToolbarInBottom:false,_isTitleVisible:true,constructor:function()
{this._initialDocumentTitle=document.title;this._isPossibleToHide=true;this._bodyContainer=$('body');this._overlayContainer=$('#viewContentOverlayContainer');this._contentContainerWrapper=this._overlayContainer.find('.js_view_content_container_wrapper');this._contentContainer=this._overlayContainer.find('#contentContainer');this._closeButton=this._overlayContainer.find('#toolbarButtonClose');this._closeButton.on('click',handler(this,'_onCloseButtonClick'));this._contentTitleContainer=this._overlayContainer.find('#contentItemTitle');this._scormPlayerControls=this._overlayContainer.find('.js_scormplayer');this._scormPlayerMenu=this._scormPlayerControls.find('#scormMenu');this._viewContentInfoBlock=new ViewContentInfoBlock(this._overlayContainer.find('#viewContentInfoBlock'));this._viewContentInfoBlock.addListener(ViewContentOverlay.event.DOWNLOAD_BUTTON_CLICK,this,this._dispatchDownloadButtonClick);this._confirmBlock=new ViewContentConfirmBlock(this._overlayContainer.find('.js_view_content_confirm_block'));this._confirmBlock.addListener(ViewContentConfirmBlock.event.CONFIRM,this,this._onConfirmView);this._confirmBlock.addListener(ViewContentConfirmBlock.event.CANCEL,this,this._onCancelView);this._messageBlock=new ViewContentMessageBlock(this._overlayContainer.find('.js_view_content_message_block'));this._initKeyboardEventHandlers();this._removeInitializingCssClassIfNecessary();},reset:function(isPossibleToHide)
{this._isPossibleToHide=isPossibleToHide;this.clearContents();this._setTitleVisible(false);var isCloseButtonVisible=!BrowserUtils.isMobile()&&isPossibleToHide;this.setCloseButtonVisible(isCloseButtonVisible);this.setToolbarVisible(isCloseButtonVisible);this.setLoading(true);this.show();},isPossibleToHide:function()
{return this._isPossibleToHide;},show:function()
{this._scrollPosition=ScrollUtils.getScrollTop();this._bodyContainer.addClass(ViewContentOverlay.css_class.CONTENT_VIEW);},hide:function()
{this._bodyContainer.removeClass(ViewContentOverlay.css_class.CONTENT_VIEW);document.title=this._initialDocumentTitle;ScrollUtils.scrollWindowTo(this._scrollPosition);this._triggerWindowResizeEvent();},setLoading:function(isLoading)
{this._contentContainerWrapper.toggleClass(ViewContentOverlay.css_class.LOADING,isLoading);},setToolbarInBottom:function(bottom)
{this._isToolbarInBottom=bottom;},setToolbarVisible:function(isToolbarVisible)
{var css_class=ViewContentOverlay.css_class.WITH_TOOLBAR;if(this._isToolbarInBottom)
{css_class=ViewContentOverlay.css_class.WITH_BOTTOM_TOOLBAR;}
this._overlayContainer.toggleClass(css_class,isToolbarVisible);},isCloseButtonVisible:function()
{return!this._closeButton.hasClassHidden();},setTitle:function(title)
{this._contentTitleContainer.html(title);document.title=this._contentTitleContainer.text();this._setTitleVisible(this._isTitleVisible);},setTitleVisible:function(visible)
{this._isTitleVisible=visible;this._setTitleVisible(this._isTitleVisible);},setToolbarButtonPositionFixed:function(fixed)
{this._scormPlayerControls.find('.toolbar_button').toggleClass(ViewContentOverlay.css_class.FIXED_POSITION,fixed);},setScormPlayerControlsVisible:function(areControlsVisible)
{this._scormPlayerControls.toggleClassHidden(!areControlsVisible);this._overlayContainer.toggleClass(ViewContentOverlay.css_class.WITH_SCORM_CONTROLS,areControlsVisible);if(areControlsVisible)
{this._scormPlayerControls.toggleClass(ViewContentOverlay.css_class.WITHOUT_PLACE_FOR_CLOSE_BUTTON,!this.isCloseButtonVisible());}},setScormPlayerMenuHidden:function(hidden)
{this._scormPlayerMenu.toggleClassHidden(hidden);},insertContent:function(content)
{this._contentContainer.html(content);this._contentContainer.removeClassHidden();},clearContents:function()
{this._contentContainer.empty();this._contentContainerWrapper.children().addClassHidden();this.setScormPlayerControlsVisible(false);},resetViewContentInfoBlock:function(viewContentOptions)
{this._viewContentInfoBlock.reset(viewContentOptions);},showMessageBlock:function(title,description)
{this.clearContents();this._messageBlock.show(title,description);},hideConfirmBlock:function(){this._confirmBlock.hide();},showConfirmBlock:function(title,description,confirmText,cancelText){this.clearContents();cancelText=this.isCloseButtonVisible()?cancelText:null;this._confirmBlock.show(title,description,confirmText,cancelText);},setConfirmCallback:function(callback){this._confirmViewCallback=callback;},setCancelCallback:function(callback){this._cancelViewCallback=callback;},setCloseButtonVisible:function(isCloseButtonVisible)
{this._closeButton.toggleClassHidden(!isCloseButtonVisible);},_triggerWindowResizeEvent:function()
{$(window).resize();},_removeInitializingCssClassIfNecessary:function()
{if(this._bodyContainer.hasClass(ViewContentOverlay.css_class.INITIALIZING_VIEW))
{setTimeout(function(){this._bodyContainer.removeClass(ViewContentOverlay.css_class.INITIALIZING_VIEW);}.bind(this),ViewContentOverlay.MAIN_PAGE_INITIALIZATION_TIMEOUT);}},_setTitleVisible:function(isVisible)
{this._contentTitleContainer.toggleClassHidden(!isVisible);},_initKeyboardEventHandlers:function()
{$(document).on('keydown',_.bind(this._dispatchKeyDown,this));$(document).on('keyup',_.bind(this._dispatchKeyUp,this));},_dispatchKeyDown:function(event)
{this.dispatchEvent(ViewContentOverlay.event.KEY_DOWN,event);},_dispatchKeyUp:function(event)
{this.dispatchEvent(ViewContentOverlay.event.KEY_UP,event);},_dispatchDownloadButtonClick:function()
{this.dispatchEvent(ViewContentOverlay.event.DOWNLOAD_BUTTON_CLICK);},_onConfirmView:function(){if(this._confirmViewCallback!==null){this._confirmViewCallback();}
this._confirmViewCallback=null;},_onCancelView:function(){if(this._cancelViewCallback!==null){this._cancelViewCallback();}
this._cancelViewCallback=null;},_onCloseButtonClick:function()
{this.dispatchEvent(ViewContentOverlay.event.CLOSE_BUTTON_CLICK);}},{BACKGROUND_COLOR:'#4b4e51',MAIN_PAGE_INITIALIZATION_TIMEOUT:500,event:{KEY_DOWN:'key_down',KEY_UP:'key_up',CLOSE_BUTTON_CLICK:'close_button_click',DOWNLOAD_BUTTON_CLICK:'download_button_click'},css_class:{CONTENT_VIEW:'content_view',INITIALIZING_VIEW:'initializing_view',WITH_TOOLBAR:'with_toolbar',WITH_BOTTOM_TOOLBAR:'with_bottom_toolbar',WITH_SCORM_CONTROLS:'with_scorm_controls',FIXED_POSITION:'fixed_position',WITHOUT_PLACE_FOR_CLOSE_BUTTON:'without_place_for_close_button',LOADING:'loading'}});

var ViewContentControllerFactory=Base.extend({_viewContentOverlay:null,constructor:function(viewContentOverlay)
{this._viewContentOverlay=viewContentOverlay;},createController:function(viewContentOptions)
{var viewContentController=null;switch(viewContentOptions.getContentItemType())
{case ContentItemType.PRESENTATION:case ContentItemType.PRESENTATION_WITH_INTERACTION:viewContentController=this._createPresentationController(viewContentOptions);break;case ContentItemType.QUIZ:case ContentItemType.SURVEY_QUIZ:viewContentController=this._createQuizController(viewContentOptions);break;case ContentItemType.SCENARIO:case ContentItemType.SURVEY_SCENARIO:viewContentController=new ViewScenarioController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.FLIP_BOOK:viewContentController=new ViewFlipBookController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.VISUALS_CONTENT:viewContentController=new ViewVisualsContentController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.LONGREAD:viewContentController=new ViewLongreadController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.ONLINE_QUIZ:viewContentController=new ViewOnlineQuizController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.PDF:viewContentController=new ViewPdfController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.MP4:case ContentItemType.FLV:viewContentController=new ViewVideoController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.MP3:case ContentItemType.WAV:viewContentController=new ViewAudioController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.SCORM:viewContentController=new ViewScormController(this._viewContentOverlay,viewContentOptions);break;case ContentItemType.SWF:viewContentController=new ViewSwfController(this._viewContentOverlay,viewContentOptions);break;default:viewContentController=new ViewUnsupportedContentController(this._viewContentOverlay,viewContentOptions);break;}
return viewContentController;},_createPresentationController:function(viewContentOptions)
{var viewPresentationController=null;if(viewContentOptions.isLegacyISpringContent())
{viewPresentationController=new ViewFlashPresentationController(this._viewContentOverlay,viewContentOptions);}
else
{viewPresentationController=new ViewPresentationController(this._viewContentOverlay,viewContentOptions);}
return viewPresentationController;},_createQuizController:function(viewContentOptions)
{var viewQuizController=null;if(viewContentOptions.isLegacyISpringContent())
{viewQuizController=new ViewFlashQuizController(this._viewContentOverlay,viewContentOptions);}
else
{viewQuizController=new ViewQuizController(this._viewContentOverlay,viewContentOptions);}
return viewQuizController;}});

var WindowUnloadController=EventDispatcher.extend({_beforeUnloadHandlers:null,_isIPad:null,constructor:function()
{this._isIPad=BrowserUtils.isIpad();this._beforeUnloadHandlers=[];this._initWindowCloseHandler();},addBeforeUnloadHandler:function(beforeUnloadHandler)
{this._beforeUnloadHandlers.push(beforeUnloadHandler);},_initWindowCloseHandler:function()
{var closeHandler=this._closeHandler.bind(this);if(BrowserUtils.isSafariBrowser())
{window.onpagehide=closeHandler;}
else if(BrowserUtils.isAndroidDevice())
{window.onunload=closeHandler;}
else
{window.onbeforeunload=closeHandler;}},_closeHandler:function(event)
{if(!this._isIPad)
{window.onunload=null;}
var unloadRestrictionReason=this._hasUnloadRestrictionReason();if(unloadRestrictionReason===null)
{this._onWindowUnload();return undefined;}
else
{window.onunload=this._onWindowUnload.bind(this);}
var message=this._getMessageByRestrictionCode(unloadRestrictionReason);if(event===undefined)
{event=window.event;}
if(event)
{event.returnValue=message;}
return message;},_getMessageByRestrictionCode:function(restrictionCode)
{if(restrictionCode===WindowUnloadController.unloadRestrictionReason.HAS_UNSENT_STATISTIC)
{return Messages.ViewContentMessages.MSG_HAS_UNSENT_STATISTICS;}
return Messages.ViewContentMessages.MSG_CONFIRM_STOP_VIEWING_CONTENT;},_hasUnloadRestrictionReason:function()
{if(this._isIPad){return null;}
return this._runBeforeUnloadHandlers();},_runBeforeUnloadHandlers:function()
{for(var i in this._beforeUnloadHandlers)
{var beforeUnloadHandler=this._beforeUnloadHandlers[i];var unloadRestrictionReason=this._runBeforeUnloadHandler(beforeUnloadHandler);if(unloadRestrictionReason!==null)
{return unloadRestrictionReason;}}
return null;},_runBeforeUnloadHandler:function(beforeUnloadHandler)
{if(_.isFunction(beforeUnloadHandler))
{return beforeUnloadHandler();}
return null;},_onWindowUnload:function()
{this.dispatchEvent(WindowUnloadController.event.UNLOAD);}},{event:{UNLOAD:'unload'},unloadRestrictionReason:{STOP_VIEW_IS_NOT_ALLOWED:'stop_view_is_not_allowed',HAS_UNSENT_STATISTIC:'has_unsent_statistic',},_instance:null,getInstance:function()
{if(this._instance===null)
{this._instance=new WindowUnloadController();}
return this._instance;}});

var ViewContentEnvironment=Base.extend({},{inMobileApp:function(){return document.body.hasAttribute('data-mobile-app');}});

var ViewContentQueryParameter=Base.extend({},{CONTENT_ITEM_KEY:'vc_cik',LEARNING_PATH_ID:'vc_lpid'});
!function(t,e){function n(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,d=r.length;d>i;i++){var l=r.eq(i);if(t.append(l),n&&t.append(n),a(t,e)){l.remove(),o=!0;break}n&&n.detach()}return o}function r(e,n,i,d,l){var s=!1,c="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",u="script, .dotdotdot-keep";return e.contents().detach().each(function(){var h=this,f=t(h);if("undefined"==typeof h)return!0;if(f.is(u))e.append(f);else{if(s)return!0;e.append(f),!l||f.is(d.after)||f.find(d.after).length||e[e.is(c)?"after":"append"](l),a(i,d)&&(s=3==h.nodeType?o(f,n,i,d,l):r(f,n,i,d,l)),s||l&&l.detach()}}),n.addClass("is-truncated"),s}function o(e,n,r,o,d){var c=e[0];if(!c)return!1;var h=s(c),f=-1!==h.indexOf(" ")?" ":"　",p="letter"==o.wrap?"":f,g=h.split(p),v=-1,w=-1,b=0,y=g.length-1;for(o.fallbackToLetter&&0==b&&0==y&&(p="",g=h.split(p),y=g.length-1);y>=b&&(0!=b||0!=y);){var m=Math.floor((b+y)/2);if(m==w)break;w=m,l(c,g.slice(0,w+1).join(p)+o.ellipsis),r.children().each(function(){t(this).toggle().toggle()}),a(r,o)?(y=w,o.fallbackToLetter&&0==b&&0==y&&(p="",g=g[0].split(p),v=-1,w=-1,b=0,y=g.length-1)):(v=w,b=w)}if(-1==v||1==g.length&&0==g[0].length){var x=e.parent();e.detach();var T=d&&d.closest(x).length?d.length:0;x.contents().length>T?c=u(x.contents().eq(-1-T),n):(c=u(x,n,!0),T||x.detach()),c&&(h=i(s(c),o),l(c,h),T&&d&&t(c).parent().append(d))}else h=i(g.slice(0,v+1).join(p),o),l(c,h);return!0}function a(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function s(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function c(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function u(e,n,r){var o,a=e&&e[0];if(a){if(!r){if(3===a.nodeType)return a;if(t.trim(e.text()))return u(e.contents().last(),n)}for(o=c(a);!o;){if(e=e.parent(),e.is(n)||!e.length)return!1;o=c(e[0])}if(o)return u(t(o),n)}return!1}function h(e,n){return e?"string"==typeof e?(e=t(e,n),e.length?e:!1):e.jquery?e:!1:!1}function f(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;o>r;r++){var a=parseInt(t.css(n[r]),10);isNaN(a)&&(a=0),e-=a}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this,i=o.contents();o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,d){switch(o.removeClass("is-truncated"),e.preventDefault(),e.stopPropagation(),typeof l.height){case"number":l.maxHeight=l.height;break;case"function":l.maxHeight=l.height.call(o[0]);break;default:l.maxHeight=f(o)}l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||"nodeType"in d&&1===d.nodeType)&&(d=t("<div />").append(d).contents()),d instanceof t&&(i=d)),g=o.wrapInner('<div class="dotdotdot" />').children(),g.contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,u=!1;return s.afterElement&&(c=s.afterElement.clone(!0),c.show(),s.afterElement.detach()),a(g,l)&&(u="children"==l.wrap?n(g,l,c):r(g,o,g,l,c)),g.replaceWith(g.contents()),g=null,t.isFunction(l.callback)&&l.callback.call(o[0],u,i),s.isTruncated=u,u}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],i),i}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(i).attr("style",o.data("dotdotdot-style")||"").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),r=e.height();e.bind("resize.dot"+s.dotId,function(){n==e.width()&&r==e.height()&&l.windowResizeFix||(n=e.width(),r=e.height(),u&&clearInterval(u),u=setTimeout(function(){o.trigger("update.dot")},100))})}else c=d(o),u=setInterval(function(){if(o.is(":visible")){var t=d(o);(c.width!=t.width||c.height!=t.height)&&(o.trigger("update.dot"),c=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+s.dotId),u&&clearInterval(u),o};var l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),s={},c={},u=null,g=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),s.afterElement=h(l.after,o),s.isTruncated=!1,s.dotId=p++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(t){};var p=1,g=t.fn.html;t.fn.html=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):g.apply(this,arguments)};var v=t.fn.text;t.fn.text=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?(n=t("<div />").text(n).html(),this.trigger("update",[n])):v.apply(this,arguments)}}}(jQuery);

var ButtonWithDropdown=EventDispatcher.extend({_id:null,_container:null,_button:null,_dropdown:null,constructor:function(id)
{this._initElements(id);this._attachEvents();this.enable();},disable:function()
{this._hideDropdown();this._button.disable();},enable:function()
{this._button.enable();},hide:function()
{this._container.addClass(ButtonWithDropdown.css.HIDDEN);this._hideDropdown();},show:function()
{this._container.removeClass(ButtonWithDropdown.css.HIDDEN);},isVisible:function()
{return!this._container.hasClass(ButtonWithDropdown.css.HIDDEN);},hideDropdown:function()
{this._hideDropdown();},hideDropdownItem:function(itemData)
{this._dropdown.hideItem(itemData);},showDropdownItem:function(itemData)
{this._dropdown.showItem(itemData);},disableDropdownItem:function(itemData)
{this._dropdown.disableItem(itemData);},enableDropdownItem:function(itemData)
{this._dropdown.enableItem(itemData);},setDropdownItemText:function(itemData,text)
{this._dropdown.setItemText(itemData,text);},_initElements:function(id)
{this._id=id;this._container=$('#'+id+'Container');this._button=new Button(id+'Button');this._dropdown=new Dropdown(id+'Dropdown',id+'Button');},_attachEvents:function()
{var that=this;$(document).click(function(evt){var container=$(evt.target).closest('#'+that._container.attr('id'));if(container.length==0){that._hideDropdown();}});this._dropdown.addListener(Dropdown.event.ITEM_CLICKED,this,this._itemClicked);this._button.addListener(Button.event.CLICKED,this,this._buttonClicked);},_itemClicked:function(event)
{var item=$(event.target);item=item.is('a')?item:item.parent();var eventToDispatch=(!this._dropdown.isItemDisabled(item))?ButtonWithDropdown.event.DROPDOWN_ITEM_CLICKED:ButtonWithDropdown.event.DROPDOWN_ITEM_CLICKED_WHEN_DISABLED;var choice=this._dropdown.getItemAttribute(item);this.dispatchEvent(eventToDispatch,choice,event);this._hideDropdown();},_buttonClicked:function()
{if(this._dropdown.isVisible())
{this._hideDropdown();}
else
{this._showDropdown();}},_showDropdown:function()
{this._button.fixPressed();this._dropdown.show();this._container.focus();},_hideDropdown:function()
{this._button.unfixPressed();this._dropdown.hide();this._container.blur();}},{css:{HIDDEN:'hidden'},event:{DROPDOWN_ITEM_CLICKED:'dropdownItemClicked',DROPDOWN_ITEM_CLICKED_WHEN_DISABLED:'dropdownItemClickedWhenDisabled'}});

var HtmlEntitiesCoding=Base.extend({},{codeHtmlEntities:function(str)
{return $('<div/>').text(str).html();},decodeHtmlEntities:function(str)
{return $('<div/>').html(str).text()}});

var ViewContentHandler=EventDispatcher.extend({_viewContentController:null,_viewContentOverlay:null,_viewContentControllerFactory:null,_viewContentAjaxUrl:null,_viewContentRequestHandler:null,_viewingContentItemInfo:null,constructor:function(viewContentUrlId){this._viewContentAjaxUrl=$(viewContentUrlId).val();this._viewContentOverlay=new ViewContentOverlay();this._viewContentOverlay.addListener(ViewContentOverlay.event.CLOSE_BUTTON_CLICK,this,this.tryToStopViewAndHideOverlay);if(this._inMobileApp()){this._viewContentOverlay.setToolbarInBottom(true);}
this._viewContentControllerFactory=new ViewContentControllerFactory(this._viewContentOverlay);var windowUnloadController=WindowUnloadController.getInstance();windowUnloadController.addBeforeUnloadHandler(_.bind(this._beforeWindowUnloadHandler,this));windowUnloadController.addListener(WindowUnloadController.event.UNLOAD,this,this._onWindowUnload);},startViewWithGivenResponse:function(viewContentResponse,isPossibleToHideOverlay){this._viewingContentItemInfo=viewContentResponse.getContentItemInfo();if(!this._viewingContentItemInfo){return;}
this._showOverlay(isPossibleToHideOverlay,this._viewingContentItemInfo.getTitle());this._handleViewContentResponse(viewContentResponse);},isStartViewPossible:function(contentItemInfo){if(!this._isViewInProgress()){return true;}
var isSameContentAlreadyViewing=(contentItemInfo.getId()===this._viewingContentItemInfo.getId());if(isSameContentAlreadyViewing){return false;}
this._tryToStopViewingContent();return true;},requestView:function(contentItemInfo,requestData){if(!this.isStartViewPossible(contentItemInfo)){return;}
this._viewingContentItemInfo=contentItemInfo;var isPossibleToHideOverlay=true;this._showOverlay(isPossibleToHideOverlay,contentItemInfo.getTitle());this._sendViewContentRequest(requestData);},tryToStopViewAndHideOverlay:function(needToDispatchOverlayHiddenEvent){needToDispatchOverlayHiddenEvent=(needToDispatchOverlayHiddenEvent!==undefined)?needToDispatchOverlayHiddenEvent:true;if(this._isStopViewAllowed()){this._stopViewAndHideOverlay(needToDispatchOverlayHiddenEvent);}
else{this._askForClosingOverlay(needToDispatchOverlayHiddenEvent);}},_tryToStopViewingContent:function(){if(this._isStopViewAllowed()){this._stopContentView(RequestType.ASYNC);}
else{this._showConfirmPopup(this._stopContentView,null);}},_askForClosingOverlay:function(needToDispatchOverlayHiddenEvent){if(this._isViewInProgress()){this._showConfirmPopup(this._stopViewAndHideOverlay,needToDispatchOverlayHiddenEvent);}},_sendViewContentRequest:function(requestData){requestData=requestData||{};requestData[ViewContentQueryParameter.CONTENT_ITEM_KEY]=this._viewingContentItemInfo.getKey();var learningPathId=this._viewingContentItemInfo.getLearningPathId();if(learningPathId!==null){requestData[ViewContentQueryParameter.LEARNING_PATH_ID]=learningPathId;}
this._viewContentRequestHandler=$.ajax({type:'POST',url:this._viewContentAjaxUrl,data:requestData,dataType:'json',success:_.bind(this._onViewContentRequestSuccess,this),error:_.bind(this._onViewContentRequestError,this)});},_handleViewContentResponse:function(viewContentResponse){var redirectUrl=viewContentResponse.getRedirectUrl();if(redirectUrl!==null){this._viewingContentItemInfo=null;UrlUtils.navigateToUrl(redirectUrl);return;}
this._viewContentOverlay.setLoading(false);if(viewContentResponse.isNewVersionFirstView()){this._showNewVersionViewConfirm(viewContentResponse);return;}
if(viewContentResponse.isViewAllowed()){this._handleViewContentAllowed(viewContentResponse);}
else{this._handleViewContentForbidden(viewContentResponse);}},_showNewVersionViewConfirm:function(viewContentResponse){if(this._inMobileApp()){this._handleViewContentAllowed(viewContentResponse);return;}
const popup=new UiConfirmPopup();var buttons=[{id:UiConfirmPopup.buttonTypes.INFORMATION,type:UiConfirmPopup.buttonTypes.INFORMATION,text:Messages.ViewContentMessages.MSG_POPUP_RESUME_CONFIRM,onclick:function(){this._handleViewContentAllowed(viewContentResponse);popup.close();}.bind(this)},];var description=Messages.ViewContentMessages.MSG_NEW_VERSION_FIRST_VIEW_DESCRIPTION;popup.open(Messages.ViewContentMessages.MSG_NEW_VERSION_FIRST_VIEW_TITLE,description,buttons);},_handleViewContentAllowed:function(viewContentResponse){this._viewContentOverlay.hideConfirmBlock();var viewContentOptions=viewContentResponse.getViewContentOptions();if(viewContentOptions){this._initContentView(viewContentOptions);}},_handleViewContentForbidden:function(viewContentResponse){var forbiddenReasonInfo=viewContentResponse.getViewContentForbiddenReasonInfo();if(forbiddenReasonInfo){this._viewContentOverlay.showMessageBlock(forbiddenReasonInfo.getTitle(),forbiddenReasonInfo.getDescription());}},_initContentView:function(viewContentOptions){this._viewContentController=this._viewContentControllerFactory.createController(viewContentOptions);this._viewContentController.setToolbarSettings(this._getToolbarSettings());this._viewContentController.addListener(ViewContentController.event.READY,this,this._onViewContentEventReady);this._viewContentController.initialize();},_getToolbarSettings:function(){var toolbarSettings=null;if(this._inMobileApp()){toolbarSettings={};toolbarSettings[ViewContentToolbarSettings.setting.AUTO_HIDE]=true;toolbarSettings[ViewContentToolbarSettings.setting.SHOW_TITLE]=false;toolbarSettings[ViewContentToolbarSettings.setting.HIDE_SUSPEND_ALL_CONTROL]=true;toolbarSettings[ViewContentToolbarSettings.setting.FIXED_CONTROL_POSITION]=true;}
return new ViewContentToolbarSettings(toolbarSettings);},_onViewContentEventReady:function(){this._viewContentController.addListener(ViewContentController.event.CLOSE,this,this._onViewStopped);this._viewContentController.addListener(ViewContentController.event.PLAYER_EXIT,this,this._handlePlayerExitEvent);this._viewContentController.addListener(ViewContentController.event.VIEW_EXPIRED,this,this._onViewStopped);this._viewContentController.startView();},_handlePlayerExitEvent:function(){if(this._viewContentOverlay.isPossibleToHide()){this._stopViewAndHideOverlay();}
else{if(this._viewContentController){var requestType=this._viewContentController.isWindowUnloading()?RequestType.DEFERRED:RequestType.ASYNC;this._viewContentController.terminateViewSession(requestType);}
if(!this._inMobileApp()){UiToast.showBasic(Messages.ViewContentMessages.VIEW_CONTENT_FINISHED);}}},_onViewStopped:function(){if(this._viewContentOverlay.isPossibleToHide()){this._stopViewAndHideOverlay();}
else{this._stopContentView(RequestType.ASYNC);this._viewContentOverlay.showMessageBlock(Messages.ViewContentMessages.MSG_LESSON_TIMEOUT,Messages.ViewContentMessages.YOU_MAY_CLOSE_THE_WINDOW);}},_stopViewAndHideOverlay:function(needToDispatchOverlayHiddenEvent){needToDispatchOverlayHiddenEvent=(needToDispatchOverlayHiddenEvent!==undefined)?needToDispatchOverlayHiddenEvent:true;this._stopContentView(RequestType.ASYNC);this._hideOverlay(needToDispatchOverlayHiddenEvent);},_hideOverlay:function(needToDispatchOverlayHiddenEvent){this.dispatchEvent(ViewContentHandler.event.OVERLAY_CLOSED);if(needToDispatchOverlayHiddenEvent){this.dispatchEvent(ViewContentHandler.event.OVERLAY_HIDDEN);}
this._viewContentOverlay.clearContents();this._viewContentOverlay.hide();},_stopContentView:function(requestType){if(this._viewContentController!==null){this._viewContentController.stopView(requestType);this._viewContentController=null;}
if(this._viewContentRequestHandler!==null){this._viewContentRequestHandler.abort();this._viewContentRequestHandler=null;}
this._viewingContentItemInfo=null;},_showOverlay:function(isPossibleToHideOverlay,overlayTitle){this._viewContentOverlay.reset(isPossibleToHideOverlay);this._viewContentOverlay.setTitle(overlayTitle);},_onViewContentRequestSuccess:function(response){this._viewContentRequestHandler=null;if(response&&_.isObject(response)){var viewContentResponse=new ViewContentResponse(response);this._handleViewContentResponse(viewContentResponse);}
else{this._onViewContentRequestError();}},_onViewContentRequestError:function(response){this._viewContentRequestHandler=null;this._viewContentOverlay.setLoading(false);if(response&&response.status===401){this._viewContentOverlay.showMessageBlock(Messages.ViewContentMessages.CONTENT_VIEWING_ERROR_TITLE,Messages.ViewContentMessages.UNAUTHORIZED_ERROR_DESCRIPTION);}
else{this._viewContentOverlay.showMessageBlock(Messages.ViewContentMessages.CONTENT_VIEWING_ERROR_TITLE,Messages.ViewContentMessages.UNEXPECTED_ERROR_DESCRIPTION);}},_isViewInProgress:function(){return(this._viewingContentItemInfo!==null);},_hasUnloadRestrictionReason:function(){if(this._viewContentController!==null){if(!this._viewContentController.allowUnloadRestrictionCheck(this._inMobileApp())){return null;}
if(!this._viewContentController.isStopViewAllowed()){return WindowUnloadController.unloadRestrictionReason.STOP_VIEW_IS_NOT_ALLOWED;}}
if(ContentStatistics.getInstance().hasUnsentStatistic()){return WindowUnloadController.unloadRestrictionReason.HAS_UNSENT_STATISTIC;}
return null;},_isStopViewAllowed:function(){return(this._hasUnloadRestrictionReason()!==WindowUnloadController.unloadRestrictionReason.STOP_VIEW_IS_NOT_ALLOWED);},_beforeWindowUnloadHandler:function(){var unloadRestrictionReason=this._hasUnloadRestrictionReason();if(unloadRestrictionReason===WindowUnloadController.unloadRestrictionReason.HAS_UNSENT_STATISTIC){ContentStatisticsChecker.getInstance().processSavedStatistics(RequestType.SYNC);unloadRestrictionReason=this._hasUnloadRestrictionReason();}
return unloadRestrictionReason;},_showConfirmPopup:function(handlerFunction,data){var params={title:Messages.ViewContentMessages.MSG_CONFIRM_STOP_VIEWING_TITLE,content:Messages.ViewContentMessages.MSG_CONFIRM_STOP_VIEWING_CONTENT,confirm_text:Messages.ViewContentMessages.MSG_CONFIRM_STOP_VIEWING_CONFIRM,data:data,confirm_handler:handlerFunction.bind(this,RequestType.ASYNC)};var popup=ConfirmPopup.setup(params);popup.open();},_onWindowUnload:function(){if(this._viewContentController!==null){this._viewContentController.setWindowUnloading(true);}
this._stopContentView(RequestType.DEFERRED);},_inMobileApp:function(){return ViewContentEnvironment.inMobileApp();}},{event:{OVERLAY_HIDDEN:'overlayHidden',OVERLAY_CLOSED:'overlayClosed'}});

var LogUrl=Base.extend({},{FRONTEND_ERROR_LOG_URL:'/browser_errors'});

(function($)
{$.NEED_UPDATE_ELLIPSIS_EVENT="need-update-ellipsis";$.ellipsisCache={};$.fn.textEllipsisCached=function(callback){this.each(function(idx,item){var plainText=UIHtmlEntitiesCoding.decodeHtmlEntities(item.innerHTML);var key=plainText+item.clientHeight+item.clientWidth;var textTruncated=false;if(plainText.length>0&&$.ellipsisCache[key]===undefined){$(item).textellipsis(function(isTruncated,orgContent){textTruncated=isTruncated;if(callback){callback(isTruncated,orgContent);}});if(textTruncated){$.ellipsisCache[key]=item.innerHTML;}}
if($.ellipsisCache[key]!==undefined){item.innerHTML=$.ellipsisCache[key];item.setAttribute('title',plainText);}});};$.fn.textellipsis=function(callback)
{this.dotdotdot({ellipsis:'... ',wrap:'letter',fallbackToLetter:true,after:null,watch:false,height:null,tolerance:10,callback:callback||function(isTruncated,orgContent){},lastCharacter:{remove:[' ',',',';','.','!','?'],noEllipsis:[]}});};$.fn.textellipsisbyheight=function(height)
{this.dotdotdot({ellipsis:'... ',wrap:'letter',fallbackToLetter:true,after:null,watch:true,height:height,tolerance:10,callback:function(isTruncated,orgContent){},lastCharacter:{remove:[' ',',',';','.','!','?'],noEllipsis:[]}});};$.fn.textellipsiswithexpanding=function()
{var MAX_HEIGHT=9000;var MIN_HEIGHT=135;var expandBlockId=this.data('textellipsis-expand-block-id');var constrictBlockId=this.data('textellipsis-constrict-block-id');var that=this;var initDotDotDotTimeoutId=null;var initEllipsis=function()
{if(!that.hasClass('is-truncated'))
{var initDotDotDot=function()
{that.trigger('destroy.dot');that.dotdotdot({ellipsis:'... ',wrap:'letter',fallbackToLetter:true,after:$('#'+expandBlockId),watch:false,height:null,tolerance:10,callback:function(isTruncated,orgContent){var expandElement=$('#'+expandBlockId);expandElement.click(function(){$('#'+constrictBlockId).removeClass('hidden');that.trigger('destroy.dot');$('#'+expandBlockId).addClass('hidden');that.animate({'max-height':MAX_HEIGHT},1000);});if(isTruncated)
{expandElement.removeClass('hidden');$('#'+constrictBlockId).addClass('hidden');}
else
{if(that.css('max-height')==MIN_HEIGHT)
{$('#'+constrictBlockId).removeClass('hidden');}
else
{$('#'+constrictBlockId).addClass('hidden');}
expandElement.addClass('hidden');}},lastCharacter:{remove:[' ',',',';','.','!','?'],noEllipsis:[]}});};$('#'+constrictBlockId).click(function(){that.animate({'max-height':MIN_HEIGHT},500,function(){$('#'+expandBlockId).removeClass('hidden');$('#'+constrictBlockId).addClass('hidden');initDotDotDot();});});initDotDotDot();var delayedInitDotDotDot=function(){clearTimeout(initDotDotDotTimeoutId);initDotDotDotTimeoutId=setTimeout(initDotDotDot,200);};$(window).resize(delayedInitDotDotDot);$(window).on($.NEED_UPDATE_ELLIPSIS_EVENT,delayedInitDotDotDot);}};initEllipsis();};$.fn.textellipsisautosize=function()
{var thisPtr=this;this.each(function(){thisPtr.dotdotdot({ellipsis:'... ',wrap:'letter',fallbackToLetter:true,after:null,watch:'window',height:null,tolerance:10,callback:function(isTruncated,orgContent){},lastCharacter:{remove:[' ',',',';','.','!','?'],noEllipsis:[]}});});};$.fn.textellipsisoriginal=function()
{var originalItem=this.triggerHandler('originalContent');return originalItem?originalItem:this;};})(jQuery);

var UlList=EventDispatcher.extend({id:null,ul:null,lis:null,countLis:0,constructor:function(id)
{this.base();this.id=id;$("#"+id+"Container").append("<ul id='"+id+"'></ul>");this.ul=$("#"+id);this.lis=new Object();},clear:function()
{this.ul.empty();this.lis=new Object();this.countLis=0;},appendLi:function(li)
{this._initLi(li);this.ul.append(li.getLi());},prependLi:function(li)
{this._initLi(li);this.ul.prepend(li.getLi());},getLis:function()
{return this.lis;},getGroupSize:function(li)
{var groupId=li.getGroupId();var size=0;for(var liId in this.lis)
{var currentLiGroup=this.lis[liId].getGroupId();if(groupId==currentLiGroup)
{size++;}}
return size;},_initLi:function(li)
{if(!li.getId())
{li.setId(this.id+"li"+this.countLis);}
this.lis[li.getId()]=li;this.countLis++;li.addListener('click',this,this._onClickLi);li.addListener('comboClick',this,this._onComboClickLi);},_removeLi:function(id)
{if(this.lis[id])
{$("#"+id).remove();delete this.lis[id];this.countList--;}},_onClickLi:function(li)
{},_onComboClickLi:function(li)
{this._onClickLi(li);},show:function()
{this.ul.show();},hide:function()
{this.ul.hide();},getElementsCount:function()
{return this.countLis;}});var UlListLi=EventDispatcher.extend({li:null,groupId:null,constructor:function()
{this.base();this.li=$("<li></li>");this.initHandlers();},initHandlers:function()
{var thisPtr=this;this.li.click(function(event){if(event.ctrlKey==true)
{thisPtr.onComboClick();}
else
{thisPtr.onMouseClick();}});},setGroupId:function(groupId)
{this.groupId=groupId;},getGroupId:function()
{return this.groupId;},onMouseClick:function()
{this.dispatchEvent('click',this);},onComboClick:function()
{this.dispatchEvent('comboClick',this);return false;},setId:function(id)
{this.li.attr('id',id);},getId:function()
{return this.li.attr('id');},getCssClass:function()
{var cssClasses=this.li.attr('class').split(' ');return cssClasses[0];},addCssClass:function(cssClass)
{this.li.addClass(cssClass);},hasCssClass:function(cssClass)
{return this.li.hasClass(cssClass);},isSelectableParentLi:function()
{return this.hasCssClass("parent")&&(this.groupId!=null);},removeCssClass:function(cssClass)
{this.li.removeClass(cssClass);},setContent:function(content)
{this.li.html(content);},getContent:function()
{return this.li.html();},getLi:function()
{return this.li;}});
var TimeAgo=function(e){var t={};function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)r.d(n,u,function(t){return e[t]}.bind(null,u));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/js/dist/",r(r.s=9)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function u(){return"object"===("undefined"==typeof Intl?"undefined":n(Intl))&&"function"==typeof Intl.DateTimeFormat}t.default=function(e,t){for(var r=e,n=Array.isArray(r),u=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(u>=r.length)break;a=r[u++]}else{if((u=r.next()).done)break;a=u.value}var o=a;if(t(o))return o;for(var s=o.split("-");s.length>1;)if(s.pop(),o=s.join("-"),t(o))return o}throw new Error("No locale data has been registered for any of the locales: "+e.join(", "))},t.intlDateTimeFormatSupportedLocale=function(e){if(u())return Intl.DateTimeFormat.supportedLocalesOf(e)[0]},t.intlDateTimeFormatSupported=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12);Object.defineProperty(t,"canonical",{enumerable:!0,get:function(){return o(n).default}});var u=r(13);Object.defineProperty(t,"convenient",{enumerable:!0,get:function(){return o(u).default}});var a=r(2);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"minute",{enumerable:!0,get:function(){return a.minute}}),Object.defineProperty(t,"hour",{enumerable:!0,get:function(){return a.hour}}),Object.defineProperty(t,"day",{enumerable:!0,get:function(){return a.day}}),Object.defineProperty(t,"month",{enumerable:!0,get:function(){return a.month}}),Object.defineProperty(t,"year",{enumerable:!0,get:function(){return a.year}}),Object.defineProperty(t,"getStep",{enumerable:!0,get:function(){return a.getStep}}),Object.defineProperty(t,"getDate",{enumerable:!0,get:function(){return a.getDate}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStep=function(e,t){for(var r=e,n=Array.isArray(r),u=0,r=n?r:r[Symbol.iterator]();;){var a;if(n){if(u>=r.length)break;a=r[u++]}else{if((u=r.next()).done)break;a=u.value}var o=a;if(o.unit===t)return o}},t.getDate=function(e){return e instanceof Date?e:new Date(e)};var n=t.minute=60,u=t.hour=60*n,a=t.day=24*u;t.month=30.44*a,t.year=365.2425*a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5);var a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r.style;this.style=n||"long",t&&(this.locale=e.supportedLocalesOf(t)[0]),this.locale=this.locale?o(this.locale):(0,u.getDefaultLocale)()}return n(e,[{key:"format",value:function(e,t){return this.getRule(e,t).replace("{0}",Math.abs(e))}},{key:"formatToParts",value:function(e,t){var r=this.getRule(e,t),n=r.indexOf("{0}"),u=[];return n>0&&u.push({type:"literal",value:r.slice(0,n)}),u.push({type:t,value:String(Math.abs(e))}),n+"{0}".length<r.length-1&&u.push({type:"literal",value:r.slice(n+"{0}".length)}),u}},{key:"getRule",value:function(e,t){if(["now","second","minute","hour","day","week","month","quarter","year"].indexOf(t)<0)throw new RangeError("Unknown time unit: "+t+".");var r=(0,u.getLocaleData)(this.locale)[this.style][t];if("string"==typeof r)return r;var n=r[e<=0?"past":"future"]||r;if("string"==typeof n)return n;var a=(0,u.getLocaleData)(this.locale).quantify,o=a&&a(Math.abs(e));return n[o=o||"other"]||n.other}},{key:"resolvedOptions",value:function(){return{locale:this.locale}}}]),e}();function o(e){if((0,u.getLocaleData)(e))return e;for(var t=e.split("-");e.length>1;)if(t.pop(),e=t.join("-"),(0,u.getLocaleData)(e))return e}t.default=a,a.supportedLocalesOf=function(e,t){return"string"==typeof e&&(e=[e]),e.filter(o)},a.addLocale=u.addLocaleData},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(11)),o=c(r(0)),s=r(14),i=c(r(3)),p=r(5);function c(e){return e&&e.__esModule?e:{default:e}}var m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=[t]),this.locale=(0,o.default)(t.concat((0,p.getDefaultLocale)()),p.isLocaleDataAvailable)}return u(e,[{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.defaultStyle;if("string"==typeof t)switch(t){case"twitter":t=s.twitterStyle;break;case"time":t=s.timeStyle;break;default:t=s.defaultStyle}var r=function(e){if(e.constructor===Date)return{date:e,time:e.getTime()};if("number"==typeof e)return{time:e};throw new Error("Unsupported relative time formatter input: "+(void 0===e?"undefined":n(e))+", "+e)}(e),u=r.date,o=r.time,p=this.getLocaleData(t.flavour),c=p.flavour,m=p.localeData,d=t.now||Date.now(),f=(d-o)/1e3;if(t.custom){var h=t.custom({now:d,date:u,time:o,elapsed:f,locale:this.locale});if(void 0!==h)return h}var l=function(e,t){var r=Object.keys(e);if(t)return t.filter(function(e){return r.indexOf(e)>=0});return r}(m,t.units);if(0===l.length)return console.error('Units "'+l.join(", ")+'" were not found in locale data for "'+this.locale+'".'),"";var v=(0,a.default)(Math.abs(f),d,l,t.gradation);if(!v)return"";if(v.format)return v.format(u||o,this.locale);var y=v.unit,x=v.factor,k=v.granularity,w=Math.abs(f)/x;return k&&(w=Math.round(w/k)*k),new i.default(this.locale,{style:c}).format(-1*Math.sign(f)*Math.round(w),y)}},{key:"getLocaleData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,p.getLocaleData)(this.locale);"string"==typeof e&&(e=[e]);var r=e=e.concat("long"),n=Array.isArray(r),u=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(u>=r.length)break;a=r[u++]}else{if((u=r.next()).done)break;a=u.value}var o=a;if(t[o])return{flavour:o,localeData:t[o]}}}}]),e}();t.default=m,m.getDefaultLocale=p.getDefaultLocale,m.setDefaultLocale=p.setDefaultLocale,m.addLocale=p.addLocaleData,m.locale=m.addLocale},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultLocale=function(){return n},t.setDefaultLocale=function(e){n=e},t.isLocaleDataAvailable=function(e){return u.hasOwnProperty(e)},t.getLocaleData=function(e){return u[e]},t.addLocaleData=function(e){if(!e)throw new Error("[javascript-time-ago] No locale data passed.");u[e.locale]=e};var n="en",u={}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t){e.exports=function(e){return e>=0&&e<2?"one":"other"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=t[1]||"",u=!t[1],a=r.slice(-1),o=r.slice(-2),s=n.slice(-1),i=n.slice(-2);return u&&1==a&&11!=o||1==s&&11!=i?"one":u&&a>=2&&a<=4&&(o<12||o>14)||s>=2&&s<=4&&(i<12||i>14)?"few":"other"}},function(e,t,r){var n=r(10).default;n.addLocale(r(18)),n.addLocale(r(23)),n.addLocale(r(28)),n.addLocale(r(33)),n.addLocale(r(38)),n.addLocale(r(43)),n.addLocale(r(48)),n.addLocale(r(53)),n.addLocale(r(58)),n.addLocale(r(68)),n.addLocale(r(72)),n.addLocale(r(76)),n.addLocale(r(81)),n.addLocale(r(86)),n.addLocale(r(91)),n.addLocale(r(95)),n.addLocale(r(99)),n.addLocale(r(104)),n.addLocale(r(109)),n.addLocale(r(114)),n.addLocale(r(119)),n.addLocale(r(124)),n.addLocale(r(129)),n.addLocale(r(133)),n.addLocale(r(138)),n.addLocale(r(142)),n.addLocale(r(147)),n.addLocale(r(152)),n.addLocale(r(157)),n.addLocale(r(162)),n.addLocale(r(166)),n.addLocale(r(171)),n.addLocale(r(176)),n.addLocale(r(181)),n.addLocale(r(186)),n.addLocale(r(191)),n.addLocale(r(201)),n.addLocale(r(206)),n.addLocale(r(211)),n.addLocale(r(216)),n.addLocale(r(220)),n.addLocale(r(224)),n.addLocale(r(229)),n.addLocale(r(234)),n.addLocale(r(239)),n.addLocale(r(244)),n.addLocale(r(249)),n.addLocale(r(253)),n.addLocale(r(257)),(t=e.exports=n).default=t},function(e,t,r){"use strict";r.r(t);var n=r(4),u=r.n(n);r.d(t,"default",function(){return u.a});var a=r(0);r.d(t,"intlDateTimeFormatSupported",function(){return a.intlDateTimeFormatSupported}),r.d(t,"intlDateTimeFormatSupportedLocale",function(){return a.intlDateTimeFormatSupportedLocale});var o=r(3),s=r.n(o);r.d(t,"RelativeTimeFormat",function(){return s.a})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.convenient;if(0===(a=function(e,t){return e.filter(function(e){var r=e.unit;return!r||t.indexOf(r)>=0})}(a,r)).length)return;var o=function e(t,r,u){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<function(e,t,r){var u=void 0;e&&(e.id||e.unit)&&(u=t["threshold_for_"+(e.id||e.unit)]);void 0===u&&(u=t.threshold);"function"==typeof u&&(u=u(r));if(e&&"number"!=typeof u){var a=void 0===u?"undefined":n(u);throw new Error('Each step of a gradation must have a threshold defined except for the first one. Got "'+u+'", '+a+". Step: "+JSON.stringify(t))}return u}(u[a-1],u[a],r))return a-1;if(a===u.length-1)return a;return e(t,r,u,a+1)}(e,t,a),s=a[o];if(-1===o)return;if(s.granularity){var i=Math.round(e/s.factor/s.granularity)*s.granularity;if(0===i&&o>0)return a[o-1]}return s};var u=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.default=[{factor:1,unit:"now"},{threshold:.5,factor:1,unit:"second"},{threshold:59.5,factor:60,unit:"minute"},{threshold:3570,factor:3600,unit:"hour"},{threshold:84600,factor:n.day,unit:"day"},{threshold:6.5*n.day,factor:7*n.day,unit:"week"},{threshold:24.5*n.day,factor:n.month,unit:"month"},{threshold:11.5*n.month,factor:n.year,unit:"year"}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.default=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45,factor:1,unit:"second"},{threshold:45,factor:60,unit:"minute"},{threshold:150,factor:60,granularity:5,unit:"minute"},{threshold:1350,factor:1800,unit:"half-hour"},{threshold:2550,threshold_for_minute:3150,factor:3600,unit:"hour"},{threshold:20.5/24*n.day,factor:n.day,unit:"day"},{threshold:5.5*n.day,factor:7*n.day,unit:"week"},{threshold:24.5*n.day,factor:n.month,unit:"month"},{threshold:10.5*n.month,factor:n.year,unit:"year"}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15);Object.defineProperty(t,"timeStyle",{enumerable:!0,get:function(){return o(n).default}});var u=r(16);Object.defineProperty(t,"twitterStyle",{enumerable:!0,get:function(){return o(u).default}});var a=r(17);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"defaultStyle",{enumerable:!0,get:function(){return o(a).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.default={gradation:n.convenient,flavour:"long_time",units:["now","minute","hour","day","week","month","year"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=r(1),a=r(0),o={};t.default={gradation:[n({},(0,u.getStep)(u.canonical,"minute"),{threshold:45}),(0,u.getStep)(u.canonical,"hour"),{threshold:u.day-.5*u.hour,format:function(e,t){if((0,a.intlDateTimeFormatSupported)())return o[t]||(o[t]={}),o[t].this_year||(o[t].this_year=new Intl.DateTimeFormat(t,{month:"short",day:"numeric"})),o[t].this_year.format((0,u.getDate)(e))}},{threshold:function(e){return(new Date(new Date(e).getFullYear()+1,0).getTime()-e)/1e3},format:function(e,t){if((0,a.intlDateTimeFormatSupported)())return o[t]||(o[t]={}),o[t].other||(o[t].other=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"})),o[t].other.format((0,u.getDate)(e))}}],flavour:["tiny","short_time","narrow","short"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.default={gradation:n.convenient,flavour:["long_convenient","long"],units:["now","minute","hour","day","week","month","year"]}},function(e,t,r){e.exports={locale:"ar",long:r(19),short:r(20),narrow:r(21),quantify:r(22)}},function(e){e.exports={year:{previous:"السنة الماضية",current:"السنة الحالية",next:"السنة القادمة",past:{one:"قبل سنة واحدة",two:"قبل سنتين",few:"قبل {0} سنوات",other:"قبل {0} سنة"},future:{one:"خلال سنة واحدة",two:"خلال سنتين",few:"خلال {0} سنوات",other:"خلال {0} سنة"}},quarter:{previous:"الربع الأخير",current:"هذا الربع",next:"الربع القادم",past:{one:"قبل ربع سنة واحد",two:"قبل ربعي سنة",few:"قبل {0} أرباع سنة",other:"قبل {0} ربع سنة"},future:{one:"خلال ربع سنة واحد",two:"خلال ربعي سنة",few:"خلال {0} أرباع سنة",other:"خلال {0} ربع سنة"}},month:{previous:"الشهر الماضي",current:"هذا الشهر",next:"الشهر القادم",past:{one:"قبل شهر واحد",two:"قبل شهرين",few:"قبل {0} أشهر",many:"قبل {0} شهرًا",other:"قبل {0} شهر"},future:{one:"خلال شهر واحد",two:"خلال شهرين",few:"خلال {0} أشهر",many:"خلال {0} شهرًا",other:"خلال {0} شهر"}},week:{previous:"الأسبوع الماضي",current:"هذا الأسبوع",next:"الأسبوع القادم",past:{one:"قبل أسبوع واحد",two:"قبل أسبوعين",few:"قبل {0} أسابيع",many:"قبل {0} أسبوعًا",other:"قبل {0} أسبوع"},future:{one:"خلال أسبوع واحد",two:"خلال أسبوعين",few:"خلال {0} أسابيع",many:"خلال {0} أسبوعًا",other:"خلال {0} أسبوع"}},day:{previous:"أمس",current:"اليوم",next:"غدًا",past:{one:"قبل يوم واحد",two:"قبل يومين",few:"قبل {0} أيام",many:"قبل {0} يومًا",other:"قبل {0} يوم"},future:{one:"خلال يوم واحد",two:"خلال يومين",few:"خلال {0} أيام",many:"خلال {0} يومًا",other:"خلال {0} يوم"}},hour:{current:"الساعة الحالية",past:{one:"قبل ساعة واحدة",two:"قبل ساعتين",few:"قبل {0} ساعات",other:"قبل {0} ساعة"},future:{one:"خلال ساعة واحدة",two:"خلال ساعتين",few:"خلال {0} ساعات",other:"خلال {0} ساعة"}},minute:{current:"هذه الدقيقة",past:{one:"قبل دقيقة واحدة",two:"قبل دقيقتين",few:"قبل {0} دقائق",other:"قبل {0} دقيقة"},future:{one:"خلال دقيقة واحدة",two:"خلال دقيقتين",few:"خلال {0} دقائق",other:"خلال {0} دقيقة"}},second:{current:"الآن",past:{one:"قبل ثانية واحدة",two:"قبل ثانيتين",few:"قبل {0} ثوانِ",other:"قبل {0} ثانية"},future:{one:"خلال ثانية واحدة",two:"خلال ثانيتين",few:"خلال {0} ثوانٍ",other:"خلال {0} ثانية"}},now:"الآن"}},function(e){e.exports={year:{previous:"السنة الماضية",current:"السنة الحالية",next:"السنة القادمة",past:{one:"قبل سنة واحدة",two:"قبل سنتين",few:"قبل {0} سنوات",other:"قبل {0} سنة"},future:{one:"خلال سنة واحدة",two:"خلال سنتين",few:"خلال {0} سنوات",other:"خلال {0} سنة"}},quarter:{previous:"الربع الأخير",current:"هذا الربع",next:"الربع القادم",past:{one:"قبل ربع سنة واحد",two:"قبل ربعي سنة",few:"قبل {0} أرباع سنة",other:"قبل {0} ربع سنة"},future:{one:"خلال ربع سنة واحد",two:"خلال ربعي سنة",few:"خلال {0} أرباع سنة",other:"خلال {0} ربع سنة"}},month:{previous:"الشهر الماضي",current:"هذا الشهر",next:"الشهر القادم",past:{one:"قبل شهر واحد",two:"قبل شهرين",few:"خلال {0} أشهر",many:"قبل {0} شهرًا",other:"قبل {0} شهر"},future:{one:"خلال شهر واحد",two:"خلال شهرين",few:"خلال {0} أشهر",many:"خلال {0} شهرًا",other:"خلال {0} شهر"}},week:{previous:"الأسبوع الماضي",current:"هذا الأسبوع",next:"الأسبوع القادم",past:{one:"قبل أسبوع واحد",two:"قبل أسبوعين",few:"قبل {0} أسابيع",many:"قبل {0} أسبوعًا",other:"قبل {0} أسبوع"},future:{one:"خلال أسبوع واحد",two:"خلال {0} أسبوعين",few:"خلال {0} أسابيع",many:"خلال {0} أسبوعًا",other:"خلال {0} أسبوع"}},day:{previous:"أمس",current:"اليوم",next:"غدًا",past:{one:"قبل يوم واحد",two:"قبل يومين",few:"قبل {0} أيام",many:"قبل {0} يومًا",other:"قبل {0} يوم"},future:{one:"خلال يوم واحد",two:"خلال يومين",few:"خلال {0} أيام",many:"خلال {0} يومًا",other:"خلال {0} يوم"}},hour:{current:"الساعة الحالية",past:{one:"قبل ساعة واحدة",two:"قبل ساعتين",few:"قبل {0} ساعات",other:"قبل {0} ساعة"},future:{one:"خلال ساعة واحدة",two:"خلال ساعتين",few:"خلال {0} ساعات",other:"خلال {0} ساعة"}},minute:{current:"هذه الدقيقة",past:{one:"قبل دقيقة واحدة",two:"قبل دقيقتين",few:"قبل {0} دقائق",other:"قبل {0} دقيقة"},future:{one:"خلال دقيقة واحدة",two:"خلال دقيقتين",few:"خلال {0} دقائق",other:"خلال {0} دقيقة"}},second:{current:"الآن",past:{one:"قبل ثانية واحدة",two:"قبل ثانيتين",few:"قبل {0} ثوانٍ",other:"قبل {0} ثانية"},future:{one:"خلال ثانية واحدة",two:"خلال ثانيتين",few:"خلال {0} ثوانٍ",other:"خلال {0} ثانية"}},now:"الآن"}},function(e){e.exports={year:{previous:"السنة الماضية",current:"السنة الحالية",next:"السنة القادمة",past:{one:"قبل سنة واحدة",two:"قبل سنتين",few:"قبل {0} سنوات",other:"قبل {0} سنة"},future:{one:"خلال سنة واحدة",two:"خلال سنتين",few:"خلال {0} سنوات",other:"خلال {0} سنة"}},quarter:{previous:"الربع الأخير",current:"هذا الربع",next:"الربع القادم",past:{one:"قبل ربع سنة واحد",two:"قبل ربعي سنة",few:"قبل {0} أرباع سنة",other:"قبل {0} ربع سنة"},future:{one:"خلال ربع سنة واحد",two:"خلال ربعي سنة",few:"خلال {0} أرباع سنة",other:"خلال {0} ربع سنة"}},month:{previous:"الشهر الماضي",current:"هذا الشهر",next:"الشهر القادم",past:{one:"قبل شهر واحد",two:"قبل شهرين",few:"قبل {0} أشهر",many:"قبل {0} شهرًا",other:"قبل {0} شهر"},future:{one:"خلال شهر واحد",two:"خلال شهرين",few:"خلال {0} أشهر",many:"خلال {0} شهرًا",other:"خلال {0} شهر"}},week:{previous:"الأسبوع الماضي",current:"هذا الأسبوع",next:"الأسبوع القادم",past:{one:"قبل أسبوع واحد",two:"قبل أسبوعين",few:"قبل {0} أسابيع",many:"قبل {0} أسبوعًا",other:"قبل {0} أسبوع"},future:{one:"خلال أسبوع واحد",two:"خلال أسبوعين",few:"خلال {0} أسابيع",many:"خلال {0} أسبوعًا",other:"خلال {0} أسبوع"}},day:{previous:"أمس",current:"اليوم",next:"غدًا",past:{one:"قبل يوم واحد",two:"قبل يومين",few:"قبل {0} أيام",many:"قبل {0} يومًا",other:"قبل {0} يوم"},future:{one:"خلال يوم واحد",two:"خلال يومين",few:"خلال {0} أيام",many:"خلال {0} يومًا",other:"خلال {0} يوم"}},hour:{current:"الساعة الحالية",past:{one:"قبل ساعة واحدة",two:"قبل ساعتين",few:"قبل {0} ساعات",other:"قبل {0} ساعة"},future:{one:"خلال ساعة واحدة",two:"خلال ساعتين",few:"خلال {0} ساعات",other:"خلال {0} ساعة"}},minute:{current:"هذه الدقيقة",past:{one:"قبل دقيقة واحدة",two:"قبل دقيقتين",few:"قبل {0} دقائق",other:"قبل {0} دقيقة"},future:{one:"خلال دقيقة واحدة",two:"خلال دقيقتين",few:"خلال {0} دقائق",other:"خلال {0} دقيقة"}},second:{current:"الآن",past:{one:"قبل ثانية واحدة",two:"قبل ثانيتين",few:"قبل {0} ثوانٍ",other:"قبل {0} ثانية"},future:{one:"خلال ثانية واحدة",two:"خلال ثانيتين",few:"خلال {0} ثوانٍ",other:"خلال {0} ثانية"}},now:"الآن"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=Number(t[0])==e&&t[0].slice(-2);return 0==e?"zero":1==e?"one":2==e?"two":r>=3&&r<=10?"few":r>=11&&r<=99?"many":"other"}},function(e,t,r){e.exports={locale:"bg",long:r(24),short:r(25),narrow:r(26),quantify:r(27)}},function(e){e.exports={year:{previous:"миналата година",current:"тази година",next:"следващата година",past:{one:"преди {0} година",other:"преди {0} години"},future:{one:"след {0} година",other:"след {0} години"}},quarter:{previous:"предходно тримесечие",current:"това тримесечие",next:"следващо тримесечие",past:{one:"преди {0} тримесечие",other:"преди {0} тримесечия"},future:{one:"след {0} тримесечие",other:"след {0} тримесечия"}},month:{previous:"предходен месец",current:"този месец",next:"следващ месец",past:{one:"преди {0} месец",other:"преди {0} месеца"},future:{one:"след {0} месец",other:"след {0} месеца"}},week:{previous:"предходната седмица",current:"тази седмица",next:"следващата седмица",past:{one:"преди {0} седмица",other:"преди {0} седмици"},future:{one:"след {0} седмица",other:"след {0} седмици"}},day:{previous:"вчера",current:"днес",next:"утре",past:{one:"преди {0} ден",other:"преди {0} дни"},future:{one:"след {0} ден",other:"след {0} дни"}},hour:{current:"в този час",past:{one:"преди {0} час",other:"преди {0} часа"},future:{one:"след {0} час",other:"след {0} часа"}},minute:{current:"в тази минута",past:{one:"преди {0} минута",other:"преди {0} минути"},future:{one:"след {0} минута",other:"след {0} минути"}},second:{current:"сега",past:{one:"преди {0} секунда",other:"преди {0} секунди"},future:{one:"след {0} секунда",other:"след {0} секунди"}},now:"сега"}},function(e){e.exports={year:{previous:"мин. г.",current:"т. г.",next:"следв. г.",past:"преди {0} г.",future:"след {0} г."},quarter:{previous:"мин. трим.",current:"това трим.",next:"следв. трим.",past:"преди {0} трим.",future:"след {0} трим."},month:{previous:"мин. мес.",current:"този мес.",next:"следв. мес.",past:"преди {0} м.",future:"след {0} м."},week:{previous:"миналата седмица",current:"тази седм.",next:"следв. седм.",past:"преди {0} седм.",future:"след {0} седм."},day:{previous:"вчера",current:"днес",next:"утре",past:{one:"преди {0} ден",other:"преди {0} дни"},future:{one:"след {0} ден",other:"след {0} дни"}},hour:{current:"в този час",past:"преди {0} ч",future:"след {0} ч"},minute:{current:"в тази минута",past:"преди {0} мин",future:"след {0} мин"},second:{current:"сега",past:"преди {0} сек",future:"след {0} сек"},now:"сега"}},function(e){e.exports={year:{previous:"мин. г.",current:"т. г.",next:"сл. г.",past:"пр. {0} г.",future:"сл. {0} г."},quarter:{previous:"мин. трим.",current:"това трим.",next:"следв. трим.",past:"пр. {0} трим.",future:"сл. {0} трим."},month:{previous:"мин. м.",current:"т. м.",next:"сл. м.",past:"пр. {0} м.",future:"сл. {0} м."},week:{previous:"мин. седм.",current:"тази седм.",next:"сл. седм.",past:"пр. {0} седм.",future:"сл. {0} седм."},day:{previous:"вчера",current:"днес",next:"утре",past:"пр. {0} д",future:"сл. {0} д"},hour:{current:"в този час",past:"пр. {0} ч",future:"сл. {0} ч"},minute:{current:"в тази минута",past:"пр. {0} мин",future:"сл. {0} мин"},second:{current:"сега",past:"пр. {0} сек",future:"сл. {0} сек"},now:"сега"}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t,r){e.exports={locale:"bn",long:r(29),short:r(30),narrow:r(31),quantify:r(32)}},function(e){e.exports={year:{previous:"গত বছর",current:"এই বছর",next:"পরের বছর",past:"{0} বছর পূর্বে",future:"{0} বছরে"},quarter:{previous:"গত ত্রৈমাসিক",current:"এই ত্রৈমাসিক",next:"পরের ত্রৈমাসিক",past:"{0} ত্রৈমাসিক আগে",future:"{0} ত্রৈমাসিকে"},month:{previous:"গত মাস",current:"এই মাস",next:"পরের মাস",past:"{0} মাস আগে",future:"{0} মাসে"},week:{previous:"গত সপ্তাহ",current:"এই সপ্তাহ",next:"পরের সপ্তাহ",past:"{0} সপ্তাহ আগে",future:"{0} সপ্তাহে"},day:{previous:"গতকাল",current:"আজ",next:"আগামীকাল",past:"{0} দিন আগে",future:"{0} দিনের মধ্যে"},hour:{current:"এই ঘণ্টায়",past:"{0} ঘন্টা আগে",future:"{0} ঘন্টায়"},minute:{current:"এই মিনিট",past:"{0} মিনিট আগে",future:"{0} মিনিটে"},second:{current:"এখন",past:"{0} সেকেন্ড পূর্বে",future:"{0} সেকেন্ডে"},now:"এখন"}},function(e){e.exports={year:{previous:"গত বছর",current:"এই বছর",next:"পরের বছর",past:"{0} বছর পূর্বে",future:"{0} বছরে"},quarter:{previous:"গত ত্রৈমাসিক",current:"এই ত্রৈমাসিক",next:"পরের ত্রৈমাসিক",past:"{0} ত্রৈমাসিক আগে",future:"{0} ত্রৈমাসিকে"},month:{previous:"গত মাস",current:"এই মাস",next:"পরের মাস",past:"{0} মাস আগে",future:"{0} মাসে"},week:{previous:"গত সপ্তাহ",current:"এই সপ্তাহ",next:"পরের সপ্তাহ",past:"{0} সপ্তাহ আগে",future:"{0} সপ্তাহে"},day:{previous:"গতকাল",current:"আজ",next:"আগামীকাল",past:"{0} দিন আগে",future:"{0} দিনের মধ্যে"},hour:{current:"এই ঘণ্টায়",past:"{0} ঘন্টা আগে",future:"{0} ঘন্টায়"},minute:{current:"এই মিনিট",past:"{0} মিনিট আগে",future:"{0} মিনিটে"},second:{current:"এখন",past:"{0} সেকেন্ড পূর্বে",future:"{0} সেকেন্ডে"},now:"এখন"}},function(e){e.exports={year:{previous:"গত বছর",current:"এই বছর",next:"পরের বছর",past:"{0} বছর পূর্বে",future:"{0} বছরে"},quarter:{previous:"গত ত্রৈমাসিক",current:"এই ত্রৈমাসিক",next:"পরের ত্রৈমাসিক",past:"{0} ত্রৈমাসিক আগে",future:"{0} ত্রৈমাসিকে"},month:{previous:"গত মাস",current:"এই মাস",next:"পরের মাস",past:"{0} মাস আগে",future:"{0} মাসে"},week:{previous:"গত সপ্তাহ",current:"এই সপ্তাহ",next:"পরের সপ্তাহ",past:"{0} সপ্তাহ আগে",future:"{0} সপ্তাহে"},day:{previous:"গতকাল",current:"আজ",next:"আগামীকাল",past:"{0} দিন আগে",future:"{0} দিনের মধ্যে"},hour:{current:"এই ঘণ্টায়",past:"{0} ঘন্টা আগে",future:"{0} ঘন্টায়"},minute:{current:"এই মিনিট",past:"{0} মিনিট আগে",future:"{0} মিনিটে"},second:{current:"এখন",past:"{0} সেকেন্ড আগে",future:"{0} সেকেন্ডে"},now:"এখন"}},function(e,t){e.exports=function(e){return e>=0&&e<=1?"one":"other"}},function(e,t,r){e.exports={locale:"ca",long:r(34),short:r(35),narrow:r(36),quantify:r(37)}},function(e){e.exports={year:{previous:"l’any passat",current:"enguany",next:"l’any que ve",past:{one:"fa {0} any",other:"fa {0} anys"},future:{one:"d’aquí a {0} any",other:"d’aquí a {0} anys"}},quarter:{previous:"el trimestre passat",current:"aquest trimestre",next:"el trimestre que ve",past:{one:"fa {0} trimestre",other:"fa {0} trimestres"},future:{one:"d’aquí a {0} trimestre",other:"d’aquí a {0} trimestres"}},month:{previous:"el mes passat",current:"aquest mes",next:"el mes que ve",past:{one:"fa {0} mes",other:"fa {0} mesos"},future:{one:"d’aquí a {0} mes",other:"d’aquí a {0} mesos"}},week:{previous:"la setmana passada",current:"aquesta setmana",next:"la setmana que ve",past:{one:"fa {0} setmana",other:"fa {0} setmanes"},future:{one:"d’aquí a {0} setmana",other:"d’aquí a {0} setmanes"}},day:{previous:"ahir",current:"avui",next:"demà",past:{one:"fa {0} dia",other:"fa {0} dies"},future:{one:"d’aquí a {0} dia",other:"d’aquí a {0} dies"}},hour:{current:"aquesta hora",past:{one:"fa {0} hora",other:"fa {0} hores"},future:{one:"d’aquí a {0} hora",other:"d’aquí a {0} hores"}},minute:{current:"aquest minut",past:{one:"fa {0} minut",other:"fa {0} minuts"},future:{one:"d’aquí a {0} minut",other:"d’aquí a {0} minuts"}},second:{current:"ara",past:{one:"fa {0} segon",other:"fa {0} segons"},future:{one:"d’aquí a {0} segon",other:"d’aquí a {0} segons"}},now:"ara"}},function(e){e.exports={year:{previous:"l’any passat",current:"enguany",next:"l’any que ve",past:{one:"fa {0} any",other:"fa {0} anys"},future:{one:"d’aquí a {0} any",other:"d’aquí a {0} anys"}},quarter:{previous:"el trim. passat",current:"aquest trim.",next:"el trim. que ve",past:"fa {0} trim.",future:"d’aquí a {0} trim."},month:{previous:"el mes passat",current:"aquest mes",next:"el mes que ve",past:{one:"fa {0} mes",other:"fa {0} mesos"},future:{one:"d’aquí a {0} mes",other:"d’aquí a {0} mesos"}},week:{previous:"la setm. passada",current:"aquesta setm.",next:"la setm. que ve",past:"fa {0} setm.",future:"d’aquí a {0} setm."},day:{previous:"ahir",current:"avui",next:"demà",past:{one:"fa {0} dia",other:"fa {0} dies"},future:{one:"d’aquí a {0} dia",other:"d’aquí a {0} dies"}},hour:{current:"aquesta hora",past:"fa {0} h",future:"d’aquí a {0} h"},minute:{current:"aquest minut",past:"fa {0} min",future:"d’aquí a {0} min"},second:{current:"ara",past:"fa {0} s",future:"d’aquí a {0} s"},now:"ara"}},function(e){e.exports={year:{previous:"l’any passat",current:"enguany",next:"l’any que ve",past:{one:"fa {0} any",other:"fa {0} anys"},future:{one:"d’aquí a {0} any",other:"d’aquí a {0} anys"}},quarter:{previous:"trim. passat",current:"aquest trim.",next:"trim. vinent",past:"fa {0} trim.",future:"d’aquí a {0} trim."},month:{previous:"mes passat",current:"aquest mes",next:"mes vinent",past:{one:"fa {0} mes",other:"fa {0} mesos"},future:{one:"d’aquí a {0} mes",other:"d’aquí a {0} mesos"}},week:{previous:"setm. passada",current:"aquesta setm.",next:"setm. vinent",past:"fa {0} setm.",future:"d’aquí a {0} setm."},day:{previous:"ahir",current:"avui",next:"demà",past:{one:"fa {0} dia",other:"fa {0} dies"},future:{one:"d’aquí a {0} dia",other:"d’aquí a {0} dies"}},hour:{current:"aquesta hora",past:"fa {0} h",future:"d‘aquí a {0} h"},minute:{current:"aquest minut",past:"fa {0} min",future:"d’aquí a {0} min"},second:{current:"ara",past:"fa {0} s",future:"d’aquí a {0} s"},now:"ara"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"cs",long:r(39),short:r(40),narrow:r(41),quantify:r(42)}},function(e){e.exports={year:{previous:"minulý rok",current:"tento rok",next:"příští rok",past:{one:"před {0} rokem",many:"před {0} roku",other:"před {0} lety"},future:{one:"za {0} rok",few:"za {0} roky",many:"za {0} roku",other:"za {0} let"}},quarter:{previous:"minulé čtvrtletí",current:"toto čtvrtletí",next:"příští čtvrtletí",past:{one:"před {0} čtvrtletím",many:"před {0} čtvrtletí",other:"před {0} čtvrtletími"},future:"za {0} čtvrtletí"},month:{previous:"minulý měsíc",current:"tento měsíc",next:"příští měsíc",past:{one:"před {0} měsícem",many:"před {0} měsíce",other:"před {0} měsíci"},future:{one:"za {0} měsíc",few:"za {0} měsíce",many:"za {0} měsíce",other:"za {0} měsíců"}},week:{previous:"minulý týden",current:"tento týden",next:"příští týden",past:{one:"před {0} týdnem",many:"před {0} týdne",other:"před {0} týdny"},future:{one:"za {0} týden",few:"za {0} týdny",many:"za {0} týdne",other:"za {0} týdnů"}},day:{previous:"včera",current:"dnes",next:"zítra",past:{one:"před {0} dnem",many:"před {0} dne",other:"před {0} dny"},future:{one:"za {0} den",few:"za {0} dny",many:"za {0} dne",other:"za {0} dní"}},hour:{current:"tuto hodinu",past:{one:"před {0} hodinou",many:"před {0} hodiny",other:"před {0} hodinami"},future:{one:"za {0} hodinu",few:"za {0} hodiny",many:"za {0} hodiny",other:"za {0} hodin"}},minute:{current:"tuto minutu",past:{one:"před {0} minutou",many:"před {0} minuty",other:"před {0} minutami"},future:{one:"za {0} minutu",few:"za {0} minuty",many:"za {0} minuty",other:"za {0} minut"}},second:{current:"nyní",past:{one:"před {0} sekundou",many:"před {0} sekundy",other:"před {0} sekundami"},future:{one:"za {0} sekundu",few:"za {0} sekundy",many:"za {0} sekundy",other:"za {0} sekund"}},now:"nyní"}},function(e){e.exports={year:{previous:"minulý rok",current:"tento rok",next:"příští rok",past:{one:"před {0} r.",few:"před {0} r.",many:"před {0} r.",other:"před {0} l."},future:{one:"za {0} r.",few:"za {0} r.",many:"za {0} r.",other:"za {0} l."}},quarter:{previous:"minulé čtvrtletí",current:"toto čtvrtletí",next:"příští čtvrtletí",past:"-{0} Q",future:"+{0} Q"},month:{previous:"minulý měs.",current:"tento měs.",next:"příští měs.",past:"před {0} měs.",future:"za {0} měs."},week:{previous:"minulý týd.",current:"tento týd.",next:"příští týd.",past:"před {0} týd.",future:"za {0} týd."},day:{previous:"včera",current:"dnes",next:"zítra",past:{one:"před {0} dnem",many:"před {0} dne",other:"před {0} dny"},future:{one:"za {0} den",few:"za {0} dny",many:"za {0} dne",other:"za {0} dní"}},hour:{current:"tuto hodinu",past:"před {0} h",future:"za {0} h"},minute:{current:"tuto minutu",past:"před {0} min",future:"za {0} min"},second:{current:"nyní",past:"před {0} s",future:"za {0} s"},now:"nyní"}},function(e){e.exports={year:{previous:"minulý rok",current:"tento rok",next:"příští rok",past:{one:"před {0} r.",few:"před {0} r.",many:"před {0} r.",other:"před {0} l."},future:{one:"za {0} r.",few:"za {0} r.",many:"za {0} r.",other:"za {0} l."}},quarter:{previous:"minulé čtvrtletí",current:"toto čtvrtletí",next:"příští čtvrtletí",past:"-{0} Q",future:"+{0} Q"},month:{previous:"minuý měs.",current:"tento měs.",next:"příští měs.",past:"před {0} měs.",future:"za {0} měs."},week:{previous:"minulý týd.",current:"tento týd.",next:"příští týd.",past:"před {0} týd.",future:"za {0} týd."},day:{previous:"včera",current:"dnes",next:"zítra",past:{one:"před {0} dnem",many:"před {0} dne",other:"před {0} dny"},future:{one:"za {0} den",few:"za {0} dny",many:"za {0} dne",other:"za {0} dní"}},hour:{current:"tuto hodinu",past:"před {0} h",future:"za {0} h"},minute:{current:"tuto minutu",past:"před {0} min",future:"za {0} min"},second:{current:"nyní",past:"před {0} s",future:"za {0} s"},now:"nyní"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=!t[1];return 1==e&&n?"one":r>=2&&r<=4&&n?"few":n?"other":"many"}},function(e,t,r){e.exports={locale:"da",long:r(44),short:r(45),narrow:r(46),quantify:r(47)}},function(e){e.exports={year:{previous:"sidste år",current:"i år",next:"næste år",past:"for {0} år siden",future:"om {0} år"},quarter:{previous:"sidste kvartal",current:"dette kvartal",next:"næste kvartal",past:{one:"for {0} kvartal siden",other:"for {0} kvartaler siden"},future:{one:"om {0} kvartal",other:"om {0} kvartaler"}},month:{previous:"sidste måned",current:"denne måned",next:"næste måned",past:{one:"for {0} måned siden",other:"for {0} måneder siden"},future:{one:"om {0} måned",other:"om {0} måneder"}},week:{previous:"sidste uge",current:"denne uge",next:"næste uge",past:{one:"for {0} uge siden",other:"for {0} uger siden"},future:{one:"om {0} uge",other:"om {0} uger"}},day:{previous:"i går",current:"i dag",next:"i morgen",past:{one:"for {0} dag siden",other:"for {0} dage siden"},future:{one:"om {0} dag",other:"om {0} dage"}},hour:{current:"i den kommende time",past:{one:"for {0} time siden",other:"for {0} timer siden"},future:{one:"om {0} time",other:"om {0} timer"}},minute:{current:"i det kommende minut",past:{one:"for {0} minut siden",other:"for {0} minutter siden"},future:{one:"om {0} minut",other:"om {0} minutter"}},second:{current:"nu",past:{one:"for {0} sekund siden",other:"for {0} sekunder siden"},future:{one:"om {0} sekund",other:"om {0} sekunder"}},now:"nu"}},function(e){e.exports={year:{previous:"sidste år",current:"i år",next:"næste år",past:"for {0} år siden",future:"om {0} år"},quarter:{previous:"sidste kvt.",current:"dette kvt.",next:"næste kvt.",past:"for {0} kvt. siden",future:"om {0} kvt."},month:{previous:"sidste md.",current:"denne md.",next:"næste md.",past:{one:"for {0} md. siden",other:"for {0} mdr. siden"},future:{one:"om {0} md.",other:"om {0} mdr."}},week:{previous:"sidste uge",current:"denne uge",next:"næste uge",past:{one:"for {0} uge siden",other:"for {0} uger siden"},future:{one:"om {0} uge",other:"om {0} uger"}},day:{previous:"i går",current:"i dag",next:"i morgen",past:{one:"for {0} dag siden",other:"for {0} dage siden"},future:{one:"om {0} dag",other:"om {0} dage"}},hour:{current:"i den kommende time",past:{one:"for {0} time siden",other:"for {0} timer siden"},future:{one:"om {0} time",other:"om {0} timer"}},minute:{current:"i det kommende minut",past:"for {0} min. siden",future:"om {0} min."},second:{current:"nu",past:"for {0} sek. siden",future:"om {0} sek."},now:"nu"}},function(e){e.exports={year:{previous:"sidste år",current:"i år",next:"næste år",past:"for {0} år siden",future:"om {0} år"},quarter:{previous:"sidste kvt.",current:"dette kvt.",next:"næste kvt.",past:"for {0} kvt. siden",future:"om {0} kvt."},month:{previous:"sidste md.",current:"denne md.",next:"næste md.",past:{one:"for {0} md. siden",other:"for {0} mdr. siden"},future:{one:"om {0} md.",other:"om {0} mdr."}},week:{previous:"sidste uge",current:"denne uge",next:"næste uge",past:{one:"for {0} uge siden",other:"for {0} uger siden"},future:{one:"om {0} uge",other:"om {0} uger"}},day:{previous:"i går",current:"i dag",next:"i morgen",past:{one:"for {0} dag siden",other:"for {0} dage siden"},future:{one:"om {0} dag",other:"om {0} dage"}},hour:{current:"i den kommende time",past:{one:"for {0} time siden",other:"for {0} timer siden"},future:{one:"om {0} time",other:"om {0} timer"}},minute:{current:"i det kommende minut",past:"for {0} min. siden",future:"om {0} min."},second:{current:"nu",past:"for {0} sek. siden",future:"om {0} sek."},now:"nu"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=Number(t[0])==e;return 1!=e&&(n||0!=r&&1!=r)?"other":"one"}},function(e,t,r){e.exports={locale:"de",long:r(49),short:r(50),narrow:r(51),quantify:r(52)}},function(e){e.exports={year:{previous:"letztes Jahr",current:"dieses Jahr",next:"nächstes Jahr",past:{one:"vor {0} Jahr",other:"vor {0} Jahren"},future:{one:"in {0} Jahr",other:"in {0} Jahren"}},quarter:{previous:"letztes Quartal",current:"dieses Quartal",next:"nächstes Quartal",past:{one:"vor {0} Quartal",other:"vor {0} Quartalen"},future:{one:"in {0} Quartal",other:"in {0} Quartalen"}},month:{previous:"letzten Monat",current:"diesen Monat",next:"nächsten Monat",past:{one:"vor {0} Monat",other:"vor {0} Monaten"},future:{one:"in {0} Monat",other:"in {0} Monaten"}},week:{previous:"letzte Woche",current:"diese Woche",next:"nächste Woche",past:{one:"vor {0} Woche",other:"vor {0} Wochen"},future:{one:"in {0} Woche",other:"in {0} Wochen"}},day:{previous:"gestern",current:"heute",next:"morgen",past:{one:"vor {0} Tag",other:"vor {0} Tagen"},future:{one:"in {0} Tag",other:"in {0} Tagen"}},hour:{current:"in dieser Stunde",past:{one:"vor {0} Stunde",other:"vor {0} Stunden"},future:{one:"in {0} Stunde",other:"in {0} Stunden"}},minute:{current:"in dieser Minute",past:{one:"vor {0} Minute",other:"vor {0} Minuten"},future:{one:"in {0} Minute",other:"in {0} Minuten"}},second:{current:"jetzt",past:{one:"vor {0} Sekunde",other:"vor {0} Sekunden"},future:{one:"in {0} Sekunde",other:"in {0} Sekunden"}},now:"jetzt"}},function(e){e.exports={year:{previous:"letztes Jahr",current:"dieses Jahr",next:"nächstes Jahr",past:{one:"vor {0} Jahr",other:"vor {0} Jahren"},future:{one:"in {0} Jahr",other:"in {0} Jahren"}},quarter:{previous:"letztes Quartal",current:"dieses Quartal",next:"nächstes Quartal",past:"vor {0} Quart.",future:"in {0} Quart."},month:{previous:"letzten Monat",current:"diesen Monat",next:"nächsten Monat",past:{one:"vor {0} Monat",other:"vor {0} Monaten"},future:{one:"in {0} Monat",other:"in {0} Monaten"}},week:{previous:"letzte Woche",current:"diese Woche",next:"nächste Woche",past:{one:"vor {0} Woche",other:"vor {0} Wochen"},future:{one:"in {0} Woche",other:"in {0} Wochen"}},day:{previous:"gestern",current:"heute",next:"morgen",past:{one:"vor {0} Tag",other:"vor {0} Tagen"},future:{one:"in {0} Tag",other:"in {0} Tagen"}},hour:{current:"in dieser Stunde",past:"vor {0} Std.",future:"in {0} Std."},minute:{current:"in dieser Minute",past:"vor {0} Min.",future:"in {0} Min."},second:{current:"jetzt",past:"vor {0} Sek.",future:"in {0} Sek."},now:"jetzt"}},function(e){e.exports={year:{previous:"letztes Jahr",current:"dieses Jahr",next:"nächstes Jahr",past:{one:"vor {0} Jahr",other:"vor {0} Jahren"},future:{one:"in {0} Jahr",other:"in {0} Jahren"}},quarter:{previous:"letztes Quartal",current:"dieses Quartal",next:"nächstes Quartal",past:"vor {0} Q",future:"in {0} Q"},month:{previous:"letzten Monat",current:"diesen Monat",next:"nächsten Monat",past:{one:"vor {0} Monat",other:"vor {0} Monaten"},future:{one:"in {0} Monat",other:"in {0} Monaten"}},week:{previous:"letzte Woche",current:"diese Woche",next:"nächste Woche",past:"vor {0} Wo.",future:"in {0} Wo."},day:{previous:"gestern",current:"heute",next:"morgen",past:{one:"vor {0} Tag",other:"vor {0} Tagen"},future:{one:"in {0} Tag",other:"in {0} Tagen"}},hour:{current:"in dieser Stunde",past:"vor {0} Std.",future:"in {0} Std."},minute:{current:"in dieser Minute",past:"vor {0} m",future:"in {0} m"},second:{current:"jetzt",past:"vor {0} s",future:"in {0} s"},now:"jetzt"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"el",long:r(54),short:r(55),narrow:r(56),quantify:r(57)}},function(e){e.exports={year:{previous:"πέρσι",current:"φέτος",next:"επόμενο έτος",past:{one:"πριν από {0} έτος",other:"πριν από {0} έτη"},future:{one:"σε {0} έτος",other:"σε {0} έτη"}},quarter:{previous:"προηγούμενο τρίμηνο",current:"τρέχον τρίμηνο",next:"επόμενο τρίμηνο",past:{one:"πριν από {0} τρίμηνο",other:"πριν από {0} τρίμηνα"},future:{one:"σε {0} τρίμηνο",other:"σε {0} τρίμηνα"}},month:{previous:"προηγούμενος μήνας",current:"τρέχων μήνας",next:"επόμενος μήνας",past:{one:"πριν από {0} μήνα",other:"πριν από {0} μήνες"},future:{one:"σε {0} μήνα",other:"σε {0} μήνες"}},week:{previous:"προηγούμενη εβδομάδα",current:"τρέχουσα εβδομάδα",next:"επόμενη εβδομάδα",past:{one:"πριν από {0} εβδομάδα",other:"πριν από {0} εβδομάδες"},future:{one:"σε {0} εβδομάδα",other:"σε {0} εβδομάδες"}},day:{previous:"χθες",current:"σήμερα",next:"αύριο",past:{one:"πριν από {0} ημέρα",other:"πριν από {0} ημέρες"},future:{one:"σε {0} ημέρα",other:"σε {0} ημέρες"}},hour:{current:"τρέχουσα ώρα",past:{one:"πριν από {0} ώρα",other:"πριν από {0} ώρες"},future:{one:"σε {0} ώρα",other:"σε {0} ώρες"}},minute:{current:"τρέχον λεπτό",past:{one:"πριν από {0} λεπτό",other:"πριν από {0} λεπτά"},future:{one:"σε {0} λεπτό",other:"σε {0} λεπτά"}},second:{current:"τώρα",past:{one:"πριν από {0} δευτερόλεπτο",other:"πριν από {0} δευτερόλεπτα"},future:{one:"σε {0} δευτερόλεπτο",other:"σε {0} δευτερόλεπτα"}},now:"τώρα"}},function(e){e.exports={year:{previous:"πέρσι",current:"φέτος",next:"επόμενο έτος",past:{one:"πριν από {0} έτος",other:"πριν από {0} έτη"},future:{one:"σε {0} έτος",other:"σε {0} έτη"}},quarter:{previous:"προηγ. τρίμ.",current:"τρέχον τρίμ.",next:"επόμ. τρίμ.",past:"πριν από {0} τρίμ.",future:"σε {0} τρίμ."},month:{previous:"προηγούμενος μήνας",current:"τρέχων μήνας",next:"επόμενος μήνας",past:{one:"πριν από {0} μήνα",other:"πριν από {0} μήνες"},future:{one:"σε {0} μήνα",other:"σε {0} μήνες"}},week:{previous:"προηγούμενη εβδομάδα",current:"τρέχουσα εβδομάδα",next:"επόμενη εβδομάδα",past:"πριν από {0} εβδ.",future:"σε {0} εβδ."},day:{previous:"χθες",current:"σήμερα",next:"αύριο",past:"πριν από {0} ημ.",future:"σε {0} ημ."},hour:{current:"τρέχουσα ώρα",past:"πριν από {0} ώ.",future:"σε {0} ώ."},minute:{current:"τρέχον λεπτό",past:"πριν από {0} λεπ.",future:"σε {0} λεπ."},second:{current:"τώρα",past:"πριν από {0} δευτ.",future:"σε {0} δευτ."},now:"τώρα"}},function(e){e.exports={year:{previous:"πέρσι",current:"φέτος",next:"επόμενο έτος",past:{one:"{0} έτος πριν",other:"{0} έτη πριν"},future:{one:"σε {0} έτος",other:"σε {0} έτη"}},quarter:{previous:"προηγ. τρίμ.",current:"τρέχον τρίμ.",next:"επόμ. τρίμ.",past:"{0} τρίμ. πριν",future:"σε {0} τρίμ."},month:{previous:"προηγούμενος μήνας",current:"τρέχων μήνας",next:"επόμενος μήνας",past:"{0} μ. πριν",future:"σε {0} μ."},week:{previous:"προηγούμενη εβδομάδα",current:"τρέχουσα εβδομάδα",next:"επόμενη εβδομάδα",past:"{0} εβδ. πριν",future:"σε {0} εβδ."},day:{previous:"χθες",current:"σήμερα",next:"αύριο",past:"{0} ημ. πριν",future:"σε {0} ημ."},hour:{current:"τρέχουσα ώρα",past:"{0} ώ. πριν",future:"σε {0} ώ."},minute:{current:"τρέχον λεπτό",past:"{0} λ. πριν",future:"σε {0} λ."},second:{current:"τώρα",past:"{0} δ. πριν",future:"σε {0} δ."},now:"τώρα"}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t,r){e.exports={locale:"en",long:r(59),long_time:r(60),long_convenient:r(61),short:r(62),short_time:r(63),short_convenient:r(64),narrow:r(65),tiny:r(66),quantify:r(67)}},function(e){e.exports={year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}},now:"now"}},function(e){e.exports={year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"},now:{future:"in a moment",past:"just now"}}},function(e){e.exports={year:{previous:"last year",current:"this year",next:"next year",past:{one:"a year ago",other:"{0} years ago"},future:{one:"in a year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"a quarter ago",other:"{0} quarters ago"},future:{one:"in a quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"a month ago",other:"{0} months ago"},future:{one:"in a month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"a week ago",other:"{0} weeks ago"},future:{one:"in a week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"a day ago",other:"{0} days ago"},future:{one:"in a day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"an hour ago",other:"{0} hours ago"},future:{one:"in an hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"a minute ago",other:"{0} minutes ago"},future:{one:"in a minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"a second ago",other:"{0} seconds ago"},future:{one:"in a second",other:"in {0} seconds"}},now:{future:"in a moment",past:"just now"}}},function(e){e.exports={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."},now:"now"}},function(e){e.exports={year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec.",now:"now"}},function(e){e.exports={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."},now:{future:"in a moment",past:"just now"}}},function(e){e.exports={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."},now:"now"}},function(e){e.exports={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"es",long:r(69),short:r(70),narrow:r(71),quantify:r(6)}},function(e){e.exports={year:{previous:"el año pasado",current:"este año",next:"el próximo año",past:{one:"hace {0} año",other:"hace {0} años"},future:{one:"dentro de {0} año",other:"dentro de {0} años"}},quarter:{previous:"el trimestre pasado",current:"este trimestre",next:"el próximo trimestre",past:{one:"hace {0} trimestre",other:"hace {0} trimestres"},future:{one:"dentro de {0} trimestre",other:"dentro de {0} trimestres"}},month:{previous:"el mes pasado",current:"este mes",next:"el próximo mes",past:{one:"hace {0} mes",other:"hace {0} meses"},future:{one:"dentro de {0} mes",other:"dentro de {0} meses"}},week:{previous:"la semana pasada",current:"esta semana",next:"la próxima semana",past:{one:"hace {0} semana",other:"hace {0} semanas"},future:{one:"dentro de {0} semana",other:"dentro de {0} semanas"}},day:{previous:"ayer",current:"hoy",next:"mañana",past:{one:"hace {0} día",other:"hace {0} días"},future:{one:"dentro de {0} día",other:"dentro de {0} días"}},hour:{current:"esta hora",past:{one:"hace {0} hora",other:"hace {0} horas"},future:{one:"dentro de {0} hora",other:"dentro de {0} horas"}},minute:{current:"este minuto",past:{one:"hace {0} minuto",other:"hace {0} minutos"},future:{one:"dentro de {0} minuto",other:"dentro de {0} minutos"}},second:{current:"ahora",past:{one:"hace {0} segundo",other:"hace {0} segundos"},future:{one:"dentro de {0} segundo",other:"dentro de {0} segundos"}},now:"ahora"}},function(e){e.exports={year:{previous:"el año pasado",current:"este año",next:"el próximo año",past:"hace {0} a",future:"dentro de {0} a"},quarter:{previous:"el trimestre pasado",current:"este trimestre",next:"el próximo trimestre",past:"hace {0} trim.",future:"dentro de {0} trim."},month:{previous:"el mes pasado",current:"este mes",next:"el próximo mes",past:"hace {0} m",future:"dentro de {0} m"},week:{previous:"la semana pasada",current:"esta semana",next:"la próxima semana",past:"hace {0} sem.",future:"dentro de {0} sem."},day:{previous:"ayer",current:"hoy",next:"mañana",past:{one:"hace {0} día",other:"hace {0} días"},future:{one:"dentro de {0} día",other:"dentro de {0} días"}},hour:{current:"esta hora",past:"hace {0} h",future:"dentro de {0} h"},minute:{current:"este minuto",past:"hace {0} min",future:"dentro de {0} min"},second:{current:"ahora",past:"hace {0} s",future:"dentro de {0} s"},now:"ahora"}},function(e){e.exports={year:{previous:"el año pasado",current:"este año",next:"el próximo año",past:"hace {0} a",future:"dentro de {0} a"},quarter:{previous:"el trimestre pasado",current:"este trimestre",next:"el próximo trimestre",past:"hace {0} trim.",future:"dentro de {0} trim."},month:{previous:"el mes pasado",current:"este mes",next:"el próximo mes",past:"hace {0} m",future:"dentro de {0} m"},week:{previous:"la semana pasada",current:"esta semana",next:"la próxima semana",past:"hace {0} sem.",future:"dentro de {0} sem."},day:{previous:"ayer",current:"hoy",next:"mañana",past:{one:"hace {0} día",other:"hace {0} días"},future:{one:"dentro de {0} día",other:"dentro de {0} días"}},hour:{current:"esta hora",past:"hace {0} h",future:"dentro de {0} h"},minute:{current:"este minuto",past:"hace {0} min",future:"dentro de {0} min"},second:{current:"ahora",past:"hace {0} s",future:"dentro de {0} s"},now:"ahora"}},function(e,t,r){e.exports={locale:"es-US",long:r(73),short:r(74),narrow:r(75),quantify:r(6)}},function(e){e.exports={year:{previous:"el año pasado",current:"este año",next:"el año próximo",past:{one:"hace {0} año",other:"hace {0} años"},future:{one:"dentro de {0} año",other:"dentro de {0} años"}},quarter:{previous:"el trimestre pasado",current:"este trimestre",next:"el próximo trimestre",past:{one:"hace {0} trimestre",other:"hace {0} trimestres"},future:{one:"dentro de {0} trimestre",other:"dentro de {0} trimestres"}},month:{previous:"el mes pasado",current:"este mes",next:"el mes próximo",past:{one:"hace {0} mes",other:"hace {0} meses"},future:{one:"dentro de {0} mes",other:"dentro de {0} meses"}},week:{previous:"la semana pasada",current:"esta semana",next:"la semana próxima",past:{one:"hace {0} semana",other:"hace {0} semanas"},future:{one:"dentro de {0} semana",other:"dentro de {0} semanas"}},day:{previous:"ayer",current:"hoy",next:"mañana",past:{one:"hace {0} día",other:"hace {0} días"},future:{one:"dentro de {0} día",other:"dentro de {0} días"}},hour:{current:"esta hora",past:{one:"hace {0} hora",other:"hace {0} horas"},future:{one:"dentro de {0} hora",other:"dentro de {0} horas"}},minute:{current:"este minuto",past:{one:"hace {0} minuto",other:"hace {0} minutos"},future:{one:"dentro de {0} minuto",other:"dentro de {0} minutos"}},second:{current:"ahora",past:{one:"hace {0} segundo",other:"hace {0} segundos"},future:{one:"dentro de {0} segundo",other:"dentro de {0} segundos"}},now:"ahora"}},function(e){e.exports={year:{previous:"el año pasado",current:"este año",next:"el próximo año",past:"hace {0} a",future:"dentro de {0} a"},quarter:{previous:"el trimestre pasado",current:"este trimestre",next:"el próximo trimestre",past:"hace {0} trim.",future:"dentro de {0} trim."},month:{previous:"el mes pasado",current:"este mes",next:"el próximo mes",past:"hace {0} m",future:"dentro de {0} m"},week:{previous:"la semana pasada",current:"esta semana",next:"la semana próxima",past:"hace {0} sem.",future:"dentro de {0} sem."},day:{previous:"ayer",current:"hoy",next:"mañana",past:{one:"hace {0} día",other:"hace {0} días"},future:{one:"dentro de {0} día",other:"dentro de {0} días"}},hour:{current:"esta hora",past:"hace {0} h",future:"dentro de {0} h"},minute:{current:"este minuto",past:"hace {0} min",future:"dentro de {0} min"},second:{current:"ahora",past:"hace {0} s",future:"dentro de {0} s"},now:"ahora"}},function(e){e.exports={year:{previous:"el año pasado",current:"este año",next:"el próximo año",past:"hace {0} a",future:"dentro de {0} a"},quarter:{previous:"el trimestre pasado",current:"este trimestre",next:"el próximo trimestre",past:"hace {0} trim.",future:"dentro de {0} trim."},month:{previous:"el mes pasado",current:"este mes",next:"el próximo mes",past:"hace {0} m",future:"dentro de {0} m"},week:{previous:"la semana pasada",current:"esta semana",next:"la semana próxima",past:"hace {0} sem.",future:"dentro de {0} sem."},day:{previous:"ayer",current:"hoy",next:"mañana",past:{one:"hace {0} día",other:"hace {0} días"},future:{one:"dentro de {0} día",other:"dentro de {0} días"}},hour:{current:"esta hora",past:"hace {0} h",future:"dentro de {0} h"},minute:{current:"este minuto",past:"hace {0} min",future:"dentro de {0} min"},second:{current:"ahora",past:"hace {0} s",future:"dentro de {0} s"},now:"ahora"}},function(e,t,r){e.exports={locale:"et",long:r(77),short:r(78),narrow:r(79),quantify:r(80)}},function(e){e.exports={year:{previous:"eelmine aasta",current:"käesolev aasta",next:"järgmine aasta",past:"{0} aasta eest",future:"{0} aasta pärast"},quarter:{previous:"eelmine kvartal",current:"käesolev kvartal",next:"järgmine kvartal",past:"{0} kvartali eest",future:"{0} kvartali pärast"},month:{previous:"eelmine kuu",current:"käesolev kuu",next:"järgmine kuu",past:"{0} kuu eest",future:"{0} kuu pärast"},week:{previous:"eelmine nädal",current:"käesolev nädal",next:"järgmine nädal",past:"{0} nädala eest",future:"{0} nädala pärast"},day:{previous:"eile",current:"täna",next:"homme",past:"{0} päeva eest",future:"{0} päeva pärast"},hour:{current:"praegusel tunnil",past:"{0} tunni eest",future:"{0} tunni pärast"},minute:{current:"praegusel minutil",past:"{0} minuti eest",future:"{0} minuti pärast"},second:{current:"nüüd",past:"{0} sekundi eest",future:"{0} sekundi pärast"},now:"nüüd"}},function(e){e.exports={year:{previous:"eelmine aasta",current:"käesolev aasta",next:"järgmine aasta",past:"{0} a eest",future:"{0} a pärast"},quarter:{previous:"eelmine kv",current:"käesolev kv",next:"järgmine kv",past:"{0} kv eest",future:"{0} kv pärast"},month:{previous:"eelmine kuu",current:"käesolev kuu",next:"järgmine kuu",past:"{0} kuu eest",future:"{0} kuu pärast"},week:{previous:"eelmine nädal",current:"käesolev nädal",next:"järgmine nädal",past:"{0} näd eest",future:"{0} näd pärast"},day:{previous:"eile",current:"täna",next:"homme",past:"{0} p eest",future:"{0} p pärast"},hour:{current:"praegusel tunnil",past:"{0} t eest",future:"{0} t pärast"},minute:{current:"praegusel minutil",past:"{0} min eest",future:"{0} min pärast"},second:{current:"nüüd",past:"{0} sek eest",future:"{0} sek pärast"},now:"nüüd"}},function(e){e.exports={year:{previous:"eelmine aasta",current:"käesolev aasta",next:"järgmine aasta",past:"{0} a eest",future:"{0} a pärast"},quarter:{previous:"eelmine kv",current:"käesolev kv",next:"järgmine kv",past:"{0} kv eest",future:"{0} kv pärast"},month:{previous:"eelmine kuu",current:"käesolev kuu",next:"järgmine kuu",past:"{0} k eest",future:"{0} k pärast"},week:{previous:"eelmine nädal",current:"käesolev nädal",next:"järgmine nädal",past:"{0} näd eest",future:"{0} näd pärast"},day:{previous:"eile",current:"täna",next:"homme",past:"{0} p eest",future:"{0} p pärast"},hour:{current:"praegusel tunnil",past:"{0} t eest",future:"{0} t pärast"},minute:{current:"praegusel minutil",past:"{0} min eest",future:"{0} min pärast"},second:{current:"nüüd",past:"{0} s eest",future:"{0} s pärast"},now:"nüüd"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"fa",long:r(82),short:r(83),narrow:r(84),quantify:r(85)}},function(e){e.exports={year:{previous:"سال گذشته",current:"امسال",next:"سال آینده",past:"{0} سال پیش",future:"{0} سال بعد"},quarter:{previous:"سه‌ماههٔ گذشته",current:"سه‌ماههٔ کنونی",next:"سه‌ماههٔ آینده",past:"{0} سه‌ماههٔ پیش",future:"{0} سه‌ماههٔ بعد"},month:{previous:"ماه گذشته",current:"این ماه",next:"ماه آینده",past:"{0} ماه پیش",future:"{0} ماه بعد"},week:{previous:"هفتهٔ گذشته",current:"این هفته",next:"هفتهٔ آینده",past:"{0} هفته پیش",future:"{0} هفته بعد"},day:{previous:"دیروز",current:"امروز",next:"فردا",past:"{0} روز پیش",future:"{0} روز بعد"},hour:{current:"همین ساعت",past:"{0} ساعت پیش",future:"{0} ساعت بعد"},minute:{current:"همین دقیقه",past:"{0} دقیقه پیش",future:"{0} دقیقه بعد"},second:{current:"اکنون",past:"{0} ثانیه پیش",future:"{0} ثانیه بعد"},now:"اکنون"}},function(e){e.exports={year:{previous:"سال گذشته",current:"امسال",next:"سال آینده",past:"{0} سال پیش",future:"{0} سال بعد"},quarter:{previous:"سه‌ماههٔ گذشته",current:"سه‌ماههٔ کنونی",next:"سه‌ماههٔ آینده",past:"{0} سه‌ماههٔ پیش",future:"{0} سه‌ماههٔ بعد"},month:{previous:"ماه پیش",current:"این ماه",next:"ماه آینده",past:"{0} ماه پیش",future:"{0} ماه بعد"},week:{previous:"هفتهٔ گذشته",current:"این هفته",next:"هفتهٔ آینده",past:"{0} هفته پیش",future:"{0} هفته بعد"},day:{previous:"دیروز",current:"امروز",next:"فردا",past:"{0} روز پیش",future:"{0} روز بعد"},hour:{current:"همین ساعت",past:"{0} ساعت پیش",future:"{0} ساعت بعد"},minute:{current:"همین دقیقه",past:"{0} دقیقه پیش",future:"{0} دقیقه بعد"},second:{current:"اکنون",past:"{0} ثانیه پیش",future:"{0} ثانیه بعد"},now:"اکنون"}},function(e){e.exports={year:{previous:"سال گذشته",current:"امسال",next:"سال آینده",past:"{0} سال پیش",future:"{0} سال بعد"},quarter:{previous:"سه‌ماههٔ گذشته",current:"سه‌ماههٔ کنونی",next:"سه‌ماههٔ آینده",past:"{0} سه‌ماههٔ پیش",future:"{0} سه‌ماههٔ بعد"},month:{previous:"ماه پیش",current:"این ماه",next:"ماه آینده",past:"{0} ماه پیش",future:"{0} ماه بعد"},week:{previous:"هفتهٔ گذشته",current:"این هفته",next:"هفتهٔ آینده",past:"{0} هفته پیش",future:"{0} هفته بعد"},day:{previous:"دیروز",current:"امروز",next:"فردا",past:"{0} روز پیش",future:"{0} روز بعد"},hour:{current:"همین ساعت",past:"{0} ساعت پیش",future:"{0} ساعت بعد"},minute:{current:"همین دقیقه",past:"{0} دقیقه پیش",future:"{0} دقیقه بعد"},second:{current:"اکنون",past:"{0} ثانیه پیش",future:"{0} ثانیه بعد"},now:"اکنون"}},function(e,t){e.exports=function(e){return e>=0&&e<=1?"one":"other"}},function(e,t,r){e.exports={locale:"fi",long:r(87),short:r(88),narrow:r(89),quantify:r(90)}},function(e){e.exports={year:{previous:"viime vuonna",current:"tänä vuonna",next:"ensi vuonna",past:{one:"{0} vuosi sitten",other:"{0} vuotta sitten"},future:"{0} vuoden päästä"},quarter:{previous:"viime neljännesvuonna",current:"tänä neljännesvuonna",next:"ensi neljännesvuonna",past:{one:"{0} neljännesvuosi sitten",other:"{0} neljännesvuotta sitten"},future:"{0} neljännesvuoden päästä"},month:{previous:"viime kuussa",current:"tässä kuussa",next:"ensi kuussa",past:{one:"{0} kuukausi sitten",other:"{0} kuukautta sitten"},future:"{0} kuukauden päästä"},week:{previous:"viime viikolla",current:"tällä viikolla",next:"ensi viikolla",past:{one:"{0} viikko sitten",other:"{0} viikkoa sitten"},future:"{0} viikon päästä"},day:{previous:"eilen",current:"tänään",next:"huomenna",past:{one:"{0} päivä sitten",other:"{0} päivää sitten"},future:"{0} päivän päästä"},hour:{current:"tämän tunnin aikana",past:{one:"{0} tunti sitten",other:"{0} tuntia sitten"},future:"{0} tunnin päästä"},minute:{current:"tämän minuutin aikana",past:{one:"{0} minuutti sitten",other:"{0} minuuttia sitten"},future:"{0} minuutin päästä"},second:{current:"nyt",past:{one:"{0} sekunti sitten",other:"{0} sekuntia sitten"},future:"{0} sekunnin päästä"},now:"nyt"}},function(e){e.exports={year:{previous:"viime v",current:"tänä v",next:"ensi v",past:"{0} v sitten",future:"{0} v päästä"},quarter:{previous:"viime neljänneksenä",current:"tänä neljänneksenä",next:"ensi neljänneksenä",past:{one:"{0} neljännes sitten",other:"{0} neljännestä sitten"},future:"{0} neljänneksen päästä"},month:{previous:"viime kk",current:"tässä kk",next:"ensi kk",past:"{0} kk sitten",future:"{0} kk päästä"},week:{previous:"viime vk",current:"tällä vk",next:"ensi vk",past:"{0} vk sitten",future:"{0} vk päästä"},day:{previous:"eilen",current:"tänään",next:"huom.",past:"{0} pv sitten",future:"{0} pv päästä"},hour:{current:"tunnin sisällä",past:"{0} t sitten",future:"{0} t päästä"},minute:{current:"minuutin sisällä",past:"{0} min sitten",future:"{0} min päästä"},second:{current:"nyt",past:"{0} s sitten",future:"{0} s päästä"},now:"nyt"}},function(e){e.exports={year:{previous:"viime v",current:"tänä v",next:"ensi v",past:"{0} v sitten",future:"{0} v päästä"},quarter:{previous:"viime nelj.",current:"tänä nelj.",next:"ensi nelj.",past:"{0} nelj. sitten",future:"{0} nelj. päästä"},month:{previous:"viime kk",current:"tässä kk",next:"ensi kk",past:"{0} kk sitten",future:"{0} kk päästä"},week:{previous:"viime vk",current:"tällä vk",next:"ensi vk",past:"{0} vk sitten",future:"{0} vk päästä"},day:{previous:"eilen",current:"tänään",next:"huom.",past:"{0} pv sitten",future:"{0} pv päästä"},hour:{current:"tunnin sisällä",past:"{0} t sitten",future:"{0} t päästä"},minute:{current:"minuutin sisällä",past:"{0} min sitten",future:"{0} min päästä"},second:{current:"nyt",past:"{0} s sitten",future:"{0} s päästä"},now:"nyt"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"fr",long:r(92),short:r(93),narrow:r(94),quantify:r(7)}},function(e){e.exports={year:{previous:"l’année dernière",current:"cette année",next:"l’année prochaine",past:{one:"il y a {0} an",other:"il y a {0} ans"},future:{one:"dans {0} an",other:"dans {0} ans"}},quarter:{previous:"le trimestre dernier",current:"ce trimestre",next:"le trimestre prochain",past:{one:"il y a {0} trimestre",other:"il y a {0} trimestres"},future:{one:"dans {0} trimestre",other:"dans {0} trimestres"}},month:{previous:"le mois dernier",current:"ce mois-ci",next:"le mois prochain",past:"il y a {0} mois",future:"dans {0} mois"},week:{previous:"la semaine dernière",current:"cette semaine",next:"la semaine prochaine",past:{one:"il y a {0} semaine",other:"il y a {0} semaines"},future:{one:"dans {0} semaine",other:"dans {0} semaines"}},day:{previous:"hier",current:"aujourd’hui",next:"demain",past:{one:"il y a {0} jour",other:"il y a {0} jours"},future:{one:"dans {0} jour",other:"dans {0} jours"}},hour:{current:"cette heure-ci",past:{one:"il y a {0} heure",other:"il y a {0} heures"},future:{one:"dans {0} heure",other:"dans {0} heures"}},minute:{current:"cette minute-ci",past:{one:"il y a {0} minute",other:"il y a {0} minutes"},future:{one:"dans {0} minute",other:"dans {0} minutes"}},second:{current:"maintenant",past:{one:"il y a {0} seconde",other:"il y a {0} secondes"},future:{one:"dans {0} seconde",other:"dans {0} secondes"}},now:"maintenant"}},function(e){e.exports={year:{previous:"l’année dernière",current:"cette année",next:"l’année prochaine",past:"il y a {0} a",future:"dans {0} a"},quarter:{previous:"le trimestre dernier",current:"ce trimestre",next:"le trimestre prochain",past:"il y a {0} trim.",future:"dans {0} trim."},month:{previous:"le mois dernier",current:"ce mois-ci",next:"le mois prochain",past:"il y a {0} m.",future:"dans {0} m."},week:{previous:"la semaine dernière",current:"cette semaine",next:"la semaine prochaine",past:"il y a {0} sem.",future:"dans {0} sem."},day:{previous:"hier",current:"aujourd’hui",next:"demain",past:"il y a {0} j",future:"dans {0} j"},hour:{current:"cette heure-ci",past:"il y a {0} h",future:"dans {0} h"},minute:{current:"cette minute-ci",past:"il y a {0} min",future:"dans {0} min"},second:{current:"maintenant",past:"il y a {0} s",future:"dans {0} s"},now:"maintenant"}},function(e){e.exports={year:{previous:"l’année dernière",current:"cette année",next:"l’année prochaine",past:"-{0} a",future:"+{0} a"},quarter:{previous:"le trimestre dernier",current:"ce trimestre",next:"le trimestre prochain",past:"-{0} trim.",future:"+{0} trim."},month:{previous:"le mois dernier",current:"ce mois-ci",next:"le mois prochain",past:"-{0} m.",future:"+{0} m."},week:{previous:"la semaine dernière",current:"cette semaine",next:"la semaine prochaine",past:"-{0} sem.",future:"+{0} sem."},day:{previous:"hier",current:"aujourd’hui",next:"demain",past:"-{0} j",future:"+{0} j"},hour:{current:"cette heure-ci",past:"-{0} h",future:"+{0} h"},minute:{current:"cette minute-ci",past:"-{0} min",future:"+{0} min"},second:{current:"maintenant",past:"-{0} s",future:"+{0} s"},now:"maintenant"}},function(e,t,r){e.exports={locale:"fr-CA",long:r(96),short:r(97),narrow:r(98),quantify:r(7)}},function(e){e.exports={year:{previous:"l’année dernière",current:"cette année",next:"l’année prochaine",past:{one:"Il y a {0} an",other:"Il y a {0} ans"},future:{one:"Dans {0} an",other:"Dans {0} ans"}},quarter:{previous:"le trimestre dernier",current:"ce trimestre-ci",next:"le trimestre prochain",past:{one:"il y a {0} trimestre",other:"il y a {0} trimestres"},future:{one:"dans {0} trimestre",other:"dans {0} trimestres"}},month:{previous:"le mois dernier",current:"ce mois-ci",next:"le mois prochain",past:"il y a {0} mois",future:"dans {0} mois"},week:{previous:"la semaine dernière",current:"cette semaine",next:"la semaine prochaine",past:{one:"il y a {0} semaine",other:"il y a {0} semaines"},future:{one:"dans {0} semaine",other:"dans {0} semaines"}},day:{previous:"hier",current:"aujourd’hui",next:"demain",past:{one:"il y a {0} jour",other:"il y a {0} jours"},future:{one:"dans {0} jour",other:"dans {0} jours"}},hour:{current:"cette heure-ci",past:{one:"il y a {0} heure",other:"il y a {0} heures"},future:{one:"dans {0} heure",other:"dans {0} heures"}},minute:{current:"cette minute-ci",past:{one:"il y a {0} minute",other:"il y a {0} minutes"},future:{one:"dans {0} minute",other:"dans {0} minutes"}},second:{current:"maintenant",past:{one:"il y a {0} seconde",other:"il y a {0} secondes"},future:{one:"dans {0} seconde",other:"dans {0} secondes"}},now:"maintenant"}},function(e){e.exports={year:{previous:"l’année dernière",current:"cette année",next:"l’année prochaine",past:"il y a {0} a",future:"dans {0} a"},quarter:{previous:"le trimestre dernier",current:"ce trimestre-ci",next:"le trimestre prochain",past:"il y a {0} trim.",future:"dans {0} trim."},month:{previous:"le mois dernier",current:"ce mois-ci",next:"le mois prochain",past:"il y a {0} m.",future:"dans {0} m."},week:{previous:"la semaine dernière",current:"cette semaine",next:"la semaine prochaine",past:"il y a {0} sem.",future:"dans {0} sem."},day:{previous:"hier",current:"aujourd’hui",next:"demain",past:"il y a {0} j",future:"dans {0} j"},hour:{current:"cette heure-ci",past:"il y a {0} h",future:"dans {0} h"},minute:{current:"cette minute-ci",past:"il y a {0} min",future:"dans {0} min"},second:{current:"maintenant",past:"il y a {0} s",future:"dans {0} s"},now:"maintenant"}},function(e){e.exports={year:{previous:"l’année dernière",current:"cette année",next:"l’année prochaine",past:"-{0} a",future:"+{0} a"},quarter:{previous:"le trimestre dernier",current:"ce trimestre-ci",next:"le trimestre prochain",past:"-{0} trim.",future:"+{0} trim."},month:{previous:"le mois dernier",current:"ce mois-ci",next:"le mois prochain",past:"-{0} m.",future:"+{0} m."},week:{previous:"la semaine dernière",current:"cette semaine",next:"la semaine prochaine",past:"-{0} sem.",future:"+{0} sem."},day:{previous:"hier",current:"aujourd’hui",next:"demain",past:"-{0} j",future:"+{0} j"},hour:{current:"cette heure-ci",past:"-{0} h",future:"+{0} h"},minute:{current:"cette minute-ci",past:"-{0} min",future:"+{0} min"},second:{current:"maintenant",past:"-{0} s",future:{one:"+ {0} s",other:"+{0} s"}},now:"maintenant"}},function(e,t,r){e.exports={locale:"gd",long:r(100),short:r(101),narrow:r(102),quantify:r(103)}},function(e){e.exports={year:{previous:"an-uiridh",current:"am bliadhna",next:"an ath-bhliadhna",past:{one:"{0} bhliadhna air ais",two:"{0} bhliadhna air ais",few:"{0} bhliadhnaichean air ais",other:"{0} bliadhna air ais"},future:{one:"an ceann {0} bhliadhna",two:"an ceann {0} bhliadhna",few:"an ceann {0} bliadhnaichean",other:"an ceann {0} bliadhna"}},quarter:{previous:"an cairteal seo chaidh",current:"an cairteal seo",next:"an ath-chairteal",past:{one:"o chionn {0} chairteil",two:"o chionn {0} chairteil",few:"o chionn {0} cairtealan",other:"o chionn {0} cairteil"},future:{one:"an ceann {0} chairteil",two:"an ceann {0} chairteil",few:"an ceann {0} cairtealan",other:"an ceann {0} cairteil"}},month:{previous:"am mìos seo chaidh",current:"am mìos seo",next:"an ath-mhìos",past:{one:"{0} mhìos air ais",two:"{0} mhìos air ais",few:"{0} mìosan air ais",other:"{0} mìos air ais"},future:{one:"an ceann {0} mhìosa",two:"an ceann {0} mhìosa",few:"an ceann {0} mìosan",other:"an ceann {0} mìosa"}},week:{previous:"an t-seachdain seo chaidh",current:"an t-seachdain seo",next:"an ath-sheachdain",past:{two:"{0} sheachdain air ais",few:"{0} seachdainean air ais",other:"{0} seachdain air ais"},future:{two:"an ceann {0} sheachdain",few:"an ceann {0} seachdainean",other:"an ceann {0} seachdain"}},day:{previous:"an-dè",current:"an-diugh",next:"a-màireach",past:{few:"{0} làithean air ais",other:"{0} latha air ais"},future:{few:"an ceann {0} làithean",other:"an ceann {0} latha"}},hour:{current:"am broinn uair a thìde",past:{few:"{0} uairean a thìde air ais",other:"{0} uair a thìde air ais"},future:{few:"an ceann {0} uairean a thìde",other:"an ceann {0} uair a thìde"}},minute:{current:"am broinn mionaid",past:{one:"{0} mhionaid air ais",two:"{0} mhionaid air ais",few:"{0} mionaidean air ais",other:"{0} mionaid air ais"},future:{one:"an ceann {0} mhionaid",two:"an ceann {0} mhionaid",few:"an ceann {0} mionaidean",other:"an ceann {0} mionaid"}},second:{current:"an-dràsta",past:{two:"{0} dhiog air ais",few:"{0} diogan air ais",other:"{0} diog air ais"},future:{two:"an ceann {0} dhiog",few:"an ceann {0} diogan",other:"an ceann {0} diog"}},now:"an-dràsta"}},function(e){e.exports={year:{previous:"an-uiridh",current:"am bliadhna",next:"an ath-bhliadhna",past:{one:"o {0} bhlia.",two:"o {0} bhlia.",other:"o {0} blia."},future:{one:"an {0} bhlia.",two:"an {0} bhlia.",other:"an {0} blia."}},quarter:{previous:"an cairt. sa chaidh",current:"an cairt. seo",next:"an ath-chairt.",past:{one:"o {0} chairt.",two:"o {0} chairt.",other:"o {0} cairt."},future:{one:"an {0} chairt.",two:"an {0} chairt.",other:"an {0} cairt."}},month:{previous:"am mìos sa chaidh",current:"am mìos seo",next:"an ath-mhìos",past:{one:"o {0} mhìos.",two:"o {0} mhìos.",other:"o {0} mìos."},future:{one:"an {0} mhìos.",two:"an {0} mhìos.",other:"an {0} mìos."}},week:{previous:"seachd. sa chaidh",current:"an t-seachd. seo",next:"an ath-sheachd.",past:{one:"o {0} sheachd.",two:"o {0} sheachd.",other:"o {0} seachd."},future:{one:"an {0} sheachd.",two:"an {0} sheachd.",other:"an {0} seachd."}},day:{previous:"an-dè",current:"an-diugh",next:"a-màireach",past:{few:"o {0} là.",other:"o {0} là"},future:{few:"an {0} là.",other:"an {0} là"}},hour:{current:"am broinn uair",past:{few:"o {0} uair.",other:"o {0} uair"},future:{few:"an {0} uair.",other:"an {0} uair"}},minute:{current:"am broinn mion.",past:{one:"o {0} mhion.",two:"o {0} mhion.",other:"o {0} mion."},future:{one:"an {0} mhion.",two:"an {0} mhion.",other:"an {0} mion."}},second:{current:"an-dràsta",past:{two:"o {0} dhiog",few:"o {0} diog.",other:"o {0} diog"},future:{two:"an {0} dhiog",few:"an {0} diog.",other:"an {0} diog"}},now:"an-dràsta"}},function(e){e.exports={year:{previous:"an-uir.",current:"am bl.",next:"an ath-bhl.",past:{one:"-{0} bhl.",two:"-{0} bhl.",other:"-{0} bl."},future:{one:"+{0} bhl.",two:"+{0} bhl.",other:"+{0} bl."}},quarter:{previous:"c. ch.",current:"an c. seo",next:"ath-ch.",past:"-{0} c.",future:"+{0} c."},month:{previous:"mì. ch.",current:"am mì. seo",next:"ath-mhì.",past:{one:"-{0} mhì.",two:"-{0} mhì.",other:"-{0} mì."},future:{one:"+{0} mhì.",two:"+{0} mhì.",other:"+{0} mì."}},week:{previous:"sn. ch.",current:"an t-sn. seo",next:"ath-shn.",past:"-{0} sn.",future:"+{0} sn."},day:{previous:"an-dè",current:"an-diugh",next:"a-màireach",past:"-{0} là",future:"+{0} là"},hour:{current:"san uair",past:"-{0} u.",future:"+{0} u."},minute:{current:"sa mhion.",past:"-{0} m",future:"+{0} m"},second:{current:"an-dràsta",past:"-{0} d",future:"+{0} d"},now:"an-dràsta"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=Number(t[0])==e;return 1==e||11==e?"one":2==e||12==e?"two":r&&e>=3&&e<=10||r&&e>=13&&e<=19?"few":"other"}},function(e,t,r){e.exports={locale:"gu",long:r(105),short:r(106),narrow:r(107),quantify:r(108)}},function(e){e.exports={year:{previous:"ગયા વર્ષે",current:"આ વર્ષે",next:"આવતા વર્ષે",past:"{0} વર્ષ પહેલાં",future:"{0} વર્ષમાં"},quarter:{previous:"છેલ્લું ત્રિમાસિક",current:"આ ત્રિમાસિક",next:"પછીનું ત્રિમાસિક",past:"{0} ત્રિમાસિક પહેલાં",future:"{0} ત્રિમાસિકમાં"},month:{previous:"ગયા મહિને",current:"આ મહિને",next:"આવતા મહિને",past:"{0} મહિના પહેલાં",future:"{0} મહિનામાં"},week:{previous:"ગયા અઠવાડિયે",current:"આ અઠવાડિયે",next:"આવતા અઠવાડિયે",past:"{0} અઠવાડિયા પહેલાં",future:"{0} અઠવાડિયામાં"},day:{previous:"ગઈકાલે",current:"આજે",next:"આવતીકાલે",past:"{0} દિવસ પહેલાં",future:"{0} દિવસમાં"},hour:{current:"આ કલાક",past:"{0} કલાક પહેલાં",future:"{0} કલાકમાં"},minute:{current:"આ મિનિટ",past:"{0} મિનિટ પહેલાં",future:"{0} મિનિટમાં"},second:{current:"હમણાં",past:"{0} સેકંડ પહેલાં",future:"{0} સેકંડમાં"},now:"હમણાં"}},function(e){e.exports={year:{previous:"ગયા વર્ષે",current:"આ વર્ષે",next:"આવતા વર્ષે",past:"{0} વર્ષ પહેલાં",future:"{0} વર્ષમાં"},quarter:{previous:"છેલ્લું ત્રિમાસિક",current:"આ ત્રિમાસિક",next:"પછીનું ત્રિમાસિક",past:"{0} ત્રિમાસિક પહેલાં",future:"{0} ત્રિમાસિકમાં"},month:{previous:"ગયા મહિને",current:"આ મહિને",next:"આવતા મહિને",past:"{0} મહિના પહેલાં",future:"{0} મહિનામાં"},week:{previous:"ગયા અઠવાડિયે",current:"આ અઠવાડિયે",next:"આવતા અઠવાડિયે",past:"{0} અઠ. પહેલાં",future:"{0} અઠ. માં"},day:{previous:"ગઈકાલે",current:"આજે",next:"આવતીકાલે",past:"{0} દિવસ પહેલાં",future:"{0} દિવસમાં"},hour:{current:"આ કલાક",past:"{0} કલાક પહેલાં",future:"{0} કલાકમાં"},minute:{current:"આ મિનિટ",past:"{0} મિનિટ પહેલાં",future:"{0} મિનિટમાં"},second:{current:"હમણાં",past:"{0} સેકંડ પહેલાં",future:"{0} સેકંડમાં"},now:"હમણાં"}},function(e){e.exports={year:{previous:"ગયા વર્ષે",current:"આ વર્ષે",next:"આવતા વર્ષે",past:"{0} વર્ષ પહેલાં",future:"{0} વર્ષમાં"},quarter:{previous:"છેલ્લું ત્રિમાસિક",current:"આ ત્રિમાસિક",next:"પછીનું ત્રિમાસિક",past:"{0} ત્રિમાસિક પહેલાં",future:"{0} ત્રિમાસિકમાં"},month:{previous:"ગયા મહિને",current:"આ મહિને",next:"આવતા મહિને",past:"{0} મહિના પહેલાં",future:"{0} મહિનામાં"},week:{previous:"ગયા અઠવાડિયે",current:"આ અઠવાડિયે",next:"આવતા અઠવાડિયે",past:"{0} અઠ. પહેલાં",future:"{0} અઠ. માં"},day:{previous:"ગઈકાલે",current:"આજે",next:"આવતીકાલે",past:"{0} દિવસ પહેલાં",future:"{0} દિવસમાં"},hour:{current:"આ કલાક",past:"{0} કલાક પહેલાં",future:"{0} કલાકમાં"},minute:{current:"આ મિનિટ",past:"{0} મિનિટ પહેલાં",future:"{0} મિનિટમાં"},second:{current:"હમણાં",past:"{0} સેકંડ પહેલાં",future:"{0} સેકંડમાં"},now:"હમણાં"}},function(e,t){e.exports=function(e){return e>=0&&e<=1?"one":"other"}},function(e,t,r){e.exports={locale:"he",long:r(110),short:r(111),narrow:r(112),quantify:r(113)}},function(e){e.exports={year:{previous:"השנה שעברה",current:"השנה",next:"השנה הבאה",past:{one:"לפני שנה",two:"לפני שנתיים",many:"לפני {0} שנה",other:"לפני {0} שנים"},future:{one:"בעוד שנה",two:"בעוד שנתיים",many:"בעוד {0} שנה",other:"בעוד {0} שנים"}},quarter:{previous:"הרבעון הקודם",current:"רבעון זה",next:"הרבעון הבא",past:{one:"ברבעון הקודם",two:"לפני שני רבעונים",other:"לפני {0} רבעונים"},future:{one:"ברבעון הבא",two:"בעוד שני רבעונים",other:"בעוד {0} רבעונים"}},month:{previous:"החודש שעבר",current:"החודש",next:"החודש הבא",past:{one:"לפני חודש",two:"לפני חודשיים",other:"לפני {0} חודשים"},future:{one:"בעוד חודש",two:"בעוד חודשיים",other:"בעוד {0} חודשים"}},week:{previous:"השבוע שעבר",current:"השבוע",next:"השבוע הבא",past:{one:"לפני שבוע",two:"לפני שבועיים",other:"לפני {0} שבועות"},future:{one:"בעוד שבוע",two:"בעוד שבועיים",other:"בעוד {0} שבועות"}},day:{previous:"אתמול",current:"היום",next:"מחר",past:{one:"לפני יום {0}",two:"לפני יומיים",other:"לפני {0} ימים"},future:{one:"בעוד יום {0}",two:"בעוד יומיים",other:"בעוד {0} ימים"}},hour:{current:"בשעה זו",past:{one:"לפני שעה",two:"לפני שעתיים",other:"לפני {0} שעות"},future:{one:"בעוד שעה",two:"בעוד שעתיים",other:"בעוד {0} שעות"}},minute:{current:"בדקה זו",past:{one:"לפני דקה",two:"לפני שתי דקות",other:"לפני {0} דקות"},future:{one:"בעוד דקה",two:"בעוד שתי דקות",other:"בעוד {0} דקות"}},second:{current:"עכשיו",past:{one:"לפני שנייה",two:"לפני שתי שניות",other:"לפני {0} שניות"},future:{one:"בעוד שנייה",two:"בעוד שתי שניות",other:"בעוד {0} שניות"}},now:"עכשיו"}},function(e){e.exports={year:{previous:"השנה שעברה",current:"השנה",next:"השנה הבאה",past:{one:"לפני שנה",two:"לפני שנתיים",many:"לפני {0} שנה",other:"לפני {0} שנים"},future:{one:"בעוד שנה",two:"בעוד שנתיים",many:"בעוד {0} שנה",other:"בעוד {0} שנים"}},quarter:{previous:"הרבעון הקודם",current:"רבעון זה",next:"הרבעון הבא",past:{one:"ברבע׳ הקודם",two:"לפני שני רבע׳",other:"לפני {0} רבע׳"},future:{one:"ברבע׳ הבא",two:"בעוד שני רבע׳",other:"בעוד {0} רבע׳"}},month:{previous:"החודש שעבר",current:"החודש",next:"החודש הבא",past:{one:"לפני חודש",two:"לפני חודשיים",other:"לפני {0} חודשים"},future:{one:"בעוד חודש",two:"בעוד חודשיים",other:"בעוד {0} חודשים"}},week:{previous:"השבוע שעבר",current:"השבוע",next:"השבוע הבא",past:{one:"לפני שב׳",two:"לפני שבועיים",other:"לפני {0} שב׳"},future:{one:"בעוד שב׳",two:"בעוד שבועיים",other:"בעוד {0} שב׳"}},day:{previous:"אתמול",current:"היום",next:"מחר",past:{one:"אתמול",two:"לפני יומיים",other:"לפני {0} ימים"},future:{one:"מחר",two:"בעוד יומיים",other:"בעוד {0} ימים"}},hour:{current:"בשעה זו",past:{one:"לפני שעה",two:"לפני שעתיים",other:"לפני {0} שע׳"},future:{one:"בעוד שעה",two:"בעוד שעתיים",other:"בעוד {0} שע׳"}},minute:{current:"בדקה זו",past:{one:"לפני דקה",other:"לפני {0} דק׳"},future:{one:"בעוד דקה",two:"בעוד שתי דק׳",other:"בעוד {0} דק׳"}},second:{current:"עכשיו",past:{one:"לפני שנ׳",two:"לפני שתי שנ׳",other:"לפני {0} שנ׳"},future:{one:"בעוד שנ׳",two:"בעוד שתי שנ׳",other:"בעוד {0} שנ׳"}},now:"עכשיו"}},function(e){e.exports={year:{previous:"השנה שעברה",current:"השנה",next:"השנה הבאה",past:{one:"לפני שנה",two:"לפני שנתיים",many:"לפני {0} שנה",other:"לפני {0} שנים"},future:{one:"בעוד שנה",two:"בעוד שנתיים",many:"בעוד {0} שנה",other:"בעוד {0} שנים"}},quarter:{previous:"הרבעון הקודם",current:"רבעון זה",next:"הרבעון הבא",past:{one:"ברבע׳ הקודם",two:"לפני שני רבע׳",other:"לפני {0} רבע׳"},future:{one:"ברבע׳ הבא",two:"בעוד שני רבע׳",other:"בעוד {0} רבע׳"}},month:{previous:"החודש שעבר",current:"החודש",next:"החודש הבא",past:{one:"לפני חו׳",two:"לפני חודשיים",other:"לפני {0} חו׳"},future:{one:"בעוד חו׳",two:"בעוד חודשיים",other:"בעוד {0} חו׳"}},week:{previous:"השבוע שעבר",current:"השבוע",next:"השבוע הבא",past:{one:"לפני שבוע",two:"לפני שבועיים",other:"לפני {0} שב׳"},future:{one:"בעוד שב׳",two:"בעוד שבועיים",other:"בעוד {0} שב׳"}},day:{previous:"אתמול",current:"היום",next:"מחר",past:{one:"אתמול",two:"לפני יומיים",other:"לפני {0} ימים"},future:{one:"מחר",two:"בעוד יומיים",other:"בעוד {0} ימים"}},hour:{current:"בשעה זו",past:{one:"לפני שעה",two:"לפני שעתיים",other:"לפני {0} שע׳"},future:{one:"בעוד שעה",two:"בעוד שעתיים",other:"בעוד {0} שע׳"}},minute:{current:"בדקה זו",past:{one:"לפני דקה",two:"לפני שתי דק׳",other:"לפני {0} דק׳"},future:{one:"בעוד דקה",two:"בעוד שתי דק׳",other:"בעוד {0} דק׳"}},second:{current:"עכשיו",past:{one:"לפני שנ׳",two:"לפני שתי שנ׳",other:"לפני {0} שנ׳"},future:{one:"בעוד שנ׳",two:"בעוד שתי שנ׳",other:"בעוד {0} שנ׳"}},now:"עכשיו"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=!t[1],u=Number(t[0])==e,a=u&&t[0].slice(-1);return 1==e&&n?"one":2==r&&n?"two":n&&(e<0||e>10)&&u&&0==a?"many":"other"}},function(e,t,r){e.exports={locale:"hi",long:r(115),short:r(116),narrow:r(117),quantify:r(118)}},function(e){e.exports={year:{previous:"पिछला वर्ष",current:"इस वर्ष",next:"अगला वर्ष",past:"{0} वर्ष पहले",future:"{0} वर्ष में"},quarter:{previous:"अंतिम तिमाही",current:"इस तिमाही",next:"अगली तिमाही",past:"{0} तिमाही पहले",future:{one:"{0} तिमाही में",other:"{0} तिमाहियों में"}},month:{previous:"पिछला माह",current:"इस माह",next:"अगला माह",past:"{0} माह पहले",future:"{0} माह में"},week:{previous:"पिछला सप्ताह",current:"इस सप्ताह",next:"अगला सप्ताह",past:"{0} सप्ताह पहले",future:"{0} सप्ताह में"},day:{previous:"कल",current:"आज",next:"कल",past:"{0} दिन पहले",future:"{0} दिन में"},hour:{current:"यह घंटा",past:"{0} घंटे पहले",future:"{0} घंटे में"},minute:{current:"यह मिनट",past:"{0} मिनट पहले",future:"{0} मिनट में"},second:{current:"अब",past:"{0} सेकंड पहले",future:"{0} सेकंड में"},now:"अब"}},function(e){e.exports={year:{previous:"पिछला वर्ष",current:"इस वर्ष",next:"अगला वर्ष",past:"{0} वर्ष पहले",future:"{0} वर्ष में"},quarter:{previous:"अंतिम तिमाही",current:"इस तिमाही",next:"अगली तिमाही",past:{one:"{0} तिमाही पहले",other:"{0} तिमाहियों पहले"},future:{one:"{0} तिमाही में",other:"{0} तिमाहियों में"}},month:{previous:"पिछला माह",current:"इस माह",next:"अगला माह",past:"{0} माह पहले",future:"{0} माह में"},week:{previous:"पिछला सप्ताह",current:"इस सप्ताह",next:"अगला सप्ताह",past:"{0} सप्ताह पहले",future:"{0} सप्ताह में"},day:{previous:"कल",current:"आज",next:"कल",past:"{0} दिन पहले",future:"{0} दिन में"},hour:{current:"यह घंटा",past:"{0} घं॰ पहले",future:"{0} घं॰ में"},minute:{current:"यह मिनट",past:"{0} मि॰ पहले",future:"{0} मि॰ में"},second:{current:"अब",past:"{0} से॰ पहले",future:"{0} से॰ में"},now:"अब"}},function(e){e.exports={year:{previous:"पिछला वर्ष",current:"इस वर्ष",next:"अगला वर्ष",past:"{0} वर्ष पहले",future:"{0} वर्ष में"},quarter:{previous:"अंतिम तिमाही",current:"इस तिमाही",next:"अगली तिमाही",past:"{0} ति॰ पहले",future:"{0} ति॰ में"},month:{previous:"पिछला माह",current:"इस माह",next:"अगला माह",past:"{0} माह पहले",future:"{0} माह में"},week:{previous:"पिछला सप्ताह",current:"इस सप्ताह",next:"अगला सप्ताह",past:"{0} सप्ताह पहले",future:"{0} सप्ताह में"},day:{previous:"कल",current:"आज",next:"कल",past:"{0} दिन पहले",future:"{0} दिन में"},hour:{current:"यह घंटा",past:"{0} घं॰ पहले",future:"{0} घं॰ में"},minute:{current:"यह मिनट",past:"{0} मि॰ पहले",future:"{0} मि॰ में"},second:{current:"अब",past:"{0} से॰ पहले",future:"{0} से॰ में"},now:"अब"}},function(e,t){e.exports=function(e){return e>=0&&e<=1?"one":"other"}},function(e,t,r){e.exports={locale:"hr",long:r(120),short:r(121),narrow:r(122),quantify:r(123)}},function(e){e.exports={year:{previous:"prošle godine",current:"ove godine",next:"sljedeće godine",past:{one:"prije {0} godinu",few:"prije {0} godine",other:"prije {0} godina"},future:{one:"za {0} godinu",few:"za {0} godine",other:"za {0} godina"}},quarter:{previous:"prošli kvartal",current:"ovaj kvartal",next:"sljedeći kvartal",past:{one:"prije {0} kvartal",other:"prije {0} kvartala"},future:{one:"za {0} kvartal",other:"za {0} kvartala"}},month:{previous:"prošli mjesec",current:"ovaj mjesec",next:"sljedeći mjesec",past:{one:"prije {0} mjesec",few:"prije {0} mjeseca",other:"prije {0} mjeseci"},future:{one:"za {0} mjesec",few:"za {0} mjeseca",other:"za {0} mjeseci"}},week:{previous:"prošli tjedan",current:"ovaj tjedan",next:"sljedeći tjedan",past:{one:"prije {0} tjedan",few:"prije {0} tjedna",other:"prije {0} tjedana"},future:{one:"za {0} tjedan",few:"za {0} tjedna",other:"za {0} tjedana"}},day:{previous:"jučer",current:"danas",next:"sutra",past:{one:"prije {0} dan",other:"prije {0} dana"},future:{one:"za {0} dan",other:"za {0} dana"}},hour:{current:"ovaj sat",past:{one:"prije {0} sat",few:"prije {0} sata",other:"prije {0} sati"},future:{one:"za {0} sat",few:"za {0} sata",other:"za {0} sati"}},minute:{current:"ova minuta",past:{one:"prije {0} minutu",few:"prije {0} minute",other:"prije {0} minuta"},future:{one:"za {0} minutu",few:"za {0} minute",other:"za {0} minuta"}},second:{current:"sad",past:{one:"prije {0} sekundu",few:"prije {0} sekunde",other:"prije {0} sekundi"},future:{one:"za {0} sekundu",few:"za {0} sekunde",other:"za {0} sekundi"}},now:"sad"}},function(e){e.exports={year:{previous:"prošle god.",current:"ove god.",next:"sljedeće god.",past:"prije {0} g.",future:"za {0} g."},quarter:{previous:"prošli kv.",current:"ovaj kv.",next:"sljedeći kv.",past:"prije {0} kv.",future:"za {0} kv."},month:{previous:"prošli mj.",current:"ovaj mj.",next:"sljedeći mj.",past:"prije {0} mj.",future:"za {0} mj."},week:{previous:"prošli tj.",current:"ovaj tj.",next:"sljedeći tj.",past:"prije {0} tj.",future:"za {0} tj."},day:{previous:"jučer",current:"danas",next:"sutra",past:{one:"prije {0} dan",other:"prije {0} dana"},future:{one:"za {0} dan",other:"za {0} dana"}},hour:{current:"ovaj sat",past:"prije {0} h",future:"za {0} h"},minute:{current:"ova minuta",past:"prije {0} min",future:"za {0} min"},second:{current:"sad",past:"prije {0} s",future:"za {0} s"},now:"sad"}},function(e){e.exports={year:{previous:"prošle g.",current:"ove g.",next:"sljedeće g.",past:"prije {0} g.",future:"za {0} g."},quarter:{previous:"prošli kv.",current:"ovaj kv.",next:"sljedeći kv.",past:"prije {0} kv.",future:"za {0} kv."},month:{previous:"prošli mj.",current:"ovaj mj.",next:"sljedeći mj.",past:"prije {0} mj.",future:"za {0} mj."},week:{previous:"prošli tj.",current:"ovaj tj.",next:"sljedeći tj.",past:"prije {0} tj.",future:"za {0} tj."},day:{previous:"jučer",current:"danas",next:"sutra",past:"prije {0} d",future:"za {0} d"},hour:{current:"ovaj sat",past:"prije {0} h",future:"za {0} h"},minute:{current:"ova minuta",past:"prije {0} min",future:"za {0} min"},second:{current:"sad",past:"prije {0} s",future:"za {0} s"},now:"sad"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=t[1]||"",u=!t[1],a=r.slice(-1),o=r.slice(-2),s=n.slice(-1),i=n.slice(-2);return u&&1==a&&11!=o||1==s&&11!=i?"one":u&&a>=2&&a<=4&&(o<12||o>14)||s>=2&&s<=4&&(i<12||i>14)?"few":"other"}},function(e,t,r){e.exports={locale:"hu",long:r(125),short:r(126),narrow:r(127),quantify:r(128)}},function(e){e.exports={year:{previous:"előző év",current:"ez az év",next:"következő év",past:"{0} évvel ezelőtt",future:"{0} év múlva"},quarter:{previous:"előző negyedév",current:"ez a negyedév",next:"következő negyedév",past:"{0} negyedévvel ezelőtt",future:"{0} negyedév múlva"},month:{previous:"előző hónap",current:"ez a hónap",next:"következő hónap",past:"{0} hónappal ezelőtt",future:"{0} hónap múlva"},week:{previous:"előző hét",current:"ez a hét",next:"következő hét",past:"{0} héttel ezelőtt",future:"{0} hét múlva"},day:{previous:"tegnap",current:"ma",next:"holnap",past:"{0} nappal ezelőtt",future:"{0} nap múlva"},hour:{current:"ebben az órában",past:"{0} órával ezelőtt",future:"{0} óra múlva"},minute:{current:"ebben a percben",past:"{0} perccel ezelőtt",future:"{0} perc múlva"},second:{current:"most",past:"{0} másodperccel ezelőtt",future:"{0} másodperc múlva"},now:"most"}},function(e){e.exports={year:{previous:"előző év",current:"ez az év",next:"következő év",past:"{0} évvel ezelőtt",future:"{0} év múlva"},quarter:{previous:"előző negyedév",current:"ez a negyedév",next:"következő negyedév",past:"{0} negyedévvel ezelőtt",future:"{0} negyedév múlva"},month:{previous:"előző hónap",current:"ez a hónap",next:"következő hónap",past:"{0} hónappal ezelőtt",future:"{0} hónap múlva"},week:{previous:"előző hét",current:"ez a hét",next:"következő hét",past:"{0} héttel ezelőtt",future:"{0} hét múlva"},day:{previous:"tegnap",current:"ma",next:"holnap",past:"{0} napja",future:"{0} nap múlva"},hour:{current:"ebben az órában",past:"{0} órával ezelőtt",future:"{0} óra múlva"},minute:{current:"ebben a percben",past:"{0} perccel ezelőtt",future:"{0} perc múlva"},second:{current:"most",past:"{0} másodperccel ezelőtt",future:"{0} másodperc múlva"},now:"most"}},function(e){e.exports={year:{previous:"előző év",current:"ez az év",next:"következő év",past:"{0} évvel ezelőtt",future:"{0} év múlva"},quarter:{previous:"előző negyedév",current:"ez a negyedév",next:"következő negyedév",past:"{0} negyedévvel ezelőtt",future:"{0} n.év múlva"},month:{previous:"előző hónap",current:"ez a hónap",next:"következő hónap",past:"{0} hónappal ezelőtt",future:"{0} hónap múlva"},week:{previous:"előző hét",current:"ez a hét",next:"következő hét",past:"{0} héttel ezelőtt",future:"{0} hét múlva"},day:{previous:"tegnap",current:"ma",next:"holnap",past:"{0} napja",future:"{0} nap múlva"},hour:{current:"ebben az órában",past:"{0} órával ezelőtt",future:"{0} óra múlva"},minute:{current:"ebben a percben",past:"{0} perccel ezelőtt",future:"{0} perc múlva"},second:{current:"most",past:"{0} másodperccel ezelőtt",future:"{0} másodperc múlva"},now:"most"}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t,r){e.exports={locale:"id",long:r(130),short:r(131),narrow:r(132)}},function(e){e.exports={year:{previous:"tahun lalu",current:"tahun ini",next:"tahun depan",past:"{0} tahun yang lalu",future:"dalam {0} tahun"},quarter:{previous:"Kuartal lalu",current:"kuartal ini",next:"kuartal berikutnya",past:"{0} kuartal yang lalu",future:"dalam {0} kuartal"},month:{previous:"bulan lalu",current:"bulan ini",next:"bulan berikutnya",past:"{0} bulan yang lalu",future:"dalam {0} bulan"},week:{previous:"minggu lalu",current:"minggu ini",next:"minggu depan",past:"{0} minggu yang lalu",future:"dalam {0} minggu"},day:{previous:"kemarin",current:"hari ini",next:"besok",past:"{0} hari yang lalu",future:"dalam {0} hari"},hour:{current:"jam ini",past:"{0} jam yang lalu",future:"dalam {0} jam"},minute:{current:"menit ini",past:"{0} menit yang lalu",future:"dalam {0} menit"},second:{current:"sekarang",past:"{0} detik yang lalu",future:"dalam {0} detik"},now:"sekarang"}},function(e){e.exports={year:{previous:"tahun lalu",current:"tahun ini",next:"tahun depan",past:"{0} thn lalu",future:"dlm {0} thn"},quarter:{previous:"Kuartal lalu",current:"kuartal ini",next:"kuartal berikutnya",past:"{0} krtl. lalu",future:"dlm {0} krtl."},month:{previous:"bulan lalu",current:"bulan ini",next:"bulan berikutnya",past:"{0} bln lalu",future:"dlm {0} bln"},week:{previous:"minggu lalu",current:"minggu ini",next:"minggu depan",past:"{0} mgg lalu",future:"dlm {0} mgg"},day:{previous:"kemarin",current:"hari ini",next:"besok",past:"{0} h lalu",future:"dalam {0} h"},hour:{current:"jam ini",past:"{0} jam lalu",future:"dalam {0} jam"},minute:{current:"menit ini",past:"{0} mnt lalu",future:"dlm {0} mnt"},second:{current:"sekarang",past:"{0} dtk lalu",future:"dlm {0} dtk"},now:"sekarang"}},function(e){e.exports={year:{previous:"tahun lalu",current:"tahun ini",next:"tahun depan",past:"{0} thn lalu",future:"dlm {0} thn"},quarter:{previous:"Kuartal lalu",current:"kuartal ini",next:"kuartal berikutnya",past:"{0} krtl. lalu",future:"dlm {0} krtl."},month:{previous:"bulan lalu",current:"bulan ini",next:"bulan berikutnya",past:"{0} bln lalu",future:"dlm {0} bln"},week:{previous:"minggu lalu",current:"minggu ini",next:"minggu depan",past:"{0} mgg lalu",future:"dlm {0} mgg"},day:{previous:"kemarin",current:"hari ini",next:"besok",past:"{0} h lalu",future:"dalam {0} h"},hour:{current:"jam ini",past:"{0} jam lalu",future:"dalam {0} jam"},minute:{current:"menit ini",past:"{0} mnt lalu",future:"dlm {0} mnt"},second:{current:"sekarang",past:"{0} dtk lalu",future:"dlm {0} dtk"},now:"sekarang"}},function(e,t,r){e.exports={locale:"it",long:r(134),short:r(135),narrow:r(136),quantify:r(137)}},function(e){e.exports={year:{previous:"anno scorso",current:"quest’anno",next:"anno prossimo",past:{one:"{0} anno fa",other:"{0} anni fa"},future:{one:"tra {0} anno",other:"tra {0} anni"}},quarter:{previous:"trimestre scorso",current:"questo trimestre",next:"trimestre prossimo",past:{one:"{0} trimestre fa",other:"{0} trimestri fa"},future:{one:"tra {0} trimestre",other:"tra {0} trimestri"}},month:{previous:"mese scorso",current:"questo mese",next:"mese prossimo",past:{one:"{0} mese fa",other:"{0} mesi fa"},future:{one:"tra {0} mese",other:"tra {0} mesi"}},week:{previous:"settimana scorsa",current:"questa settimana",next:"settimana prossima",past:{one:"{0} settimana fa",other:"{0} settimane fa"},future:{one:"tra {0} settimana",other:"tra {0} settimane"}},day:{previous:"ieri",current:"oggi",next:"domani",past:{one:"{0} giorno fa",other:"{0} giorni fa"},future:{one:"tra {0} giorno",other:"tra {0} giorni"}},hour:{current:"quest’ora",past:{one:"{0} ora fa",other:"{0} ore fa"},future:{one:"tra {0} ora",other:"tra {0} ore"}},minute:{current:"questo minuto",past:{one:"{0} minuto fa",other:"{0} minuti fa"},future:{one:"tra {0} minuto",other:"tra {0} minuti"}},second:{current:"ora",past:{one:"{0} secondo fa",other:"{0} secondi fa"},future:{one:"tra {0} secondo",other:"tra {0} secondi"}},now:"ora"}},function(e){e.exports={year:{previous:"anno scorso",current:"quest’anno",next:"anno prossimo",past:{one:"{0} anno fa",other:"{0} anni fa"},future:{one:"tra {0} anno",other:"tra {0} anni"}},quarter:{previous:"trimestre scorso",current:"questo trimestre",next:"trimestre prossimo",past:"{0} trim. fa",future:"tra {0} trim."},month:{previous:"mese scorso",current:"questo mese",next:"mese prossimo",past:{one:"{0} mese fa",other:"{0} mesi fa"},future:{one:"tra {0} mese",other:"tra {0} mesi"}},week:{previous:"settimana scorsa",current:"questa settimana",next:"settimana prossima",past:"{0} sett. fa",future:"tra {0} sett."},day:{previous:"ieri",current:"oggi",next:"domani",past:{one:"{0} g fa",other:"{0} gg fa"},future:{one:"tra {0} g",other:"tra {0} gg"}},hour:{current:"quest’ora",past:"{0} h fa",future:"tra {0} h"},minute:{current:"questo minuto",past:"{0} min fa",future:"tra {0} min"},second:{current:"ora",past:{one:"{0} s fa",other:"{0} sec. fa"},future:{one:"tra {0} s",other:"tra {0} sec."}},now:"ora"}},function(e){e.exports={year:{previous:"anno scorso",current:"quest’anno",next:"anno prossimo",past:{one:"{0} anno fa",other:"{0} anni fa"},future:{one:"tra {0} anno",other:"tra {0} anni"}},quarter:{previous:"trimestre scorso",current:"questo trimestre",next:"trimestre prossimo",past:"{0} trim. fa",future:"tra {0} trim."},month:{previous:"mese scorso",current:"questo mese",next:"mese prossimo",past:{one:"{0} mese fa",other:"{0} mesi fa"},future:{one:"tra {0} mese",other:"tra {0} mesi"}},week:{previous:"settimana scorsa",current:"questa settimana",next:"settimana prossima",past:"{0} sett. fa",future:"tra {0} sett."},day:{previous:"ieri",current:"oggi",next:"domani",past:{one:"{0} g fa",other:"{0} gg fa"},future:{one:"tra {0} g",other:"tra {0} gg"}},hour:{current:"quest’ora",past:"{0} h fa",future:"tra {0} h"},minute:{current:"questo minuto",past:"{0} min fa",future:"tra {0} min"},second:{current:"ora",past:"{0} s fa",future:"tra {0} s"},now:"ora"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"ja",long:r(139),short:r(140),narrow:r(141)}},function(e){e.exports={year:{previous:"昨年",current:"今年",next:"翌年",past:"{0} 年前",future:"{0} 年後"},quarter:{previous:"前四半期",current:"今四半期",next:"翌四半期",past:"{0} 四半期前",future:"{0} 四半期後"},month:{previous:"先月",current:"今月",next:"翌月",past:"{0} か月前",future:"{0} か月後"},week:{previous:"先週",current:"今週",next:"翌週",past:"{0} 週間前",future:"{0} 週間後"},day:{previous:"昨日",current:"今日",next:"明日",past:"{0} 日前",future:"{0} 日後"},hour:{current:"1 時間以内",past:"{0} 時間前",future:"{0} 時間後"},minute:{current:"1 分以内",past:"{0} 分前",future:"{0} 分後"},second:{current:"今",past:"{0} 秒前",future:"{0} 秒後"},now:"今"}},function(e){e.exports={year:{previous:"昨年",current:"今年",next:"翌年",past:"{0} 年前",future:"{0} 年後"},quarter:{previous:"前四半期",current:"今四半期",next:"翌四半期",past:"{0} 四半期前",future:"{0} 四半期後"},month:{previous:"先月",current:"今月",next:"翌月",past:"{0} か月前",future:"{0} か月後"},week:{previous:"先週",current:"今週",next:"翌週",past:"{0} 週間前",future:"{0} 週間後"},day:{previous:"昨日",current:"今日",next:"明日",past:"{0} 日前",future:"{0} 日後"},hour:{current:"1 時間以内",past:"{0} 時間前",future:"{0} 時間後"},minute:{current:"1 分以内",past:"{0} 分前",future:"{0} 分後"},second:{current:"今",past:"{0} 秒前",future:"{0} 秒後"},now:"今"}},function(e){e.exports={year:{previous:"昨年",current:"今年",next:"翌年",past:"{0}年前",future:"{0}年後"},quarter:{previous:"前四半期",current:"今四半期",next:"翌四半期",past:"{0}四半期前",future:"{0}四半期後"},month:{previous:"先月",current:"今月",next:"翌月",past:"{0}か月前",future:"{0}か月後"},week:{previous:"先週",current:"今週",next:"翌週",past:"{0}週間前",future:"{0}週間後"},day:{previous:"昨日",current:"今日",next:"明日",past:"{0}日前",future:"{0}日後"},hour:{current:"1 時間以内",past:"{0}時間前",future:"{0}時間後"},minute:{current:"1 分以内",past:"{0}分前",future:"{0}分後"},second:{current:"今",past:"{0}秒前",future:"{0}秒後"},now:"今"}},function(e,t,r){e.exports={locale:"lt",long:r(143),short:r(144),narrow:r(145),quantify:r(146)}},function(e){e.exports={year:{previous:"praėjusiais metais",current:"šiais metais",next:"kitais metais",past:{one:"prieš {0} metus",few:"prieš {0} metus",other:"prieš {0} metų"},future:"po {0} metų"},quarter:{previous:"praėjęs ketvirtis",current:"šis ketvirtis",next:"kitas ketvirtis",past:{one:"prieš {0} ketvirtį",few:"prieš {0} ketvirčius",many:"prieš {0} ketvirčio",other:"prieš {0} ketvirčių"},future:{one:"po {0} ketvirčio",many:"po {0} ketvirčio",other:"po {0} ketvirčių"}},month:{previous:"praėjusį mėnesį",current:"šį mėnesį",next:"kitą mėnesį",past:{one:"prieš {0} mėnesį",few:"prieš {0} mėnesius",many:"prieš {0} mėnesio",other:"prieš {0} mėnesių"},future:{one:"po {0} mėnesio",many:"po {0} mėnesio",other:"po {0} mėnesių"}},week:{previous:"praėjusią savaitę",current:"šią savaitę",next:"kitą savaitę",past:{one:"prieš {0} savaitę",few:"prieš {0} savaites",many:"prieš {0} savaitės",other:"prieš {0} savaičių"},future:{one:"po {0} savaitės",many:"po {0} savaitės",other:"po {0} savaičių"}},day:{previous:"vakar",current:"šiandien",next:"rytoj",past:{one:"prieš {0} dieną",few:"prieš {0} dienas",many:"prieš {0} dienos",other:"prieš {0} dienų"},future:{one:"po {0} dienos",many:"po {0} dienos",other:"po {0} dienų"}},hour:{current:"šią valandą",past:{one:"prieš {0} valandą",few:"prieš {0} valandas",many:"prieš {0} valandos",other:"prieš {0} valandų"},future:{one:"po {0} valandos",many:"po {0} valandos",other:"po {0} valandų"}},minute:{current:"šią minutę",past:{one:"prieš {0} minutę",few:"prieš {0} minutes",many:"prieš {0} minutės",other:"prieš {0} minučių"},future:{one:"po {0} minutės",many:"po {0} minutės",other:"po {0} minučių"}},second:{current:"dabar",past:{one:"prieš {0} sekundę",few:"prieš {0} sekundes",many:"prieš {0} sekundės",other:"prieš {0} sekundžių"},future:{one:"po {0} sekundės",many:"po {0} sekundės",other:"po {0} sekundžių"}},now:"dabar"}},function(e){e.exports={year:{previous:"praėjusiais metais",current:"šiais metais",next:"kitais metais",past:"prieš {0} m.",future:"po {0} m."},quarter:{previous:"praėjęs ketvirtis",current:"šis ketvirtis",next:"kitas ketvirtis",past:"prieš {0} ketv.",future:"po {0} ketv."},month:{previous:"praėjusį mėnesį",current:"šį mėnesį",next:"kitą mėnesį",past:"prieš {0} mėn.",future:"po {0} mėn."},week:{previous:"praėjusią savaitę",current:"šią savaitę",next:"kitą savaitę",past:"prieš {0} sav.",future:"po {0} sav."},day:{previous:"vakar",current:"šiandien",next:"rytoj",past:"prieš {0} d.",future:"po {0} d."},hour:{current:"šią valandą",past:"prieš {0} val.",future:"po {0} val."},minute:{current:"šią minutę",past:"prieš {0} min.",future:"po {0} min."},second:{current:"dabar",past:"prieš {0} sek.",future:"po {0} sek."},now:"dabar"}},function(e){e.exports={year:{previous:"praėjusiais metais",current:"šiais metais",next:"kitais metais",past:"prieš {0} m.",future:"po {0} m."},quarter:{previous:"praėjęs ketvirtis",current:"šis ketvirtis",next:"kitas ketvirtis",past:"prieš {0} ketv.",future:"po {0} ketv."},month:{previous:"praėjusį mėnesį",current:"šį mėnesį",next:"kitą mėnesį",past:"prieš {0} mėn.",future:"po {0} mėn."},week:{previous:"praėjusią savaitę",current:"šią savaitę",next:"kitą savaitę",past:"prieš {0} sav.",future:"po {0} sav."},day:{previous:"vakar",current:"šiandien",next:"rytoj",past:"prieš {0} d.",future:"po {0} d."},hour:{current:"šią valandą",past:"prieš {0} val.",future:"po {0} val."},minute:{current:"šią minutę",past:"prieš {0} min.",future:"po {0} min."},second:{current:"dabar",past:"prieš {0} s",future:"po {0} s"},now:"dabar"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[1]||"",n=Number(t[0])==e,u=n&&t[0].slice(-1),a=n&&t[0].slice(-2);return 1==u&&(a<11||a>19)?"one":u>=2&&u<=9&&(a<11||a>19)?"few":0!=r?"many":"other"}},function(e,t,r){e.exports={locale:"lv",long:r(148),short:r(149),narrow:r(150),quantify:r(151)}},function(e){e.exports={year:{previous:"pagājušajā gadā",current:"šajā gadā",next:"nākamajā gadā",past:{one:"pirms {0} gada",other:"pirms {0} gadiem"},future:{one:"pēc {0} gada",other:"pēc {0} gadiem"}},quarter:{previous:"pēdējais ceturksnis",current:"šis ceturksnis",next:"nākamais ceturksnis",past:{one:"pirms {0} ceturkšņa",other:"pirms {0} ceturkšņiem"},future:{one:"pēc {0} ceturkšņa",other:"pēc {0} ceturkšņiem"}},month:{previous:"pagājušajā mēnesī",current:"šajā mēnesī",next:"nākamajā mēnesī",past:{one:"pirms {0} mēneša",other:"pirms {0} mēnešiem"},future:{one:"pēc {0} mēneša",other:"pēc {0} mēnešiem"}},week:{previous:"pagājušajā nedēļā",current:"šajā nedēļā",next:"nākamajā nedēļā",past:{one:"pirms {0} nedēļas",other:"pirms {0} nedēļām"},future:{one:"pēc {0} nedēļas",other:"pēc {0} nedēļām"}},day:{previous:"vakar",current:"šodien",next:"rīt",past:{one:"pirms {0} dienas",other:"pirms {0} dienām"},future:{one:"pēc {0} dienas",other:"pēc {0} dienām"}},hour:{current:"šajā stundā",past:{one:"pirms {0} stundas",other:"pirms {0} stundām"},future:{one:"pēc {0} stundas",other:"pēc {0} stundām"}},minute:{current:"šajā minūtē",past:{one:"pirms {0} minūtes",other:"pirms {0} minūtēm"},future:{one:"pēc {0} minūtes",other:"pēc {0} minūtēm"}},second:{current:"tagad",past:{one:"pirms {0} sekundes",other:"pirms {0} sekundēm"},future:{one:"pēc {0} sekundes",other:"pēc {0} sekundēm"}},now:"tagad"}},function(e){e.exports={year:{previous:"pagājušajā gadā",current:"šajā gadā",next:"nākamajā gadā",past:"pirms {0} g.",future:"pēc {0} g."},quarter:{previous:"pēdējais ceturksnis",current:"šis ceturksnis",next:"nākamais ceturksnis",past:"pirms {0} cet.",future:"pēc {0} cet."},month:{previous:"pagājušajā mēnesī",current:"šajā mēnesī",next:"nākamajā mēnesī",past:"pirms {0} mēn.",future:"pēc {0} mēn."},week:{previous:"pagājušajā nedēļā",current:"šajā nedēļā",next:"nākamajā nedēļā",past:"pirms {0} ned.",future:"pēc {0} ned."},day:{previous:"vakar",current:"šodien",next:"rīt",past:{one:"pirms {0} d.",other:"pirms {0} d."},future:{one:"pēc {0} d.",other:"pēc {0} d."}},hour:{current:"šajā stundā",past:"pirms {0} st.",future:"pēc {0} st."},minute:{current:"šajā minūtē",past:"pirms {0} min.",future:"pēc {0} min."},second:{current:"tagad",past:"pirms {0} sek.",future:"pēc {0} sek."},now:"tagad"}},function(e){e.exports={year:{previous:"pagājušajā gadā",current:"šajā gadā",next:"nākamajā gadā",past:"pirms {0} g.",future:"pēc {0} g."},quarter:{previous:"pēdējais ceturksnis",current:"šis ceturksnis",next:"nākamais ceturksnis",past:"pirms {0} cet.",future:"pēc {0} cet."},month:{previous:"pagājušajā mēnesī",current:"šajā mēnesī",next:"nākamajā mēnesī",past:"pirms {0} mēn.",future:"pēc {0} mēn."},week:{previous:"pagājušajā nedēļā",current:"šajā nedēļā",next:"nākamajā nedēļā",past:"pirms {0} ned.",future:"pēc {0} ned."},day:{previous:"vakar",current:"šodien",next:"rīt",past:{one:"pirms {0} d.",other:"pirms {0} d."},future:{one:"pēc {0} d.",other:"pēc {0} d."}},hour:{current:"šajā stundā",past:"pirms {0} h",future:"pēc {0} h"},minute:{current:"šajā minūtē",past:"pirms {0} min",future:{one:"pēc {0} min",other:"pēc {0} min"}},second:{current:"tagad",past:{one:"pirms {0} s",other:"pirms {0} s"},future:"pēc {0} s"},now:"tagad"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[1]||"",n=r.length,u=Number(t[0])==e,a=u&&t[0].slice(-1),o=u&&t[0].slice(-2),s=r.slice(-2),i=r.slice(-1);return u&&0==a||o>=11&&o<=19||2==n&&s>=11&&s<=19?"zero":1==a&&11!=o||2==n&&1==i&&11!=s||2!=n&&1==i?"one":"other"}},function(e,t,r){e.exports={locale:"ml",long:r(153),short:r(154),narrow:r(155),quantify:r(156)}},function(e){e.exports={year:{previous:"കഴിഞ്ഞ വർഷം",current:"ഈ വർ‌ഷം",next:"അടുത്തവർഷം",past:"{0} വർഷം മുമ്പ്",future:"{0} വർഷത്തിൽ"},quarter:{previous:"കഴിഞ്ഞ പാദം",current:"ഈ പാദം",next:"അടുത്ത പാദം",past:"{0} പാദം മുമ്പ്",future:"{0} പാദത്തിൽ"},month:{previous:"കഴിഞ്ഞ മാസം",current:"ഈ മാസം",next:"അടുത്ത മാസം",past:"{0} മാസം മുമ്പ്",future:"{0} മാസത്തിൽ"},week:{previous:"കഴിഞ്ഞ ആഴ്‌ച",current:"ഈ ആഴ്ച",next:"അടുത്ത ആഴ്ച",past:"{0} ആഴ്ച മുമ്പ്",future:"{0} ആഴ്ചയിൽ"},day:{previous:"ഇന്നലെ",current:"ഇന്ന്",next:"നാളെ",past:"{0} ദിവസം മുമ്പ്",future:"{0} ദിവസത്തിൽ"},hour:{current:"ഈ മണിക്കൂറിൽ",past:"{0} മണിക്കൂർ മുമ്പ്",future:"{0} മണിക്കൂറിൽ"},minute:{current:"ഈ മിനിറ്റിൽ",past:"{0} മിനിറ്റ് മുമ്പ്",future:"{0} മിനിറ്റിൽ"},second:{current:"ഇപ്പോൾ",past:"{0} സെക്കൻഡ് മുമ്പ്",future:"{0} സെക്കൻഡിൽ"},now:"ഇപ്പോൾ"}},function(e){e.exports={year:{previous:"കഴിഞ്ഞ വർഷം",current:"ഈ വർ‌ഷം",next:"അടുത്തവർഷം",past:"{0} വർഷം മുമ്പ്",future:"{0} വർഷത്തിൽ"},quarter:{previous:"കഴിഞ്ഞ പാദം",current:"ഈ പാദം",next:"അടുത്ത പാദം",past:"{0} പാദം മുമ്പ്",future:"{0} പാദത്തിൽ"},month:{previous:"കഴിഞ്ഞ മാസം",current:"ഈ മാസം",next:"അടുത്ത മാസം",past:"{0} മാസം മുമ്പ്",future:"{0} മാസത്തിൽ"},week:{previous:"കഴിഞ്ഞ ആഴ്‌ച",current:"ഈ ആഴ്ച",next:"അടുത്ത ആഴ്ച",past:"{0} ആഴ്ച മുമ്പ്",future:"{0} ആഴ്ചയിൽ"},day:{previous:"ഇന്നലെ",current:"ഇന്ന്",next:"നാളെ",past:"{0} ദിവസം മുമ്പ്",future:"{0} ദിവസത്തിൽ"},hour:{current:"ഈ മണിക്കൂറിൽ",past:"{0} മണിക്കൂർ മുമ്പ്",future:"{0} മണിക്കൂറിൽ"},minute:{current:"ഈ മിനിറ്റിൽ",past:"{0} മിനിറ്റ് മുമ്പ്",future:"{0} മിനിറ്റിൽ"},second:{current:"ഇപ്പോൾ",past:"{0} സെക്കൻഡ് മുമ്പ്",future:"{0} സെക്കൻഡിൽ"},now:"ഇപ്പോൾ"}},function(e){e.exports={year:{previous:"കഴിഞ്ഞ വർഷം",current:"ഈ വർ‌ഷം",next:"അടുത്തവർഷം",past:"{0} വർഷം മുമ്പ്",future:"{0} വർഷത്തിൽ"},quarter:{previous:"കഴിഞ്ഞ പാദം",current:"ഈ പാദം",next:"അടുത്ത പാദം",past:"{0} പാദം മുമ്പ്",future:"{0} പാദത്തിൽ"},month:{previous:"കഴിഞ്ഞ മാസം",current:"ഈ മാസം",next:"അടുത്ത മാസം",past:"{0} മാസം മുമ്പ്",future:"{0} മാസത്തിൽ"},week:{previous:"കഴിഞ്ഞ ആഴ്‌ച",current:"ഈ ആഴ്ച",next:"അടുത്ത ആഴ്ച",past:"{0} ആഴ്ച മുമ്പ്",future:"{0} ആഴ്ചയിൽ"},day:{previous:"ഇന്നലെ",current:"ഇന്ന്",next:"നാളെ",past:"{0} ദിവസം മുമ്പ്",future:"{0} ദിവസത്തിൽ"},hour:{current:"ഈ മണിക്കൂറിൽ",past:"{0} മണിക്കൂർ മുമ്പ്",future:"{0} മണിക്കൂറിൽ"},minute:{current:"ഈ മിനിറ്റിൽ",past:"{0} മിനിറ്റ് മുമ്പ്",future:"{0} മിനിറ്റിൽ"},second:{current:"ഇപ്പോൾ",past:"{0} സെക്കൻഡ് മുമ്പ്",future:"{0} സെക്കൻഡിൽ"},now:"ഇപ്പോൾ"}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t,r){e.exports={locale:"mr",long:r(158),short:r(159),narrow:r(160),quantify:r(161)}},function(e){e.exports={year:{previous:"मागील वर्ष",current:"हे वर्ष",next:"पुढील वर्ष",past:{one:"{0} वर्षापूर्वी",other:"{0} वर्षांपूर्वी"},future:{one:"येत्या {0} वर्षामध्ये",other:"येत्या {0} वर्षांमध्ये"}},quarter:{previous:"मागील तिमाही",current:"ही तिमाही",next:"पुढील तिमाही",past:{one:"{0} तिमाहीपूर्वी",other:"{0} तिमाहींपूर्वी"},future:{one:"{0} तिमाहीमध्ये",other:"{0} तिमाहींमध्ये"}},month:{previous:"मागील महिना",current:"हा महिना",next:"पुढील महिना",past:{one:"{0} महिन्यापूर्वी",other:"{0} महिन्यांपूर्वी"},future:{one:"येत्या {0} महिन्यामध्ये",other:"येत्या {0} महिन्यांमध्ये"}},week:{previous:"मागील आठवडा",current:"हा आठवडा",next:"पुढील आठवडा",past:{one:"{0} आठवड्यापूर्वी",other:"{0} आठवड्यांपूर्वी"},future:{one:"{0} आठवड्यामध्ये",other:"{0} आठवड्यांमध्ये"}},day:{previous:"काल",current:"आज",next:"उद्या",past:{one:"{0} दिवसापूर्वी",other:"{0} दिवसांपूर्वी"},future:{one:"येत्या {0} दिवसामध्ये",other:"येत्या {0} दिवसांमध्ये"}},hour:{current:"तासात",past:{one:"{0} तासापूर्वी",other:"{0} तासांपूर्वी"},future:{one:"{0} तासामध्ये",other:"{0} तासांमध्ये"}},minute:{current:"या मिनिटात",past:{one:"{0} मिनिटापूर्वी",other:"{0} मिनिटांपूर्वी"},future:{one:"{0} मिनिटामध्ये",other:"{0} मिनिटांमध्ये"}},second:{current:"आत्ता",past:{one:"{0} सेकंदापूर्वी",other:"{0} सेकंदांपूर्वी"},future:{one:"{0} सेकंदामध्ये",other:"{0} सेकंदांमध्ये"}},now:"आत्ता"}},function(e){e.exports={year:{previous:"मागील वर्ष",current:"हे वर्ष",next:"पुढील वर्ष",past:{one:"{0} वर्षापूर्वी",other:"{0} वर्षांपूर्वी"},future:{one:"{0} वर्षामध्ये",other:"{0} वर्षांमध्ये"}},quarter:{previous:"मागील तिमाही",current:"ही तिमाही",next:"पुढील तिमाही",past:{one:"{0} तिमाहीपूर्वी",other:"{0} तिमाहींपूर्वी"},future:{one:"येत्या {0} तिमाहीमध्ये",other:"येत्या {0} तिमाहींमध्ये"}},month:{previous:"मागील महिना",current:"हा महिना",next:"पुढील महिना",past:{one:"{0} महिन्यापूर्वी",other:"{0} महिन्यांपूर्वी"},future:"{0} महिन्यामध्ये"},week:{previous:"मागील आठवडा",current:"हा आठवडा",next:"पुढील आठवडा",past:{one:"{0} आठवड्यापूर्वी",other:"{0} आठवड्यांपूर्वी"},future:{one:"येत्या {0} आठवड्यामध्ये",other:"येत्या {0} आठवड्यांमध्ये"}},day:{previous:"काल",current:"आज",next:"उद्या",past:{one:"{0} दिवसापूर्वी",other:"{0} दिवसांपूर्वी"},future:{one:"{0} दिवसामध्ये",other:"येत्या {0} दिवसांमध्ये"}},hour:{current:"तासात",past:{one:"{0} तासापूर्वी",other:"{0} तासांपूर्वी"},future:{one:"{0} तासामध्ये",other:"{0} तासांमध्ये"}},minute:{current:"या मिनिटात",past:"{0} मिनि. पूर्वी",future:"{0} मिनि. मध्ये"},second:{current:"आत्ता",past:"{0} से. पूर्वी",future:"{0} से. मध्ये"},now:"आत्ता"}},function(e){e.exports={year:{previous:"मागील वर्ष",current:"हे वर्ष",next:"पुढील वर्ष",past:{one:"{0} वर्षापूर्वी",other:"{0} वर्षांपूर्वी"},future:{one:"येत्या {0} वर्षामध्ये",other:"येत्या {0} वर्षांमध्ये"}},quarter:{previous:"मागील तिमाही",current:"ही तिमाही",next:"पुढील तिमाही",past:{one:"{0} तिमाहीपूर्वी",other:"{0} तिमाहींपूर्वी"},future:{one:"{0} तिमाहीमध्ये",other:"{0} तिमाहींमध्ये"}},month:{previous:"मागील महिना",current:"हा महिना",next:"पुढील महिना",past:{one:"{0} महिन्यापूर्वी",other:"{0} महिन्यांपूर्वी"},future:{one:"{0} महिन्यामध्ये",other:"{0} महिन्यांमध्ये"}},week:{previous:"मागील आठवडा",current:"हा आठवडा",next:"पुढील आठवडा",past:{one:"{0} आठवड्यापूर्वी",other:"{0} आठवड्यांपूर्वी"},future:{one:"येत्या {0} आठवड्यामध्ये",other:"येत्या {0} आठवड्यांमध्ये"}},day:{previous:"काल",current:"आज",next:"उद्या",past:{one:"{0} दिवसापूर्वी",other:"{0} दिवसांपूर्वी"},future:{one:"{0} दिवसामध्ये",other:"{0} दिवसांमध्ये"}},hour:{current:"तासात",past:{one:"{0} तासापूर्वी",other:"{0} तासांपूर्वी"},future:{one:"येत्या {0} तासामध्ये",other:"येत्या {0} तासांमध्ये"}},minute:{current:"या मिनिटात",past:"{0} मिनि. पूर्वी",future:"{0} मिनि. मध्ये"},second:{current:"आत्ता",past:"{0} से. पूर्वी",future:{one:"{0} से. मध्ये",other:"येत्या {0} से. मध्ये"}},now:"आत्ता"}},function(e,t){e.exports=function(e){return e>=0&&e<=1?"one":"other"}},function(e,t,r){e.exports={locale:"ms",long:r(163),short:r(164),narrow:r(165)}},function(e){e.exports={year:{previous:"tahun lalu",current:"tahun ini",next:"tahun depan",past:"{0} tahun lalu",future:"dalam {0} tahun"},quarter:{previous:"suku tahun lalu",current:"suku tahun ini",next:"suku tahun seterusnya",past:"{0} suku tahun lalu",future:"dalam {0} suku tahun"},month:{previous:"bulan lalu",current:"bulan ini",next:"bulan depan",past:"{0} bulan lalu",future:"dalam {0} bulan"},week:{previous:"minggu lalu",current:"minggu ini",next:"minggu depan",past:"{0} minggu lalu",future:"dalam {0} minggu"},day:{previous:"semalam",current:"hari ini",next:"esok",past:"{0} hari lalu",future:"dalam {0} hari"},hour:{current:"jam ini",past:"{0} jam lalu",future:"dalam {0} jam"},minute:{current:"pada minit ini",past:"{0} minit lalu",future:"dalam {0} minit"},second:{current:"sekarang",past:"{0} saat lalu",future:"dalam {0} saat"},now:"sekarang"}},function(e){e.exports={year:{previous:"thn lepas",current:"thn ini",next:"thn depan",past:"{0} thn lalu",future:"dalam {0} thn"},quarter:{previous:"suku lepas",current:"suku ini",next:"suku seterusnya",past:"{0} suku thn lalu",future:"dlm {0} suku thn"},month:{previous:"bln lalu",current:"bln ini",next:"bln depan",past:"{0} bln lalu",future:"dlm {0} bln"},week:{previous:"mng lepas",current:"mng ini",next:"mng depan",past:"{0} mgu lalu",future:"dlm {0} mgu"},day:{previous:"semlm",current:"hari ini",next:"esok",past:"{0} hari lalu",future:"dlm {0} hari"},hour:{current:"jam ini",past:"{0} jam lalu",future:"dlm {0} jam"},minute:{current:"pada minit ini",past:"{0} min lalu",future:"dlm {0} min"},second:{current:"sekarang",past:"{0} saat lalu",future:"dlm {0} saat"},now:"sekarang"}},function(e){e.exports={year:{previous:"thn lepas",current:"thn ini",next:"thn depan",past:"{0} thn lalu",future:"dalam {0} thn"},quarter:{previous:"suku lepas",current:"suku ini",next:"suku seterusnya",past:"{0} suku thn lalu",future:"dlm {0} suku thn"},month:{previous:"bln lalu",current:"bln ini",next:"bln depan",past:"{0} bulan lalu",future:"dlm {0} bln"},week:{previous:"mng lepas",current:"mng ini",next:"mng depan",past:"{0} mgu lalu",future:"dlm {0} mgu"},day:{previous:"semlm",current:"hari ini",next:"esok",past:"{0} hari lalu",future:"dlm {0} hari"},hour:{current:"jam ini",past:"{0} jam lalu",future:"dlm {0} jam"},minute:{current:"pada minit ini",past:"{0} min lalu",future:"dlm {0} min"},second:{current:"sekarang",past:"{0} saat lalu",future:"dlm {0} saat"},now:"sekarang"}},function(e,t,r){e.exports={locale:"nb",long:r(167),short:r(168),narrow:r(169),quantify:r(170)}},function(e){e.exports={year:{previous:"i fjor",current:"i år",next:"neste år",past:"for {0} år siden",future:"om {0} år"},quarter:{previous:"forrige kvartal",current:"dette kvartalet",next:"neste kvartal",past:{one:"for {0} kvartal siden",other:"for {0} kvartaler siden"},future:{one:"om {0} kvartal",other:"om {0} kvartaler"}},month:{previous:"forrige måned",current:"denne måneden",next:"neste måned",past:{one:"for {0} måned siden",other:"for {0} måneder siden"},future:{one:"om {0} måned",other:"om {0} måneder"}},week:{previous:"forrige uke",current:"denne uken",next:"neste uke",past:{one:"for {0} uke siden",other:"for {0} uker siden"},future:{one:"om {0} uke",other:"om {0} uker"}},day:{previous:"i går",current:"i dag",next:"i morgen",past:"for {0} døgn siden",future:"om {0} døgn"},hour:{current:"denne timen",past:{one:"for {0} time siden",other:"for {0} timer siden"},future:{one:"om {0} time",other:"om {0} timer"}},minute:{current:"dette minuttet",past:{one:"for {0} minutt siden",other:"for {0} minutter siden"},future:{one:"om {0} minutt",other:"om {0} minutter"}},second:{current:"nå",past:{one:"for {0} sekund siden",other:"for {0} sekunder siden"},future:{one:"om {0} sekund",other:"om {0} sekunder"}},now:"nå"}},function(e){e.exports={year:{previous:"i fjor",current:"i år",next:"neste år",past:"for {0} år siden",future:"om {0} år"},quarter:{previous:"forrige kv.",current:"dette kv.",next:"neste kv.",past:"for {0} kv. siden",future:"om {0} kv."},month:{previous:"forrige md.",current:"denne md.",next:"neste md.",past:"for {0} md. siden",future:"om {0} md."},week:{previous:"forrige uke",current:"denne uken",next:"neste uke",past:"for {0} u. siden",future:"om {0} u."},day:{previous:"i går",current:"i dag",next:"i morgen",past:"for {0} d. siden",future:"om {0} d."},hour:{current:"denne timen",past:"for {0} t siden",future:"om {0} t"},minute:{current:"dette minuttet",past:"for {0} min siden",future:"om {0} min"},second:{current:"nå",past:"for {0} sek siden",future:"om {0} sek"},now:"nå"}},function(e){e.exports={year:{previous:"i fjor",current:"i år",next:"neste år",past:"–{0} år",future:"+{0} år"},quarter:{previous:"forrige kv.",current:"dette kv.",next:"neste kv.",past:"–{0} kv.",future:"+{0} kv."},month:{previous:"forrige md.",current:"denne md.",next:"neste md.",past:"-{0} md.",future:"+{0} md."},week:{previous:"forrige uke",current:"denne uken",next:"neste uke",past:"-{0} u.",future:"+{0} u."},day:{previous:"i går",current:"i dag",next:"i morgen",past:"-{0} d.",future:"+{0} d."},hour:{current:"denne timen",past:"-{0} t",future:"+{0} t"},minute:{current:"dette minuttet",past:"-{0} min",future:"+{0} min"},second:{current:"nå",past:"-{0} s",future:"+{0} s"},now:"nå"}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t,r){e.exports={locale:"nl",long:r(172),short:r(173),narrow:r(174),quantify:r(175)}},function(e){e.exports={year:{previous:"vorig jaar",current:"dit jaar",next:"volgend jaar",past:"{0} jaar geleden",future:"over {0} jaar"},quarter:{previous:"vorig kwartaal",current:"dit kwartaal",next:"volgend kwartaal",past:{one:"{0} kwartaal geleden",other:"{0} kwartalen geleden"},future:{one:"over {0} kwartaal",other:"over {0} kwartalen"}},month:{previous:"vorige maand",current:"deze maand",next:"volgende maand",past:{one:"{0} maand geleden",other:"{0} maanden geleden"},future:{one:"over {0} maand",other:"over {0} maanden"}},week:{previous:"vorige week",current:"deze week",next:"volgende week",past:{one:"{0} week geleden",other:"{0} weken geleden"},future:{one:"over {0} week",other:"over {0} weken"}},day:{previous:"gisteren",current:"vandaag",next:"morgen",past:{one:"{0} dag geleden",other:"{0} dagen geleden"},future:{one:"over {0} dag",other:"over {0} dagen"}},hour:{current:"binnen een uur",past:"{0} uur geleden",future:"over {0} uur"},minute:{current:"binnen een minuut",past:{one:"{0} minuut geleden",other:"{0} minuten geleden"},future:{one:"over {0} minuut",other:"over {0} minuten"}},second:{current:"nu",past:{one:"{0} seconde geleden",other:"{0} seconden geleden"},future:{one:"over {0} seconde",other:"over {0} seconden"}},now:"nu"}},function(e){e.exports={year:{previous:"vorig jaar",current:"dit jaar",next:"volgend jaar",past:"{0} jaar geleden",future:"over {0} jaar"},quarter:{previous:"vorig kwartaal",current:"dit kwartaal",next:"volgend kwartaal",past:{one:"{0} kwartaal geleden",other:"{0} kwartalen geleden"},future:{one:"over {0} kwartaal",other:"over {0} kwartalen"}},month:{previous:"vorige maand",current:"deze maand",next:"volgende maand",past:{one:"{0} maand geleden",other:"{0} maanden geleden"},future:{one:"over {0} maand",other:"over {0} maanden"}},week:{previous:"vorige week",current:"deze week",next:"volgende week",past:{one:"{0} week geleden",other:"{0} weken geleden"},future:{one:"over {0} week",other:"over {0} weken"}},day:{previous:"gisteren",current:"vandaag",next:"morgen",past:{one:"{0} dag geleden",other:"{0} dgn geleden"},future:{one:"over {0} dag",other:"over {0} dgn"}},hour:{current:"binnen een uur",past:"{0} uur geleden",future:"over {0} uur"},minute:{current:"binnen een minuut",past:"{0} min. geleden",future:"over {0} min."},second:{current:"nu",past:"{0} sec. geleden",future:"over {0} sec."},now:"nu"}},function(e){e.exports={year:{previous:"vorig jaar",current:"dit jaar",next:"volgend jaar",past:"{0} jaar geleden",future:"over {0} jaar"},quarter:{previous:"vorig kwartaal",current:"dit kwartaal",next:"volgend kwartaal",past:{one:"{0} kwartaal geleden",other:"{0} kwartalen geleden"},future:{one:"over {0} kw.",other:"over {0} kwartalen"}},month:{previous:"vorige maand",current:"deze maand",next:"volgende maand",past:{one:"{0} maand geleden",other:"{0} maanden geleden"},future:{one:"over {0} maand",other:"over {0} maanden"}},week:{previous:"vorige week",current:"deze week",next:"volgende week",past:{one:"{0} week geleden",other:"{0} weken geleden"},future:{one:"over {0} week",other:"over {0} weken"}},day:{previous:"gisteren",current:"vandaag",next:"morgen",past:{one:"{0} dag geleden",other:"{0} dgn geleden"},future:{one:"over {0} dag",other:"over {0} dgn"}},hour:{current:"binnen een uur",past:"{0} uur geleden",future:"over {0} uur"},minute:{current:"binnen een minuut",past:"{0} min. geleden",future:"over {0} min."},second:{current:"nu",past:"{0} sec. geleden",future:"over {0} sec."},now:"nu"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"pl",long:r(177),short:r(178),narrow:r(179),quantify:r(180)}},function(e){e.exports={year:{previous:"w zeszłym roku",current:"w tym roku",next:"w przyszłym roku",past:{one:"{0} rok temu",few:"{0} lata temu",many:"{0} lat temu",other:"{0} roku temu"},future:{one:"za {0} rok",few:"za {0} lata",many:"za {0} lat",other:"za {0} roku"}},quarter:{previous:"w zeszłym kwartale",current:"w tym kwartale",next:"w przyszłym kwartale",past:{one:"{0} kwartał temu",few:"{0} kwartały temu",many:"{0} kwartałów temu",other:"{0} kwartału temu"},future:{one:"za {0} kwartał",few:"za {0} kwartały",many:"za {0} kwartałów",other:"za {0} kwartału"}},month:{previous:"w zeszłym miesiącu",current:"w tym miesiącu",next:"w przyszłym miesiącu",past:{one:"{0} miesiąc temu",few:"{0} miesiące temu",many:"{0} miesięcy temu",other:"{0} miesiąca temu"},future:{one:"za {0} miesiąc",few:"za {0} miesiące",many:"za {0} miesięcy",other:"za {0} miesiąca"}},week:{previous:"w zeszłym tygodniu",current:"w tym tygodniu",next:"w przyszłym tygodniu",past:{one:"{0} tydzień temu",few:"{0} tygodnie temu",many:"{0} tygodni temu",other:"{0} tygodnia temu"},future:{one:"za {0} tydzień",few:"za {0} tygodnie",many:"za {0} tygodni",other:"za {0} tygodnia"}},day:{previous:"wczoraj",current:"dzisiaj",next:"jutro",past:{one:"{0} dzień temu",few:"{0} dni temu",many:"{0} dni temu",other:"{0} dnia temu"},future:{one:"za {0} dzień",few:"za {0} dni",many:"za {0} dni",other:"za {0} dnia"}},hour:{current:"ta godzina",past:{one:"{0} godzinę temu",many:"{0} godzin temu",other:"{0} godziny temu"},future:{one:"za {0} godzinę",many:"za {0} godzin",other:"za {0} godziny"}},minute:{current:"ta minuta",past:{one:"{0} minutę temu",many:"{0} minut temu",other:"{0} minuty temu"},future:{one:"za {0} minutę",many:"za {0} minut",other:"za {0} minuty"}},second:{current:"teraz",past:{one:"{0} sekundę temu",many:"{0} sekund temu",other:"{0} sekundy temu"},future:{one:"za {0} sekundę",many:"za {0} sekund",other:"za {0} sekundy"}},now:"teraz"}},function(e){e.exports={year:{previous:"w zeszłym roku",current:"w tym roku",next:"w przyszłym roku",past:{one:"{0} rok temu",few:"{0} lata temu",many:"{0} lat temu",other:"{0} roku temu"},future:{one:"za {0} rok",few:"za {0} lata",many:"za {0} lat",other:"za {0} roku"}},quarter:{previous:"w zeszłym kwartale",current:"w tym kwartale",next:"w przyszłym kwartale",past:"{0} kw. temu",future:"za {0} kw."},month:{previous:"w zeszłym miesiącu",current:"w tym miesiącu",next:"w przyszłym miesiącu",past:"{0} mies. temu",future:"za {0} mies."},week:{previous:"w zeszłym tygodniu",current:"w tym tygodniu",next:"w przyszłym tygodniu",past:{one:"{0} tydz. temu",other:"{0} tyg. temu"},future:{one:"za {0} tydz.",other:"za {0} tyg."}},day:{previous:"wczoraj",current:"dzisiaj",next:"jutro",past:{one:"{0} dzień temu",few:"{0} dni temu",many:"{0} dni temu",other:"{0} dnia temu"},future:{one:"za {0} dzień",few:"za {0} dni",many:"za {0} dni",other:"za {0} dnia"}},hour:{current:"ta godzina",past:"{0} godz. temu",future:"za {0} godz."},minute:{current:"ta minuta",past:"{0} min temu",future:"za {0} min"},second:{current:"teraz",past:"{0} sek. temu",future:"za {0} sek."},now:"teraz"}},function(e){e.exports={year:{previous:"w zeszłym roku",current:"w tym roku",next:"w przyszłym roku",past:{one:"{0} rok temu",few:"{0} lata temu",many:"{0} lat temu",other:"{0} roku temu"},future:{one:"za {0} rok",few:"za {0} lata",many:"za {0} lat",other:"za {0} roku"}},quarter:{previous:"w zeszłym kwartale",current:"w tym kwartale",next:"w przyszłym kwartale",past:"{0} kw. temu",future:"za {0} kw."},month:{previous:"w zeszłym miesiącu",current:"w tym miesiącu",next:"w przyszłym miesiącu",past:"{0} mies. temu",future:"za {0} mies."},week:{previous:"w zeszłym tygodniu",current:"w tym tygodniu",next:"w przyszłym tygodniu",past:{one:"{0} tydz. temu",other:"{0} tyg. temu"},future:{one:"za {0} tydz.",other:"za {0} tyg."}},day:{previous:"wczoraj",current:"dzisiaj",next:"jutro",past:{one:"{0} dzień temu",few:"{0} dni temu",many:"{0} dni temu",other:"{0} dnia temu"},future:{one:"za {0} dzień",few:"za {0} dni",many:"za {0} dni",other:"za {0} dnia"}},hour:{current:"ta godzina",past:"{0} g. temu",future:"za {0} g."},minute:{current:"ta minuta",past:"{0} min temu",future:"za {0} min"},second:{current:"teraz",past:"{0} s temu",future:"za {0} s"},now:"teraz"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=!t[1],u=r.slice(-1),a=r.slice(-2);return 1==e&&n?"one":n&&u>=2&&u<=4&&(a<12||a>14)?"few":n&&1!=r&&(0==u||1==u)||n&&u>=5&&u<=9||n&&a>=12&&a<=14?"many":"other"}},function(e,t,r){e.exports={locale:"pt",long:r(182),short:r(183),narrow:r(184),quantify:r(185)}},function(e){e.exports={year:{previous:"ano passado",current:"este ano",next:"próximo ano",past:{one:"há {0} ano",other:"há {0} anos"},future:{one:"dentro de {0} ano",other:"dentro de {0} anos"}},quarter:{previous:"trimestre passado",current:"este trimestre",next:"próximo trimestre",past:{one:"há {0} trimestre",other:"há {0} trimestres"},future:{one:"dentro de {0} trimestre",other:"dentro de {0} trimestres"}},month:{previous:"mês passado",current:"este mês",next:"próximo mês",past:{one:"há {0} mês",other:"há {0} meses"},future:{one:"dentro de {0} mês",other:"dentro de {0} meses"}},week:{previous:"semana passada",current:"esta semana",next:"próxima semana",past:{one:"há {0} semana",other:"há {0} semanas"},future:{one:"dentro de {0} semana",other:"dentro de {0} semanas"}},day:{previous:"ontem",current:"hoje",next:"amanhã",past:{one:"há {0} dia",other:"há {0} dias"},future:{one:"dentro de {0} dia",other:"dentro de {0} dias"}},hour:{current:"esta hora",past:{one:"há {0} hora",other:"há {0} horas"},future:{one:"dentro de {0} hora",other:"dentro de {0} horas"}},minute:{current:"este minuto",past:{one:"há {0} minuto",other:"há {0} minutos"},future:{one:"dentro de {0} minuto",other:"dentro de {0} minutos"}},second:{current:"agora",past:{one:"há {0} segundo",other:"há {0} segundos"},future:{one:"dentro de {0} segundo",other:"dentro de {0} segundos"}},now:"agora"}},function(e){e.exports={year:{previous:"ano passado",current:"este ano",next:"próximo ano",past:{one:"há {0} ano",other:"há {0} anos"},future:{one:"dentro de {0} ano",other:"dentro de {0} anos"}},quarter:{previous:"trim. passado",current:"este trim.",next:"próximo trim.",past:"há {0} trim.",future:"dentro de {0} trim."},month:{previous:"mês passado",current:"este mês",next:"próximo mês",past:{one:"há {0} mês",other:"há {0} meses"},future:{one:"dentro de {0} mês",other:"dentro de {0} meses"}},week:{previous:"semana passada",current:"esta semana",next:"próxima semana",past:"há {0} sem.",future:"dentro de {0} sem."},day:{previous:"ontem",current:"hoje",next:"amanhã",past:{one:"há {0} dia",other:"há {0} dias"},future:{one:"dentro de {0} dia",other:"dentro de {0} dias"}},hour:{current:"esta hora",past:"há {0} h",future:"dentro de {0} h"},minute:{current:"este minuto",past:"há {0} min",future:"dentro de {0} min"},second:{current:"agora",past:"há {0} s",future:"dentro de {0} s"},now:"agora"}},function(e){e.exports={year:{previous:"ano passado",current:"este ano",next:"próximo ano",past:{one:"-{0} ano",other:"-{0} anos"},future:{one:"+{0} ano",other:"+{0} anos"}},quarter:{previous:"trim. passado",current:"este trim.",next:"próximo trim.",past:"-{0} trim.",future:"+{0} trim."},month:{previous:"mês passado",current:"este mês",next:"próximo mês",past:{one:"-{0} mês",other:"-{0} meses"},future:{one:"+{0} mês",other:"+{0} meses"}},week:{previous:"semana passada",current:"esta semana",next:"próxima semana",past:"-{0} sem.",future:"+{0} sem."},day:{previous:"ontem",current:"hoje",next:"amanhã",past:"há {0} dias",future:{one:"+{0} dia",other:"+{0} dias"}},hour:{current:"esta hora",past:"-{0} h",future:"+{0} h"},minute:{current:"este minuto",past:"-{0} min",future:"+{0} min"},second:{current:"agora",past:"-{0} s",future:"+{0} s"},now:"agora"}},function(e,t){e.exports=function(e){var t=String(e).split(".")[0];return 0==t||1==t?"one":"other"}},function(e,t,r){e.exports={locale:"ro",long:r(187),short:r(188),narrow:r(189),quantify:r(190)}},function(e){e.exports={year:{previous:"anul trecut",current:"anul acesta",next:"anul viitor",past:{one:"acum {0} an",few:"acum {0} ani",other:"acum {0} de ani"},future:{one:"peste {0} an",few:"peste {0} ani",other:"peste {0} de ani"}},quarter:{previous:"trimestrul trecut",current:"trimestrul acesta",next:"trimestrul viitor",past:{one:"acum {0} trimestru",few:"acum {0} trimestre",other:"acum {0} de trimestre"},future:{one:"peste {0} trimestru",few:"peste {0} trimestre",other:"peste {0} de trimestre"}},month:{previous:"luna trecută",current:"luna aceasta",next:"luna viitoare",past:{one:"acum {0} lună",few:"acum {0} luni",other:"acum {0} de luni"},future:{one:"peste {0} lună",few:"peste {0} luni",other:"peste {0} de luni"}},week:{previous:"săptămâna trecută",current:"săptămâna aceasta",next:"săptămâna viitoare",past:{one:"acum {0} săptămână",few:"acum {0} săptămâni",other:"acum {0} de săptămâni"},future:{one:"peste {0} săptămână",few:"peste {0} săptămâni",other:"peste {0} de săptămâni"}},day:{previous:"ieri",current:"azi",next:"mâine",past:{one:"acum {0} zi",few:"acum {0} zile",other:"acum {0} de zile"},future:{one:"peste {0} zi",few:"peste {0} zile",other:"peste {0} de zile"}},hour:{current:"ora aceasta",past:{one:"acum {0} oră",few:"acum {0} ore",other:"acum {0} de ore"},future:{one:"peste {0} oră",few:"peste {0} ore",other:"peste {0} de ore"}},minute:{current:"minutul acesta",past:{one:"acum {0} minut",few:"acum {0} minute",other:"acum {0} de minute"},future:{one:"peste {0} minut",few:"peste {0} minute",other:"peste {0} de minute"}},second:{current:"acum",past:{one:"acum {0} secundă",few:"acum {0} secunde",other:"acum {0} de secunde"},future:{one:"peste {0} secundă",few:"peste {0} secunde",other:"peste {0} de secunde"}},now:"acum"}},function(e){e.exports={year:{previous:"anul trecut",current:"anul acesta",next:"anul viitor",past:{one:"acum {0} an",few:"acum {0} ani",other:"acum {0} de ani"},future:{one:"peste {0} an",few:"peste {0} ani",other:"peste {0} de ani"}},quarter:{previous:"trim. trecut",current:"trim. acesta",next:"trim. viitor",past:"acum {0} trim.",future:"peste {0} trim."},month:{previous:"luna trecută",current:"luna aceasta",next:"luna viitoare",past:{one:"acum {0} lună",other:"acum {0} luni"},future:{one:"peste {0} lună",other:"peste {0} luni"}},week:{previous:"săptămâna trecută",current:"săptămâna aceasta",next:"săptămâna viitoare",past:"acum {0} săpt.",future:"peste {0} săpt."},day:{previous:"ieri",current:"azi",next:"mâine",past:{one:"acum {0} zi",few:"acum {0} zile",other:"acum {0} de zile"},future:{one:"peste {0} zi",few:"peste {0} zile",other:"peste {0} de zile"}},hour:{current:"ora aceasta",past:"acum {0} h",future:"peste {0} h"},minute:{current:"minutul acesta",past:"acum {0} min.",future:"peste {0} min."},second:{current:"acum",past:"acum {0} sec.",future:"peste {0} sec."},now:"acum"}},function(e){e.exports={year:{previous:"anul trecut",current:"anul acesta",next:"anul viitor",past:{one:"-{0} an",other:"-{0} ani"},future:{one:"+{0} an",other:"+{0} ani"}},quarter:{previous:"trim. trecut",current:"trim. acesta",next:"trim. viitor",past:"-{0} trim.",future:"+{0} trim."},month:{previous:"luna trecută",current:"luna aceasta",next:"luna viitoare",past:{one:"-{0} lună",other:"-{0} luni"},future:{one:"+{0} lună",other:"+{0} luni"}},week:{previous:"săptămâna trecută",current:"săptămâna aceasta",next:"săptămâna viitoare",past:"-{0} săpt.",future:"+{0} săpt."},day:{previous:"ieri",current:"azi",next:"mâine",past:{one:"-{0} zi",other:"-{0} zile"},future:{one:"+{0} zi",other:"+{0} zile"}},hour:{current:"ora aceasta",past:"-{0} h",future:"+{0} h"},minute:{current:"minutul acesta",past:"-{0} m",future:"+{0} m"},second:{current:"acum",past:"-{0} s",future:"+{0} s"},now:"acum"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=!t[1],n=Number(t[0])==e&&t[0].slice(-2);return 1==e&&r?"one":!r||0==e||1!=e&&n>=1&&n<=19?"few":"other"}},function(e,t,r){e.exports={locale:"ru",long:r(192),long_time:r(193),long_convenient:r(194),short:r(195),short_time:r(196),short_convenient:r(197),narrow:r(198),tiny:r(199),quantify:r(200)}},function(e){e.exports={year:{previous:"в прошлом году",current:"в этом году",next:"в следующем году",past:{one:"{0} год назад",many:"{0} лет назад",other:"{0} года назад"},future:{one:"через {0} год",many:"через {0} лет",other:"через {0} года"}},quarter:{previous:"в прошлом квартале",current:"в текущем квартале",next:"в следующем квартале",past:{one:"{0} квартал назад",many:"{0} кварталов назад",other:"{0} квартала назад"},future:{one:"через {0} квартал",many:"через {0} кварталов",other:"через {0} квартала"}},month:{previous:"в прошлом месяце",current:"в этом месяце",next:"в следующем месяце",past:{one:"{0} месяц назад",many:"{0} месяцев назад",other:"{0} месяца назад"},future:{one:"через {0} месяц",many:"через {0} месяцев",other:"через {0} месяца"}},week:{previous:"на прошлой неделе",current:"на этой неделе",next:"на следующей неделе",past:{one:"{0} неделю назад",many:"{0} недель назад",other:"{0} недели назад"},future:{one:"через {0} неделю",many:"через {0} недель",other:"через {0} недели"}},day:{previous:"вчера",current:"сегодня",next:"завтра",past:{one:"{0} день назад",many:"{0} дней назад",other:"{0} дня назад"},future:{one:"через {0} день",many:"через {0} дней",other:"через {0} дня"}},hour:{current:"в этот час",past:{one:"{0} час назад",many:"{0} часов назад",other:"{0} часа назад"},future:{one:"через {0} час",many:"через {0} часов",other:"через {0} часа"}},minute:{current:"в эту минуту",past:{one:"{0} минуту назад",many:"{0} минут назад",other:"{0} минуты назад"},future:{one:"через {0} минуту",many:"через {0} минут",other:"через {0} минуты"}},second:{current:"сейчас",past:{one:"{0} секунду назад",many:"{0} секунд назад",other:"{0} секунды назад"},future:{one:"через {0} секунду",many:"через {0} секунд",other:"через {0} секунды"}},now:"сейчас"}},function(e){e.exports={year:{one:"{0} год",many:"{0} лет",other:"{0} года"},month:{one:"{0} месяц",many:"{0} месяцев",other:"{0} месяца"},week:{one:"{0} неделю",many:"{0} недель",other:"{0} недели"},day:{one:"{0} день",few:"{0} дня",other:"{0} дней"},hour:{one:"{0} час",many:"{0} часов",other:"{0} часа"},minute:{one:"{0} минута",many:"{0} минут",other:"{0} минуты"},second:{one:"{0} секунда",many:"{0} секунд",other:"{0} секунды"},now:{past:"только что",future:"сейчас"}}},function(e){e.exports={year:{previous:"в прошлом году",current:"в этом году",next:"в следующем году",past:{one:"{0} год назад",many:"{0} лет назад",other:"{0} года назад"},future:{one:"через {0} год",many:"через {0} лет",other:"через {0} года"}},quarter:{previous:"в прошлом квартале",current:"в текущем квартале",next:"в следующем квартале",past:{one:"{0} квартал назад",many:"{0} кварталов назад",other:"{0} квартала назад"},future:{one:"через {0} квартал",many:"через {0} кварталов",other:"через {0} квартала"}},month:{previous:"в прошлом месяце",current:"в этом месяце",next:"в следующем месяце",past:{one:"{0} месяц назад",many:"{0} месяцев назад",other:"{0} месяца назад"},future:{one:"через {0} месяц",many:"через {0} месяцев",other:"через {0} месяца"}},week:{previous:"на прошлой неделе",current:"на этой неделе",next:"на следующей неделе",past:{one:"{0} неделю назад",many:"{0} недель назад",other:"{0} недели назад"},future:{one:"через {0} неделю",many:"через {0} недель",other:"через {0} недели"}},day:{previous:"вчера",current:"сегодня",next:"завтра",past:{one:"{0} день назад",many:"{0} дней назад",other:"{0} дня назад"},future:{one:"через {0} день",many:"через {0} дней",other:"через {0} дня"}},hour:{current:"в этот час",past:{one:"{0} час назад",many:"{0} часов назад",other:"{0} часа назад"},future:{one:"через {0} час",many:"через {0} часов",other:"через {0} часа"}},minute:{current:"в эту минуту",past:{one:"{0} минуту назад",many:"{0} минут назад",other:"{0} минуты назад"},future:{one:"через {0} минуту",many:"через {0} минут",other:"через {0} минуты"}},second:{current:"сейчас",past:{one:"{0} секунду назад",many:"{0} секунд назад",other:"{0} секунды назад"},future:{one:"через {0} секунду",many:"через {0} секунд",other:"через {0} секунды"}},now:{past:"только что",future:"сейчас"}}},function(e){e.exports={year:{previous:"в прошлом г.",current:"в этом г.",next:"в след. г.",past:{many:"{0} л. назад",other:"{0} г. назад"},future:{many:"через {0} л.",other:"через {0} г."}},quarter:{previous:"последний кв.",current:"текущий кв.",next:"следующий кв.",past:"{0} кв. назад",future:"через {0} кв."},month:{previous:"в прошлом мес.",current:"в этом мес.",next:"в следующем мес.",past:"{0} мес. назад",future:"через {0} мес."},week:{previous:"на прошлой нед.",current:"на этой нед.",next:"на следующей нед.",past:"{0} нед. назад",future:"через {0} нед."},day:{previous:"вчера",current:"сегодня",next:"завтра",past:"{0} дн. назад",future:"через {0} дн."},hour:{current:"в этот час",past:{one:"{0} ч. назад",other:"{0} ч. назад"},future:{one:"через {0} ч.",other:"через {0} ч."}},minute:{current:"в эту минуту",past:"{0} мин. назад",future:"через {0} мин."},second:{current:"сейчас",past:"{0} сек. назад",future:"через {0} сек."},now:"сейчас"}},function(e){e.exports={year:{many:"{0} л.",other:"{0} г."},month:"{0} мес.",week:"{0} нед.",day:{one:"{0} д.",other:"{0} дн."},hour:"{0} ч.",minute:"{0} мин.",second:"{0} сек.",now:{past:"только что",future:"сейчас"}}},function(e){e.exports={year:{previous:"в прошлом г.",current:"в этом г.",next:"в след. г.",past:{many:"{0} л. назад",other:"{0} г. назад"},future:{many:"через {0} л.",other:"через {0} г."}},quarter:{previous:"последний кв.",current:"текущий кв.",next:"следующий кв.",past:"{0} кв. назад",future:"через {0} кв."},month:{previous:"в прошлом мес.",current:"в этом мес.",next:"в следующем мес.",past:"{0} мес. назад",future:"через {0} мес."},week:{previous:"на прошлой нед.",current:"на этой нед.",next:"на следующей нед.",past:"{0} нед. назад",future:"через {0} нед."},day:{previous:"вчера",current:"сегодня",next:"завтра",past:"{0} дн. назад",future:"через {0} дн."},hour:{current:"в этот час",past:{one:"{0} ч. назад",other:"{0} ч. назад"},future:{one:"через {0} ч.",other:"через {0} ч."}},minute:{current:"в эту минуту",past:"{0} мин. назад",future:"через {0} мин."},second:{current:"сейчас",past:"{0} сек. назад",future:"через {0} сек."},now:{past:"только что",future:"сейчас"}}},function(e){e.exports={year:{previous:"в пр. г.",current:"в эт. г.",next:"в сл. г.",past:{many:"-{0} л.",other:"-{0} г."},future:{many:"+{0} л.",other:"+{0} г."}},quarter:{previous:"посл. кв.",current:"тек. кв.",next:"след. кв.",past:"-{0} кв.",future:"+{0} кв."},month:{previous:"в пр. мес.",current:"в эт. мес.",next:"в след. мес.",past:"-{0} мес.",future:"+{0} мес."},week:{previous:"на пр. нед.",current:"на эт. нед.",next:"на след. неделе",past:"-{0} нед.",future:"+{0} нед."},day:{previous:"вчера",current:"сегодня",next:"завтра",past:"-{0} дн.",future:"+{0} дн."},hour:{current:"в этот час",past:"-{0} ч.",future:"+{0} ч."},minute:{current:"в эту минуту",past:"-{0} мин.",future:"+{0} мин."},second:{current:"сейчас",past:"-{0} с",future:"+{0} с"},now:"сейчас"}},function(e){e.exports={year:"{0}г",month:"{0}мес",week:"{0}нед",day:"{0}д",hour:"{0}ч",minute:"{0}м",second:"{0}с"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=!t[1],u=r.slice(-1),a=r.slice(-2);return n&&1==u&&11!=a?"one":n&&u>=2&&u<=4&&(a<12||a>14)?"few":n&&0==u||n&&u>=5&&u<=9||n&&a>=11&&a<=14?"many":"other"}},function(e,t,r){e.exports={locale:"sd",long:r(202),short:r(203),narrow:r(204),quantify:r(205)}},function(e){e.exports={year:{previous:"پويون سال",current:"پويون سال",next:"پويون سال",past:"{0} سال پهرين",future:"{0} سالن ۾"},quarter:{previous:"پوئين ٽي ماهي",current:"هن ٽي ماهي",next:"اڳين ٽي ماهي",past:"{0} ٽي ماهي پهرين",future:"{0} ٽي ماهي ۾"},month:{previous:"پوئين مهيني",current:"هن مهيني",next:"اڳين مهيني",past:"{0} مهينا پهرين",future:"{0} مهينن ۾"},week:{previous:"پوئين هفتي",current:"هن هفتي",next:"اڳين هفتي",past:"{0} هفتا پهرين",future:"{0} هفتن ۾"},day:{previous:"ڪل",current:"اڄ",next:"سڀاڻي",past:"{0} ڏينهن پهرين",future:"{0} ڏينهن ۾"},hour:{current:"هن ڪلڪ",past:"{0} ڪلاڪ پهرين",future:"{0} ڪلاڪ ۾"},minute:{current:"هن منٽ",past:"{0} منٽ پهرين",future:{one:"{0} منٽن ۾",other:"+{0} min"}},second:{current:"هاڻي",past:"{0} سيڪنڊ پهرين",future:"{0} سيڪنڊن ۾"},now:"هاڻي"}},function(e){e.exports={year:{previous:"پويون سال",current:"پويون سال",next:"پويون سال",past:"{0} سال پهرين",future:"{0} سالن ۾"},quarter:{previous:"پوئين ٽي ماهي",current:"هن ٽي ماهي",next:"اڳين ٽي ماهي",past:"{0} ٽي ماهي پهرين",future:"{0} ٽي ماهي ۾"},month:{previous:"پوئين مهيني",current:"هن مهيني",next:"اڳين مهيني",past:"{0} مهينا پهرين",future:"{0} مهينن ۾"},week:{previous:"پوئين هفتي",current:"هن هفتي",next:"اڳين هفتي",past:"{0} هفتا پهرين",future:"{0} هفتن ۾"},day:{previous:"ڪل",current:"اڄ",next:"سڀاڻي",past:"{0} ڏينهن پهرين",future:"{0} ڏينهن ۾"},hour:{current:"هن ڪلڪ",past:"{0} ڪلاڪ پهرين",future:"{0} ڪلاڪ ۾"},minute:{current:"هن منٽ",past:"{0} منٽ پهرين",future:"{0} منٽن ۾"},second:{current:"هاڻي",past:"{0} سيڪنڊ پهرين",future:"{0} سيڪنڊن ۾"},now:"هاڻي"}},function(e){e.exports={year:{previous:"پويون سال",current:"پويون سال",next:"پويون سال",past:"{0} سال پهرين",future:"{0} سالن ۾"},quarter:{previous:"پوئين ٽي ماهي",current:"هن ٽي ماهي",next:"اڳين ٽي ماهي",past:"{0} ٽي ماهي پهرين",future:"{0} ٽي ماهي ۾"},month:{previous:"پوئين مهيني",current:"هن مهيني",next:"اڳين مهيني",past:"{0} مهينا پهرين",future:"{0} مهينن ۾"},week:{previous:"پوئين هفتي",current:"هن هفتي",next:"اڳين هفتي",past:"{0} هفتا پهرين",future:"{0} هفتن ۾"},day:{previous:"ڪل",current:"اڄ",next:"سڀاڻي",past:"{0} ڏينهن پهرين",future:"{0} ڏينهن ۾"},hour:{current:"هن ڪلڪ",past:"{0} ڪلاڪ پهرين",future:"{0} ڪلاڪ ۾"},minute:{current:"هن منٽ",past:"{0} منٽ پهرين",future:"{0} منٽن ۾"},second:{current:"هاڻي",past:"{0} سيڪنڊ پهرين",future:"{0} سيڪنڊن ۾"},now:"هاڻي"}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t,r){e.exports={locale:"sk",long:r(207),short:r(208),narrow:r(209),quantify:r(210)}},function(e){e.exports={year:{previous:"minulý rok",current:"tento rok",next:"budúci rok",past:{one:"pred {0} rokom",many:"pred {0} roka",other:"pred {0} rokmi"},future:{one:"o {0} rok",few:"o {0} roky",many:"o {0} roka",other:"o {0} rokov"}},quarter:{previous:"minulý štvrťrok",current:"tento štvrťrok",next:"budúci štvrťrok",past:{one:"pred {0} štvrťrokom",many:"pred {0} štvrťroka",other:"pred {0} štvrťrokmi"},future:{one:"o {0} štvrťrok",few:"o {0} štvrťroky",many:"o {0} štvrťroka",other:"o {0} štvrťrokov"}},month:{previous:"minulý mesiac",current:"tento mesiac",next:"budúci mesiac",past:{one:"pred {0} mesiacom",many:"pred {0} mesiaca",other:"pred {0} mesiacmi"},future:{one:"o {0} mesiac",few:"o {0} mesiace",many:"o {0} mesiaca",other:"o {0} mesiacov"}},week:{previous:"minulý týždeň",current:"tento týždeň",next:"budúci týždeň",past:{one:"pred {0} týždňom",many:"pred {0} týždňa",other:"pred {0} týždňami"},future:{one:"o {0} týždeň",few:"o {0} týždne",many:"o {0} týždňa",other:"o {0} týždňov"}},day:{previous:"včera",current:"dnes",next:"zajtra",past:{one:"pred {0} dňom",many:"pred {0} dňa",other:"pred {0} dňami"},future:{one:"o {0} deň",few:"o {0} dni",many:"o {0} dňa",other:"o {0} dní"}},hour:{current:"v tejto hodine",past:{one:"pred {0} hodinou",many:"pred {0} hodinou",other:"pred {0} hodinami"},future:{one:"o {0} hodinu",few:"o {0} hodiny",many:"o {0} hodiny",other:"o {0} hodín"}},minute:{current:"v tejto minúte",past:{one:"pred {0} minútou",many:"pred {0} minúty",other:"pred {0} minútami"},future:{one:"o {0} minútu",few:"o {0} minúty",many:"o {0} minúty",other:"o {0} minút"}},second:{current:"teraz",past:{one:"pred {0} sekundou",many:"pred {0} sekundy",other:"pred {0} sekundami"},future:{one:"o {0} sekundu",few:"o {0} sekundy",many:"o {0} sekundy",other:"o {0} sekúnd"}},now:"teraz"}},function(e){e.exports={year:{previous:"minulý rok",current:"tento rok",next:"budúci rok",past:"pred {0} r.",future:"o {0} r."},quarter:{previous:"minulý štvrťr.",current:"tento štvrťr.",next:"budúci štvrťr.",past:"pred {0} štvrťr.",future:"o {0} štvrťr."},month:{previous:"minulý mes.",current:"tento mes.",next:"budúci mes.",past:"pred {0} mes.",future:"o {0} mes."},week:{previous:"minulý týž.",current:"tento týž.",next:"budúci týž.",past:"pred {0} týž.",future:"o {0} týž."},day:{previous:"včera",current:"dnes",next:"zajtra",past:"pred {0} d.",future:"o {0} d."},hour:{current:"v tejto hodine",past:"pred {0} h",future:"o {0} h"},minute:{current:"v tejto minúte",past:"pred {0} min",future:"o {0} min"},second:{current:"teraz",past:"pred {0} s",future:"o {0} s"},now:"teraz"}},function(e){e.exports={year:{previous:"minulý rok",current:"tento rok",next:"budúci rok",past:"pred {0} r.",future:"o {0} r."},quarter:{previous:"minulý štvrťr.",current:"tento štvrťr.",next:"budúci štvrťr.",past:"pred {0} štvrťr.",future:"o {0} štvrťr."},month:{previous:"minulý mes.",current:"tento mes.",next:"budúci mes.",past:"pred {0} mes.",future:"o {0} mes."},week:{previous:"minulý týž.",current:"tento týž.",next:"budúci týž.",past:"pred {0} týž.",future:"o {0} týž."},day:{previous:"včera",current:"dnes",next:"zajtra",past:"pred {0} d.",future:"o {0} d."},hour:{current:"v tejto hodine",past:"pred {0} h",future:"o {0} h"},minute:{current:"v tejto minúte",past:"pred {0} min",future:"o {0} min"},second:{current:"teraz",past:"pred {0} s",future:"o {0} s"},now:"teraz"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=!t[1];return 1==e&&n?"one":r>=2&&r<=4&&n?"few":n?"other":"many"}},function(e,t,r){e.exports={locale:"sl",long:r(212),short:r(213),narrow:r(214),quantify:r(215)}},function(e){e.exports={year:{previous:"lani",current:"letos",next:"naslednje leto",past:{one:"pred {0} letom",two:"pred {0} letoma",other:"pred {0} leti"},future:{one:"čez {0} leto",two:"čez {0} leti",few:"čez {0} leta",other:"čez {0} let"}},quarter:{previous:"zadnje četrtletje",current:"to četrtletje",next:"naslednje četrtletje",past:{one:"pred {0} četrtletjem",two:"pred {0} četrtletjema",other:"pred {0} četrtletji"},future:{one:"čez {0} četrtletje",two:"čez {0} četrtletji",few:"čez {0} četrtletja",other:"čez {0} četrtletij"}},month:{previous:"prejšnji mesec",current:"ta mesec",next:"naslednji mesec",past:{one:"pred {0} mesecem",two:"pred {0} mesecema",other:"pred {0} meseci"},future:{one:"čez {0} mesec",two:"čez {0} meseca",few:"čez {0} mesece",other:"čez {0} mesecev"}},week:{previous:"prejšnji teden",current:"ta teden",next:"naslednji teden",past:{one:"pred {0} tednom",two:"pred {0} tednoma",other:"pred {0} tedni"},future:{one:"čez {0} teden",two:"čez {0} tedna",few:"čez {0} tedne",other:"čez {0} tednov"}},day:{previous:"včeraj",current:"danes",next:"jutri",past:{one:"pred {0} dnevom",two:"pred {0} dnevoma",other:"pred {0} dnevi"},future:{one:"čez {0} dan",two:"čez {0} dneva",other:"čez {0} dni"}},hour:{current:"v tej uri",past:{one:"pred {0} uro",two:"pred {0} urama",other:"pred {0} urami"},future:{one:"čez {0} uro",two:"čez {0} uri",few:"čez {0} ure",other:"čez {0} ur"}},minute:{current:"to minuto",past:{one:"pred {0} minuto",two:"pred {0} minutama",other:"pred {0} minutami"},future:{one:"čez {0} minuto",two:"čez {0} minuti",few:"čez {0} minute",other:"čez {0} minut"}},second:{current:"zdaj",past:{one:"pred {0} sekundo",two:"pred {0} sekundama",other:"pred {0} sekundami"},future:{one:"čez {0} sekundo",two:"čez {0} sekundi",few:"čez {0} sekunde",other:"čez {0} sekund"}},now:"zdaj"}},function(e){e.exports={year:{previous:"lani",current:"letos",next:"naslednje leto",past:{one:"pred {0} letom",two:"pred {0} letoma",other:"pred {0} leti"},future:{one:"čez {0} leto",two:"čez {0} leti",few:"čez {0} leta",other:"čez {0} let"}},quarter:{previous:"zadnje četrtletje",current:"to četrtletje",next:"naslednje četrtletje",past:"pred {0} četrtl.",future:"čez {0} četrtl."},month:{previous:"prejšnji mesec",current:"ta mesec",next:"naslednji mesec",past:"pred {0} mes.",future:"čez {0} mes."},week:{previous:"prejšnji teden",current:"ta teden",next:"naslednji teden",past:"pred {0} ted.",future:"čez {0} ted."},day:{previous:"včeraj",current:"danes",next:"jutri",past:{one:"pred {0} dnevom",two:"pred {0} dnevoma",other:"pred {0} dnevi"},future:{one:"čez {0} dan",two:"čez {0} dneva",other:"čez {0} dni"}},hour:{current:"v tej uri",past:{one:"pred {0} uro",two:"pred {0} urama",other:"pred {0} urami"},future:{one:"čez {0} uro",two:"čez {0} uri",few:"čez {0} ure",other:"čez {0} ur"}},minute:{current:"to minuto",past:"pred {0} min.",future:"čez {0} min."},second:{current:"zdaj",past:"pred {0} s",future:"čez {0} s"},now:"zdaj"}},function(e){e.exports={year:{previous:"lani",current:"letos",next:"naslednje leto",past:{one:"pred {0} letom",two:"pred {0} letoma",other:"pred {0} leti"},future:{one:"čez {0} leto",two:"čez {0} leti",few:"čez {0} leta",other:"čez {0} let"}},quarter:{previous:"zadnje četrtletje",current:"to četrtletje",next:"naslednje četrtletje",past:"pred {0} četr.",future:"čez {0} četr."},month:{previous:"prejšnji mesec",current:"ta mesec",next:"naslednji mesec",past:"pred {0} mes.",future:"čez {0} mes."},week:{previous:"prejšnji teden",current:"ta teden",next:"naslednji teden",past:"pred {0} ted.",future:"čez {0} ted."},day:{previous:"včeraj",current:"danes",next:"jutri",past:{one:"pred {0} dnevom",two:"pred {0} dnevoma",other:"pred {0} dnevi"},future:{one:"čez {0} dan",two:"čez {0} dneva",other:"čez {0} dni"}},hour:{current:"v tej uri",past:"pred {0} h",future:"čez {0} h"},minute:{current:"to minuto",past:"pred {0} min",future:"čez {0} min"},second:{current:"zdaj",past:"pred {0} s",future:"čez {0} s"},now:"zdaj"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=!t[1],u=r.slice(-2);return n&&1==u?"one":n&&2==u?"two":n&&(3==u||4==u)||!n?"few":"other"}},function(e,t,r){e.exports={locale:"sr",long:r(217),short:r(218),narrow:r(219),quantify:r(8)}},function(e){e.exports={year:{previous:"прошле године",current:"ове године",next:"следеће године",past:{one:"пре {0} године",few:"пре {0} године",other:"пре {0} година"},future:{one:"за {0} годину",few:"за {0} године",other:"за {0} година"}},quarter:{previous:"прошлог квартала",current:"овог квартала",next:"следећег квартала",past:"пре {0} квартала",future:{one:"за {0} квартал",other:"за {0} квартала"}},month:{previous:"прошлог месеца",current:"овог месеца",next:"следећег месеца",past:{one:"пре {0} месеца",few:"пре {0} месеца",other:"пре {0} месеци"},future:{one:"за {0} месец",few:"за {0} месеца",other:"за {0} месеци"}},week:{previous:"прошле недеље",current:"ове недеље",next:"следеће недеље",past:{one:"пре {0} недеље",few:"пре {0} недеље",other:"пре {0} недеља"},future:{one:"за {0} недељу",few:"за {0} недеље",other:"за {0} недеља"}},day:{previous:"јуче",current:"данас",next:"сутра",past:"пре {0} дана",future:{one:"за {0} дан",other:"за {0} дана"}},hour:{current:"овог сата",past:{one:"пре {0} сата",few:"пре {0} сата",other:"пре {0} сати"},future:{one:"за {0} сат",few:"за {0} сата",other:"за {0} сати"}},minute:{current:"овог минута",past:"пре {0} минута",future:{one:"за {0} минут",other:"за {0} минута"}},second:{current:"сада",past:{one:"пре {0} секунде",few:"пре {0} секунде",other:"пре {0} секунди"},future:{one:"за {0} секунду",few:"за {0} секунде",other:"за {0} секунди"}},now:"сада"}},function(e){e.exports={year:{previous:"прошле год.",current:"ове год.",next:"следеће год.",past:"пре {0} год.",future:"за {0} год."},quarter:{previous:"прошлог квартала",current:"овог квартала",next:"следећег квартала",past:"пре {0} кв.",future:"за {0} кв."},month:{previous:"прошлог мес.",current:"овог мес.",next:"следећег мес.",past:"пре {0} мес.",future:"за {0} мес."},week:{previous:"прошле нед.",current:"ове нед.",next:"следеће нед.",past:"пре {0} нед.",future:"за {0} нед."},day:{previous:"јуче",current:"данас",next:"сутра",past:"пре {0} д.",future:"за {0} д."},hour:{current:"овог сата",past:"пре {0} ч.",future:"за {0} ч."},minute:{current:"овог минута",past:"пре {0} мин.",future:"за {0} мин."},second:{current:"сада",past:"пре {0} сек.",future:"за {0} сек."},now:"сада"}},function(e){e.exports={year:{previous:"прошле г.",current:"ове г.",next:"следеће г.",past:"пре {0} г.",future:"за {0} г."},quarter:{previous:"прошлог квартала",current:"овог квартала",next:"следећег квартала",past:"пре {0} кв.",future:"за {0} кв."},month:{previous:"прошлог м.",current:"овог м.",next:"следећег м.",past:"пре {0} м.",future:"за {0} м."},week:{previous:"прошле н.",current:"ове н.",next:"следеће н.",past:"пре {0} н.",future:"за {0} н."},day:{previous:"јуче",current:"данас",next:"сутра",past:"пре {0} д.",future:"за {0} д."},hour:{current:"овог сата",past:"пре {0} ч.",future:"за {0} ч."},minute:{current:"овог минута",past:"пре {0} мин.",future:"за {0} мин."},second:{current:"сада",past:"пре {0} с.",future:"за {0} с."},now:"сада"}},function(e,t,r){e.exports={locale:"sr-Latn",long:r(221),short:r(222),narrow:r(223),quantify:r(8)}},function(e){e.exports={year:{previous:"prošle godine",current:"ove godine",next:"sledeće godine",past:{one:"pre {0} godine",few:"pre {0} godine",other:"pre {0} godina"},future:{one:"za {0} godinu",few:"za {0} godine",other:"za {0} godina"}},quarter:{previous:"prošlog kvartala",current:"ovog kvartala",next:"sledećeg kvartala",past:"pre {0} kvartala",future:{one:"za {0} kvartal",other:"za {0} kvartala"}},month:{previous:"prošlog meseca",current:"ovog meseca",next:"sledećeg meseca",past:{one:"pre {0} meseca",few:"pre {0} meseca",other:"pre {0} meseci"},future:{one:"za {0} mesec",few:"za {0} meseca",other:"za {0} meseci"}},week:{previous:"prošle nedelje",current:"ove nedelje",next:"sledeće nedelje",past:{one:"pre {0} nedelje",few:"pre {0} nedelje",other:"pre {0} nedelja"},future:{one:"za {0} nedelju",few:"za {0} nedelje",other:"za {0} nedelja"}},day:{previous:"juče",current:"danas",next:"sutra",past:"pre {0} dana",future:{one:"za {0} dan",other:"za {0} dana"}},hour:{current:"ovog sata",past:{one:"pre {0} sata",few:"pre {0} sata",other:"pre {0} sati"},future:{one:"za {0} sat",few:"za {0} sata",other:"za {0} sati"}},minute:{current:"ovog minuta",past:"pre {0} minuta",future:{one:"za {0} minut",other:"za {0} minuta"}},second:{current:"sada",past:{one:"pre {0} sekunde",few:"pre {0} sekunde",other:"pre {0} sekundi"},future:{one:"za {0} sekundu",few:"za {0} sekunde",other:"za {0} sekundi"}},now:"sada"}},function(e){e.exports={year:{previous:"prošle god.",current:"ove god.",next:"sledeće god.",past:"pre {0} god.",future:"za {0} god."},quarter:{previous:"prošlog kvartala",current:"ovog kvartala",next:"sledećeg kvartala",past:"pre {0} kv.",future:"za {0} kv."},month:{previous:"prošlog mes.",current:"ovog mes.",next:"sledećeg mes.",past:"pre {0} mes.",future:"za {0} mes."},week:{previous:"prošle ned.",current:"ove ned.",next:"sledeće ned.",past:"pre {0} ned.",future:"za {0} ned."},day:{previous:"juče",current:"danas",next:"sutra",past:"pre {0} d.",future:"za {0} d."},hour:{current:"ovog sata",past:"pre {0} č.",future:"za {0} č."},minute:{current:"ovog minuta",past:"pre {0} min.",future:"za {0} min."},second:{current:"sada",past:"pre {0} sek.",future:"za {0} sek."},now:"sada"}},function(e){e.exports={year:{previous:"prošle g.",current:"ove g.",next:"sledeće g.",past:"pre {0} g.",future:"za {0} g."},quarter:{previous:"prošlog kvartala",current:"ovog kvartala",next:"sledećeg kvartala",past:"pre {0} kv.",future:"za {0} kv."},month:{previous:"prošlog m.",current:"ovog m.",next:"sledećeg m.",past:"pre {0} m.",future:"za {0} m."},week:{previous:"prošle n.",current:"ove n.",next:"sledeće n.",past:"pre {0} n.",future:"za {0} n."},day:{previous:"juče",current:"danas",next:"sutra",past:"pre {0} d.",future:"za {0} d."},hour:{current:"ovog sata",past:"pre {0} č.",future:"za {0} č."},minute:{current:"ovog minuta",past:"pre {0} min.",future:"za {0} min."},second:{current:"sada",past:"pre {0} s.",future:"za {0} s."},now:"sada"}},function(e,t,r){e.exports={locale:"sv",long:r(225),short:r(226),narrow:r(227),quantify:r(228)}},function(e){e.exports={year:{previous:"i fjol",current:"i år",next:"nästa år",past:"för {0} år sedan",future:"om {0} år"},quarter:{previous:"förra kvartalet",current:"detta kvartal",next:"nästa kvartal",past:"för {0} kvartal sedan",future:"om {0} kvartal"},month:{previous:"förra månaden",current:"denna månad",next:"nästa månad",past:{one:"för {0} månad sedan",other:"för {0} månader sedan"},future:{one:"om {0} månad",other:"om {0} månader"}},week:{previous:"förra veckan",current:"denna vecka",next:"nästa vecka",past:{one:"för {0} vecka sedan",other:"för {0} veckor sedan"},future:{one:"om {0} vecka",other:"om {0} veckor"}},day:{previous:"i går",current:"i dag",next:"i morgon",past:{one:"för {0} dag sedan",other:"för {0} dagar sedan"},future:{one:"om {0} dag",other:"om {0} dagar"}},hour:{current:"denna timme",past:{one:"för {0} timme sedan",other:"för {0} timmar sedan"},future:{one:"om {0} timme",other:"om {0} timmar"}},minute:{current:"denna minut",past:{one:"för {0} minut sedan",other:"för {0} minuter sedan"},future:{one:"om {0} minut",other:"om {0} minuter"}},second:{current:"nu",past:{one:"för {0} sekund sedan",other:"för {0} sekunder sedan"},future:{one:"om {0} sekund",other:"om {0} sekunder"}},now:"nu"}},function(e){e.exports={year:{previous:"i fjol",current:"i år",next:"nästa år",past:"för {0} år sen",future:"om {0} år"},quarter:{previous:"förra kv.",current:"detta kv.",next:"nästa kv.",past:"för {0} kv. sen",future:"om {0} kv."},month:{previous:"förra mån.",current:"denna mån.",next:"nästa mån.",past:"för {0} mån. sen",future:"om {0} mån."},week:{previous:"förra v.",current:"denna v.",next:"nästa v.",past:"för {0} v. sedan",future:"om {0} v."},day:{previous:"i går",current:"i dag",next:"i morgon",past:{one:"för {0} d sedan",other:"för {0} d sedan"},future:"om {0} d"},hour:{current:"denna timme",past:"för {0} tim sedan",future:"om {0} tim"},minute:{current:"denna minut",past:"för {0} min sen",future:"om {0} min"},second:{current:"nu",past:"för {0} s sen",future:{one:"om {0} sek",other:"om {0} sek"}},now:"nu"}},function(e){e.exports={year:{previous:"i fjol",current:"i år",next:"nästa år",past:"−{0} år",future:"+{0} år"},quarter:{previous:"förra kv.",current:"detta kv.",next:"nästa kv.",past:"−{0} kv",future:"+{0} kv."},month:{previous:"förra mån.",current:"denna mån.",next:"nästa mån.",past:"−{0} mån",future:"+{0} mån."},week:{previous:"förra v.",current:"denna v.",next:"nästa v.",past:"−{0} v",future:"+{0} v."},day:{previous:"igår",current:"idag",next:"imorgon",past:"−{0} d",future:"+{0} d"},hour:{current:"denna timme",past:"−{0} h",future:"+{0} h"},minute:{current:"denna minut",past:"−{0} min",future:"+{0} min"},second:{current:"nu",past:"−{0} s",future:"+{0} s"},now:"nu"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"sw",long:r(230),short:r(231),narrow:r(232),quantify:r(233)}},function(e){e.exports={year:{previous:"mwaka uliopita",current:"mwaka huu",next:"mwaka ujao",past:{one:"mwaka {0} uliopita",other:"miaka {0} iliyopita"},future:{one:"baada ya mwaka {0}",other:"baada ya miaka {0}"}},quarter:{previous:"robo ya mwaka iliyopita",current:"robo hii ya mwaka",next:"robo ya mwaka inayofuata",past:{one:"robo {0} iliyopita",other:"robo {0} zilizopita"},future:"baada ya robo {0}"},month:{previous:"mwezi uliopita",current:"mwezi huu",next:"mwezi ujao",past:{one:"mwezi {0} uliopita",other:"miezi {0} iliyopita"},future:{one:"baada ya mwezi {0}",other:"baada ya miezi {0}"}},week:{previous:"wiki iliyopita",current:"wiki hii",next:"wiki ijayo",past:{one:"wiki {0} iliyopita",other:"wiki {0} zilizopita"},future:"baada ya wiki {0}"},day:{previous:"jana",current:"leo",next:"kesho",past:{one:"siku {0} iliyopita",other:"siku {0} zilizopita"},future:"baada ya siku {0}"},hour:{current:"saa hii",past:{one:"saa {0} iliyopita",other:"saa {0} zilizopita"},future:"baada ya saa {0}"},minute:{current:"dakika hii",past:{one:"dakika {0} iliyopita",other:"dakika {0} zilizopita"},future:"baada ya dakika {0}"},second:{current:"sasa hivi",past:{one:"Sekunde {0} iliyopita",other:"Sekunde {0} zilizopita"},future:"baada ya sekunde {0}"},now:"sasa hivi"}},function(e){e.exports={year:{previous:"mwaka uliopita",current:"mwaka huu",next:"mwaka ujao",past:{one:"mwaka {0} uliopita",other:"miaka {0} iliyopita"},future:{one:"baada ya mwaka {0}",other:"baada ya miaka {0}"}},quarter:{previous:"robo ya mwaka iliyopita",current:"robo hii ya mwaka",next:"robo ya mwaka inayofuata",past:{one:"robo {0} iliyopita",other:"robo {0} zilizopita"},future:"baada ya robo {0}"},month:{previous:"mwezi uliopita",current:"mwezi huu",next:"mwezi ujao",past:{one:"mwezi {0} uliopita",other:"miezi {0} iliyopita"},future:{one:"baada ya mwezi {0}",other:"baada ya miezi {0}"}},week:{previous:"wiki iliyopita",current:"wiki hii",next:"wiki ijayo",past:{one:"wiki {0} iliyopita",other:"wiki {0} zilizopita"},future:"baada ya wiki {0}"},day:{previous:"jana",current:"leo",next:"kesho",past:{one:"siku {0} iliyopita",other:"siku {0} zilizopita"},future:"baada ya siku {0}"},hour:{current:"saa hii",past:{one:"saa {0} iliyopita",other:"saa {0} zilizopita"},future:"baada ya saa {0}"},minute:{current:"dakika hii",past:{one:"dakika {0} iliyopita",other:"dakika {0} zilizopita"},future:"baada ya dakika {0}"},second:{current:"sasa hivi",past:{one:"sekunde {0} iliyopita",other:"sekunde {0} zilizopita"},future:"baada ya sekunde {0}"},now:"sasa hivi"}},function(e){e.exports={year:{previous:"mwaka uliopita",current:"mwaka huu",next:"mwaka ujao",past:{one:"mwaka {0} uliopita",other:"miaka {0} iliyopita"},future:{one:"baada ya mwaka {0}",other:"baada ya miaka {0}"}},quarter:{previous:"robo ya mwaka iliyopita",current:"robo hii ya mwaka",next:"robo ya mwaka inayofuata",past:{one:"robo {0} iliyopita",other:"robo {0} zilizopita"},future:"baada ya robo {0}"},month:{previous:"mwezi uliopita",current:"mwezi huu",next:"mwezi ujao",past:{one:"mwezi {0} uliopita",other:"miezi {0} iliyopita"},future:{one:"baada ya mwezi {0}",other:"baada ya miezi {0}"}},week:{previous:"wiki iliyopita",current:"wiki hii",next:"wiki ijayo",past:{one:"wiki {0} iliyopita",other:"wiki {0} zilizopita"},future:"baada ya wiki {0}"},day:{previous:"jana",current:"leo",next:"kesho",past:{one:"siku {0} iliyopita",other:"siku {0} zilizopita"},future:"baada ya siku {0}"},hour:{current:"saa hii",past:{one:"Saa {0} iliyopita",other:"Saa {0} zilizopita"},future:"baada ya saa {0}"},minute:{current:"dakika hii",past:{one:"dakika {0} iliyopita",other:"dakika {0} zilizopita"},future:"baada ya dakika {0}"},second:{current:"sasa hivi",past:{one:"sekunde {0} iliyopita",other:"sekunde {0} zilizopita"},future:"baada ya sekunde {0}"},now:"sasa hivi"}},function(e,t){e.exports=function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"}},function(e,t,r){e.exports={locale:"ta",long:r(235),short:r(236),narrow:r(237),quantify:r(238)}},function(e){e.exports={year:{previous:"கடந்த ஆண்டு",current:"இந்த ஆண்டு",next:"அடுத்த ஆண்டு",past:{one:"{0} ஆண்டிற்கு முன்",other:"{0} ஆண்டுகளுக்கு முன்"},future:{one:"{0} ஆண்டில்",other:"{0} ஆண்டுகளில்"}},quarter:{previous:"கடந்த காலாண்டு",current:"இந்த காலாண்டு",next:"அடுத்த காலாண்டு",past:{one:"{0} காலாண்டுக்கு முன்",other:"{0} காலாண்டுகளுக்கு முன்"},future:{one:"+{0} காலாண்டில்",other:"{0} காலாண்டுகளில்"}},month:{previous:"கடந்த மாதம்",current:"இந்த மாதம்",next:"அடுத்த மாதம்",past:{one:"{0} மாதத்துக்கு முன்",other:"{0} மாதங்களுக்கு முன்"},future:{one:"{0} மாதத்தில்",other:"{0} மாதங்களில்"}},week:{previous:"கடந்த வாரம்",current:"இந்த வாரம்",next:"அடுத்த வாரம்",past:{one:"{0} வாரத்திற்கு முன்",other:"{0} வாரங்களுக்கு முன்"},future:{one:"{0} வாரத்தில்",other:"{0} வாரங்களில்"}},day:{previous:"நேற்று",current:"இன்று",next:"நாளை",past:{one:"{0} நாளுக்கு முன்",other:"{0} நாட்களுக்கு முன்"},future:{one:"{0} நாளில்",other:"{0} நாட்களில்"}},hour:{current:"இந்த ஒரு மணிநேரத்தில்",past:"{0} மணிநேரம் முன்",future:"{0} மணிநேரத்தில்"},minute:{current:"இந்த ஒரு நிமிடத்தில்",past:{one:"{0} நிமிடத்திற்கு முன்",other:"{0} நிமிடங்களுக்கு முன்"},future:{one:"{0} நிமிடத்தில்",other:"{0} நிமிடங்களில்"}},second:{current:"இப்போது",past:{one:"{0} விநாடிக்கு முன்",other:"{0} விநாடிகளுக்கு முன்"},future:{one:"{0} விநாடியில்",other:"{0} விநாடிகளில்"}},now:"இப்போது"}},function(e){e.exports={year:{previous:"கடந்த ஆண்டு",current:"இந்த ஆண்டு",next:"அடுத்த ஆண்டு",past:{one:"{0} ஆண்டிற்கு முன்",other:"{0} ஆண்டுகளுக்கு முன்"},future:{one:"{0} ஆண்டில்",other:"{0} ஆண்டுகளில்"}},quarter:{previous:"இறுதி காலாண்டு",current:"இந்த காலாண்டு",next:"அடுத்த காலாண்டு",past:"{0} காலா. முன்",future:"{0} காலா."},month:{previous:"கடந்த மாதம்",current:"இந்த மாதம்",next:"அடுத்த மாதம்",past:"{0} மாத. முன்",future:"{0} மாத."},week:{previous:"கடந்த வாரம்",current:"இந்த வாரம்",next:"அடுத்த வாரம்",past:"{0} வார. முன்",future:"{0} வார."},day:{previous:"நேற்று",current:"இன்று",next:"நாளை",past:{one:"{0} நாளுக்கு முன்",other:"{0} நாட்களுக்கு முன்"},future:{one:"{0} நாளில்",other:"{0} நாட்களில்"}},hour:{current:"இந்த ஒரு மணிநேரத்தில்",past:"{0} மணி. முன்",future:"{0} மணி."},minute:{current:"இந்த ஒரு நிமிடத்தில்",past:"{0} நிமி. முன்",future:"{0} நிமி."},second:{current:"இப்போது",past:"{0} விநா. முன்",future:"{0} விநா."},now:"இப்போது"}},function(e){e.exports={year:{previous:"கடந்த ஆண்டு",current:"இந்த ஆண்டு",next:"அடுத்த ஆண்டு",past:"{0} ஆ. முன்",future:"{0} ஆ."},quarter:{previous:"இறுதி காலாண்டு",current:"இந்த காலாண்டு",next:"அடுத்த காலாண்டு",past:"{0} கா. முன்",future:"{0} கா."},month:{previous:"கடந்த மாதம்",current:"இந்த மாதம்",next:"அடுத்த மாதம்",past:"{0} மா. முன்",future:"{0} மா."},week:{previous:"கடந்த வாரம்",current:"இந்த வாரம்",next:"அடுத்த வாரம்",past:"{0} வா. முன்",future:"{0} வா."},day:{previous:"நேற்று",current:"இன்று",next:"நாளை",past:"{0} நா. முன்",future:"{0} நா."},hour:{current:"இந்த ஒரு மணிநேரத்தில்",past:"{0} ம. முன்",future:"{0} ம."},minute:{current:"இந்த ஒரு நிமிடத்தில்",past:"{0} நி. முன்",future:"{0} நி."},second:{current:"இப்போது",past:"{0} வி. முன்",future:"{0} வி."},now:"இப்போது"}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t,r){e.exports={locale:"tr",long:r(240),short:r(241),narrow:r(242),quantify:r(243)}},function(e){e.exports={year:{previous:"geçen yıl",current:"bu yıl",next:"gelecek yıl",past:"{0} yıl önce",future:"{0} yıl sonra"},quarter:{previous:"geçen çeyrek",current:"bu çeyrek",next:"gelecek çeyrek",past:"{0} çeyrek önce",future:"{0} çeyrek sonra"},month:{previous:"geçen ay",current:"bu ay",next:"gelecek ay",past:"{0} ay önce",future:"{0} ay sonra"},week:{previous:"geçen hafta",current:"bu hafta",next:"gelecek hafta",past:"{0} hafta önce",future:"{0} hafta sonra"},day:{previous:"dün",current:"bugün",next:"yarın",past:"{0} gün önce",future:"{0} gün sonra"},hour:{current:"bu saat",past:"{0} saat önce",future:"{0} saat sonra"},minute:{current:"bu dakika",past:"{0} dakika önce",future:"{0} dakika sonra"},second:{current:"şimdi",past:"{0} saniye önce",future:"{0} saniye sonra"},now:"şimdi"}},function(e){e.exports={year:{previous:"geçen yıl",current:"bu yıl",next:"gelecek yıl",past:"{0} yıl önce",future:"{0} yıl sonra"},quarter:{previous:"geçen çeyrek",current:"bu çeyrek",next:"gelecek çeyrek",past:"{0} çyr. önce",future:"{0} çyr. sonra"},month:{previous:"geçen ay",current:"bu ay",next:"gelecek ay",past:"{0} ay önce",future:"{0} ay sonra"},week:{previous:"geçen hafta",current:"bu hafta",next:"gelecek hafta",past:"{0} hf. önce",future:"{0} hf. sonra"},day:{previous:"dün",current:"bugün",next:"yarın",past:"{0} gün önce",future:"{0} gün sonra"},hour:{current:"bu saat",past:"{0} sa. önce",future:"{0} sa. sonra"},minute:{current:"bu dakika",past:"{0} dk. önce",future:"{0} dk. sonra"},second:{current:"şimdi",past:"{0} sn. önce",future:"{0} sn. sonra"},now:"şimdi"}},function(e){e.exports={year:{previous:"geçen yıl",current:"bu yıl",next:"gelecek yıl",past:"{0} yıl önce",future:"{0} yıl sonra"},quarter:{previous:"geçen çeyrek",current:"bu çeyrek",next:"gelecek çeyrek",past:"{0} çyr. önce",future:"{0} çyr. sonra"},month:{previous:"geçen ay",current:"bu ay",next:"gelecek ay",past:"{0} ay önce",future:"{0} ay sonra"},week:{previous:"geçen hafta",current:"bu hafta",next:"gelecek hafta",past:"{0} hf. önce",future:"{0} hf. sonra"},day:{previous:"dün",current:"bugün",next:"yarın",past:"{0} gün önce",future:"{0} gün sonra"},hour:{current:"bu saat",past:"{0} sa. önce",future:"{0} sa. sonra"},minute:{current:"bu dakika",past:"{0} dk. önce",future:"{0} dk. sonra"},second:{current:"şimdi",past:"{0} sn. önce",future:"{0} sn. sonra"},now:"şimdi"}},function(e,t){e.exports=function(e){return 1==e?"one":"other"}},function(e,t,r){e.exports={locale:"uk",long:r(245),short:r(246),narrow:r(247),quantify:r(248)}},function(e){e.exports={year:{previous:"торік",current:"цього року",next:"наступного року",past:{one:"{0} рік тому",few:"{0} роки тому",many:"{0} років тому",other:"{0} року тому"},future:{one:"через {0} рік",few:"через {0} роки",many:"через {0} років",other:"через {0} року"}},quarter:{previous:"минулого кварталу",current:"цього кварталу",next:"наступного кварталу",past:{one:"{0} квартал тому",few:"{0} квартали тому",many:"{0} кварталів тому",other:"{0} кварталу тому"},future:{one:"через {0} квартал",few:"через {0} квартали",many:"через {0} кварталів",other:"через {0} кварталу"}},month:{previous:"минулого місяця",current:"цього місяця",next:"наступного місяця",past:{one:"{0} місяць тому",few:"{0} місяці тому",many:"{0} місяців тому",other:"{0} місяця тому"},future:{one:"через {0} місяць",few:"через {0} місяці",many:"через {0} місяців",other:"через {0} місяця"}},week:{previous:"минулого тижня",current:"цього тижня",next:"наступного тижня",past:{one:"{0} тиждень тому",few:"{0} тижні тому",many:"{0} тижнів тому",other:"{0} тижня тому"},future:{one:"через {0} тиждень",few:"через {0} тижні",many:"через {0} тижнів",other:"через {0} тижня"}},day:{previous:"учора",current:"сьогодні",next:"завтра",past:{one:"{0} день тому",few:"{0} дні тому",many:"{0} днів тому",other:"{0} дня тому"},future:{one:"через {0} день",few:"через {0} дні",many:"через {0} днів",other:"через {0} дня"}},hour:{current:"цієї години",past:{one:"{0} годину тому",many:"{0} годин тому",other:"{0} години тому"},future:{one:"через {0} годину",many:"через {0} годин",other:"через {0} години"}},minute:{current:"цієї хвилини",past:{one:"{0} хвилину тому",many:"{0} хвилин тому",other:"{0} хвилини тому"},future:{one:"через {0} хвилину",many:"через {0} хвилин",other:"через {0} хвилини"}},second:{current:"зараз",past:{one:"{0} секунду тому",many:"{0} секунд тому",other:"{0} секунди тому"},future:{one:"через {0} секунду",many:"через {0} секунд",other:"через {0} секунди"}},now:"зараз"}},function(e){e.exports={year:{previous:"торік",current:"цього року",next:"наступного року",past:"{0} р. тому",future:"через {0} р."},quarter:{previous:"минулого кв.",current:"цього кв.",next:"наступного кв.",past:"{0} кв. тому",future:"через {0} кв."},month:{previous:"минулого місяця",current:"цього місяця",next:"наступного місяця",past:"{0} міс. тому",future:"через {0} міс."},week:{previous:"минулого тижня",current:"цього тижня",next:"наступного тижня",past:"{0} тиж. тому",future:"через {0} тиж."},day:{previous:"учора",current:"сьогодні",next:"завтра",past:"{0} дн. тому",future:"через {0} дн."},hour:{current:"цієї години",past:"{0} год тому",future:"через {0} год"},minute:{current:"цієї хвилини",past:"{0} хв тому",future:"через {0} хв"},second:{current:"зараз",past:"{0} с тому",future:"через {0} с"},now:"зараз"}},function(e){e.exports={year:{previous:"торік",current:"цього року",next:"наступного року",past:"{0} р. тому",future:"за {0} р."},quarter:{previous:"минулого кв.",current:"цього кв.",next:"наступного кв.",past:"{0} кв. тому",future:"за {0} кв."},month:{previous:"минулого місяця",current:"цього місяця",next:"наступного місяця",past:"{0} міс. тому",future:"за {0} міс."},week:{previous:"минулого тижня",current:"цього тижня",next:"наступного тижня",past:"{0} тиж. тому",future:"за {0} тиж."},day:{previous:"учора",current:"сьогодні",next:"завтра",past:{one:"{0} д. тому",other:"-{0} дн."},future:"за {0} д."},hour:{current:"цієї години",past:"{0} год тому",future:"за {0} год"},minute:{current:"цієї хвилини",past:"{0} хв тому",future:"за {0} хв"},second:{current:"зараз",past:"{0} с тому",future:"за {0} с"},now:"зараз"}},function(e,t){e.exports=function(e){var t=String(e).split("."),r=t[0],n=!t[1],u=r.slice(-1),a=r.slice(-2);return n&&1==u&&11!=a?"one":n&&u>=2&&u<=4&&(a<12||a>14)?"few":n&&0==u||n&&u>=5&&u<=9||n&&a>=11&&a<=14?"many":"other"}},function(e,t,r){e.exports={locale:"vi",long:r(250),short:r(251),narrow:r(252)}},function(e){e.exports={year:{previous:"năm ngoái",current:"năm nay",next:"năm sau",past:"{0} năm trước",future:"sau {0} năm nữa"},quarter:{previous:"quý trước",current:"quý này",next:"quý sau",past:"{0} quý trước",future:"sau {0} quý nữa"},month:{previous:"tháng trước",current:"tháng này",next:"tháng sau",past:"{0} tháng trước",future:"sau {0} tháng nữa"},week:{previous:"tuần trước",current:"tuần này",next:"tuần sau",past:"{0} tuần trước",future:"sau {0} tuần nữa"},day:{previous:"Hôm qua",current:"Hôm nay",next:"Ngày mai",past:"{0} ngày trước",future:"sau {0} ngày nữa"},hour:{current:"giờ này",past:"{0} giờ trước",future:"sau {0} giờ nữa"},minute:{current:"phút này",past:"{0} phút trước",future:"sau {0} phút nữa"},second:{current:"bây giờ",past:"{0} giây trước",future:"sau {0} giây nữa"},now:"bây giờ"}},function(e){e.exports={year:{previous:"năm ngoái",current:"năm nay",next:"năm sau",past:"{0} năm trước",future:"sau {0} năm nữa"},quarter:{previous:"quý trước",current:"quý này",next:"quý sau",past:"{0} quý trước",future:"sau {0} quý nữa"},month:{previous:"tháng trước",current:"tháng này",next:"tháng sau",past:"{0} tháng trước",future:"sau {0} tháng nữa"},week:{previous:"tuần trước",current:"tuần này",next:"tuần sau",past:"{0} tuần trước",future:"sau {0} tuần nữa"},day:{previous:"Hôm qua",current:"Hôm nay",next:"Ngày mai",past:"{0} ngày trước",future:"sau {0} ngày nữa"},hour:{current:"giờ này",past:"{0} giờ trước",future:"sau {0} giờ nữa"},minute:{current:"phút này",past:"{0} phút trước",future:"sau {0} phút nữa"},second:{current:"bây giờ",past:"{0} giây trước",future:"sau {0} giây nữa"},now:"bây giờ"}},function(e){e.exports={year:{previous:"năm ngoái",current:"năm nay",next:"năm sau",past:"{0} năm trước",future:"sau {0} năm nữa"},quarter:{previous:"quý trước",current:"quý này",next:"quý sau",past:"{0} quý trước",future:"sau {0} quý nữa"},month:{previous:"tháng trước",current:"tháng này",next:"tháng sau",past:"{0} tháng trước",future:"sau {0} tháng nữa"},week:{previous:"tuần trước",current:"tuần này",next:"tuần sau",past:"{0} tuần trước",future:"sau {0} tuần nữa"},day:{previous:"Hôm qua",current:"Hôm nay",next:"Ngày mai",past:"{0} ngày trước",future:"sau {0} ngày nữa"},hour:{current:"giờ này",past:"{0} giờ trước",future:"sau {0} giờ nữa"},minute:{current:"phút này",past:"{0} phút trước",future:"sau {0} phút nữa"},second:{current:"bây giờ",past:"{0} giây trước",future:"sau {0} giây nữa"},now:"bây giờ"}},function(e,t,r){e.exports={locale:"zh",long:r(254),short:r(255),narrow:r(256)}},function(e){e.exports={year:{previous:"去年",current:"今年",next:"明年",past:"{0}年前",future:"{0}年后"},quarter:{previous:"上季度",current:"本季度",next:"下季度",past:"{0}个季度前",future:"{0}个季度后"},month:{previous:"上个月",current:"本月",next:"下个月",past:"{0}个月前",future:"{0}个月后"},week:{previous:"上周",current:"本周",next:"下周",past:"{0}周前",future:"{0}周后"},day:{previous:"昨天",current:"今天",next:"明天",past:"{0}天前",future:"{0}天后"},hour:{current:"这一时间 / 此时",past:"{0}小时前",future:"{0}小时后"},minute:{current:"此刻",past:"{0}分钟前",future:"{0}分钟后"},second:{current:"现在",past:"{0}秒钟前",future:"{0}秒钟后"},now:"现在"}},function(e){e.exports={year:{previous:"去年",current:"今年",next:"明年",past:"{0}年前",future:"{0}年后"},quarter:{previous:"上季度",current:"本季度",next:"下季度",past:"{0}个季度前",future:"{0}个季度后"},month:{previous:"上个月",current:"本月",next:"下个月",past:"{0}个月前",future:"{0}个月后"},week:{previous:"上周",current:"本周",next:"下周",past:"{0}周前",future:"{0}周后"},day:{previous:"昨天",current:"今天",next:"明天",past:"{0}天前",future:"{0}天后"},hour:{current:"这一时间 / 此时",past:"{0}小时前",future:"{0}小时后"},minute:{current:"此刻",past:"{0}分钟前",future:"{0}分钟后"},second:{current:"现在",past:"{0}秒前",future:"{0}秒后"},now:"现在"}},function(e){e.exports={year:{previous:"去年",current:"今年",next:"明年",past:"{0}年前",future:"{0}年后"},quarter:{previous:"上季度",current:"本季度",next:"下季度",past:"{0}个季度前",future:"{0}个季度后"},month:{previous:"上个月",current:"本月",next:"下个月",past:"{0}个月前",future:"{0}个月后"},week:{previous:"上周",current:"本周",next:"下周",past:"{0}周前",future:"{0}周后"},day:{previous:"昨天",current:"今天",next:"明天",past:"{0}天前",future:"{0}天后"},hour:{current:"这一时间 / 此时",past:"{0}小时前",future:"{0}小时后"},minute:{current:"此刻",past:"{0}分钟前",future:"{0}分钟后"},second:{current:"现在",past:"{0}秒前",future:"{0}秒后"},now:"现在"}},function(e,t,r){e.exports={locale:"zu",long:r(258),short:r(259),narrow:r(260),quantify:r(261)}},function(e){e.exports={year:{previous:"onyakeni odlule",current:"kulo nyaka",next:"unyaka ozayo",past:{one:"{0} unyaka odlule",other:"{0} iminyaka edlule"},future:{one:"onyakeni ongu-{0} ozayo",other:"eminyakeni engu-{0} ezayo"}},quarter:{previous:"ikota edlule",current:"le kota",next:"ikota ezayo",past:{one:"{0} ikota edlule",other:"{0} amakota adlule"},future:{one:"kwikota engu-{0} ezayo",other:"kumakota angu-{0} ezayo"}},month:{previous:"inyanga edlule",current:"le nyanga",next:"inyanga ezayo",past:{one:"{0} inyanga edlule",other:"{0} izinyanga ezedlule"},future:{one:"enyangeni engu-{0}",other:"ezinyangeni ezingu-{0} ezizayo"}},week:{previous:"iviki eledlule",current:"leli viki",next:"iviki elizayo",past:{one:"evikini elingu-{0} eledlule",other:"amaviki angu-{0} edlule"},future:{one:"evikini elingu-{0}",other:"emavikini angu-{0}"}},day:{previous:"izolo",current:"namhlanje",next:"kusasa",past:{one:"osukwini olungu-{0} olwedlule",other:"ezinsukwini ezingu-{0} ezedlule."},future:{one:"osukwini olungu-{0} oluzayo",other:"ezinsukwini ezingu-{0} ezizayo"}},hour:{current:"leli hora",past:{one:"{0} ihora eledlule",other:"emahoreni angu-{0} edlule"},future:{one:"ehoreni elingu-{0} elizayo",other:"emahoreni angu-{0} ezayo"}},minute:{current:"leli minithi",past:{one:"{0} iminithi eledlule",other:"{0} amaminithi edlule"},future:{one:"kuminithi elingu-{0} elizayo",other:"kumaminithi angu-{0} ezayo"}},second:{current:"manje",past:{one:"{0} isekhondi eledlule",other:"{0} amasekhondi edlule"},future:{one:"kusekhondi elingu-{0} elizayo",other:"kumasekhondi angu-{0} ezayo"}},now:"manje"}},function(e){e.exports={year:{previous:"onyakeni odlule",current:"kulo nyaka",next:"unyaka ozayo",past:"{0} unyaka odlule",future:{one:"onyakeni ongu-{0} ozayo",other:"eminyakeni engu-{0} ezayo"}},quarter:{previous:"ikota edlule",current:"le kota",next:"ikota ezayo",past:{one:"{0} amakota adlule",other:"{0} amakota edlule"},future:{one:"kwikota engu-{0} ezayo",other:"kumakota angu-{0} ezayo"}},month:{previous:"inyanga edlule",current:"le nyanga",next:"inyanga ezayo",past:"{0} izinyanga ezedlule",future:"ezinyangeni ezingu-{0} ezizayo"},week:{previous:"iviki eledlule",current:"leli viki",next:"iviki elizayo",past:"amaviki angu-{0} edlule",future:{one:"evikini elingu-{0} elizayo",other:"emavikini angu-{0} ezayo"}},day:{previous:"izolo",current:"namhlanje",next:"kusasa",past:{one:"{0} usuku olwedlule",other:"{0} izinsuku ezedlule"},future:{one:"osukwini olungu-{0} oluzayo",other:"ezinsukwini ezingu-{0} ezizayo"}},hour:{current:"leli hora",past:{one:"{0} ihora eledlule",other:"emahoreni angu-{0} edlule"},future:{one:"ehoreni elingu-{0} elizayo",other:"emahoreni angu-{0} ezayo"}},minute:{current:"leli minithi",past:{one:"{0} iminithi eledlule",other:"{0} amaminithi edlule"},future:{one:"kuminithi elingu-{0} elizayo",other:"kumaminithi angu-{0} ezayo"}},second:{current:"manje",past:{one:"{0} isekhondi eledlule",other:"{0} amasekhondi edlule"},future:{one:"kusekhondi elingu-{0} elizayo",other:"kumasekhondi angu-{0} ezayo"}},now:"manje"}},function(e){e.exports={year:{previous:"onyakeni odlule",current:"kulo nyaka",next:"unyaka ozayo",past:"{0} unyaka odlule",future:{one:"onyakeni ongu-{0} ozayo",other:"eminyakeni engu-{0} ezayo"}},quarter:{previous:"ikota edlule",current:"le kota",next:"ikota ezayo",past:{one:"{0} amakota adlule",other:"{0} amakota edlule"},future:"kumakota angu-{0}"},month:{previous:"inyanga edlule",current:"le nyanga",next:"inyanga ezayo",past:"{0} izinyanga ezedlule",future:"enyangeni engu-{0} ezayo"},week:{previous:"iviki eledlule",current:"leli viki",next:"iviki elizayo",past:"amaviki angu-{0} edlule",future:"emavikini angu-{0} ezayo"},day:{previous:"izolo",current:"namhlanje",next:"kusasa",past:{one:"{0} usuku olwedlule",other:"{0} izinsuku ezedlule"},future:{one:"osukwini olungu-{0} oluzayo",other:"ezinsukwini ezingu-{0} ezizayo"}},hour:{current:"leli hora",past:{one:"{0} ihora eledlule",other:"{0} amahora edlule"},future:{one:"ehoreni elingu-{0} elizayo",other:"emahoreni angu-{0} ezayo"}},minute:{current:"leli minithi",past:{one:"{0} iminithi eledlule",other:"{0} amaminithi edlule"},future:{one:"kuminithi elingu-{0} elizayo",other:"kumaminithi angu-{0} ezayo"}},second:{current:"manje",past:{one:"{0} isekhondi eledlule",other:"{0} amasekhondi edlule"},future:{one:"kusekhondi elingu-{0} elizayo",other:"kumasekhondi angu-{0} ezayo"}},now:"manje"}},function(e,t){e.exports=function(e){return e>=0&&e<=1?"one":"other"}}]);

var LearnLogger=Base.extend({_loggerImpl:null,_sentOutErrors:{},constructor:function(loggerImpl){this._loggerImpl=loggerImpl;},error:function(error){var errorMessage=((typeof error==="object")&&error.hasOwnProperty('stack'))?error.stack:String(error);if(this._needSendError(errorMessage)){var referer=UrlUtils.getCurrentUrl();this._loggerImpl.send(LogUrl.FRONTEND_ERROR_LOG_URL,{errorMessage:errorMessage,referer:referer,});}
if(this._sentOutErrors.hasOwnProperty(errorMessage)){++this._sentOutErrors[errorMessage];}
else{this._sentOutErrors[errorMessage]=1;}},_needSendError:function(message){if(this._sentOutErrors.hasOwnProperty(message)){var messagesCount=this._sentOutErrors[message];return(String(messagesCount).length!==String(messagesCount+1).length)}
return true;}},{_instance:null,getInstance:function(){if(this._instance===null){var loggerImpl=BrowserUtils.hasNavigatorSendBeaconSupport()?new LearnLogger.NavigatorSendBeaconLoggerImpl():new LearnLogger.JQueryAjaxLoggerImpl();this._instance=new LearnLogger(loggerImpl);}
return this._instance;},NavigatorSendBeaconLoggerImpl:Base.extend({send:function(url,data){var formData=new FormData();for(var key in data){if(data.hasOwnProperty(key)){formData.append(key,data[key]);}}
window.navigator.sendBeacon(url,formData)}}),JQueryAjaxLoggerImpl:Base.extend({send:function(url,data){$.ajax({url:url,data:data,processData:false,type:'POST',})}})});

var ViewContentItemType=Base.extend({},{PRESENTATION:'presentation',PRESENTATION_WITH_INTERACTION:'quiz',SWF:'swf',VIDEO:'video',QUIZ:'standalone_quiz',SURVEY_QUIZ:'survey_quiz',FOLDER:'folder',SHARED_FOLDER:'shared_folder',SCORM:'scorm',LEARNING_PATH:'learning_path',LEARNING_TRACK:'learning_track',MS_WORD:'doc',AUDIO:'audio',PDF:'pdf',IMAGE:'image',MS_POWER_POINT:'ppt',MS_EXCEL:'xls',SCENARIO:'scenario',SURVEY_SCENARIO:'survey_scenario',ISPRING_CONTENT:'ispring_content',LINK:'link',HOMEWORK:'homework',FLIP_BOOK:'flip_book',VISUALS_CONTENT:'visuals_content',LONGREAD:'longread',TRAINING:'training',ONLINE_QUIZ:'online_quiz',});
(function ($, m) {
    m.sign = m.sign || function(x) {
        x = +x; // преобразуем в число
        if (x === 0 || isNaN(x)) {
            return x;
        }
        return x > 0 ? 1 : -1;
    };

    /**
     * @deprecated
     * @param format
     */
    $.fn.initTimeAgoOld = function(format /* = undefined */) {
        format = format ? format : DateTimeFormatter.FORMAT.MEDIUM_DATE_SHORT_TIME;
        var locale = EnvironmentInfo.getLocale();
        var timeAgo = new TimeAgo(locale);
        this.each(function() {
            var date = Date.parse($(this).attr('data-datetime'));
            if (date)
            {
                $(this).text(timeAgo.format(date));
                $(this).attr('title', DateTimeFormatter.format(date, EnvironmentInfo.getLocale(), format));
            }
        });
    };

    $.fn.initTimeAgo = function(format /* = undefined */) {
        format = format ? format : DateTimeFormatter.FORMAT.MEDIUM_DATE_SHORT_TIME;
        var locale = EnvironmentInfo.getLocale();
        var timeAgo = new TimeAgo(locale);
        this.each(function() {
            var date = new Date($(this).attr('data-datetime'));
            if (date)
            {
                $(this).text(timeAgo.format(date));
                $(this).attr('title', DateTimeFormatter.format(date, EnvironmentInfo.getLocale(), format));
            }
        });
    };
})(jQuery, Math);

var AttachmentsList=EventDispatcher.extend({_form:null,_browseButtonContainer:null,_attachmentListContainer:null,_attachmentList:null,_uploader:null,_uploading:null,_errorMessage:null,_commentId:null,_createAttachmentUrl:null,_loadListUrl:null,_files:null,_oldFiles:null,_numUploadFiles:null,_maxFileSize:null,_attachmentsListTitle:null,_isChanged:false,constructor:function(formElement,browseButtonContainer,loadListUrl,createAttachmentUrl){this._form=formElement;this._files=[];this._oldFiles=[];this._numUploadFiles=0;this._maxFileSize=AttachmentsList.MAX_FILE_SIZE;this._errorMessage='';++AttachmentsList.uploaderCounter;this._setBrowseButtonContainer(browseButtonContainer);this._setCreateAttachmentUrl(createAttachmentUrl);this._setLoadListUrl(loadListUrl);this._updateDeleteLinks();this._updateFiles();},restoreState:function(){this._files=this._oldFiles.slice(0);this._numUploadFiles=this._files.length;this._attachmentList.find(AttachmentsList.selectors.ATTACHMENT).show();var thisPtr=this;this._attachmentList.find(AttachmentsList.selectors.DELETE_LINK).each(function(){var link=$(this);var container=link.parent();var id=thisPtr._getAttachmentIdFromContainer(container);var index=$.inArray(id,thisPtr._oldFiles);if(index==-1){var deleteUrl=link.attr("href");$.post(deleteUrl);container.remove();}});this._checkAttachmentsList();},getFiles:function(){return this._files;},setChanged:function(isChanged){this._isChanged=isChanged;},isChanged:function(){return this._isChanged;},setMaxFileSize:function(maxFileSize){this._maxFileSize=maxFileSize;},_reset:function(){this._files=[];this._oldFiles=[];this._numUploadFiles=0;this._errorMessage='';},_setCreateAttachmentUrl:function(uploadUrl){this._createAttachmentUrl=uploadUrl;},_setLoadListUrl:function(loadListUrl){this._loadListUrl=loadListUrl;},_setBrowseButtonContainer:function(buttonContainer){this._browseButtonContainer=buttonContainer;this._attachmentsListTitle=this._form.find('.attachments_list_title');this._insertUploader();this._form.on('click','.cancel_upload',handler(this,'_onCancelUpload'));this._initAttachments();},_updateDeleteLinks:function(){var thisPtr=this;this._attachmentList.find(AttachmentsList.selectors.DELETE_LINK).click(function(){return thisPtr._deleteAttachmentClickHandler($(this));});},_updateFiles:function(){var thisPtr=this;this._attachmentList.find(".attachment_id").each(function(){var id=$(this).val();thisPtr._files.push(id);thisPtr._oldFiles.push(id);++thisPtr._numUploadFiles;});this._numUploadFiles=this._files.length;this._updateTitle();this._checkAttachmentsList();},_resetAttachmentListContainer:function(){this._reset();this._attachmentsListTitle.text('');var attachments=this._attachmentList.find(AttachmentsList.selectors.ATTACHMENT);attachments.remove();this._attachmentListContainer.hide();},_insertUploader:function()
{var uploaderHtml=HtmlUploader.getUploaderCode(AttachmentsList.UPLOADER_ID+AttachmentsList.uploaderCounter,null,true);this._browseButtonContainer.append(uploaderHtml);this._initUploader();},_initUploader:function(){this._uploader=HtmlUploader.initUploader(AttachmentsList.UPLOADER_ID+AttachmentsList.uploaderCounter);this._uploader.addListener('select',this,this._onSelect);this._uploader.addListener('complete',this,this._onAttachmentUploadComplete);this._uploader.addListener('progress',this,this._onProgress);this._uploader.addListener('error',this,this._onUploadAttachmentError);this._uploader.setTitle(Messages.AttachmentsList.UPLOAD_BUTTON_TITLE);},_hideUploader:function(){this._browseButtonContainer.hide();},_showUploader:function(){this._browseButtonContainer.show();},_initAttachments:function(){this._uploading=false;this._attachmentListContainer=this._form.find(AttachmentsList.selectors.ATTACHMENTS_LIST_CONTAINER);this._attachmentList=this._attachmentListContainer.find(AttachmentsList.selectors.ATTACHMENTS_LIST);},_onSelect:function(fileName,size,type,selectedFile,index){if(size>this._maxFileSize){UiToast.showCritical(fileName+': '+Messages.AttachmentsList.MSG_TOO_BIG_FILE);return;}
if(this._numUploadFiles>=AttachmentsList.MAX_FILES_TO_ATTACH){UiToast.showCritical(fileName+': '+Messages.AttachmentsList.MSG_TOO_MANY_FILES);return;}
this._uploading=true;this.dispatchEvent(AttachmentsList.event.START_UPLOAD,this._form);var data={name:fileName,index:index,size:size};++this._numUploadFiles;$.post(this._createAttachmentUrl,data,handler(this,"_onCreateAttachment"),'json');},_onCreateAttachment:function(data){if(data.redirect_url){UrlUtils.redirectToUrl(data.redirect_url);}
if(data.hasOwnProperty('success')&&data.success==0){UiToast.showCritical(Messages.AttachmentsList.MSG_SERVER_ERROR);return;}
this._files.push(''+data.id);this._checkAttachmentsList();this._attachmentList.append(data.content);this._uploader.startUpload(data.url,undefined,data.index);},_onCancelUpload:function(event){var container=$(event.target).parent();var id=this._getAttachmentIdFromContainer(container);this._removeFile(id);container.remove();var index=container.find('.index').val();this._cancelUpload(index);},_cancelUpload:function(index){this._uploader.cancelUpload(index);this._handleFinishUpload();},_onAttachmentUploadComplete:function(index){this._updateProgressBar(index,'100');this._updateAttachmentsList(index);},_onProgress:function(completed,total,index){completed=parseFloat(completed);total=parseFloat(total);var progress=(total>0)?(completed/total):0;this._updateProgressBar(index,progress);},_updateProgressBar:function(index,progress){var attachment=this._getAttachmentContainerByIndex(index);attachment.find('.progress_bar .active_progress_block').css('width',progress+'%');},_handleFinishUpload:function(){var uploadingAttachments=this._attachmentList.find(AttachmentsList.selectors.UPLOADING_ATTACHMENT);if(!uploadingAttachments.length){this._uploading=false;this.dispatchEvent(AttachmentsList.event.FINISH_UPLOAD,this._form);}},_onUploadAttachmentError:function(message,code,index){this._addErrorMessage(index,code);this._removeFile(this._getAttachmentIdByIndex(index));this._removeAttachmentContainerByIndex(index);this._handleFinishUpload();},_addErrorMessage:function(attachmentIndex,errorResponseCode){var errorText=errorResponseCode?AttachmentsList.error[errorResponseCode]:Messages.AttachmentsList.MSG_SERVER_ERROR;var fileName=this._getFileNameByIndex(attachmentIndex);this._errorMessage+='"'+fileName+'":'+errorText+'\n';},_removeAttachmentContainerByIndex:function(attachmentIndex){var attachment=this._getAttachmentContainerByIndex(attachmentIndex);attachment.remove();},_getFileNameByIndex:function(index){var attachment=this._getAttachmentContainerByIndex(index);return attachment.find('.file_name').val();},_getAttachmentIdByIndex:function(index){var container=this._getAttachmentContainerByIndex(index);return this._getAttachmentIdFromContainer(container);},_getAttachmentIdFromContainer:function(container){return container.find('.attachment_id').val();},_getAttachmentContainerByIndex:function(index){return this._attachmentList.find('input[class="index"][value="'+index+'"]').parent();},_getAttachmentContainerById:function(id){return this._attachmentList.find('input[class="attachment_id"][value="'+id+'"]').parent();},_updateAttachmentsList:function(uploadedAttachmentIndex){$.post(this._loadListUrl,{},function(data){if(data.redirect_url){UrlUtils.navigateToUrl(data.redirect_url);return;}
var uploadedAttachmentId=parseInt(this._getAttachmentIdByIndex(uploadedAttachmentIndex));var attachments=data.attachments;$.each(attachments,function(id,element){var attachment=this._getAttachmentContainerById(id);var isUploadedAttachmentId=(parseInt(id)===uploadedAttachmentId);var isUploadingAttachment=this._isUploadingAttachment(id);if(isUploadedAttachmentId||!isUploadingAttachment){attachment.replaceWith($.parseHTML(element));}}.bind(this));this._updateDeleteLinks();this._updateTitle();this._handleFinishUpload();}.bind(this),'json');},_isUploadingAttachment:function(attachmentId){var container=this._getAttachmentContainerById(attachmentId);return(container.length===0)?false:container.hasClass(AttachmentsList.UPLOADING_ATTACHMENT_CLASS_NAME);},_updateTitle:function(){this._attachmentList.find('.file').each(function(){var fileName=$(this).html();$(this).attr('title',fileName);if(fileName.length>AttachmentsList.MAX_FILE_NAME+3){$(this).text(fileName.slice(0,AttachmentsList.MAX_FILE_NAME)+AttachmentsList.THREE_DOTS);}});},_deleteAttachmentClickHandler:function(link){var container=link.parent();var attachmentId=this._getAttachmentIdFromContainer(container);this._removeFile(attachmentId);var deleteUrl=link.attr('href');var index=$.inArray(attachmentId,this._oldFiles);if(index>-1){link.parent(AttachmentsList.selectors.ATTACHMENT).hide();}
else{link.parent(AttachmentsList.selectors.ATTACHMENT).remove();$.post(deleteUrl);}
return false;},_removeFile:function(id){var index=$.inArray(id,this._files);if(index>-1){this._files.splice(index,1);--this._numUploadFiles;}
this._checkAttachmentsList();},_checkAttachmentsList:function(){if(!this._files.length){this._attachmentListContainer.hide();}
else{var text=TextBuilder.build(Messages.AttachmentsList.MSG_TITLE,{COUNT:this._files.length});this._attachmentsListTitle.text(text);this._attachmentListContainer.show();}
if(this._files.length>=AttachmentsList.MAX_FILES_TO_ATTACH){this._hideUploader();}
else{this._showUploader();}
this._checkChanged();},_checkChanged:function(){if(this._oldFiles.length!=this._files.length){this.setChanged(true);return;}
for(var i in this._oldFiles){var isChanged=$.inArray(this._oldFiles[i],this._files)==-1;if(isChanged){this.setChanged(true);return;}}
this.setChanged(false);}},{UPLOADER_ID:'attachmentsListUploader',selectors:{ATTACHMENTS_LIST_CONTAINER:'.attachments_list_container',ATTACHMENTS_LIST:'.editable_attachments_list',ATTACHMENT:'.attachment',DELETE_LINK:'a.list_item_action.delete_item',UPLOADING_ATTACHMENT:'.new_attachment'},UPLOADING_ATTACHMENT_CLASS_NAME:'new_attachment',THREE_DOTS:"...",MAX_FILE_NAME:50,MAX_FILE_SIZE:500*1024*1024,MAX_FILES_TO_ATTACH:10,uploaderCounter:0,event:{START_UPLOAD:'start_upload',FINISH_UPLOAD:'finish_upload'},error:{413:Messages.AttachmentsList.MSG_TOO_BIG_FILE,414:Messages.AttachmentsList.MSG_TOO_MANY_FILES}});

$(function(){if(!parseInt($('#isBrowserErrorLoggingEnabled').val(),10)){return;}
window.addEventListener('error',function(event){if(event.error){LearnLogger.getInstance().error(event.error);}
else{var errorMessage=event.message;if(event.filename!=null){errorMessage+="\n at "+[event.filename,event.lineno,event.colno].join(":");}
LearnLogger.getInstance().error(errorMessage);}});window.addEventListener('unhandledrejection',function(event){LearnLogger.getInstance().error(event.reason);});});

var CommentsDecorator=Base.extend({},{ZERO_SEPARATOR_WIDTH_SPACE_ENCODED_CHAR:"\u200B",initEllipsis:function(container)
{var commentBodyTexts=container.find('.comment_body .comment_body_text:visible').not('.already_with_ellipsis');$.each(commentBodyTexts,function()
{$(this).textellipsiswithexpanding();$(this).addClass('already_with_ellipsis')});container.find('.attachment').find('.file').textellipsisautosize();},setTimeago:function(container)
{container.find('.timeago').initTimeAgoOld();},processCommentHtml:function(container){var html=CommentsDecorator._processCommentHtmlText(container.html());container.html(html);CommentsDecorator._removeEmptyLines(container);container.contents().each(function(){var elem=$(this);if(!elem.is('br')){var safeText=HtmlEntitiesCoding.codeHtmlEntities(elem.text());elem.replaceWith(UIUrlUtils.replaceLinksWithHtmlLinks(safeText));}});return container.html();},_processCommentHtmlText:function(html){return html.replace(/<div><br><\/div>/gi,'<br>').replace(/<div( style=["|'](.*)["|'])?>/gi,'<br>').replace(/<\/div>/gi,'').replace(/<\/p><p( style=["|'](.*)["|'])?>/gi,'<br>').replace(/<p( style=["|'](.*)["|'])?>/gi,'').replace(/<\/p>/gi,'').replace(/[\u200B]/g,'');},_removeEmptyLines:function(commentField){CommentsDecorator._removeEmptyLinesFromBegin($(commentField.contents().get()));CommentsDecorator._removeEmptyLinesFromBegin($(commentField.contents().get().reverse()));},_removeEmptyLinesFromBegin:function(htmlElements){var removeElement=true;htmlElements.each(function(){var elem=$(this);var text=elem.text().replace(/\s+/g,'');var emptyLine=(text==CommentsDecorator.ZERO_SEPARATOR_WIDTH_SPACE_ENCODED_CHAR)||(text=="");if(removeElement){if(elem.is('br')){elem.remove();}
else if(emptyLine){elem.remove();}
else{removeElement=false;}}});},});

var UiRouteParams=Base.extend({},{PREVIEW:'preview'});

var ViewContentLauncher=EventDispatcher.extend({_accountNavigationController:null,_viewContentHandler:null,constructor:function(){this._viewContentHandler=new ViewContentHandler('#viewContentAjaxUrl');this._viewContentHandler.addListener(ViewContentHandler.event.OVERLAY_HIDDEN,this,this._onViewContentOverlayHidden);this._viewContentHandler.addListener(ViewContentHandler.event.OVERLAY_CLOSED,this,this._onViewContentOverlayClosed);ContentStatistics.getInstance().addListener(ContentStatistics.event.CONTENT_VIEWED,this,this._dispatchContentViewed);this._accountNavigationController=AccountNavigationController.getInstance();this._accountNavigationController.addListener(AccountNavigationController.event.ACCOUNT_NAVIGATION,this,this._onAccountNavigation);},tryToViewContentFromMarkup:function(isPossibleToHideOverlay){var viewContentResponse=this._getViewContentResponseFromMarkup();if(!viewContentResponse){return;}
this._viewContentHandler.startViewWithGivenResponse(viewContentResponse,isPossibleToHideOverlay);},launchViewById:function(contentItemId){ContentItemInfoStorage.getPromiseById(contentItemId).then(this.launchViewByContentItemInfo.bind(this));},launchViewByIdFromLearningPath:function(contentItemId,learningPathId){ContentItemInfoStorage.getPromiseById(contentItemId,learningPathId).then(this.launchViewByContentItemInfo.bind(this));},launchViewByContentItemInfo:function(contentItemInfo){var inNewTab=ContentItemType.mustBeViewedInNewTab(contentItemInfo.getType());if(inNewTab){this._viewContentInNewTab(contentItemInfo);}
else if(this._viewContentHandler.isStartViewPossible(contentItemInfo)){this._accountNavigationController.navigateToUrl(this._prepareViewUrl(contentItemInfo));}
this.dispatchEvent(ViewContentLauncher.event.OPENED,inNewTab);},_prepareViewUrl:function(contentItemInfo){var currentRelativeUrl=(new Navigation()).getPathAndQueryAsRelativeUrl();var viewUrl=UrlUtils.replaceUrlParameter(currentRelativeUrl,ViewContentQueryParameter.CONTENT_ITEM_KEY,contentItemInfo.getKey());var learningPathId=contentItemInfo.getLearningPathId();if(learningPathId!==null){viewUrl=UrlUtils.replaceUrlParameter(viewUrl,ViewContentQueryParameter.LEARNING_PATH_ID,learningPathId);}
return viewUrl;},_prepareParentPageUrl:function(){var currentRelativeUrl=(new Navigation()).getPathAndQueryAsRelativeUrl();var parentPageUrl=UrlUtils.removeUrlParameter(currentRelativeUrl,ViewContentQueryParameter.CONTENT_ITEM_KEY);return UrlUtils.removeUrlParameter(parentPageUrl,ViewContentQueryParameter.LEARNING_PATH_ID);},_viewContentInNewTab:function(contentItemInfo){setTimeout(function(){this._dispatchContentViewed(contentItemInfo.getId());}.bind(this),ViewContentLauncher.IMMEDIATE_CONTENT_VIEWED_EVENT_TIMEOUT);var url=contentItemInfo.getViewContentUrl();var isPreview=UrlUtils.getUrlParameter(UrlUtils.getCurrentUrl(),UiRouteParams.PREVIEW);if(isPreview){var params={};params[UiRouteParams.PREVIEW]=1;url=UrlUtils.addParamsToUrl(url,params);}
UrlUtils.navigateToUrl(url,LinkTarget.BLANK);},_onViewContentOverlayHidden:function(){this._accountNavigationController.navigateToUrl(this._prepareParentPageUrl());},_onViewContentOverlayClosed:function(){this.dispatchEvent(ViewContentLauncher.event.CLOSED);},_onAccountNavigation:function(accountNavigationEvent){if(accountNavigationEvent.getNavigationType()===AccountNavigationType.VIEW_CONTENT_NAVIGATION){var eventParameters=accountNavigationEvent.getParameters();var contentItemKey=eventParameters['content_item_key'];ContentItemInfoStorage.getPromiseByContentItemKey(contentItemKey).then(function(contentItemInfo){this._viewContentHandler.requestView(contentItemInfo);}.bind(this));}
else{var needToDispatchOverlayHiddenEvent=false;this._viewContentHandler.tryToStopViewAndHideOverlay(needToDispatchOverlayHiddenEvent);}},_getViewContentResponseFromMarkup:function(){var viewContentResponse=null;var responseContainer=$('#viewContentResponse');if(responseContainer.length){var responseArray=$.parseJSON(responseContainer.text());viewContentResponse=new ViewContentResponse(responseArray);}
return viewContentResponse;},_dispatchContentViewed:function(contentItemId){this.dispatchEvent(ViewContentLauncher.event.CONTENT_VIEWED,contentItemId);}},{IMMEDIATE_CONTENT_VIEWED_EVENT_TIMEOUT:3000,event:{CONTENT_VIEWED:'content_viewed',CLOSED:'closed',OPENED:'opened'},_instance:null,getInstance:function(){if(ViewContentLauncher._instance===null){ViewContentLauncher._instance=new ViewContentLauncher();}
return ViewContentLauncher._instance;}});

var ContentStatisticsPartViewWorker=ContentStatisticsWorker.extend({sendPartViewStat:function(params,url,requestType)
{if(!this._validateParams(params))
{this._clearLastLocalStorageKey();return;}
this.addValidationKeyToData(params);ContentStatistics.getInstance().doSendPartViewStat(params,safeHandler(this,"_onSendSuccess"),safeHandler(this,"_onSendingComplete"),url,requestType);},handleSendSuccess:function(response,status,xhr)
{this._clearLastLocalStorageKey();},_validateParams:function(params)
{return parseInt(params.id_resource_view)!=0;}},{});

var ContentStatisticsISpringContentWorker=ContentStatisticsWorker.extend({sendISpringContentStats:function(url,data,requestMethod,requestType)
{if(!this._validateParams(data))
{this._clearLastLocalStorageKey();var getData={errorUrl:url};var postData={errorData:data};ContentStatisticsLogger.getInstance().sendStatisticsErrorInfo("not valid params in ispring stats",getData,postData);return;}
requestMethod=typeof(requestMethod)=='undefined'?RequestMethod.POST:requestMethod;data.url=undefined;this.addValidationKeyToData(data);ContentStatistics.getInstance().doSendISpringContentStats(url,data,safeHandler(this,"_onSendSuccess"),safeHandler(this,"_onSendingComplete"),requestMethod,requestType);},handleSendSuccess:function(response,status,xhr)
{this._clearLastLocalStorageKey();this._checkIsThisQuizRequest(response);},_validateParams:function(params)
{return parseInt(params.id_resource_view)!=0;},_checkIsThisQuizRequest:function(response)
{if(response.quiz!==undefined)
{ContentStatisticsLogger.getInstance().sendQuizViewId(StatUrl.AFTER_COMPLETE_QUIZ,StatNotifierConfig.getContentItemViewId());}}});

var BaseCommentForm=EventDispatcher.extend({_baseId:'',_buttons:null,_form:null,_attachmentsAreaBlock:null,_attachFileBlock:null,_attachmentsList:null,_defaultText:null,_prevText:null,_selectedText:null,_textRange:null,_commentForm:null,_commentField:null,_errorBehavior:null,_lineHeight:null,_animateCommentForm:null,_mouseClickedOnCommentField:null,_uploadAttachments:null,_state:null,constructor:function(form,baseId){this._form=form;this._attachmentsAreaBlock=this._form.find('.attachments_area');this._attachFileBlock=this._form.find('.add_file_button');if(baseId){this._baseId=baseId;}
var thisPtr=this;this.setCollapseCommentForm(true);$(document).ajaxError(function(event,jqXHR,ajaxSettings,thrownError){if(jqXHR&&jqXHR.status&&jqXHR.status==404){window.location=window.location;}});this._uploadAttachments=false;this._mouseClickedOnCommentField=false;this._initCommentForm();this._updateAnimationClass();$('div.body_container').mouseup(function(event){thisPtr._onMouseUpGlobal(event);});},setDefaultText:function(text){this._defaultText=text;this._trySetPlaceholder(this._commentField);},setCollapseCommentForm:function(collapse){this._animateCommentForm=collapse;this._updateAnimationClass();},_updateAnimationClass:function(){if(this._animateCommentForm){this._commentField&&this._commentField.addClass(BaseCommentForm.ANIMATED_CLASS);this._attachmentsAreaBlock&&this._attachmentsAreaBlock.addClass(BaseCommentForm.ANIMATED_CLASS);}
else{this._commentField&&this._commentField.removeClass(BaseCommentForm.ANIMATED_CLASS);this._attachmentsAreaBlock&&this._attachmentsAreaBlock.removeClass(BaseCommentForm.ANIMATED_CLASS);}},cancel:function(){this._commentField[0].innerHTML=this._prevText;if(!this._trySetPlaceholder(this._commentField)){this._commentField.removeClass('placeholder');}
this._attachmentsList.restoreState();if(this._animateCommentForm){this._collapseCommentForm(BaseCommentForm.ANIMATE_COMMENT_FORM_TIMEOUT);}},setMaxFileSize:function(maxFileSize){this._attachmentsList.setMaxFileSize(maxFileSize);},_setUserIsTyping:function(){this._state=FormField.state.USER_TYPING;},_setUserNotTyping:function(){this._state=FormField.state.USER_NOT_TYPING;},_initCommentFieldText:function(){var comment=this._form.parents(".comment");var text=comment.find(".comment_body").text();this._commentField[0].innerHTML=text;},_initCommentField:function(){this._commentField=this._form.find('.comment_field');this._commentField.on('mousedown',handler(this,'_onCommentFieldMouseDown'));this._commentField.on('keydown',handler(this,'_onCommentFieldKeyDown'));this._commentField.on('keyup',handler(this,'_onCommentFieldKeyUp'));this._commentField.on('focus',handler(this,'_onCommentFieldFocus'));this._commentField.on('blur',handler(this,'_onCommentFieldBlur'));this._commentField.on('input',handler(this,'_onNewInputStarted'));this._commentField.on('keypress',handler(this,'_onNewInputStarted'));this._commentField.on('change',handler(this,'_onNewInputStarted'));this._commentField.attr("designMode","on");this._lineHeight=this._commentField.css('line-height').replace('px','');this._initCommentFieldText();this._prevText=this._commentField.html();this._removeEmptyCharsFromCommentField();this._setUserNotTyping();this._initErrorBehavior();},_initErrorBehavior:function(){var formFieldErrorContainerId=this._commentField.attr(FormField.attr.FORM_FIELD_ERROR_CONTAINER_ID);this._errorBehavior=ErrorBehaviorFactory.create(ErrorBehaviorType.TEXT,{errorContainer:formFieldErrorContainerId});},_initAttachmentsList:function(){var browseButtonContainer=this._form.find('.add_file_button');var loadListUrl=decodeURI($('#'+this._getElementId('getAttachmentsListUrl')).val());var createAttachmentUrl=decodeURI($('#'+this._getElementId('createAttachmentUrl')).val());var attachmentsList=new AttachmentsList(this._form,browseButtonContainer,loadListUrl,createAttachmentUrl);attachmentsList.addListener(AttachmentsList.event.START_UPLOAD,this,this._onStartUploadAttachment);attachmentsList.addListener(AttachmentsList.event.FINISH_UPLOAD,this,this._onFinishUploadAttachment);this._attachmentsList=attachmentsList;},_initButtons:function(){var buttonsId=this._getButtonsId();this._buttons=SaveCancelButtons.createButtons(buttonsId);this._buttons.addListener('save',this,this._onSave);this._buttons.addListener('cancel',this,this._onCancel);this._buttons.enabled(true);},_initCommentForm:function(){this._form.on('mousedown',handler(this,'_onCommentFormClick'));this._initCommentField();this._initAttachmentsList();this._initButtons();},_removeEmptyCharsFromCommentField:function(html){html=this._commentField.html().replace(/^\s+/g,'').replace(/\s+$/,"");this._commentField[0].innerHTML=html;},_selectTextOnCommentField:function(){if(this._mouseClickedOnCommentField){this._getSelectionFromCommentField();this._mouseClickedOnCommentField=false;}},_getSelectionFromCommentField:function(){this._textRange=this._getTextRange();this._selectedText=this._getSelectedText();},_onCommentFieldMouseDown:function(event){this._mouseClickedOnCommentField=true;},_onCommentFieldKeyDown:function(event){if(event.keyCode==BaseCommentForm.KEY_ENTER){if(BrowserUtils.isIe()){this._addHtmlForIe(BaseCommentForm.LINE_SEPARATOR_HTML);}
else if(window.getSelection&&window.getSelection().getRangeAt){document.execCommand("insertHTML",false,BaseCommentForm.LINE_SEPARATOR_HTML);}
else if(document.selection&&document.selection.createRange){document.selection.createRange().pasteHTML(BaseCommentForm.LINE_SEPARATOR_HTML);}
this._removeAdditionalZeroSeparator();this._commentField.scrollTop(parseInt(this._commentField.scrollTop())+parseInt(this._lineHeight));return false;}
return true;},_onCommentFieldKeyUp:function(event){this._getSelectionFromCommentField();},_onNewInputStarted:function(){if(this._state==FormField.state.USER_NOT_TYPING){this._hideError();this._setUserIsTyping();}},_onStartUploadAttachment:function(){this._uploadAttachments=true;this._buttons.enabled(false);this._buttons.hideCancelSection();this._hideError();},_onFinishUploadAttachment:function(){this._uploadAttachments=false;this._buttons.enabled(true);this._buttons.showCancelSection();},_expandCommentField:function(){var minHeight=this._getExpandMinHeight();this._commentField.animate({'min-height':minHeight},BaseCommentForm.ANIMATE_COMMENT_FORM_TIMEOUT);},_collapseCommentField:function(){var minHeight=this._getCollapseMinHeight();this._commentField.animate({'min-height':minHeight},BaseCommentForm.ANIMATE_COMMENT_FORM_TIMEOUT);this._hideError();},_getCollapseMinHeight:function(){return BaseCommentForm.COLLAPSE_MIN_COMMENT_FIELD_HEIGHT_USER_CONTENT_INFO;},_getExpandMinHeight:function(){return BaseCommentForm.EXPAND_MIN_COMMENT_FIELD_HEIGHT_USER_CONTENT_INFO;},_expandCommentForm:function(timeout){this._showButtons(timeout);this._expandCommentField();},_collapseCommentForm:function(timeout){this._hideButtons(timeout);this._collapseCommentField();},_hideButtons:function(timeout){this._attachmentsAreaBlock.hide(timeout);},_showButtons:function(timeout){this._attachmentsAreaBlock.show(timeout);this._showAttachFileBlock(timeout);},_showAttachFileBlock:function(timeout){var numFiles=this._attachmentsList.getFiles().length;if(AttachmentsList.MAX_FILES_TO_ATTACH>numFiles){this._attachFileBlock.show(timeout);}},_removeAdditionalZeroSeparator:function(){var lastElement=this._commentField.contents().length;var deleteNextTextElement=false;var index=1;this._commentField.contents().each(function(){if(index<lastElement-1){var domElement=this;var elem=$(domElement);if(elem.is("br")){deleteNextTextElement=true;}
else if(deleteNextTextElement){var newText=elem.text().replace(CommentsDecorator.ZERO_SEPARATOR_WIDTH_SPACE_ENCODED_CHAR,'');domElement.data=newText;deleteNextTextElement=false;if(newText==''){elem.remove();}}}
index++;});},_removeLastAdditionalZeroSeparator:function(){var lastElement=this._commentField.contents().length;var index=1;this._commentField.contents().each(function(){var domElement=this;var elem=$(domElement);if((index==lastElement-1)&&(elem.text()==CommentsDecorator.ZERO_SEPARATOR_WIDTH_SPACE_ENCODED_CHAR)){elem.remove();}
index++;});},_addHtmlForIe:function(html){var range,node;range=this._getTextRange();if(BrowserUtils.isIeLt10()){range.pasteHTML(html);}
else{node=range.createContextualFragment(html);range.insertNode(node);}},_moveCursorToTheNode:function(node){if(node!=null){this._textRange=this._textRange.cloneRange();if((document.createRange)&&(!BrowserUtils.isIe())){this._textRange.setStartAfter(node);this._textRange.collapse(true);var selection=window.getSelection();selection.removeAllRanges();selection.addRange(this._textRange);}}},_getTextRange:function(){var textRange;if(document.selection!=undefined){textRange=document.selection.createRange();}
else if(window.getSelection()){var selection=window.getSelection();if(selection.rangeCount){textRange=selection.getRangeAt(0);}}
return textRange;},_getSelectedText:function(){if(document.selection!=undefined){return this._getSelectedTextFromIE();}
else if(window.getSelection()){return this._getSelectedTextFromNormalBrowser();}
return"";},_getSelectedTextFromNormalBrowser:function(){return window.getSelection().toString();},_getSelectedTextFromIE:function(){return this._textRange.text;},_processCommentField:function(){return CommentsDecorator.processCommentHtml(this._commentField);},_isCommentTextEmpty:function(){var text=this._commentField.text();return text==""||text==this._defaultText;},_isCommentDataEmpty:function(data){var isTextEmpty=(data.text==this._defaultText||data.text=='');var hasAttachments=data.attachments_ids!='';return isTextEmpty&&!hasAttachments;},_onCommentFieldFocus:function(event){var field=$(event.target);var fieldTextWithoutEllipsis=field.textellipsisoriginal().text();if(fieldTextWithoutEllipsis==this._defaultText){field.text('');field.removeClass('placeholder');}},_onCommentFormClick:function(event){if(this._animateCommentForm){this._expandCommentForm(BaseCommentForm.ANIMATE_COMMENT_FORM_TIMEOUT);}
return true;},_onMouseUpGlobal:function(event){var container=this._form;if(!container.is(event.target)&&(container.has(event.target).length===0)){var emptyAttachments=(!this._uploadAttachments)&&(this._attachmentsList._files.length==0);var emptyComment=emptyAttachments&&this._isCommentTextEmpty();if(this._animateCommentForm&&emptyComment){this._collapseCommentForm(BaseCommentForm.ANIMATE_COMMENT_FORM_TIMEOUT);}
this._selectedText=null;}
this._selectTextOnCommentField(event);},_onCommentFieldBlur:function(event){var field=$(event.target);this._trySetPlaceholder(field);},_onSave:function(button){var data=this._getPostData();if(this._validate(data)){$.ajax({type:'POST',url:this._getRequestUrl(),data:data,dataType:'json',success:handler(this,"_onSaveComplete"),error:handler(this,"_onSaveError")});button.loading(true);}
else{this._showError(this._getValidationError());}},_getValidationError:function(){return"";},_showError:function(errorMessage){if(this._errorBehavior){this._commentField.addClass(FormField.css.ERROR);this._errorBehavior.showError(errorMessage);}
this._setUserNotTyping();},_hideError:function(){if(this._errorBehavior){this._commentField.removeClass(FormField.css.ERROR);this._errorBehavior.hideError();}},_getRequestUrl:function(){return'';},_getPostData:function(){return{};},_validate:function(){return false;},_onCancel:function(button){this.cancel();},_onSaveComplete:function(response){if(response&&response.redirect_url){UrlUtils.redirectToUrl(response.redirect_url);return;}
if(this._isErrorResponse(response)){this._onSaveError(response);return;}
this._onSaveSuccess(response);},_onSaveSuccess:function(response){this._enableButtons();this._attachmentsList._showUploader();this._collapseCommentForm();this._resetAttachmentsContainer();this._commentField[0].innerHTML=this._defaultText;this._commentField.addClass('placeholder');},_onSaveError:function(response){this._enableButtons();this.dispatchEvent(BaseCommentForm.event.ERROR,this,response);},_enableButtons:function(){this._buttons.loading(false);this._buttons.enabled(true);},_getButtonsId:function(){return'';},_resetAttachmentsContainer:function(){this._attachmentsList._resetAttachmentListContainer();},_trySetPlaceholder:function(field){if(field.text()==''){field.text(this._defaultText);field.addClass('placeholder');return true;}
return false;},_getElementId:function(elementId){return this._baseId+elementId;},_isErrorResponse:function(response){return!response||Number(response.code)!=BaseCommentForm.SUCCESS_CODE;}},{KEY_ENTER:13,ANIMATE_COMMENT_FORM_TIMEOUT:500,COLLAPSE_MIN_COMMENT_FIELD_HEIGHT_USER_CONTENT_INFO:'44px',EXPAND_MIN_COMMENT_FIELD_HEIGHT_USER_CONTENT_INFO:'84px',LINE_SEPARATOR_HTML:"<br />\u200B",ANIMATED_CLASS:'animated',event:{ERROR:'error'},SUCCESS_CODE:0});

var EmptyPopup=Popup.extend({isContentInited:false,isAlwaysReload:false,isClearOnClose:true,loadContentUrl:'',loadContentParams:{},loadContentMethod:'GET',setIsAlwaysReload:function(isAlwaysReload){this.isAlwaysReload=isAlwaysReload;},setIsClearOnClose:function(isClearOnClose){this.isClearOnClose=isClearOnClose;},setLoadContentUrl:function(url){this.loadContentUrl=url;},setLoadContentParams:function(params){this.loadContentParams=params;},setLoadContentMethod:function(method){this.loadContentMethod=method;},open:function(){this.base();if(!this.isContentInited||this.isAlwaysReload){this.loadPopupContent();}},close:function(){this.base();if(this.isClearOnClose){this.setContent('');this.isContentInited=false;}},loadPopupContent:function(){if(!this.loadContentUrl){return;}
this.progressIcon.show();var options={url:this.loadContentUrl,data:this.loadContentParams,type:this.loadContentMethod,success:handler(this,'onCompleteLoading'),error:handler(this,'onErrorLoading')};$.ajax(options);},onCompleteLoading:function(response){this.contentContainer.hide();this.isContentInited=true;this.setContent(response);this.progressIcon.hide();this.contentContainer.show();this.dispatchEvent(EmptyPopup.event.LOADING_COMPLETE);},onErrorLoading:function(req){window.location='/';}},{event:{LOADING_COMPLETE:'complete_loading_content'}});

var CourseReviewsApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},getReviewsData:function(){return this.doGet(this._apiProps.getCourseReviewsUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},addReview:function(reviewData){return this.doPost(this._apiProps.addReviewUrl,reviewData).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},editReview:function(reviewData){var params={reviewId:reviewData.reviewId,rating:reviewData.data.rating,text:reviewData.data.text};return this.doPost(this._apiProps.editReviewUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},deleteReview:function(params){return this.doPost(this._apiProps.deleteReviewUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}});

jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+options.path:'';var domain=options.domain?'; domain='+options.domain:'';var secure=options.secure?'; secure':'';var samesite=options.samesite?'; samesite='+options.samesite:'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure,samesite].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};

var EditCommentForm=BaseCommentForm.extend({prepareForm:function()
{this._initCommentFieldText();},_initCommentForm:function()
{this.base();this._buttons.enabled(true);this._expandCommentForm();},_getRequestUrl:function()
{return this._form.find('.save_url').val();},_getPostData:function()
{var data=this.base();var commentId=this._form.find('.comment_id').val();var attachmentsIds=this._attachmentsList.getFiles();var text=this._processCommentField();data['text']=text!=this._defaultText?text:'';data['commentId']=commentId;data['attachments_ids']=attachmentsIds.join();return data;},_validate:function(data)
{return!this._isCommentDataEmpty(data);},_getValidationError:function()
{return Messages.BaseCommentForm.MSG_TEXT_OR_ATTACHMENT_REQUIRED;},_onCancel:function(button)
{this.base(button);this._form.hide();var comment=this._form.parent();comment.find('.comment_container').show();this.dispatchEvent(EditCommentForm.event.CANCEL,this._form);},_onSaveSuccess:function(response)
{this._commentField.data('initial-value',this._commentField.html());this.base(response);if(!response)
{return;}
this.dispatchEvent(EditCommentForm.event.COMMENT_SAVED,this._form,response);},_getButtonsId:function()
{var commentId=this._form.find('.comment_id').val();return this._getElementId('editComment'+commentId);},_initCommentFieldText:function()
{this._commentField[0].innerHTML=this._commentField.data('initial-value');}},{event:{COMMENT_SAVED:'comment_saved',CANCEL:'cancel'}});

var UiToast=Base.extend({},{showByMessageType:function(type,text){switch(type){case MessageType.ERROR:UiToast.showCritical(text);break;case MessageType.WARNING:UiToast.showWarning(text);break;case MessageType.SUCCESS:UiToast.showSuccess(text);break;default:UiToast.showBasic(text);}},showBasic:function(text){if(!window.UiLib){alert(text);return;}
UiLib.Toast.showBasicToast({text:text,important:false});},showWithLoad:function(text,operationCompletePromise){if(!window.UiLib){alert(text);return;}
UiLib.Toast.showToastWithLoad({text:text,operationCompletePromise:operationCompletePromise});},showWithLoadAndCancel:function(text,operationCompletePromise,onCancel){if(!window.UiLib){alert(text);return;}
UiLib.Toast.showToastWithLoadAndCancel({text:text,operationCompletePromise:operationCompletePromise,onCancel:onCancel});},showSuccess:function(text){if(!window.UiLib){alert(text);return;}
UiLib.Toast.showSuccessToast({text:text,important:false});},showWarning:function(text){if(!window.UiLib){alert(text);return;}
UiLib.Toast.showWarningToast({text:text,important:true});},showCritical:function(text){if(!window.UiLib){alert(text);return;}
UiLib.Toast.showCriticalToast({text:text,important:true});}});

var AddCommentForm=BaseCommentForm.extend({_constructor:function(form,baseId)
{baseId=baseId+'add';this.base(form,baseId);},_getRequestUrl:function()
{return $('#'+this._getElementId('addCommentUrl')).val();},_getPostData:function()
{var data=this.base();var attachmentsIds=this._attachmentsList.getFiles();var text=this._processCommentField();data['text']=text!=this._defaultText?text:'';data['parent_id']=this._form.find('.parent_id').val();data['attachments_ids']=attachmentsIds.join();return data;},_validate:function(data)
{return!this._isCommentDataEmpty(data);},_getValidationError:function()
{return Messages.BaseCommentForm.MSG_TEXT_OR_ATTACHMENT_REQUIRED;},_onCancel:function(button)
{this.base(button);$('.reply_form').hide();},_onSaveSuccess:function(response)
{this.base(response);if(!response)
{return;}
this.dispatchEvent(AddCommentForm.event.COMMENT_ADDED,this._form,response);},_getButtonsId:function()
{var commentId=this._form.find('.parent_id').val();return this._getElementId('postComment'+commentId);}},{event:{COMMENT_ADDED:'comment_added'}});

var CatalogEnrollmentResult=Base.extend({},{NON_CATALOG_CONTENT:'non_catalog_content',CATEGORY_INACTIVE:'category_inactive',ALREADY_ASSIGNED:'already_enrolled',ACCESS_REQUESTED:'access_requested',ACCESS_GRANTED:'access_granted'});

var QuestionsAnswersRouter=Base.extend({_routerProps:null,constructor:function(routerProps){this._routerProps=routerProps;},writeMessage:function(userId){MessagingCenter.getInstance().openMessagesPopup(userId);},});

var QuestionsAnswersApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},getCourses:function(){return this.doGet(this._apiProps.getCoursesUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getQuestions:function(courseId){var params={courseId:courseId};return this.doGet(this._apiProps.getQuestionsUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},addQuestion:function(questionData){var params={questionData:questionData};if(!questionData.targetId){delete params.questionData.targetId;}
if(!questionData.targetType){delete params.questionData.targetType;}
return this.doPost(this._apiProps.addQuestionUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},editQuestion:function(questionData){var params={questionData:questionData};return this.doPost(this._apiProps.editQuestionUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},deleteQuestion:function(questionId){var params={questionId:questionId};return this.doPost(this._apiProps.deleteQuestionUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},addAnswer:function(answerData){var params={questionId:answerData.questionId,answerData:answerData};return this.doPost(this._apiProps.addAnswerUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},editAnswer:function(answerData){var params={questionId:answerData.questionId,answerData:answerData};return this.doPost(this._apiProps.editAnswerUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},deleteAnswer:function(questionId,answerId){var params={questionId:questionId,answerId:answerId};return this.doPost(this._apiProps.deleteAnswerUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},addAttachment:function(fileName,fileSize,courseId){var params={name:fileName,size:fileSize,courseId:courseId};return this.doPost(this._apiProps.addAttachmentUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},deleteAttachment:function(attachmentId){var params={attachmentId:attachmentId};return this.doPost(this._apiProps.deleteAttachmentUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},markViewedQuestions:function(ids){var params={question_ids:ids};return this.doPost(this._apiProps.markViewedQuestionsUrl,params).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getCurrentUser:function(){return this.doGet(this._apiProps.getCurrentUserUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}});

var UserPortalCatalogCourseInfoPageApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},getContentInfo:function(){return this.doGet(this._apiProps.getCourseInfoUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},sendRequest:function(){return this.doGet(this._apiProps.sendAssignRequestUrl).then(function(response){var status=response?response.status:null;switch(status){case CatalogEnrollmentResult.NON_CATALOG_CONTENT:case CatalogEnrollmentResult.CATEGORY_INACTIVE:UiToast.showWarning(response.message);this._reload();break;case CatalogEnrollmentResult.ACCESS_GRANTED:UiToast.showSuccess(response.message);this._reload();break;case CatalogEnrollmentResult.ALREADY_ASSIGNED:UiToast.showBasic(response.message);this._reload();break;case CatalogEnrollmentResult.ACCESS_REQUESTED:break;default:throw new Error('invalid status '+status);}
return status}.bind(this)).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},cancelRequest:function(){return this.doGet(this._apiProps.cancelAssignRequestUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},_reload:function(){var reloadUrl=UrlUtils.removeUrlParameter(location.href,'use_referrer');UrlUtils.navigateWithTimeout(reloadUrl,UserPortalCatalogCourseInfoPageApi.RELOAD_DELAY);}},{RELOAD_DELAY:500});

var UserPortalCourseInfoPageApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},getContentInfo:function(){return this.doGet(this._apiProps.getCourseInfoUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}});

var UserPortalCourseContentPageApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},getContent:function(){return this.doGet(this._apiProps.contentListUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);},getCourseListData:function(){return this.doGet(this._apiProps.getCourseContentUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}});

var UiUserPortalCourseInfoPage=UiPage.extend({_options:null,_questionsApi:null,_reviewsApi:null,_attachmentController:null,_router:null,_conentProps:null,_contentListApi:null,_updateStatusSignal:null,constructor:function(element){this.base(element);this._clearTemporaryParams();this._contentProps=this.props.contentProps;this._attachmentController=new AttachmentsController();this._router=new QuestionsAnswersRouter(this._contentProps.router);this._reviewsApi=new CourseReviewsApi(this._contentProps.reviewsApi);this._questionsApi=new QuestionsAnswersApi(this._contentProps.questionsApi);this._contentListApi=new UserPortalCourseContentPageApi(this._contentProps.api);this._updateStatusSignal=this._createSignal();this._options=Object.assign({id:this.props.id,connector:this._createConnector(),headerImageUrl:this.props.headerImageUrl,questionsAnswersConnector:this._getQuestionsAnswersConnectorOptions(this._questionsApi,this._contentListApi),reviewsConnector:this._getReviewsConnectorOptions(this._reviewsApi),updateStatusSignal:this._updateStatusSignal,contentList:{isCourseReadOnly:this._contentProps.isReadOnly,isCourseExpired:this._contentProps.isExpired,userId:this._contentProps.userId,courseId:this._contentProps.lpContentItemId,connector:this._createContentListConnector(),},showAddReviewPopupOnConnect:this._contentProps.showAddReviewPopupOnConnect,tabs:this._contentProps.tabs,restrictions:{maxMessageLength:this._contentProps.restrictions.maxMessageLength,maxAttachmentsCount:this._contentProps.restrictions.maxAttachmentsCount}},this._createCommonPageOptions());this.connect();},redrawContent:function(){this._updateStatusSignal.dispatch();},_clearTemporaryParams:function(){var url=UrlUtils.removeUrlParameter(UrlUtils.getCurrentUrl(),UiUserPortalCourseInfoPage.urlParams.ADD_REVIEW);var state=window.history.state;window.history.replaceState(state,'',url);},_createContentListConnector:function(){return{getData:function(){return this._contentListApi.getContent().then(function(response){return response.sections;}.bind(this));}.bind(this)};},_createConnector:function(){var contentApi=new UserPortalCourseInfoPageApi(this.props.api);return{previewContent:this._onPreview.bind(this),getContentInfo:contentApi.getContentInfo.bind(contentApi),};},_getQuestionsAnswersConnectorOptions:function(api,contentListApi){return{getQuestions:api.getQuestions.bind(api),addQuestion:api.addQuestion.bind(api),editQuestion:api.editQuestion.bind(api),deleteQuestion:api.deleteQuestion.bind(api),addAnswer:api.addAnswer.bind(api),editAnswer:api.editAnswer.bind(api),deleteAnswer:api.deleteAnswer.bind(api),addAttachment:this._addAttachment.bind(this,api),deleteAttachment:api.deleteAttachment.bind(api),getCourseListData:contentListApi.getCourseListData.bind(contentListApi),markViewedQuestions:api.markViewedQuestions.bind(api),writeMessage:function(userId){this._router.writeMessage(userId);}.bind(this),getCurrentUser:api.getCurrentUser.bind(api)};},_getReviewsConnectorOptions:function(api){return{getReviewsData:api.getReviewsData.bind(api),addReview:api.addReview.bind(api),editReview:api.editReview.bind(api),deleteReview:api.deleteReview.bind(api)};},_addAttachment:function(api,file){if(!this._attachmentController.checkSize(file.size,file.name)){return Promise.reject();}
return api.addAttachment(file.name,file.size,this._contentProps.lpContentItemUId).then(function(responseData){return this._attachmentController.uploadAttachment(file,responseData.upload_url,responseData);}.bind(this));},_onPreview:function(contentItemId){this.dispatchEvent(UiUserPortalCourseInfoPage.events.VIEW,contentItemId);return Promise.resolve()},_draw:function(updateOptions){if(updateOptions){this._options=Object.assign({},this._options);}
return UiLib.CourseContentInfoPage(this._options);}},{events:{VIEW:'onView'},urlParams:{ADD_REVIEW:'add_review',TAB:'tab'}});

var UiHeader=UiComponent.extend({_options:null,constructor:function(element){this.base(element);this._options={logoUrl:this.props.logoUrl,userMenu:this.props.userMenu,buttons:{messages:TopPanelMessagesPropsBuilder.build(this.props.notifications.messages),notifications:TopPanelNotificationsPropsBuilder.build(this.props.notifications.notifications)},accountExternalLinks:this.props.accountExternalLinks};this.connect();},_draw:function(updateOptions){if(updateOptions){this._options=Object.assign({},this._options);}
return UiLib.Header(this._options);}},{_instance:null,initInstance:function(){if(UiHeader._instance){return;}
var propsEl=document.getElementById('layoutHeader');if(propsEl){UiHeader._instance=new UiHeader(propsEl);}},tryToUpdateLogo:function(logoUrl){if(!UiHeader._instance){return;}
UiHeader._instance._options.logoUrl=logoUrl;UiHeader._instance.redraw();}});$(function(){UiHeader.initInstance();});

var EventType=Base.extend({},{CLICK:'click'});

var UiUserPortalCatalogCourseInfoPage=UiUserPortalCourseInfoPage.extend({constructor:function(element){this.base(element);},_createConnector:function(){var contentApi=new UserPortalCatalogCourseInfoPageApi(this.props.api);return{getContentInfo:contentApi.getContentInfo.bind(contentApi),sendRequest:contentApi.sendRequest.bind(contentApi),cancelRequest:contentApi.cancelRequest.bind(contentApi),previewContent:this._onPreview.bind(this),};},_draw:function(updateOptions){if(updateOptions){this._options=Object.assign({},this._options);}
return UiLib.CatalogCourseContentInfoPage(this._options);}});

var UserPortalLearningTrackInfoPageApi=AjaxGateway.extend({_apiProps:null,constructor:function(apiProps){this._apiProps=apiProps;},getLearningTrackInfo:function(id){return this.doGet(this._apiProps.getLearningTrackInfoUrl).catch(PopupFlashBoxAjaxExceptionHandler.handleAndReject);}});

var UiUserPortalMaterialInfoPage=UiPage.extend({_options:null,constructor:function(element){this.base(element);this._updateStatusSignal=this._createSignal();var contentApi=new UserPortalCatalogCourseInfoPageApi(this.props.api);this._options=Object.assign({id:this.props.id,headerImageUrl:this.props.headerImageUrl,openedFromCatalog:this.props.openedFromCatalog,updateStatusSignal:this._updateStatusSignal,connector:{launchContent:this._onPreview.bind(this),sendRequest:contentApi.sendRequest.bind(contentApi),cancelRequest:contentApi.cancelRequest.bind(contentApi)}},this._createCommonPageOptions());this.connect();},redrawContent:function(){this._updateStatusSignal.dispatch();},_onPreview:function(contentItemId){this.dispatchEvent(UiUserPortalMaterialInfoPage.events.VIEW,contentItemId);return Promise.resolve();},_draw:function(updateOptions){if(updateOptions){this._options=Object.assign({},this._options);}
return UiLib.MaterialInfoPage(this._options);}},{events:{VIEW:'onView'},});

var UiUserPortalAssignmentInfoPage=UiPage.extend({_options:null,_updateStatusSignal:null,constructor:function(element){this.base(element);this._updateStatusSignal=this._createSignal();var contentApi=new UserPortalCatalogCourseInfoPageApi(this.props.api);var commonProps=this._createCommonPageOptions();this._options={headerImageUrl:this.props.headerImageUrl,openedFromCatalog:this.props.openedFromCatalog,openDialogSignal:commonProps.topPanel.buttons.messages?commonProps.topPanel.buttons.messages.popupSettings.openDialogSignal:undefined,connector:{sendRequest:contentApi.sendRequest.bind(contentApi),cancelRequest:contentApi.cancelRequest.bind(contentApi)},updateStatusSignal:this._updateStatusSignal,isAssignmentExpired:this.props.isAssignmentExpired,};this.connect();},updateStatus:function(){this._updateStatusSignal.dispatch();},redrawContent:function(){},_draw:function(updateOptions){if(updateOptions){this._options=Object.assign({},this._options);}
return UiLib.AssignmentContentInfoPage(this._options);}});

var GlobalNotificationCollection=EventDispatcher.extend({_container:null,_removeNotificationUrlPattern:'',constructor:function(){this._initTemplateObjects();this._initHandlers();},_initTemplateObjects:function(){this._container=$(GlobalNotificationCollection.selector.GLOBAL_NOTIFICATION_COLLECTION);this._removeNotificationUrlPattern=$(GlobalNotificationCollection.selector.REMOVE_NOTIFICATION_URL_PATTERN).val();this._removeNotificationUrlPattern=decodeURIComponent(this._removeNotificationUrlPattern);},_initHandlers:function(){var thisPtr=this;this._container.on(EventType.CLICK,GlobalNotificationCollection.selector.GLOBAL_NOTIFICATION_CLOSE_BUTTON,function(){thisPtr._removeNotification($(this).parents(GlobalNotificationCollection.selector.GLOBAL_NOTIFICATION));});},_getNotificationMessage:function(notification){return notification.find(GlobalNotificationCollection.selector.MESSAGE).html();},_getNotificationLevel:function(notification){return notification.data(GlobalNotificationCollection.data.GLOBAL_NOTIFICATION_LEVEL);},_getNotificationId:function(notification){return notification.data(GlobalNotificationCollection.data.GLOBAL_NOTIFICATION_ID);},_removeNotification:function(notification){this._saveNotificationRemoved(notification);this._removeDomObject(notification);},_saveNotificationRemoved:function(notification){var url=this._getRemoveNotificationUrl(notification);if(!url){return;}
$.get(url);},_getRemoveNotificationUrl:function(notification){if(!this._removeNotificationUrlPattern){return'';}
var notificationId=this._getNotificationId(notification);return UIStringUtils.getParametrizedString(this._removeNotificationUrlPattern,{NOTIFICATION_ID:notificationId});},_removeDomObject:function(notification){var thisPtr=this;var previousHeight=this._getHeight();notification.remove();var newHeight=this._getHeight();var heightDiff=newHeight-previousHeight;this._changeHeight($(GlobalNotificationCollection.selector.GLOBAL_NOTIFICATION_CONTENT_PADDING),heightDiff);$(GlobalNotificationCollection.selector.ELEMENTS_TO_EXPAND_ON_NOTIFICATION_CLOSE).each(function(){thisPtr._changeCalcHeight($(this),newHeight);});$(GlobalNotificationCollection.selector.ELEMENTS_TO_MOVE_ON_NOTIFICATION_CLOSE).each(function(){thisPtr._changeTop($(this),heightDiff);});this.dispatchEvent(GlobalNotificationCollection.event.HEIGHT_CHANGED,heightDiff);},_getHeight:function(){var height=0;$(GlobalNotificationCollection.selector.GLOBAL_NOTIFICATION).each(function(){var currentHeight=parseFloat($(this).css('height'));if(!isNaN(currentHeight)){height+=currentHeight;}});return height;},_changeHeight:function(jQueryEl,heightDiff){var currentHeight=parseInt(jQueryEl.css('height'),10)||0;var newHeight=Math.max(currentHeight+heightDiff,0);jQueryEl.css('height',newHeight+'px');},_changeCalcHeight:function(jQueryEl,newHeight){if(newHeight===0){jQueryEl.css('height','100%');}
else{jQueryEl.css('height','calc(100% - '+newHeight+'px)');}},_changeTop:function(jQueryEl,topDiff){var currentTop=parseInt(jQueryEl.css('top'),10)||0;var newTop=Math.max(currentTop+topDiff,0);jQueryEl.css('top',newTop+'px');}},{_instance:null,getInstance:function(){if(!this._instance){this._instance=new GlobalNotificationCollection();}
return this._instance;},event:{HEIGHT_CHANGED:'height_changed'},level:{NOTICE:'notice',INFO:'info',WARNING:'warning',NEW_FEATURE:'new_feature'},selector:{MESSAGE:'.message',GLOBAL_NOTIFICATION:'.global_notification',GLOBAL_NOTIFICATION_COLLECTION:'#globalNotificationCollection',GLOBAL_NOTIFICATION_CLOSE_BUTTON:'.global_notification .close_button',ELEMENTS_TO_MOVE_ON_NOTIFICATION_CLOSE:'[data-ui-role-moved-by-global-notifications]',ELEMENTS_TO_EXPAND_ON_NOTIFICATION_CLOSE:'[data-ui-role-shrunk-by-global-notifications]',GLOBAL_NOTIFICATION_CONTENT_PADDING:'#globalNotificationContentPadding',REMOVE_NOTIFICATION_URL_PATTERN:'#removeGlobalNotificationUrlPattern'},data:{GLOBAL_NOTIFICATION_ID:'notification-id',GLOBAL_NOTIFICATION_LEVEL:'notification-level'}});

var CookiePolicyNotificationController=EventDispatcher.extend({_container:null,constructor:function(){this._container=$('#cookiePolicyBlock');if(!this.isCookiePolicyNotificationEnabled()){return;}
var closeButton=this._container.find('.js_close_button');closeButton.on('click',this._handleCloseButtonClick.bind(this));if(!this.isCookiePolicyAccepted()){this._container.show();}},isCookiePolicyNotificationEnabled:function(){return this._container.length;},_handleCloseButtonClick:function(){this._container.hide();this._setCookiePolicyAccepted();},isCookiePolicyAccepted:function(){return $.cookie(CookiePolicyNotificationController.cookiePolicyAcceptedCookie.NAME)===CookiePolicyNotificationController.cookiePolicyAcceptedCookie.VALUE;},_setCookiePolicyAccepted:function(){var options={path:CookiePolicyNotificationController.cookiePolicyAcceptedCookie.PATH,expires:CookiePolicyNotificationController.cookiePolicyAcceptedCookie.TIME_TO_LIVE};$.cookie(CookiePolicyNotificationController.cookiePolicyAcceptedCookie.NAME,CookiePolicyNotificationController.cookiePolicyAcceptedCookie.VALUE,options);this.dispatchEvent(CookiePolicyNotificationController.event.ACCEPTED);}},{cookiePolicyAcceptedCookie:{NAME:'is_cookie_policy_accepted',VALUE:'accepted',PATH:'/',TIME_TO_LIVE:365},event:{ACCEPTED:'accepted',}});

var UserPortalCourseInfoPage=EventDispatcher.extend({_page:null,constructor:function(viewContentLauncher){viewContentLauncher.addListener(ViewContentLauncher.event.CONTENT_VIEWED,this,this._onContentItemViewed);var materialComponent=document.getElementById('materialInfoComponent');var pageComponent=document.getElementById('courseInfoComponent');var catalogPageComponent=document.getElementById('catalogCourseInfoComponent');var assignmentPageComponent=document.getElementById('assignmentPageComponent');if(materialComponent){this._page=new UiUserPortalMaterialInfoPage(materialComponent);this._page.addListener(UiUserPortalMaterialInfoPage.events.VIEW,this,this._onMaterialView);}
else if(pageComponent){this._page=new UiUserPortalCourseInfoPage(pageComponent);this._page.addListener(UiUserPortalCourseInfoPage.events.VIEW,this,this._onContentView);}
else if(catalogPageComponent){this._page=new UiUserPortalCatalogCourseInfoPage(catalogPageComponent);this._page.addListener(UiUserPortalCourseInfoPage.events.VIEW,this,this._onContentView);}
else if(assignmentPageComponent){this._page=new UiUserPortalAssignmentInfoPage(assignmentPageComponent);}},_onMaterialView:function(contentItemId){this.dispatchEvent(UserPortalCourseInfoPage.events.LAUNCH_VIEW_BY_ID,contentItemId);},_onContentView:function(contentItemId){var learningPathId=$('#learningPathContentItemId').val();ContentItemInfoStorage.getPromiseById(contentItemId,learningPathId).then(function(contentItemInfo){if(contentItemInfo.getType()===ContentItemType.HOMEWORK){UrlUtils.navigateToUrl(contentItemInfo.getViewContentUrl());}
else if(contentItemInfo.getType()===ViewContentItemType.TRAINING){UrlUtils.navigateToUrl(contentItemInfo.getViewContentUrl());}
else{this.dispatchEvent(UserPortalCourseInfoPage.events.LAUNCH_VIEW_BY_CONTENT_ITEM_INFO,contentItemInfo);}}.bind(this));},_onContentItemViewed:function(){if(this._page){this._page.redrawContent();}},onHomeworkAttemptAdded:function(){if(this._page&&this._page instanceof UiUserPortalAssignmentInfoPage){this._page.updateStatus();}}},{events:{LAUNCH_VIEW_BY_ID:'launchViewById',LAUNCH_VIEW_BY_CONTENT_ITEM_INFO:'launchViewByContentItemInfo'}});

var FeedbackController=EventDispatcher.extend({_feedbackForm:null,_saveCancelButtons:null,initialize:function(){SaveCancelButtons.initButtons(FeedbackController.selector.BUTTONS);this._saveCancelButtons=SaveCancelButtons.getButtons(FeedbackController.selector.BUTTONS);this._saveCancelButtons.addListener(SaveCancelButtons.event.SAVE,this,this._onSubmitButtonClicked);this._saveCancelButtons.addListener(SaveCancelButtons.event.CANCEL,this,this._onCancelButtonClicked);this._feedbackForm=new Form(this._getFormFieldIds(),FeedbackController.validatorId,this._getSubmitUrl(),true);var loginField=this._feedbackForm.getFieldById(FeedbackController.formField.LOGIN_FORM_ID)
loginField.setValue(this._getUserLogin())},_getSubmitUrl:function(){return $(FeedbackController.selector.SUBMIT_URL).val();},submit:function(){var data=this._getFieldSettings();data['from']=this._getUserLogin();Requester.makeRequest(this._getSubmitUrl(),data,Requester.REQUEST_METHOD.POST,Requester.REQUEST_DATA_TYPE.JSON).then(function(response){this._saveCancelButtons.hideLoading();if(response.success){this.dispatchEvent(FeedbackController.event.SAVE);}
else if(response.errors){this._saveCancelButtons.hideLoading();this._feedbackForm.renderErrors(response.errors);}}.bind(this),function(){this._saveCancelButtons.hideLoading();}.bind(this));},_getFieldSettings:function(){var settings={};$.extend(settings,this._feedbackForm.getFieldsData());return settings;},_onSubmitButtonClicked:function(){this._saveCancelButtons.showLoading();this.submit();},_onCancelButtonClicked:function(){this.dispatchEvent(FeedbackController.event.CANCEL);},_getUserLogin:function(){var loggedUser=$(FeedbackController.selector.LOGGED_USER_LOGIN).val()||'';if(!loggedUser)
{loggedUser=$(FeedbackController.selector.LOGGING_USER_LOGIN).val()||'';}
if(!loggedUser)
{loggedUser=$(FeedbackController.selector.FORGOT_PASSWORD_USER_EMAIL).val()||'';}
if(!loggedUser)
{loggedUser=$(FeedbackController.selector.LOGIN_FORM_FIELD).val()||'';}
return loggedUser;},_getFormFieldIds:function(){return['messageFeedbackField','nameFeedbackField','emailFeedbackField','loginFeedbackField'];}},{validatorId:'feedbackFormValidator',formField:{LOGIN_FORM_ID:'loginFeedbackField'},selector:{BUTTONS:'feedback',SUBMIT_URL:'#feedbackSendUrl',LOGGED_USER_LOGIN:'#loggedUserLogin',LOGGING_USER_LOGIN:'#loggingUserLogin',FORGOT_PASSWORD_USER_EMAIL:'#emailForgotPasswordField',LOGIN_FORM_FIELD:'#loginFeedbackField'},event:{SAVE:'save',CANCEL:'cancel'}});

var HomeworkAttemptsList=EventDispatcher.extend({_container:null,_forms:[],_defaultText:'',constructor:function(container)
{this.base();this._container=container;this._initCommentMenus();this._initAddAttemptForm();CommentsDecorator.setTimeago(container);CommentsDecorator.initEllipsis(container);},_initCommentMenus:function()
{var that=this;this._container.find(HomeworkAttemptsList.selectors.COMMENT_MENU).each(function(){that._initCommentMenu(this.id);});},_initCommentMenu:function(menuContainerId)
{var menuId=String(menuContainerId).replace('Container','');var menuDropdown=new ButtonWithDropdown(menuId);menuDropdown.addListener(ButtonWithDropdown.event.DROPDOWN_ITEM_CLICKED,this,this._onMenuItemClicked);},_onMenuItemClicked:function(choice,event)
{if(choice==HomeworkAttemptsList.EDIT_COMMAND)
{this._onEdit(event);}},_onEdit:function(event)
{var button=$(event.target);var comment=button.parents(HomeworkAttemptsList.selectors.COMMENT);var form=comment.find(HomeworkAttemptsList.selectors.EDIT_FORM);form.show();comment.find(HomeworkAttemptsList.selectors.COMMENT_CONTAINER).hide();this._initEditAttemptForm(form);},_initEditAttemptForm:function(formElem)
{var form;if(!formElem.data('init'))
{form=new EditCommentForm(formElem,'homeworkAttempt');form.setDefaultText(this._defaultText);form.setCollapseCommentForm(false);form.addListener(EditCommentForm.event.COMMENT_SAVED,this,this._onAttemptSaved);form.addListener(BaseCommentForm.event.ERROR,this,this._onSaveError);this._forms.push(form);formElem.data('init',this._forms.length);}
else
{form=this._forms[formElem.data('init')-1];form._expandCommentForm();form.prepareForm();CommentsDecorator.initEllipsis(this._container);}},_initAddAttemptForm:function()
{var formElement=$(HomeworkAttemptsList.selectors.ADD_ATTEMPT_FORM);if(!formElement.length)
{return;}
this._defaultText=formElement.find('.comment_field').text().replace(/^\s+/g,'').replace(/\s+$/,"");var form=new AddCommentForm(formElement,HomeworkAttemptsList.BASE_ID);form.setDefaultText(this._defaultText);form.setCollapseCommentForm(false);form.addListener(AddCommentForm.event.COMMENT_ADDED,this,this._onAttemptSaved);form.addListener(BaseCommentForm.event.ERROR,this,this._onSaveError);},_onAttemptSaved:function(form,response)
{this._updateAttemptContent(form,response);this.dispatchEvent(HomeworkAttemptsList.event.ATTEMPT_ADDED,response);},_onSaveError:function(form,response)
{var code=response.code;var errorMsg=(HomeworkAttemptsList.error.hasOwnProperty(code))?HomeworkAttemptsList.error[code]:Messages.HomeworkAttemptList.MSG_SAVING_ERROR;UiToast.showCritical(errorMsg);},_updateAttemptContent:function(form,response)
{if(response.hasOwnProperty('content'))
{var content=$.parseHTML(response.content);if(content.length>0)
{var replacedContentClassName=content[0].className;form.parents('.'+replacedContentClassName).replaceWith(content);var newElement=$(content);CommentsDecorator.setTimeago(newElement);CommentsDecorator.initEllipsis(newElement);var menuContainer=newElement.find(HomeworkAttemptsList.selectors.COMMENT_MENU);this._initCommentMenu(menuContainer.attr('id'));}}}},{BASE_ID:'homeworkAttempt',selectors:{ADD_ATTEMPT_FORM:'#homeworkAttemptaddCommentForm',CONTENT_STATUS_CONTAINER:'#contentStatusContainer',HOMEWORK_ATTEMPT:'.homework_attempt',EDIT_COMMENT_LINK:'.edit_comment',EDIT_FORM:'.edit_form',COMMENT:'.comment:first',COMMENT_MENU:'.comment_menu',COMMENT_CONTAINER:'.comment_container'},EDIT_COMMAND:'edit',SUCCESS_CODE:0,SERVER_ERROR:1,LIMITS_EXCEEDED:2,VIEW_TIME_RESTRICTED:8,error:{2:Messages.HomeworkAttemptList.MSG_LIMIT_EXCEEDED,3:Messages.HomeworkAttemptList.MSG_ATTEMPT_ALREADY_ADDED,4:Messages.HomeworkAttemptList.MSG_ATTEMPT_ALREADY_RATED,5:Messages.HomeworkAttemptList.MSG_HOMEWORK_ALREADY_ACCEPTED,8:Messages.HomeworkAttemptList.MSG_VIEW_TIME_RESTRICTED},event:{ATTEMPT_ADDED:'homework_attempt_added'}});

var UiUserPortalLearningTrackInfoPage=UiPage.extend({_options:null,constructor:function(element){this.base(element);var contentApi=new UserPortalLearningTrackInfoPageApi(this.props.api);this._options=Object.assign({connector:{getLearningTrackInfo:contentApi.getLearningTrackInfo.bind(contentApi),},headerImageUrl:this.props.headerImageUrl,id:this.props.id,},this._createCommonPageOptions());this.connect();},_draw:function(updateOptions){if(updateOptions){this._options=Object.assign({},this._options);}
return UiLib.LTContentInfoPage(this._options);}});

var UiUserPortalTopPanel=UiComponent.extend({_options:null,constructor:function(element){this.base(element);this._options={topPanel:UserPortalTopPanelPropsBuilder.build(this.props),needShowMobileStub:(document.getElementById('mobileStub'))?Number(document.getElementById('mobileStub').value):false,};this.connect();},_draw:function(updateOptions){if(updateOptions){this._options=Object.assign({},this._options);}
return UiLib.LearnContentPage(this._options);}});

var UiSideMenu=UiComponent.extend({_options:null,constructor:function(element){this.base(element);this._options={mainMenu:this.props.mainMenu,accounts:this.props.accounts,billingUrl:this.props.billingUrl};this.connect();},_draw:function(updateOptions){if(updateOptions){this._options=Object.assign({},this._options);}
return UiLib.SideMenu(this._options);},});$(function(){var propsEl=document.getElementById('layoutSidemenu');if(propsEl){new UiSideMenu(propsEl);}});

var UiShowTimeZoneWarningMessage=Base.extend({},{SHOW_DELAY:50,showTimeZoneWarningMessage:function(){UiLib.showTimeZoneWarningMessage();},});$(function(){var element=document.getElementById('showTimeZoneWarningMessage');if(element){setTimeout(function(){UiShowTimeZoneWarningMessage.showTimeZoneWarningMessage();},UiShowTimeZoneWarningMessage.SHOW_DELAY);}});

(function($)
{$.cssStates=function(selector)
{var body=$('body');body.on('mouseover',selector,function()
{$(this).addClass('over');});body.on('mouseout',selector,function()
{$(this).removeClass('down');$(this).removeClass('over');});body.on('mousedown',selector,function()
{$(this).addClass('down');});body.on('mouseup',selector,function()
{$(this).removeClass('down');});}})(jQuery);

var UserActionsContextMenu=Base.extend({_menuPopup:null,constructor:function()
{var menuContainer=$('#userDropDownMenuContainer');if(menuContainer.length)
{this._menuPopup=new ButtonPopup({popup_trigger:$('#userDropDownMenu'),popup_container:menuContainer,calculate_position:handler(this,'_calculatePopupPosition')});var menuItems=menuContainer.find(".action");menuItems.bind('click',handler(this,'_onMenuItemClick'));}},_onMenuItemClick:function()
{this._menuPopup.hide();},_calculatePopupPosition:function(popupTrigger,popupContainer)
{var triggerOffset=popupTrigger.offset();var triggerRight=triggerOffset.left+popupTrigger.outerWidth();return{left:triggerRight-popupContainer.outerWidth()+UserActionsContextMenu.OFFSET.left,top:triggerOffset.top+popupTrigger.outerHeight()+UserActionsContextMenu.OFFSET.top};}},{OFFSET:{left:-20,top:-2}});$(function(){var userMenu=new UserActionsContextMenu();});

if(!Array.indexOf)
{Array.constructor.prototype.indexOf=function(ar,el,from)
{from=(!from)?0:Math.max(parseInt(from),0);for(var i=from;i<ar.length;i++)
{if(ar[i]==el)
{return i;}}
return-1;};}

$(function(){if(UIBrowserUtils.isIeLt9()){return;}
$('.ripple').on('click',function(event){var ripple=$('<div/>');ripple.addClass('ripple_effect');var currentElement=$(this);var buttonOffset=currentElement.offset();var xPos=event.pageX-buttonOffset.left;var yPos=event.pageY-buttonOffset.top;var height=currentElement.height();ripple.css({height:height,width:height,top:yPos-(height/2),left:xPos-(height/2),background:currentElement.data("ripple-color")}).appendTo(currentElement);var hideRippleDelay=750;window.setTimeout(function(){ripple.remove();},hideRippleDelay);});});

$(function(){var theWindow=$(window);var fixedElements=$("[data-ui-role-template-fixed-element]");function scrollFixedElements()
{var windowWidth=theWindow.outerWidth();var menuWidth=fixedElements.outerWidth();if(menuWidth>windowWidth)
{var scrollLeft=theWindow.scrollLeft();var left=-Math.min(scrollLeft,menuWidth-windowWidth);fixedElements.css("left",left);}
else
{fixedElements.css("left",0);}}
$(window).scroll(scrollFixedElements);});

var TabMenu=UlList.extend({selectedTab:null,allowSelection:true,constructor:function(id)
{this.base(id);this.initTabs();},initTabs:function()
{var thisPtr=this;var menu=$("#"+this.id);menu.find("li").each(function(){thisPtr.initTab(this);});},prepareTabId:function(tabId)
{return tabId.substr(this.id.length);},initTab:function(tab)
{var tabId=this.prepareTabId(tab.id);tab=new TabMenuTab(tabId,tab);tab.addListener('click',this,this.onClickTab);tab.addListener('hide',this,this.onHideTab);this.lis[tabId]=tab;if(tab.isSelected())
{this.selectedTab=tab;}},onClickTab:function(tab)
{if(this.allowSelection)
{this.selectTab(tab.id);}},onHideTab:function(tab)
{this.dispatchEvent(TabMenu.event.TAB_HIDDEN,tab);},setTabContent:function(tabId,contentId)
{this.lis[tabId].setContentId(contentId);},getSelectedTab:function()
{return this.selectedTab.id;},getTabMenuTab:function(tabId)
{return this.lis[tabId];},selectTab:function(tabId)
{var tab=this.lis[tabId];if(!tab)
{return;}
if(this.selectedTab==tab)
{this.dispatchEvent(TabMenu.event.CURRENT_TAB_SELECTED);return;}
if(this.selectedTab)
{this.selectedTab.setSelected(false);}
this.selectedTab=tab;tab.setSelected(true);this.dispatchEvent(TabMenu.event.TAB_SELECTED,this);},enableSelection:function(allow)
{if(allow!=undefined)
{this.allowSelection=allow;}
return this.allowSelection;}},{tabMenus:{},event:{TAB_SELECTED:'tabSelected',CURRENT_TAB_SELECTED:'currentTabSelected',TAB_HIDDEN:'tabHidden'},initMenu:function(id)
{this.tabMenus[id]=new this(id);return this.tabMenus[id];},getMenu:function(id)
{return this.tabMenus[id];},prepareTabMenuByContext:function(id)
{var isEnableSelection=$("#"+id+"EnableSelection").val();if(isEnableSelection!='')
{TabMenu.initMenu(id).enableSelection(isEnableSelection);}
else
{TabMenu.initMenu(id);}}});var TabMenuTab=UlListLi.extend({contentId:null,_titleContainer:null,constructor:function(id,li)
{this.base();this.id=id;this.li=$(li);this._titleContainer=this.li.find(".title");this.initHandlers();},isSelected:function()
{return this.li.hasClass('selected');},setSelected:function(selected)
{if(selected==this.isSelected())
{return;}
if(selected)
{this.li.addClass('selected');}
else
{this.li.removeClass('selected');}
this.updateContent();},setContentId:function(contentId)
{this.contentId=contentId;this.updateContent();},updateContent:function()
{if(this.contentId)
{var container=$("#"+this.contentId);if(this.isSelected())
{container.show();}
else if(container.is(":visible"))
{container.hide();this.dispatchEvent("hide",this);}}},onMouseClick:function()
{this.base();var e=window.event;if(e&&(e.which==2))
{return;}
if(!this.li.hasClass(TabMenuTab.css.HAS_SUB_MENU))
{this.li.find("a").each(function(){if($(this).attr('target')!='_blank')
{UIUrlUtils.navigateToUrl(this.href);}});}
else
{this.li.toggleClass(TabMenuTab.css.SUB_MENU_OPEN);$('#'+this.li.attr('id')+'SubMenu').toggleClass(TabMenuTab.css.SUB_MENU_OPEN)}},getTitleContainer:function()
{return this._titleContainer;},getTitle:function()
{return this._titleContainer.text();},setTitle:function(value)
{this._titleContainer.text(value);this._titleContainer.attr('title',value);}},{css:{HAS_SUB_MENU:'has_sub_menu',SUB_MENU_OPEN:'open'}});

var GlobalNotificationCollectionInitializer=Base.extend({_notificationCollection:null,constructor:function(){this._notificationCollection=GlobalNotificationCollection.getInstance();}});$(function(){new GlobalNotificationCollectionInitializer();});

var Constants={MAX_UPLOAD_FILE_SIZE:2147483648,MAX_UPLOAD_IMAGE_SIZE:26214400,MAX_UPLOAD_AVATAR_SIZE:26214400,MAX_UPLOAD_LOGO_SIZE:1048576};

var ResponseChecker=Base.extend({},{doUserSessionExpiredActions:function()
{window.location.href=window.location.href;}});$(document).ready(function(){$.ajaxSetup({error:function(x,e){try
{if(x.status==401)
{ResponseChecker.doUserSessionExpiredActions();}
else if(x.status==0&&$.browser.opera)
{ResponseChecker.doUserSessionExpiredActions();}}
catch(e)
{}}});});

var BannersController=Base.extend({_cookiePolicyController:null,constructor:function(){this._cookiePolicyController=new CookiePolicyNotificationController();this._cookiePolicyController.addListener(CookiePolicyNotificationController.event.ACCEPTED,this,this._onCookiePolicyAccepted.bind(this));},_onCookiePolicyAccepted:function(){}});$(function(){new BannersController();});

var UserContentInfoPage=Base.extend({_viewContentLauncher:null,_homeworkAttemptsList:null,_homeworkAttemptsContainer:null,_showHomeworkAttemptsTab:false,_page:null,constructor:function(){this._viewContentLauncher=ViewContentLauncher.getInstance();this._viewContentLauncher.addListener(ViewContentLauncher.event.CONTENT_VIEWED,this,this._onContentItemViewed);this._viewContentLauncher.tryToViewContentFromMarkup(true);this._page=new UserPortalCourseInfoPage(this._viewContentLauncher);this._page.addListener(UserPortalCourseInfoPage.events.LAUNCH_VIEW_BY_ID,this,function(contentItemId){this._viewContentLauncher.launchViewById(contentItemId);}.bind(this));this._page.addListener(UserPortalCourseInfoPage.events.LAUNCH_VIEW_BY_CONTENT_ITEM_INFO,this,function(contentItemInfo){this._viewContentLauncher.launchViewByContentItemInfo(contentItemInfo);}.bind(this));this._initHomeworkAttemptsContainer();this._showHomeworkAttemptsTab=this._homeworkAttemptsContainer.length>0;this._loadHomeworkAttempts();},_initHomeworkAttemptsContainer:function(){this._homeworkAttemptsContainer=$(UserContentInfoPage.selector.HOMEWORK_ATTEMPTS);},_onContentItemViewed:function(){},_loadHomeworkAttempts:function(){if(!this._showHomeworkAttemptsTab){return;}
$.ajax({type:'POST',dataType:'json',url:$("#homeworkAttemptsUrl").val(),success:handler(this,'_onHomeworkAttemptsLoadedSuccess'),error:handler(this,'_onHomeworkAttemptsLoadedError')});},_onHomeworkAttemptsLoadedSuccess:function(response){if(!response){return;}
if(response.redirect_url){UrlUtils.redirectToUrl(response.redirect_url);return;}
this._homeworkAttemptsContainer[0].innerHTML=response.content;this._homeworkAttemptsList=new HomeworkAttemptsList(this._homeworkAttemptsContainer);this._homeworkAttemptsList.addListener(HomeworkAttemptsList.event.ATTEMPT_ADDED,this,this._onHomeworkAttemptAdded);},_onHomeworkAttemptsLoadedError:function(){this._homeworkAttemptsContainer.html("");},_onHomeworkAttemptAdded:function(){this._page.onHomeworkAttemptAdded();}},{selector:{HOMEWORK_ATTEMPTS:'#homeworkAttempts'}});$(function(){new UserContentInfoPage();});

$(function(){var pageComponent=document.getElementById('learningTrackInfoComponent');if(pageComponent){this._page=new UiUserPortalLearningTrackInfoPage(pageComponent);}});

var FeedbackPopup=EmptyPopup.extend({_controller:null,_isRestoreAccountMsg:null,setIsRestoreAccountMsg:function(isRestoreAccountMsg){this._isRestoreAccountMsg=isRestoreAccountMsg;},onCompleteLoading:function(response){this.base(response);this._initController();},_initController:function(){this._controller=new FeedbackController();this._controller.initialize();this._controller.addListener(FeedbackController.event.CANCEL,this,this._onFeedbackCancel);this._controller.addListener(FeedbackController.event.SAVE,this,this._onFeedbackSended);},_onFeedbackCancel:function(){this.close();},_onFeedbackSended:function(){var message=(this._isRestoreAccountMsg)?Messages.FeedbackPopupMessages.MSG_REQUEST_SENDED:Messages.FeedbackPopupMessages.MSG_FEEDBACK_SENDED;UiToast.showSuccess(message);this.close();}});$(function(){var popup=Popup.getPopup('feedbackPopup');if(!popup){return;}
popup.setLoadContentUrl($("#feedbackContentUrl").val());$("#feedback").live('click',function(evt){evt.preventDefault();popup.setIsRestoreAccountMsg($(this).hasClass('is_restore_account_msg'));popup.open();});if(parseInt($("#autoOpenFeedbackPopup").val())){popup.open();}});

$(function(){var options={path:"/",secure:true,samesite:'Lax'};$.cookie('browser_has_html5_support',BrowserUtils.hasHtml5Support(),options);$.cookie('browser_has_local_storage_support',BrowserUtils.hasLocalStorageSupport(),options);});

$(function(){$('[data-role-autofill-preventer]').remove();});

$(function(){var csrfTokenElement=document.querySelector('meta[name="csrf-token"]');if(csrfTokenElement){var token=csrfTokenElement.content;if(token){Requester.initCSRFToken(token);$.ajaxSetup({beforeSend:function(xhr){xhr.setRequestHeader('X-CSRF-Token',token);}});}}});

var Layout=Base.extend({constructor:function(){var element=document.getElementById(Layout.panelId.USER_PORTAL_TOP_PANEL);if(element){new UiUserPortalTopPanel(element);}
this._processUrlParameters();},_processUrlParameters:function(){var currentUrl=UrlUtils.getCurrentUrl();var write=UrlUtils.getUrlParameter(currentUrl,Layout.urlParams.WRITE_MESSAGE);if(write)
{var userId=UrlUtils.getUrlParameter(currentUrl,Layout.urlParams.USER);setTimeout(function(){MessagingCenter.getInstance().openMessagesPopup(userId);},0);}
var url=UrlUtils.removeUrlParameter(currentUrl,Layout.urlParams.WRITE_MESSAGE);url=UrlUtils.removeUrlParameter(url,Layout.urlParams.USER);var state=window.history.state;window.history.replaceState(state,'',url);}},{panelId:{USER_PORTAL_TOP_PANEL:'userPortalTopPanel',MESSAGES_COUNTER:'uiMessagesCounterButton',NOTIFICATIONS_COUNTER:'uiNotificationsCounterButton'},urlParams:{WRITE_MESSAGE:'writeMessage',USER:'participantId',}});$(function(){new Layout();});

var UiPostNavigationMessage=Base.extend({},{SHOW_DELAY:50,popPostNavigationMessage:function(){UiLib.popPostNavigationMessage();},});$(function(){setTimeout(function(){UiPostNavigationMessage.popPostNavigationMessage();},UiPostNavigationMessage.SHOW_DELAY);});
